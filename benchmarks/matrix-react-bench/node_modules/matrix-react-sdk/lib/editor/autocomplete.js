"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

/*
Copyright 2019 New Vector Ltd
Copyright 2019 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class AutocompleteWrapperModel {
  constructor(updateCallback, getAutocompleterComponent, updateQuery, partCreator) {
    this.updateCallback = updateCallback;
    this.getAutocompleterComponent = getAutocompleterComponent;
    this.updateQuery = updateQuery;
    this.partCreator = partCreator;
    (0, _defineProperty2.default)(this, "partIndex", void 0);
  }

  onEscape(e) {
    this.getAutocompleterComponent().onEscape(e);
  }

  close() {
    this.updateCallback({
      close: true
    });
  }

  hasSelection() {
    return this.getAutocompleterComponent().hasSelection();
  }

  hasCompletions() {
    const ac = this.getAutocompleterComponent();
    return ac && ac.countCompletions() > 0;
  }

  async confirmCompletion() {
    await this.getAutocompleterComponent().onConfirmCompletion();
    this.updateCallback({
      close: true
    });
  }
  /**
   * If there is no current autocompletion, start one and move to the first selection.
   */


  async startSelection() {
    const acComponent = this.getAutocompleterComponent();

    if (acComponent.countCompletions() === 0) {
      // Force completions to show for the text currently entered
      await acComponent.forceComplete();
    }
  }

  selectPreviousSelection() {
    this.getAutocompleterComponent().moveSelection(-1);
  }

  selectNextSelection() {
    this.getAutocompleterComponent().moveSelection(+1);
  }

  onPartUpdate(part, pos) {
    this.partIndex = pos.index;
    return this.updateQuery(part.text);
  }

  onComponentConfirm(completion) {
    this.updateCallback({
      replaceParts: this.partForCompletion(completion),
      close: true
    });
  }

  partForCompletion(completion) {
    const {
      completionId
    } = completion;
    const text = completion.completion;

    switch (completion.type) {
      case "room":
        return [this.partCreator.roomPill(text, completionId), this.partCreator.plain(completion.suffix)];

      case "at-room":
        return [this.partCreator.atRoomPill(completionId), this.partCreator.plain(completion.suffix)];

      case "user":
        // Insert suffix only if the pill is the part with index 0 - we are at the start of the composer
        return this.partCreator.createMentionParts(this.partIndex === 0, text, completionId);

      case "command":
        // command needs special handling for auto complete, but also renders as plain texts
        return [this.partCreator.command(text)];

      default:
        // used for emoji and other plain text completion replacement
        return [this.partCreator.plain(text)];
    }
  }

}

exports.default = AutocompleteWrapperModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lZGl0b3IvYXV0b2NvbXBsZXRlLnRzIl0sIm5hbWVzIjpbIkF1dG9jb21wbGV0ZVdyYXBwZXJNb2RlbCIsImNvbnN0cnVjdG9yIiwidXBkYXRlQ2FsbGJhY2siLCJnZXRBdXRvY29tcGxldGVyQ29tcG9uZW50IiwidXBkYXRlUXVlcnkiLCJwYXJ0Q3JlYXRvciIsIm9uRXNjYXBlIiwiZSIsImNsb3NlIiwiaGFzU2VsZWN0aW9uIiwiaGFzQ29tcGxldGlvbnMiLCJhYyIsImNvdW50Q29tcGxldGlvbnMiLCJjb25maXJtQ29tcGxldGlvbiIsIm9uQ29uZmlybUNvbXBsZXRpb24iLCJzdGFydFNlbGVjdGlvbiIsImFjQ29tcG9uZW50IiwiZm9yY2VDb21wbGV0ZSIsInNlbGVjdFByZXZpb3VzU2VsZWN0aW9uIiwibW92ZVNlbGVjdGlvbiIsInNlbGVjdE5leHRTZWxlY3Rpb24iLCJvblBhcnRVcGRhdGUiLCJwYXJ0IiwicG9zIiwicGFydEluZGV4IiwiaW5kZXgiLCJ0ZXh0Iiwib25Db21wb25lbnRDb25maXJtIiwiY29tcGxldGlvbiIsInJlcGxhY2VQYXJ0cyIsInBhcnRGb3JDb21wbGV0aW9uIiwiY29tcGxldGlvbklkIiwidHlwZSIsInJvb21QaWxsIiwicGxhaW4iLCJzdWZmaXgiLCJhdFJvb21QaWxsIiwiY3JlYXRlTWVudGlvblBhcnRzIiwiY29tbWFuZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtCZSxNQUFNQSx3QkFBTixDQUErQjtBQUcxQ0MsRUFBQUEsV0FBVyxDQUNDQyxjQURELEVBRUNDLHlCQUZELEVBR0NDLFdBSEQsRUFJQ0MsV0FKRCxFQUtUO0FBQUEsU0FKVUgsY0FJVixHQUpVQSxjQUlWO0FBQUEsU0FIVUMseUJBR1YsR0FIVUEseUJBR1Y7QUFBQSxTQUZVQyxXQUVW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RCxDQUFELENBQVA7O0FBQ0o7QUFDSTtBQUNBLGVBQU8sQ0FBQyxLQUFLckIsV0FBTCxDQUFpQjZCLEtBQWpCLENBQXVCUixJQUF2QixDQUFELENBQVA7QUFiUjtBQWVIOztBQWxGeUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMTkgTmV3IFZlY3RvciBMdGRcbkNvcHlyaWdodCAyMDE5IFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IHsgS2V5Ym9hcmRFdmVudCB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyBQYXJ0LCBDb21tYW5kUGFydENyZWF0b3IsIFBhcnRDcmVhdG9yIH0gZnJvbSBcIi4vcGFydHNcIjtcbmltcG9ydCBEb2N1bWVudFBvc2l0aW9uIGZyb20gXCIuL3Bvc2l0aW9uXCI7XG5pbXBvcnQgeyBJQ29tcGxldGlvbiB9IGZyb20gXCIuLi9hdXRvY29tcGxldGUvQXV0b2NvbXBsZXRlclwiO1xuaW1wb3J0IEF1dG9jb21wbGV0ZSBmcm9tIFwiLi4vY29tcG9uZW50cy92aWV3cy9yb29tcy9BdXRvY29tcGxldGVcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJQ2FsbGJhY2sge1xuICAgIHJlcGxhY2VQYXJ0cz86IFBhcnRbXTtcbiAgICBjbG9zZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZUNhbGxiYWNrID0gKGRhdGE6IElDYWxsYmFjaykgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIEdldEF1dG9jb21wbGV0ZXJDb21wb25lbnQgPSAoKSA9PiBBdXRvY29tcGxldGU7XG5leHBvcnQgdHlwZSBVcGRhdGVRdWVyeSA9ICh0ZXN0OiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dG9jb21wbGV0ZVdyYXBwZXJNb2RlbCB7XG4gICAgcHJpdmF0ZSBwYXJ0SW5kZXg6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHVwZGF0ZUNhbGxiYWNrOiBVcGRhdGVDYWxsYmFjayxcbiAgICAgICAgcHJpdmF0ZSBnZXRBdXRvY29tcGxldGVyQ29tcG9uZW50OiBHZXRBdXRvY29tcGxldGVyQ29tcG9uZW50LFxuICAgICAgICBwcml2YXRlIHVwZGF0ZVF1ZXJ5OiBVcGRhdGVRdWVyeSxcbiAgICAgICAgcHJpdmF0ZSBwYXJ0Q3JlYXRvcjogUGFydENyZWF0b3IgfCBDb21tYW5kUGFydENyZWF0b3IsXG4gICAgKSB7XG4gICAgfVxuXG4gICAgcHVibGljIG9uRXNjYXBlKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nZXRBdXRvY29tcGxldGVyQ29tcG9uZW50KCkub25Fc2NhcGUoZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNsb3NlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnVwZGF0ZUNhbGxiYWNrKHsgY2xvc2U6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGhhc1NlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXV0b2NvbXBsZXRlckNvbXBvbmVudCgpLmhhc1NlbGVjdGlvbigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBoYXNDb21wbGV0aW9ucygpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgYWMgPSB0aGlzLmdldEF1dG9jb21wbGV0ZXJDb21wb25lbnQoKTtcbiAgICAgICAgcmV0dXJuIGFjICYmIGFjLmNvdW50Q29tcGxldGlvbnMoKSA+IDA7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGNvbmZpcm1Db21wbGV0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmdldEF1dG9jb21wbGV0ZXJDb21wb25lbnQoKS5vbkNvbmZpcm1Db21wbGV0aW9uKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FsbGJhY2soeyBjbG9zZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGVyZSBpcyBubyBjdXJyZW50IGF1dG9jb21wbGV0aW9uLCBzdGFydCBvbmUgYW5kIG1vdmUgdG8gdGhlIGZpcnN0IHNlbGVjdGlvbi5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgc3RhcnRTZWxlY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFjQ29tcG9uZW50ID0gdGhpcy5nZXRBdXRvY29tcGxldGVyQ29tcG9uZW50KCk7XG4gICAgICAgIGlmIChhY0NvbXBvbmVudC5jb3VudENvbXBsZXRpb25zKCkgPT09IDApIHtcbiAgICAgICAgICAgIC8vIEZvcmNlIGNvbXBsZXRpb25zIHRvIHNob3cgZm9yIHRoZSB0ZXh0IGN1cnJlbnRseSBlbnRlcmVkXG4gICAgICAgICAgICBhd2FpdCBhY0NvbXBvbmVudC5mb3JjZUNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc2VsZWN0UHJldmlvdXNTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0QXV0b2NvbXBsZXRlckNvbXBvbmVudCgpLm1vdmVTZWxlY3Rpb24oLTEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZWxlY3ROZXh0U2VsZWN0aW9uKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdldEF1dG9jb21wbGV0ZXJDb21wb25lbnQoKS5tb3ZlU2VsZWN0aW9uKCsxKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25QYXJ0VXBkYXRlKHBhcnQ6IFBhcnQsIHBvczogRG9jdW1lbnRQb3NpdGlvbik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLnBhcnRJbmRleCA9IHBvcy5pbmRleDtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlUXVlcnkocGFydC50ZXh0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25Db21wb25lbnRDb25maXJtKGNvbXBsZXRpb246IElDb21wbGV0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FsbGJhY2soe1xuICAgICAgICAgICAgcmVwbGFjZVBhcnRzOiB0aGlzLnBhcnRGb3JDb21wbGV0aW9uKGNvbXBsZXRpb24pLFxuICAgICAgICAgICAgY2xvc2U6IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcGFydEZvckNvbXBsZXRpb24oY29tcGxldGlvbjogSUNvbXBsZXRpb24pOiBQYXJ0W10ge1xuICAgICAgICBjb25zdCB7IGNvbXBsZXRpb25JZCB9ID0gY29tcGxldGlvbjtcbiAgICAgICAgY29uc3QgdGV4dCA9IGNvbXBsZXRpb24uY29tcGxldGlvbjtcbiAgICAgICAgc3dpdGNoIChjb21wbGV0aW9uLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJyb29tXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnBhcnRDcmVhdG9yLnJvb21QaWxsKHRleHQsIGNvbXBsZXRpb25JZCksIHRoaXMucGFydENyZWF0b3IucGxhaW4oY29tcGxldGlvbi5zdWZmaXgpXTtcbiAgICAgICAgICAgIGNhc2UgXCJhdC1yb29tXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnBhcnRDcmVhdG9yLmF0Um9vbVBpbGwoY29tcGxldGlvbklkKSwgdGhpcy5wYXJ0Q3JlYXRvci5wbGFpbihjb21wbGV0aW9uLnN1ZmZpeCldO1xuICAgICAgICAgICAgY2FzZSBcInVzZXJcIjpcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgc3VmZml4IG9ubHkgaWYgdGhlIHBpbGwgaXMgdGhlIHBhcnQgd2l0aCBpbmRleCAwIC0gd2UgYXJlIGF0IHRoZSBzdGFydCBvZiB0aGUgY29tcG9zZXJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJ0Q3JlYXRvci5jcmVhdGVNZW50aW9uUGFydHModGhpcy5wYXJ0SW5kZXggPT09IDAsIHRleHQsIGNvbXBsZXRpb25JZCk7XG4gICAgICAgICAgICBjYXNlIFwiY29tbWFuZFwiOlxuICAgICAgICAgICAgICAgIC8vIGNvbW1hbmQgbmVlZHMgc3BlY2lhbCBoYW5kbGluZyBmb3IgYXV0byBjb21wbGV0ZSwgYnV0IGFsc28gcmVuZGVycyBhcyBwbGFpbiB0ZXh0c1xuICAgICAgICAgICAgICAgIHJldHVybiBbKHRoaXMucGFydENyZWF0b3IgYXMgQ29tbWFuZFBhcnRDcmVhdG9yKS5jb21tYW5kKHRleHQpXTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gdXNlZCBmb3IgZW1vamkgYW5kIG90aGVyIHBsYWluIHRleHQgY29tcGxldGlvbiByZXBsYWNlbWVudFxuICAgICAgICAgICAgICAgIHJldHVybiBbdGhpcy5wYXJ0Q3JlYXRvci5wbGFpbih0ZXh0KV07XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=