"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Commands = exports.CommandMap = exports.CommandCategories = exports.Command = void 0;
exports.getCommand = getCommand;
exports.parseCommandString = parseCommandString;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var React = _interopRequireWildcard(require("react"));

var _event = require("matrix-js-sdk/src/@types/event");

var ContentHelpers = _interopRequireWildcard(require("matrix-js-sdk/src/content-helpers"));

var _MatrixClientPeg = require("./MatrixClientPeg");

var _dispatcher = _interopRequireDefault(require("./dispatcher/dispatcher"));

var _languageHandler = require("./languageHandler");

var _Modal = _interopRequireDefault(require("./Modal"));

var _MultiInviter = _interopRequireDefault(require("./utils/MultiInviter"));

var _HtmlUtils = require("./HtmlUtils");

var _QuestionDialog = _interopRequireDefault(require("./components/views/dialogs/QuestionDialog"));

var _WidgetUtils = _interopRequireDefault(require("./utils/WidgetUtils"));

var _colour = require("./utils/colour");

var _UserAddress = require("./UserAddress");

var _UrlUtils = require("./utils/UrlUtils");

var _IdentityServerUtils = require("./utils/IdentityServerUtils");

var _Permalinks = require("./utils/permalinks/Permalinks");

var _WidgetType = require("./widgets/WidgetType");

var _Jitsi = require("./widgets/Jitsi");

var _parse = require("parse5");

var _BugReportDialog = _interopRequireDefault(require("./components/views/dialogs/BugReportDialog"));

var _createRoom = require("./createRoom");

var _actions = require("./dispatcher/actions");

var _membership = require("./utils/membership");

var _SdkConfig = _interopRequireDefault(require("./SdkConfig"));

var _SettingsStore = _interopRequireDefault(require("./settings/SettingsStore"));

var _UIFeature = require("./settings/UIFeature");

var _effects = require("./effects");

var _CallHandler = _interopRequireDefault(require("./CallHandler"));

var _Rooms = require("./Rooms");

var _RoomUpgrade = require("./utils/RoomUpgrade");

var _UploadConfirmDialog = _interopRequireDefault(require("./components/views/dialogs/UploadConfirmDialog"));

var _DevtoolsDialog = _interopRequireDefault(require("./components/views/dialogs/DevtoolsDialog"));

var _RoomUpgradeWarningDialog = _interopRequireDefault(require("./components/views/dialogs/RoomUpgradeWarningDialog"));

var _InfoDialog = _interopRequireDefault(require("./components/views/dialogs/InfoDialog"));

var _SlashCommandHelpDialog = _interopRequireDefault(require("./components/views/dialogs/SlashCommandHelpDialog"));

var _logger = require("matrix-js-sdk/src/logger");

var _UIComponents = require("./customisations/helpers/UIComponents");

var _RoomContext = require("./contexts/RoomContext");

var _RoomViewStore = _interopRequireDefault(require("./stores/RoomViewStore"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

const singleMxcUpload = async () => {
  return new Promise(resolve => {
    const fileSelector = document.createElement('input');
    fileSelector.setAttribute('type', 'file');

    fileSelector.onchange = ev => {
      const file = ev.target.files[0];

      _Modal.default.createTrackedDialog('Upload Files confirmation', '', _UploadConfirmDialog.default, {
        file,
        onFinished: shouldContinue => {
          resolve(shouldContinue ? _MatrixClientPeg.MatrixClientPeg.get().uploadContent(file) : null);
        }
      });
    };

    fileSelector.click();
  });
};

const CommandCategories = {
  "messages": (0, _languageHandler._td)("Messages"),
  "actions": (0, _languageHandler._td)("Actions"),
  "admin": (0, _languageHandler._td)("Admin"),
  "advanced": (0, _languageHandler._td)("Advanced"),
  "effects": (0, _languageHandler._td)("Effects"),
  "other": (0, _languageHandler._td)("Other")
};
exports.CommandCategories = CommandCategories;

class Command {
  constructor(opts) {
    (0, _defineProperty2.default)(this, "command", void 0);
    (0, _defineProperty2.default)(this, "aliases", void 0);
    (0, _defineProperty2.default)(this, "args", void 0);
    (0, _defineProperty2.default)(this, "description", void 0);
    (0, _defineProperty2.default)(this, "runFn", void 0);
    (0, _defineProperty2.default)(this, "category", void 0);
    (0, _defineProperty2.default)(this, "hideCompletionAfterSpace", void 0);
    (0, _defineProperty2.default)(this, "_isEnabled", void 0);
    (0, _defineProperty2.default)(this, "renderingTypes", void 0);
    this.command = opts.command;
    this.aliases = opts.aliases || [];
    this.args = opts.args || "";
    this.description = opts.description;
    this.runFn = opts.runFn;
    this.category = opts.category || CommandCategories.other;
    this.hideCompletionAfterSpace = opts.hideCompletionAfterSpace || false;
    this._isEnabled = opts.isEnabled;
    this.renderingTypes = opts.renderingTypes;
  }

  getCommand() {
    return `/${this.command}`;
  }

  getCommandWithArgs() {
    return this.getCommand() + " " + this.args;
  }

  run(roomId, threadId, args) {
    var _this$renderingTypes;

    // if it has no runFn then its an ignored/nop command (autocomplete only) e.g `/me`
    if (!this.runFn) return reject((0, _languageHandler._t)("Command error"));
    const renderingType = threadId ? _RoomContext.TimelineRenderingType.Thread : _RoomContext.TimelineRenderingType.Room;

    if (this.renderingTypes && !((_this$renderingTypes = this.renderingTypes) !== null && _this$renderingTypes !== void 0 && _this$renderingTypes.includes(renderingType))) {
      return reject((0, _languageHandler._t)("Command error"));
    }

    return this.runFn.bind(this)(roomId, args);
  }

  getUsage() {
    return (0, _languageHandler._t)('Usage') + ': ' + this.getCommandWithArgs();
  }

  isEnabled() {
    return this._isEnabled ? this._isEnabled() : true;
  }

}

exports.Command = Command;

function reject(error) {
  return {
    error
  };
}

function success(promise) {
  return {
    promise
  };
}

function successSync(value) {
  return success(Promise.resolve(value));
}
/* Disable the "unexpected this" error for these commands - all of the run
 * functions are called with `this` bound to the Command instance.
 */


const Commands = [new Command({
  command: 'spoiler',
  args: '<message>',
  description: (0, _languageHandler._td)('Sends the given message as a spoiler'),
  runFn: function (roomId, message) {
    return successSync(ContentHelpers.makeHtmlMessage(message, `<span data-mx-spoiler>${message}</span>`));
  },
  category: CommandCategories.messages
}), new Command({
  command: 'shrug',
  args: '<message>',
  description: (0, _languageHandler._td)('Prepends ¯\\_(ツ)_/¯ to a plain-text message'),
  runFn: function (roomId, args) {
    let message = '¯\\_(ツ)_/¯';

    if (args) {
      message = message + ' ' + args;
    }

    return successSync(ContentHelpers.makeTextMessage(message));
  },
  category: CommandCategories.messages
}), new Command({
  command: 'tableflip',
  args: '<message>',
  description: (0, _languageHandler._td)('Prepends (╯°□°）╯︵ ┻━┻ to a plain-text message'),
  runFn: function (roomId, args) {
    let message = '(╯°□°）╯︵ ┻━┻';

    if (args) {
      message = message + ' ' + args;
    }

    return successSync(ContentHelpers.makeTextMessage(message));
  },
  category: CommandCategories.messages
}), new Command({
  command: 'unflip',
  args: '<message>',
  description: (0, _languageHandler._td)('Prepends ┬──┬ ノ( ゜-゜ノ) to a plain-text message'),
  runFn: function (roomId, args) {
    let message = '┬──┬ ノ( ゜-゜ノ)';

    if (args) {
      message = message + ' ' + args;
    }

    return successSync(ContentHelpers.makeTextMessage(message));
  },
  category: CommandCategories.messages
}), new Command({
  command: 'lenny',
  args: '<message>',
  description: (0, _languageHandler._td)('Prepends ( ͡° ͜ʖ ͡°) to a plain-text message'),
  runFn: function (roomId, args) {
    let message = '( ͡° ͜ʖ ͡°)';

    if (args) {
      message = message + ' ' + args;
    }

    return successSync(ContentHelpers.makeTextMessage(message));
  },
  category: CommandCategories.messages
}), new Command({
  command: 'plain',
  args: '<message>',
  description: (0, _languageHandler._td)('Sends a message as plain text, without interpreting it as markdown'),
  runFn: function (roomId, messages) {
    return successSync(ContentHelpers.makeTextMessage(messages));
  },
  category: CommandCategories.messages
}), new Command({
  command: 'html',
  args: '<message>',
  description: (0, _languageHandler._td)('Sends a message as html, without interpreting it as markdown'),
  runFn: function (roomId, messages) {
    return successSync(ContentHelpers.makeHtmlMessage(messages, messages));
  },
  category: CommandCategories.messages
}), new Command({
  command: 'upgraderoom',
  args: '<new_version>',
  description: (0, _languageHandler._td)('Upgrades a room to a new version'),
  runFn: function (roomId, args) {
    if (args) {
      const cli = _MatrixClientPeg.MatrixClientPeg.get();

      const room = cli.getRoom(roomId);

      if (!room.currentState.mayClientSendStateEvent("m.room.tombstone", cli)) {
        return reject((0, _languageHandler._t)("You do not have the required permissions to use this command."));
      }

      const {
        finished
      } = _Modal.default.createTrackedDialog('Slash Commands', 'upgrade room confirmation', _RoomUpgradeWarningDialog.default, {
        roomId: roomId,
        targetVersion: args
      },
      /*className=*/
      null,
      /*isPriority=*/
      false,
      /*isStatic=*/
      true);

      return success(finished.then(async ([resp]) => {
        if (!(resp !== null && resp !== void 0 && resp.continue)) return;
        await (0, _RoomUpgrade.upgradeRoom)(room, args, resp.invite);
      }));
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.admin,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'nick',
  args: '<display_name>',
  description: (0, _languageHandler._td)('Changes your display nickname'),
  runFn: function (roomId, args) {
    if (args) {
      return success(_MatrixClientPeg.MatrixClientPeg.get().setDisplayName(args));
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.actions,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'myroomnick',
  aliases: ['roomnick'],
  args: '<display_name>',
  description: (0, _languageHandler._td)('Changes your display nickname in the current room only'),
  runFn: function (roomId, args) {
    if (args) {
      const cli = _MatrixClientPeg.MatrixClientPeg.get();

      const ev = cli.getRoom(roomId).currentState.getStateEvents('m.room.member', cli.getUserId());

      const content = _objectSpread(_objectSpread({}, ev ? ev.getContent() : {
        membership: 'join'
      }), {}, {
        displayname: args
      });

      return success(cli.sendStateEvent(roomId, 'm.room.member', content, cli.getUserId()));
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.actions,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'roomavatar',
  args: '[<mxc_url>]',
  description: (0, _languageHandler._td)('Changes the avatar of the current room'),
  runFn: function (roomId, args) {
    let promise = Promise.resolve(args);

    if (!args) {
      promise = singleMxcUpload();
    }

    return success(promise.then(url => {
      if (!url) return;
      return _MatrixClientPeg.MatrixClientPeg.get().sendStateEvent(roomId, 'm.room.avatar', {
        url
      }, '');
    }));
  },
  category: CommandCategories.actions,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'myroomavatar',
  args: '[<mxc_url>]',
  description: (0, _languageHandler._td)('Changes your avatar in this current room only'),
  runFn: function (roomId, args) {
    const cli = _MatrixClientPeg.MatrixClientPeg.get();

    const room = cli.getRoom(roomId);
    const userId = cli.getUserId();
    let promise = Promise.resolve(args);

    if (!args) {
      promise = singleMxcUpload();
    }

    return success(promise.then(url => {
      if (!url) return;
      const ev = room.currentState.getStateEvents('m.room.member', userId);

      const content = _objectSpread(_objectSpread({}, ev ? ev.getContent() : {
        membership: 'join'
      }), {}, {
        avatar_url: url
      });

      return cli.sendStateEvent(roomId, 'm.room.member', content, userId);
    }));
  },
  category: CommandCategories.actions,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'myavatar',
  args: '[<mxc_url>]',
  description: (0, _languageHandler._td)('Changes your avatar in all rooms'),
  runFn: function (roomId, args) {
    let promise = Promise.resolve(args);

    if (!args) {
      promise = singleMxcUpload();
    }

    return success(promise.then(url => {
      if (!url) return;
      return _MatrixClientPeg.MatrixClientPeg.get().setAvatarUrl(url);
    }));
  },
  category: CommandCategories.actions,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'topic',
  args: '[<topic>]',
  description: (0, _languageHandler._td)('Gets or sets the room topic'),
  runFn: function (roomId, args) {
    const cli = _MatrixClientPeg.MatrixClientPeg.get();

    if (args) {
      return success(cli.setRoomTopic(roomId, args));
    }

    const room = cli.getRoom(roomId);
    if (!room) return reject((0, _languageHandler._t)("Failed to set topic"));
    const topicEvents = room.currentState.getStateEvents('m.room.topic', '');
    const topic = topicEvents && topicEvents.getContent().topic;
    const topicHtml = topic ? (0, _HtmlUtils.linkifyAndSanitizeHtml)(topic) : (0, _languageHandler._t)('This room has no topic.');

    _Modal.default.createTrackedDialog('Slash Commands', 'Topic', _InfoDialog.default, {
      title: room.name,
      description: /*#__PURE__*/React.createElement("div", {
        dangerouslySetInnerHTML: {
          __html: topicHtml
        }
      }),
      hasCloseButton: true
    });

    return success();
  },
  category: CommandCategories.admin,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'roomname',
  args: '<name>',
  description: (0, _languageHandler._td)('Sets the room name'),
  runFn: function (roomId, args) {
    if (args) {
      return success(_MatrixClientPeg.MatrixClientPeg.get().setRoomName(roomId, args));
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.admin,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'invite',
  args: '<user-id> [<reason>]',
  description: (0, _languageHandler._td)('Invites user with given id to current room'),
  isEnabled: () => (0, _UIComponents.shouldShowComponent)(_UIFeature.UIComponent.InviteUsers),
  runFn: function (roomId, args) {
    if (args) {
      const [address, reason] = args.split(/\s+(.+)/);

      if (address) {
        // We use a MultiInviter to re-use the invite logic, even though
        // we're only inviting one user.
        // If we need an identity server but don't have one, things
        // get a bit more complex here, but we try to show something
        // meaningful.
        let prom = Promise.resolve();

        if ((0, _UserAddress.getAddressType)(address) === 'email' && !_MatrixClientPeg.MatrixClientPeg.get().getIdentityServerUrl()) {
          const defaultIdentityServerUrl = (0, _IdentityServerUtils.getDefaultIdentityServerUrl)();

          if (defaultIdentityServerUrl) {
            const {
              finished
            } = _Modal.default.createTrackedDialog('Slash Commands', 'Identity server', _QuestionDialog.default, {
              title: (0, _languageHandler._t)("Use an identity server"),
              description: /*#__PURE__*/React.createElement("p", null, (0, _languageHandler._t)("Use an identity server to invite by email. " + "Click continue to use the default identity server " + "(%(defaultIdentityServerName)s) or manage in Settings.", {
                defaultIdentityServerName: (0, _UrlUtils.abbreviateUrl)(defaultIdentityServerUrl)
              })),
              button: (0, _languageHandler._t)("Continue")
            });

            prom = finished.then(([useDefault]) => {
              if (useDefault) {
                (0, _IdentityServerUtils.useDefaultIdentityServer)();
                return;
              }

              throw new Error((0, _languageHandler._t)("Use an identity server to invite by email. Manage in Settings."));
            });
          } else {
            return reject((0, _languageHandler._t)("Use an identity server to invite by email. Manage in Settings."));
          }
        }

        const inviter = new _MultiInviter.default(roomId);
        return success(prom.then(() => {
          return inviter.invite([address], reason);
        }).then(() => {
          if (inviter.getCompletionState(address) !== "invited") {
            throw new Error(inviter.getErrorText(address));
          }
        }));
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.actions,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'join',
  aliases: ['j', 'goto'],
  args: '<room-address>',
  description: (0, _languageHandler._td)('Joins room with given address'),
  runFn: function (roomId, args) {
    if (args) {
      // Note: we support 2 versions of this command. The first is
      // the public-facing one for most users and the other is a
      // power-user edition where someone may join via permalink or
      // room ID with optional servers. Practically, this results
      // in the following variations:
      //   /join #example:example.org
      //   /join !example:example.org
      //   /join !example:example.org altserver.com elsewhere.ca
      //   /join https://matrix.to/#/!example:example.org?via=altserver.com
      // The command also supports event permalinks transparently:
      //   /join https://matrix.to/#/!example:example.org/$something:example.org
      //   /join https://matrix.to/#/!example:example.org/$something:example.org?via=altserver.com
      const params = args.split(' ');
      if (params.length < 1) return reject(this.getUsage());
      let isPermalink = false;

      if (params[0].startsWith("http:") || params[0].startsWith("https:")) {
        // It's at least a URL - try and pull out a hostname to check against the
        // permalink handler
        const parsedUrl = new URL(params[0]);
        const hostname = parsedUrl.host || parsedUrl.hostname; // takes first non-falsey value
        // if we're using a Element permalink handler, this will catch it before we get much further.
        // see below where we make assumptions about parsing the URL.

        if ((0, _Permalinks.isPermalinkHost)(hostname)) {
          isPermalink = true;
        }
      }

      if (params[0][0] === '#') {
        let roomAlias = params[0];

        if (!roomAlias.includes(':')) {
          roomAlias += ':' + _MatrixClientPeg.MatrixClientPeg.get().getDomain();
        }

        _dispatcher.default.dispatch({
          action: _actions.Action.ViewRoom,
          room_alias: roomAlias,
          auto_join: true,
          _type: "slash_command" // instrumentation

        });

        return success();
      } else if (params[0][0] === '!') {
        const [roomId, ...viaServers] = params;

        _dispatcher.default.dispatch({
          action: _actions.Action.ViewRoom,
          room_id: roomId,
          opts: {
            // These are passed down to the js-sdk's /join call
            viaServers: viaServers
          },
          via_servers: viaServers,
          // for the rejoin button
          auto_join: true,
          _type: "slash_command" // instrumentation

        });

        return success();
      } else if (isPermalink) {
        const permalinkParts = (0, _Permalinks.parsePermalink)(params[0]); // This check technically isn't needed because we already did our
        // safety checks up above. However, for good measure, let's be sure.

        if (!permalinkParts) {
          return reject(this.getUsage());
        } // If for some reason someone wanted to join a group or user, we should
        // stop them now.


        if (!permalinkParts.roomIdOrAlias) {
          return reject(this.getUsage());
        }

        const entity = permalinkParts.roomIdOrAlias;
        const viaServers = permalinkParts.viaServers;
        const eventId = permalinkParts.eventId;
        const dispatch = {
          action: _actions.Action.ViewRoom,
          auto_join: true,
          _type: "slash_command" // instrumentation

        };
        if (entity[0] === '!') dispatch["room_id"] = entity;else dispatch["room_alias"] = entity;

        if (eventId) {
          dispatch["event_id"] = eventId;
          dispatch["highlighted"] = true;
        }

        if (viaServers) {
          // For the join
          dispatch["opts"] = {
            // These are passed down to the js-sdk's /join call
            viaServers: viaServers
          }; // For if the join fails (rejoin button)

          dispatch['via_servers'] = viaServers;
        }

        _dispatcher.default.dispatch(dispatch);

        return success();
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.actions,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'part',
  args: '[<room-address>]',
  description: (0, _languageHandler._td)('Leave room'),
  runFn: function (roomId, args) {
    const cli = _MatrixClientPeg.MatrixClientPeg.get();

    let targetRoomId;

    if (args) {
      const matches = args.match(/^(\S+)$/);

      if (matches) {
        let roomAlias = matches[1];
        if (roomAlias[0] !== '#') return reject(this.getUsage());

        if (!roomAlias.includes(':')) {
          roomAlias += ':' + cli.getDomain();
        } // Try to find a room with this alias


        const rooms = cli.getRooms();

        for (let i = 0; i < rooms.length; i++) {
          const aliasEvents = rooms[i].currentState.getStateEvents('m.room.aliases');

          for (let j = 0; j < aliasEvents.length; j++) {
            const aliases = aliasEvents[j].getContent().aliases || [];

            for (let k = 0; k < aliases.length; k++) {
              if (aliases[k] === roomAlias) {
                targetRoomId = rooms[i].roomId;
                break;
              }
            }

            if (targetRoomId) break;
          }

          if (targetRoomId) break;
        }

        if (!targetRoomId) return reject((0, _languageHandler._t)('Unrecognised room address:') + ' ' + roomAlias);
      }
    }

    if (!targetRoomId) targetRoomId = roomId;
    return success((0, _membership.leaveRoomBehaviour)(targetRoomId));
  },
  category: CommandCategories.actions,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'kick',
  args: '<user-id> [reason]',
  description: (0, _languageHandler._td)('Kicks user with given id'),
  runFn: function (roomId, args) {
    if (args) {
      const matches = args.match(/^(\S+?)( +(.*))?$/);

      if (matches) {
        return success(_MatrixClientPeg.MatrixClientPeg.get().kick(roomId, matches[1], matches[3]));
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.admin,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'ban',
  args: '<user-id> [reason]',
  description: (0, _languageHandler._td)('Bans user with given id'),
  runFn: function (roomId, args) {
    if (args) {
      const matches = args.match(/^(\S+?)( +(.*))?$/);

      if (matches) {
        return success(_MatrixClientPeg.MatrixClientPeg.get().ban(roomId, matches[1], matches[3]));
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.admin,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'unban',
  args: '<user-id>',
  description: (0, _languageHandler._td)('Unbans user with given ID'),
  runFn: function (roomId, args) {
    if (args) {
      const matches = args.match(/^(\S+)$/);

      if (matches) {
        // Reset the user membership to "leave" to unban him
        return success(_MatrixClientPeg.MatrixClientPeg.get().unban(roomId, matches[1]));
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.admin,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'ignore',
  args: '<user-id>',
  description: (0, _languageHandler._td)('Ignores a user, hiding their messages from you'),
  runFn: function (roomId, args) {
    if (args) {
      const cli = _MatrixClientPeg.MatrixClientPeg.get();

      const matches = args.match(/^(@[^:]+:\S+)$/);

      if (matches) {
        const userId = matches[1];
        const ignoredUsers = cli.getIgnoredUsers();
        ignoredUsers.push(userId); // de-duped internally in the js-sdk

        return success(cli.setIgnoredUsers(ignoredUsers).then(() => {
          _Modal.default.createTrackedDialog('Slash Commands', 'User ignored', _InfoDialog.default, {
            title: (0, _languageHandler._t)('Ignored user'),
            description: /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("p", null, (0, _languageHandler._t)('You are now ignoring %(userId)s', {
              userId
            })))
          });
        }));
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.actions
}), new Command({
  command: 'unignore',
  args: '<user-id>',
  description: (0, _languageHandler._td)('Stops ignoring a user, showing their messages going forward'),
  runFn: function (roomId, args) {
    if (args) {
      const cli = _MatrixClientPeg.MatrixClientPeg.get();

      const matches = args.match(/(^@[^:]+:\S+$)/);

      if (matches) {
        const userId = matches[1];
        const ignoredUsers = cli.getIgnoredUsers();
        const index = ignoredUsers.indexOf(userId);
        if (index !== -1) ignoredUsers.splice(index, 1);
        return success(cli.setIgnoredUsers(ignoredUsers).then(() => {
          _Modal.default.createTrackedDialog('Slash Commands', 'User unignored', _InfoDialog.default, {
            title: (0, _languageHandler._t)('Unignored user'),
            description: /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("p", null, (0, _languageHandler._t)('You are no longer ignoring %(userId)s', {
              userId
            })))
          });
        }));
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.actions
}), new Command({
  command: 'op',
  args: '<user-id> [<power-level>]',
  description: (0, _languageHandler._td)('Define the power level of a user'),

  isEnabled() {
    const cli = _MatrixClientPeg.MatrixClientPeg.get();

    const room = cli.getRoom(_RoomViewStore.default.getRoomId());
    return room === null || room === void 0 ? void 0 : room.currentState.maySendStateEvent(_event.EventType.RoomPowerLevels, cli.getUserId());
  },

  runFn: function (roomId, args) {
    if (args) {
      const matches = args.match(/^(\S+?)( +(-?\d+))?$/);
      let powerLevel = 50; // default power level for op

      if (matches) {
        const userId = matches[1];

        if (matches.length === 4 && undefined !== matches[3]) {
          powerLevel = parseInt(matches[3], 10);
        }

        if (!isNaN(powerLevel)) {
          const cli = _MatrixClientPeg.MatrixClientPeg.get();

          const room = cli.getRoom(roomId);
          if (!room) return reject((0, _languageHandler._t)("Command failed"));
          const member = room.getMember(userId);

          if (!member || (0, _membership.getEffectiveMembership)(member.membership) === _membership.EffectiveMembership.Leave) {
            return reject((0, _languageHandler._t)("Could not find user in room"));
          }

          const powerLevelEvent = room.currentState.getStateEvents('m.room.power_levels', '');
          return success(cli.setPowerLevel(roomId, userId, powerLevel, powerLevelEvent));
        }
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.admin,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'deop',
  args: '<user-id>',
  description: (0, _languageHandler._td)('Deops user with given id'),

  isEnabled() {
    const cli = _MatrixClientPeg.MatrixClientPeg.get();

    const room = cli.getRoom(_RoomViewStore.default.getRoomId());
    return room === null || room === void 0 ? void 0 : room.currentState.maySendStateEvent(_event.EventType.RoomPowerLevels, cli.getUserId());
  },

  runFn: function (roomId, args) {
    if (args) {
      const matches = args.match(/^(\S+)$/);

      if (matches) {
        const cli = _MatrixClientPeg.MatrixClientPeg.get();

        const room = cli.getRoom(roomId);
        if (!room) return reject((0, _languageHandler._t)("Command failed"));
        const powerLevelEvent = room.currentState.getStateEvents('m.room.power_levels', '');
        if (!powerLevelEvent.getContent().users[args]) return reject((0, _languageHandler._t)("Could not find user in room"));
        return success(cli.setPowerLevel(roomId, args, undefined, powerLevelEvent));
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.admin,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'devtools',
  description: (0, _languageHandler._td)('Opens the Developer Tools dialog'),
  runFn: function (roomId) {
    _Modal.default.createDialog(_DevtoolsDialog.default, {
      roomId
    });

    return success();
  },
  category: CommandCategories.advanced
}), new Command({
  command: 'addwidget',
  args: '<url | embed code | Jitsi url>',
  description: (0, _languageHandler._td)('Adds a custom widget by URL to the room'),
  isEnabled: () => _SettingsStore.default.getValue(_UIFeature.UIFeature.Widgets),
  runFn: function (roomId, widgetUrl) {
    if (!widgetUrl) {
      return reject((0, _languageHandler._t)("Please supply a widget URL or embed code"));
    } // Try and parse out a widget URL from iframes


    if (widgetUrl.toLowerCase().startsWith("<iframe ")) {
      // We use parse5, which doesn't render/create a DOM node. It instead runs
      // some superfast regex over the text so we don't have to.
      const embed = (0, _parse.parseFragment)(widgetUrl);

      if (embed && embed.childNodes && embed.childNodes.length === 1) {
        const iframe = embed.childNodes[0];

        if (iframe.tagName.toLowerCase() === 'iframe' && iframe.attrs) {
          const srcAttr = iframe.attrs.find(a => a.name === 'src');

          _logger.logger.log("Pulling URL out of iframe (embed code)");

          widgetUrl = srcAttr.value;
        }
      }
    }

    if (!widgetUrl.startsWith("https://") && !widgetUrl.startsWith("http://")) {
      return reject((0, _languageHandler._t)("Please supply a https:// or http:// widget URL"));
    }

    if (_WidgetUtils.default.canUserModifyWidgets(roomId)) {
      const userId = _MatrixClientPeg.MatrixClientPeg.get().getUserId();

      const nowMs = new Date().getTime();
      const widgetId = encodeURIComponent(`${roomId}_${userId}_${nowMs}`);
      let type = _WidgetType.WidgetType.CUSTOM;
      let name = "Custom Widget";
      let data = {}; // Make the widget a Jitsi widget if it looks like a Jitsi widget

      const jitsiData = _Jitsi.Jitsi.getInstance().parsePreferredConferenceUrl(widgetUrl);

      if (jitsiData) {
        _logger.logger.log("Making /addwidget widget a Jitsi conference");

        type = _WidgetType.WidgetType.JITSI;
        name = "Jitsi Conference";
        data = jitsiData;
        widgetUrl = _WidgetUtils.default.getLocalJitsiWrapperUrl();
      }

      return success(_WidgetUtils.default.setRoomWidget(roomId, widgetId, type, widgetUrl, name, data));
    } else {
      return reject((0, _languageHandler._t)("You cannot modify widgets in this room."));
    }
  },
  category: CommandCategories.admin,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'verify',
  args: '<user-id> <device-id> <device-signing-key>',
  description: (0, _languageHandler._td)('Verifies a user, session, and pubkey tuple'),
  runFn: function (roomId, args) {
    if (args) {
      const matches = args.match(/^(\S+) +(\S+) +(\S+)$/);

      if (matches) {
        const cli = _MatrixClientPeg.MatrixClientPeg.get();

        const userId = matches[1];
        const deviceId = matches[2];
        const fingerprint = matches[3];
        return success((async () => {
          const device = cli.getStoredDevice(userId, deviceId);

          if (!device) {
            throw new Error((0, _languageHandler._t)('Unknown (user, session) pair:') + ` (${userId}, ${deviceId})`);
          }

          const deviceTrust = await cli.checkDeviceTrust(userId, deviceId);

          if (deviceTrust.isVerified()) {
            if (device.getFingerprint() === fingerprint) {
              throw new Error((0, _languageHandler._t)('Session already verified!'));
            } else {
              throw new Error((0, _languageHandler._t)('WARNING: Session already verified, but keys do NOT MATCH!'));
            }
          }

          if (device.getFingerprint() !== fingerprint) {
            const fprint = device.getFingerprint();
            throw new Error((0, _languageHandler._t)('WARNING: KEY VERIFICATION FAILED! The signing key for %(userId)s and session' + ' %(deviceId)s is "%(fprint)s" which does not match the provided key ' + '"%(fingerprint)s". This could mean your communications are being intercepted!', {
              fprint,
              userId,
              deviceId,
              fingerprint
            }));
          }

          await cli.setDeviceVerified(userId, deviceId, true); // Tell the user we verified everything

          _Modal.default.createTrackedDialog('Slash Commands', 'Verified key', _InfoDialog.default, {
            title: (0, _languageHandler._t)('Verified key'),
            description: /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("p", null, (0, _languageHandler._t)('The signing key you provided matches the signing key you received ' + 'from %(userId)s\'s session %(deviceId)s. Session marked as verified.', {
              userId,
              deviceId
            })))
          });
        })());
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.advanced,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: 'discardsession',
  description: (0, _languageHandler._td)('Forces the current outbound group session in an encrypted room to be discarded'),
  runFn: function (roomId) {
    try {
      _MatrixClientPeg.MatrixClientPeg.get().forceDiscardSession(roomId);
    } catch (e) {
      return reject(e.message);
    }

    return success();
  },
  category: CommandCategories.advanced,
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: "rainbow",
  description: (0, _languageHandler._td)("Sends the given message coloured as a rainbow"),
  args: '<message>',
  runFn: function (roomId, args) {
    if (!args) return reject(this.getUserId());
    return successSync(ContentHelpers.makeHtmlMessage(args, (0, _colour.textToHtmlRainbow)(args)));
  },
  category: CommandCategories.messages
}), new Command({
  command: "rainbowme",
  description: (0, _languageHandler._td)("Sends the given emote coloured as a rainbow"),
  args: '<message>',
  runFn: function (roomId, args) {
    if (!args) return reject(this.getUserId());
    return successSync(ContentHelpers.makeHtmlEmote(args, (0, _colour.textToHtmlRainbow)(args)));
  },
  category: CommandCategories.messages
}), new Command({
  command: "help",
  description: (0, _languageHandler._td)("Displays list of commands with usages and descriptions"),
  runFn: function () {
    _Modal.default.createTrackedDialog('Slash Commands', 'Help', _SlashCommandHelpDialog.default);

    return success();
  },
  category: CommandCategories.advanced
}), new Command({
  command: "whois",
  description: (0, _languageHandler._td)("Displays information about a user"),
  args: "<user-id>",
  runFn: function (roomId, userId) {
    if (!userId || !userId.startsWith("@") || !userId.includes(":")) {
      return reject(this.getUsage());
    }

    const member = _MatrixClientPeg.MatrixClientPeg.get().getRoom(roomId).getMember(userId);

    _dispatcher.default.dispatch({
      action: _actions.Action.ViewUser,
      // XXX: We should be using a real member object and not assuming what the receiver wants.
      member: member || {
        userId
      }
    });

    return success();
  },
  category: CommandCategories.advanced
}), new Command({
  command: "rageshake",
  aliases: ["bugreport"],
  description: (0, _languageHandler._td)("Send a bug report with logs"),
  isEnabled: () => !!_SdkConfig.default.get().bug_report_endpoint_url,
  args: "<description>",
  runFn: function (roomId, args) {
    return success(_Modal.default.createTrackedDialog('Slash Commands', 'Bug Report Dialog', _BugReportDialog.default, {
      initialText: args
    }).finished);
  },
  category: CommandCategories.advanced
}), new Command({
  command: "query",
  description: (0, _languageHandler._td)("Opens chat with the given user"),
  args: "<user-id>",
  runFn: function (roomId, userId) {
    // easter-egg for now: look up phone numbers through the thirdparty API
    // (very dumb phone number detection...)
    const isPhoneNumber = userId && /^\+?[0123456789]+$/.test(userId);

    if (!userId || (!userId.startsWith("@") || !userId.includes(":")) && !isPhoneNumber) {
      return reject(this.getUsage());
    }

    return success((async () => {
      if (isPhoneNumber) {
        const results = await _CallHandler.default.sharedInstance().pstnLookup(this.state.value);

        if (!results || results.length === 0 || !results[0].userid) {
          throw new Error("Unable to find Matrix ID for phone number");
        }

        userId = results[0].userid;
      }

      const roomId = await (0, _createRoom.ensureDMExists)(_MatrixClientPeg.MatrixClientPeg.get(), userId);

      _dispatcher.default.dispatch({
        action: _actions.Action.ViewRoom,
        room_id: roomId
      });
    })());
  },
  category: CommandCategories.actions
}), new Command({
  command: "msg",
  description: (0, _languageHandler._td)("Sends a message to the given user"),
  args: "<user-id> [<message>]",
  runFn: function (roomId, args) {
    if (args) {
      // matches the first whitespace delimited group and then the rest of the string
      const matches = args.match(/^(\S+?)(?: +(.*))?$/s);

      if (matches) {
        const [userId, msg] = matches.slice(1);

        if (userId && userId.startsWith("@") && userId.includes(":")) {
          return success((async () => {
            const cli = _MatrixClientPeg.MatrixClientPeg.get();

            const roomId = await (0, _createRoom.ensureDMExists)(cli, userId);

            _dispatcher.default.dispatch({
              action: _actions.Action.ViewRoom,
              room_id: roomId
            });

            if (msg) {
              cli.sendTextMessage(roomId, msg);
            }
          })());
        }
      }
    }

    return reject(this.getUsage());
  },
  category: CommandCategories.actions
}), new Command({
  command: "holdcall",
  description: (0, _languageHandler._td)("Places the call in the current room on hold"),
  category: CommandCategories.other,
  runFn: function (roomId, args) {
    const call = _CallHandler.default.sharedInstance().getCallForRoom(roomId);

    if (!call) {
      return reject("No active call in this room");
    }

    call.setRemoteOnHold(true);
    return success();
  },
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: "unholdcall",
  description: (0, _languageHandler._td)("Takes the call in the current room off hold"),
  category: CommandCategories.other,
  runFn: function (roomId, args) {
    const call = _CallHandler.default.sharedInstance().getCallForRoom(roomId);

    if (!call) {
      return reject("No active call in this room");
    }

    call.setRemoteOnHold(false);
    return success();
  },
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: "converttodm",
  description: (0, _languageHandler._td)("Converts the room to a DM"),
  category: CommandCategories.other,
  runFn: function (roomId, args) {
    const room = _MatrixClientPeg.MatrixClientPeg.get().getRoom(roomId);

    return success((0, _Rooms.guessAndSetDMRoom)(room, true));
  },
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), new Command({
  command: "converttoroom",
  description: (0, _languageHandler._td)("Converts the DM to a room"),
  category: CommandCategories.other,
  runFn: function (roomId, args) {
    const room = _MatrixClientPeg.MatrixClientPeg.get().getRoom(roomId);

    return success((0, _Rooms.guessAndSetDMRoom)(room, false));
  },
  renderingTypes: [_RoomContext.TimelineRenderingType.Room]
}), // Command definitions for autocompletion ONLY:
// /me is special because its not handled by SlashCommands.js and is instead done inside the Composer classes
new Command({
  command: "me",
  args: '<message>',
  description: (0, _languageHandler._td)('Displays action'),
  category: CommandCategories.messages,
  hideCompletionAfterSpace: true
}), ..._effects.CHAT_EFFECTS.map(effect => {
  return new Command({
    command: effect.command,
    description: effect.description(),
    args: '<message>',
    runFn: function (roomId, args) {
      return success((async () => {
        if (!args) {
          args = effect.fallbackMessage();

          _MatrixClientPeg.MatrixClientPeg.get().sendEmoteMessage(roomId, args);
        } else {
          const content = {
            msgtype: effect.msgType,
            body: args
          };

          _MatrixClientPeg.MatrixClientPeg.get().sendMessage(roomId, content);
        }

        _dispatcher.default.dispatch({
          action: `effects.${effect.command}`
        });
      })());
    },
    category: CommandCategories.effects,
    renderingTypes: [_RoomContext.TimelineRenderingType.Room]
  });
})]; // build a map from names and aliases to the Command objects.

exports.Commands = Commands;
const CommandMap = new Map();
exports.CommandMap = CommandMap;
Commands.forEach(cmd => {
  CommandMap.set(cmd.command, cmd);
  cmd.aliases.forEach(alias => {
    CommandMap.set(alias, cmd);
  });
});

function parseCommandString(input) {
  // trim any trailing whitespace, as it can confuse the parser for
  // IRC-style commands
  input = input.replace(/\s+$/, '');
  if (input[0] !== '/') return {}; // not a command

  const bits = input.match(/^(\S+?)(?:[ \n]+((.|\n)*))?$/);
  let cmd;
  let args;

  if (bits) {
    cmd = bits[1].substring(1).toLowerCase();
    args = bits[2];
  } else {
    cmd = input;
  }

  return {
    cmd,
    args
  };
}

/**
 * Process the given text for /commands and return a bound method to perform them.
 * @param {string} roomId The room in which the command was performed.
 * @param {string} input The raw text input by the user.
 * @return {null|function(): Object} Function returning an object with the property 'error' if there was an error
 * processing the command, or 'promise' if a request was sent out.
 * Returns null if the input didn't match a command.
 */
function getCommand(input) {
  const {
    cmd,
    args
  } = parseCommandString(input);

  if (CommandMap.has(cmd) && CommandMap.get(cmd).isEnabled()) {
    return {
      cmd: CommandMap.get(cmd),
      args
    };
  }

  return {};
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9TbGFzaENvbW1hbmRzLnRzeCJdLCJuYW1lcyI6WyJzaW5nbGVNeGNVcGxvYWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImZpbGVTZWxlY3RvciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm9uY2hhbmdlIiwiZXYiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJNb2RhbCIsImNyZWF0ZVRyYWNrZWREaWFsb2ciLCJVcGxvYWRDb25maXJtRGlhbG9nIiwib25GaW5pc2hlZCIsInNob3VsZENvbnRpbnVlIiwiTWF0cml4Q2xpZW50UGVnIiwiZ2V0IiwidXBsb2FkQ29udGVudCIsImNsaWNrIiwiQ29tbWFuZENhdGVnb3JpZXMiLCJDb21tYW5kIiwiY29uc3RydWN0b3IiLCJvcHRzIiwiY29tbWFuZCIsImFsaWFzZXMiLCJhcmdzIiwiZGVzY3JpcHRpb24iLCJydW5GbiIsImNhdGVnb3J5Iiwib3RoZXIiLCJoaWRlQ29tcGxldGlvbkFmdGVyU3BhY2UiLCJfaXNFbmFibGVkIiwiaXNFbmFibGVkIiwicmVuZGVyaW5nVHlwZXMiLCJnZXRDb21tYW5kIiwiZ2V0Q29tbWFuZFdpdGhBcmdzIiwicnVuIiwicm9vbUlkIiwidGhyZWFkSWQiLCJyZWplY3QiLCJyZW5kZXJpbmdUeXBlIiwiVGltZWxpbmVSZW5kZXJpbmdUeXBlIiwiVGhyZWFkIiwiUm9vbSIsImluY2x1ZGVzIiwiYmluZCIsImdldFVzYWdlIiwiZXJyb3IiLCJzdWNjZXNzIiwicHJvbWlzZSIsInN1Y2Nlc3NTeW5jIiwidmFsdWUiLCJDb21tYW5kcyIsIm1lc3NhZ2UiLCJDb250ZW50SGVscGVycyIsIm1ha2VIdG1sTWVzc2FnZSIsIm1lc3NhZ2VzIiwibWFrZVRleHRNZXNzYWdlIiwiY2xpIiwicm9vbSIsImdldFJvb20iLCJjdXJyZW50U3RhdGUiLCJtYXlDbGllbnRTZW5kU3RhdGVFdmVudCIsImZpbmlzaGVkIiwiUm9vbVVwZ3JhZGVXYXJuaW5nRGlhbG9nIiwidGFyZ2V0VmVyc2lvbiIsInRoZW4iLCJyZXNwIiwiY29udGludWUiLCJpbnZpdGUiLCJhZG1pbiIsInNldERpc3BsYXlOYW1lIiwiYWN0aW9ucyIsImdldFN0YXRlRXZlbnRzIiwiZ2V0VXNlcklkIiwiY29udGVudCIsImdldENvbnRlbnQiLCJtZW1iZXJzaGlwIiwiZGlzcGxheW5hbWUiLCJzZW5kU3RhdGVFdmVudCIsInVybCIsInVzZXJJZCIsImF2YXRhcl91cmwiLCJzZXRBdmF0YXJVcmwiLCJzZXRSb29tVG9waWMiLCJ0b3BpY0V2ZW50cyIsInRvcGljIiwidG9waWNIdG1sIiwiSW5mb0RpYWxvZyIsInRpdGxlIiwibmFtZSIsIl9faHRtbCIsImhhc0Nsb3NlQnV0dG9uIiwic2V0Um9vbU5hbWUiLCJVSUNvbXBvbmVudCIsIkludml0ZVVzZXJzIiwiYWRkcmVzcyIsInJlYXNvbiIsInNwbGl0IiwicHJvbSIsImdldElkZW50aXR5U2VydmVyVXJsIiwiZGVmYXVsdElkZW50aXR5U2VydmVyVXJsIiwiUXVlc3Rpb25EaWFsb2ciLCJkZWZhdWx0SWRlbnRpdHlTZXJ2ZXJOYW1lIiwiYnV0dG9uIiwidXNlRGVmYXVsdCIsIkVycm9yIiwiaW52aXRlciIsIk11bHRpSW52aXRlciIsImdldENvbXBsZXRpb25TdGF0ZSIsImdldEVycm9yVGV4dCIsInBhcmFtcyIsImxlbmd0aCIsImlzUGVybWFsaW5rIiwic3RhcnRzV2l0aCIsInBhcnNlZFVybCIsIlVSTCIsImhvc3RuYW1lIiwiaG9zdCIsInJvb21BbGlhcyIsImdldERvbWFpbiIsImRpcyIsImRpc3BhdGNoIiwiYWN0aW9uIiwiQWN0aW9uIiwiVmlld1Jvb20iLCJyb29tX2FsaWFzIiwiYXV0b19qb2luIiwiX3R5cGUiLCJ2aWFTZXJ2ZXJzIiwicm9vbV9pZCIsInZpYV9zZXJ2ZXJzIiwicGVybWFsaW5rUGFydHMiLCJyb29tSWRPckFsaWFzIiwiZW50aXR5IiwiZXZlbnRJZCIsInRhcmdldFJvb21JZCIsIm1hdGNoZXMiLCJtYXRjaCIsInJvb21zIiwiZ2V0Um9vbXMiLCJpIiwiYWxpYXNFdmVudHMiLCJqIiwiayIsImtpY2siLCJiYW4iLCJ1bmJhbiIsImlnbm9yZWRVc2VycyIsImdldElnbm9yZWRVc2VycyIsInB1c2giLCJzZXRJZ25vcmVkVXNlcnMiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJSb29tVmlld1N0b3JlIiwiZ2V0Um9vbUlkIiwibWF5U2VuZFN0YXRlRXZlbnQiLCJFdmVudFR5cGUiLCJSb29tUG93ZXJMZXZlbHMiLCJwb3dlckxldmVsIiwidW5kZWZpbmVkIiwicGFyc2VJbnQiLCJpc05hTiIsIm1lbWJlciIsImdldE1lbWJlciIsIkVmZmVjdGl2ZU1lbWJlcnNoaXAiLCJMZWF2ZSIsInBvd2VyTGV2ZWxFdmVudCIsInNldFBvd2VyTGV2ZWwiLCJ1c2VycyIsImNyZWF0ZURpYWxvZyIsIkRldnRvb2xzRGlhbG9nIiwiYWR2YW5jZWQiLCJTZXR0aW5nc1N0b3JlIiwiZ2V0VmFsdWUiLCJVSUZlYXR1cmUiLCJXaWRnZXRzIiwid2lkZ2V0VXJsIiwidG9Mb3dlckNhc2UiLCJlbWJlZCIsImNoaWxkTm9kZXMiLCJpZnJhbWUiLCJ0YWdOYW1lIiwiYXR0cnMiLCJzcmNBdHRyIiwiZmluZCIsImEiLCJsb2dnZXIiLCJsb2ciLCJXaWRnZXRVdGlscyIsImNhblVzZXJNb2RpZnlXaWRnZXRzIiwibm93TXMiLCJEYXRlIiwiZ2V0VGltZSIsIndpZGdldElkIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidHlwZSIsIldpZGdldFR5cGUiLCJDVVNUT00iLCJkYXRhIiwiaml0c2lEYXRhIiwiSml0c2kiLCJnZXRJbnN0YW5jZSIsInBhcnNlUHJlZmVycmVkQ29uZmVyZW5jZVVybCIsIkpJVFNJIiwiZ2V0TG9jYWxKaXRzaVdyYXBwZXJVcmwiLCJzZXRSb29tV2lkZ2V0IiwiZGV2aWNlSWQiLCJmaW5nZXJwcmludCIsImRldmljZSIsImdldFN0b3JlZERldmljZSIsImRldmljZVRydXN0IiwiY2hlY2tEZXZpY2VUcnVzdCIsImlzVmVyaWZpZWQiLCJnZXRGaW5nZXJwcmludCIsImZwcmludCIsInNldERldmljZVZlcmlmaWVkIiwiZm9yY2VEaXNjYXJkU2Vzc2lvbiIsImUiLCJtYWtlSHRtbEVtb3RlIiwiU2xhc2hDb21tYW5kSGVscERpYWxvZyIsIlZpZXdVc2VyIiwiU2RrQ29uZmlnIiwiYnVnX3JlcG9ydF9lbmRwb2ludF91cmwiLCJCdWdSZXBvcnREaWFsb2ciLCJpbml0aWFsVGV4dCIsImlzUGhvbmVOdW1iZXIiLCJ0ZXN0IiwicmVzdWx0cyIsIkNhbGxIYW5kbGVyIiwic2hhcmVkSW5zdGFuY2UiLCJwc3RuTG9va3VwIiwic3RhdGUiLCJ1c2VyaWQiLCJtc2ciLCJzbGljZSIsInNlbmRUZXh0TWVzc2FnZSIsImNhbGwiLCJnZXRDYWxsRm9yUm9vbSIsInNldFJlbW90ZU9uSG9sZCIsIkNIQVRfRUZGRUNUUyIsIm1hcCIsImVmZmVjdCIsImZhbGxiYWNrTWVzc2FnZSIsInNlbmRFbW90ZU1lc3NhZ2UiLCJtc2d0eXBlIiwibXNnVHlwZSIsImJvZHkiLCJzZW5kTWVzc2FnZSIsImVmZmVjdHMiLCJDb21tYW5kTWFwIiwiTWFwIiwiZm9yRWFjaCIsImNtZCIsInNldCIsImFsaWFzIiwicGFyc2VDb21tYW5kU3RyaW5nIiwiaW5wdXQiLCJyZXBsYWNlIiwiYml0cyIsInN1YnN0cmluZyIsImhhcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQW1CQTs7QUFFQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7OztBQU9BLE1BQU1BLGVBQWUsR0FBRyxZQUEwQjtB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LENBQUQsQ0FBSixDQUFRQyxTQUFSLENBQWtCLENBQWxCLEVBQXFCbEYsV0FBckIsRUFBTjtBQUNBMUosSUFBQUEsSUFBSSxHQUFHMk8sSUFBSSxDQUFDLENBQUQsQ0FBWDtBQUNILEdBSEQsTUFHTztBQUNITixJQUFBQSxHQUFHLEdBQUdJLEtBQU47QUFDSDs7QUFFRCxTQUFPO0FBQUVKLElBQUFBLEdBQUY7QUFBT3JPLElBQUFBO0FBQVAsR0FBUDtBQUNIOztBQU9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTUyxVQUFULENBQW9CZ08sS0FBcEIsRUFBeUM7QUFDNUMsUUFBTTtBQUFFSixJQUFBQSxHQUFGO0FBQU9yTyxJQUFBQTtBQUFQLE1BQWdCd08sa0JBQWtCLENBQUNDLEtBQUQsQ0FBeEM7O0FBRUEsTUFBSVAsVUFBVSxDQUFDVyxHQUFYLENBQWVSLEdBQWYsS0FBdUJILFVBQVUsQ0FBQzNPLEdBQVgsQ0FBZThPLEdBQWYsRUFBb0I5TixTQUFwQixFQUEzQixFQUE0RDtBQUN4RCxXQUFPO0FBQ0g4TixNQUFBQSxHQUFHLEVBQUVILFVBQVUsQ0FBQzNPLEdBQVgsQ0FBZThPLEdBQWYsQ0FERjtBQUVIck8sTUFBQUE7QUFGRyxLQUFQO0FBSUg7O0FBQ0QsU0FBTyxFQUFQO0FBQ0giLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMTUsIDIwMTYgT3Blbk1hcmtldCBMdGRcbkNvcHlyaWdodCAyMDE4IE5ldyBWZWN0b3IgTHRkXG5Db3B5cmlnaHQgMjAxOSBNaWNoYWVsIFRlbGF0eW5za2kgPDd0M2NoZ3V5QGdtYWlsLmNvbT5cbkNvcHlyaWdodCAyMDIwIFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvdXNlclwiO1xuaW1wb3J0IHsgRXZlbnRUeXBlIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL0B0eXBlcy9ldmVudFwiO1xuXG5pbXBvcnQgKiBhcyBDb250ZW50SGVscGVycyBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9jb250ZW50LWhlbHBlcnMnO1xuaW1wb3J0IHsgTWF0cml4Q2xpZW50UGVnIH0gZnJvbSAnLi9NYXRyaXhDbGllbnRQZWcnO1xuaW1wb3J0IGRpcyBmcm9tICcuL2Rpc3BhdGNoZXIvZGlzcGF0Y2hlcic7XG5pbXBvcnQgeyBfdCwgX3RkIH0gZnJvbSAnLi9sYW5ndWFnZUhhbmRsZXInO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4vTW9kYWwnO1xuaW1wb3J0IE11bHRpSW52aXRlciBmcm9tICcuL3V0aWxzL011bHRpSW52aXRlcic7XG5pbXBvcnQgeyBsaW5raWZ5QW5kU2FuaXRpemVIdG1sIH0gZnJvbSAnLi9IdG1sVXRpbHMnO1xuaW1wb3J0IFF1ZXN0aW9uRGlhbG9nIGZyb20gXCIuL2NvbXBvbmVudHMvdmlld3MvZGlhbG9ncy9RdWVzdGlvbkRpYWxvZ1wiO1xuaW1wb3J0IFdpZGdldFV0aWxzIGZyb20gXCIuL3V0aWxzL1dpZGdldFV0aWxzXCI7XG5pbXBvcnQgeyB0ZXh0VG9IdG1sUmFpbmJvdyB9IGZyb20gXCIuL3V0aWxzL2NvbG91clwiO1xuaW1wb3J0IHsgZ2V0QWRkcmVzc1R5cGUgfSBmcm9tICcuL1VzZXJBZGRyZXNzJztcbmltcG9ydCB7IGFiYnJldmlhdGVVcmwgfSBmcm9tICcuL3V0aWxzL1VybFV0aWxzJztcbmltcG9ydCB7IGdldERlZmF1bHRJZGVudGl0eVNlcnZlclVybCwgdXNlRGVmYXVsdElkZW50aXR5U2VydmVyIH0gZnJvbSAnLi91dGlscy9JZGVudGl0eVNlcnZlclV0aWxzJztcbmltcG9ydCB7IGlzUGVybWFsaW5rSG9zdCwgcGFyc2VQZXJtYWxpbmsgfSBmcm9tIFwiLi91dGlscy9wZXJtYWxpbmtzL1Blcm1hbGlua3NcIjtcbmltcG9ydCB7IFdpZGdldFR5cGUgfSBmcm9tIFwiLi93aWRnZXRzL1dpZGdldFR5cGVcIjtcbmltcG9ydCB7IEppdHNpIH0gZnJvbSBcIi4vd2lkZ2V0cy9KaXRzaVwiO1xuaW1wb3J0IHsgcGFyc2VGcmFnbWVudCBhcyBwYXJzZUh0bWwsIEVsZW1lbnQgYXMgQ2hpbGRFbGVtZW50IH0gZnJvbSBcInBhcnNlNVwiO1xuaW1wb3J0IEJ1Z1JlcG9ydERpYWxvZyBmcm9tIFwiLi9jb21wb25lbnRzL3ZpZXdzL2RpYWxvZ3MvQnVnUmVwb3J0RGlhbG9nXCI7XG5pbXBvcnQgeyBlbnN1cmVETUV4aXN0cyB9IGZyb20gXCIuL2NyZWF0ZVJvb21cIjtcbmltcG9ydCB7IFZpZXdVc2VyUGF5bG9hZCB9IGZyb20gXCIuL2Rpc3BhdGNoZXIvcGF5bG9hZHMvVmlld1VzZXJQYXlsb2FkXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9kaXNwYXRjaGVyL2FjdGlvbnNcIjtcbmltcG9ydCB7IEVmZmVjdGl2ZU1lbWJlcnNoaXAsIGdldEVmZmVjdGl2ZU1lbWJlcnNoaXAsIGxlYXZlUm9vbUJlaGF2aW91ciB9IGZyb20gXCIuL3V0aWxzL21lbWJlcnNoaXBcIjtcbmltcG9ydCBTZGtDb25maWcgZnJvbSBcIi4vU2RrQ29uZmlnXCI7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwiLi9zZXR0aW5ncy9TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgeyBVSUNvbXBvbmVudCwgVUlGZWF0dXJlIH0gZnJvbSBcIi4vc2V0dGluZ3MvVUlGZWF0dXJlXCI7XG5pbXBvcnQgeyBDSEFUX0VGRkVDVFMgfSBmcm9tIFwiLi9lZmZlY3RzXCI7XG5pbXBvcnQgQ2FsbEhhbmRsZXIgZnJvbSBcIi4vQ2FsbEhhbmRsZXJcIjtcbmltcG9ydCB7IGd1ZXNzQW5kU2V0RE1Sb29tIH0gZnJvbSBcIi4vUm9vbXNcIjtcbmltcG9ydCB7IHVwZ3JhZGVSb29tIH0gZnJvbSAnLi91dGlscy9Sb29tVXBncmFkZSc7XG5pbXBvcnQgVXBsb2FkQ29uZmlybURpYWxvZyBmcm9tICcuL2NvbXBvbmVudHMvdmlld3MvZGlhbG9ncy9VcGxvYWRDb25maXJtRGlhbG9nJztcbmltcG9ydCBEZXZ0b29sc0RpYWxvZyBmcm9tICcuL2NvbXBvbmVudHMvdmlld3MvZGlhbG9ncy9EZXZ0b29sc0RpYWxvZyc7XG5pbXBvcnQgUm9vbVVwZ3JhZGVXYXJuaW5nRGlhbG9nIGZyb20gXCIuL2NvbXBvbmVudHMvdmlld3MvZGlhbG9ncy9Sb29tVXBncmFkZVdhcm5pbmdEaWFsb2dcIjtcbmltcG9ydCBJbmZvRGlhbG9nIGZyb20gXCIuL2NvbXBvbmVudHMvdmlld3MvZGlhbG9ncy9JbmZvRGlhbG9nXCI7XG5pbXBvcnQgU2xhc2hDb21tYW5kSGVscERpYWxvZyBmcm9tIFwiLi9jb21wb25lbnRzL3ZpZXdzL2RpYWxvZ3MvU2xhc2hDb21tYW5kSGVscERpYWxvZ1wiO1xuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvbG9nZ2VyXCI7XG5pbXBvcnQgeyBzaG91bGRTaG93Q29tcG9uZW50IH0gZnJvbSBcIi4vY3VzdG9taXNhdGlvbnMvaGVscGVycy9VSUNvbXBvbmVudHNcIjtcbmltcG9ydCB7IFRpbWVsaW5lUmVuZGVyaW5nVHlwZSB9IGZyb20gJy4vY29udGV4dHMvUm9vbUNvbnRleHQnO1xuaW1wb3J0IFJvb21WaWV3U3RvcmUgZnJvbSBcIi4vc3RvcmVzL1Jvb21WaWV3U3RvcmVcIjtcblxuLy8gWFhYOiB3b3JrYXJvdW5kIGZvciBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzMxODE2XG5pbnRlcmZhY2UgSFRNTElucHV0RXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gICAgdGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50ICYgRXZlbnRUYXJnZXQ7XG59XG5cbmNvbnN0IHNpbmdsZU14Y1VwbG9hZCA9IGFzeW5jICgpOiBQcm9taXNlPGFueT4gPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zdCBmaWxlU2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBmaWxlU2VsZWN0b3Iuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2ZpbGUnKTtcbiAgICAgICAgZmlsZVNlbGVjdG9yLm9uY2hhbmdlID0gKGV2OiBIVE1MSW5wdXRFdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGV2LnRhcmdldC5maWxlc1swXTtcblxuICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnVXBsb2FkIEZpbGVzIGNvbmZpcm1hdGlvbicsICcnLCBVcGxvYWRDb25maXJtRGlhbG9nLCB7XG4gICAgICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICAgICBvbkZpbmlzaGVkOiAoc2hvdWxkQ29udGludWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzaG91bGRDb250aW51ZSA/IE1hdHJpeENsaWVudFBlZy5nZXQoKS51cGxvYWRDb250ZW50KGZpbGUpIDogbnVsbCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZpbGVTZWxlY3Rvci5jbGljaygpO1xuICAgIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IENvbW1hbmRDYXRlZ29yaWVzID0ge1xuICAgIFwibWVzc2FnZXNcIjogX3RkKFwiTWVzc2FnZXNcIiksXG4gICAgXCJhY3Rpb25zXCI6IF90ZChcIkFjdGlvbnNcIiksXG4gICAgXCJhZG1pblwiOiBfdGQoXCJBZG1pblwiKSxcbiAgICBcImFkdmFuY2VkXCI6IF90ZChcIkFkdmFuY2VkXCIpLFxuICAgIFwiZWZmZWN0c1wiOiBfdGQoXCJFZmZlY3RzXCIpLFxuICAgIFwib3RoZXJcIjogX3RkKFwiT3RoZXJcIiksXG59O1xuXG50eXBlIFJ1bkZuID0gKChyb29tSWQ6IHN0cmluZywgYXJnczogc3RyaW5nLCBjbWQ6IHN0cmluZykgPT4ge2Vycm9yOiBhbnl9IHwge3Byb21pc2U6IFByb21pc2U8YW55Pn0pO1xuXG5pbnRlcmZhY2UgSUNvbW1hbmRPcHRzIHtcbiAgICBjb21tYW5kOiBzdHJpbmc7XG4gICAgYWxpYXNlcz86IHN0cmluZ1tdO1xuICAgIGFyZ3M/OiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBydW5Gbj86IFJ1bkZuO1xuICAgIGNhdGVnb3J5OiBzdHJpbmc7XG4gICAgaGlkZUNvbXBsZXRpb25BZnRlclNwYWNlPzogYm9vbGVhbjtcbiAgICBpc0VuYWJsZWQ/KCk6IGJvb2xlYW47XG4gICAgcmVuZGVyaW5nVHlwZXM/OiBUaW1lbGluZVJlbmRlcmluZ1R5cGVbXTtcbn1cblxuZXhwb3J0IGNsYXNzIENvbW1hbmQge1xuICAgIGNvbW1hbmQ6IHN0cmluZztcbiAgICBhbGlhc2VzOiBzdHJpbmdbXTtcbiAgICBhcmdzOiB1bmRlZmluZWQgfCBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBydW5GbjogdW5kZWZpbmVkIHwgUnVuRm47XG4gICAgY2F0ZWdvcnk6IHN0cmluZztcbiAgICBoaWRlQ29tcGxldGlvbkFmdGVyU3BhY2U6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfaXNFbmFibGVkPzogKCkgPT4gYm9vbGVhbjtcbiAgICBwdWJsaWMgcmVuZGVyaW5nVHlwZXM/OiBUaW1lbGluZVJlbmRlcmluZ1R5cGVbXTtcblxuICAgIGNvbnN0cnVjdG9yKG9wdHM6IElDb21tYW5kT3B0cykge1xuICAgICAgICB0aGlzLmNvbW1hbmQgPSBvcHRzLmNvbW1hbmQ7XG4gICAgICAgIHRoaXMuYWxpYXNlcyA9IG9wdHMuYWxpYXNlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5hcmdzID0gb3B0cy5hcmdzIHx8IFwiXCI7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBvcHRzLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLnJ1bkZuID0gb3B0cy5ydW5GbjtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IG9wdHMuY2F0ZWdvcnkgfHwgQ29tbWFuZENhdGVnb3JpZXMub3RoZXI7XG4gICAgICAgIHRoaXMuaGlkZUNvbXBsZXRpb25BZnRlclNwYWNlID0gb3B0cy5oaWRlQ29tcGxldGlvbkFmdGVyU3BhY2UgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IG9wdHMuaXNFbmFibGVkO1xuICAgICAgICB0aGlzLnJlbmRlcmluZ1R5cGVzID0gb3B0cy5yZW5kZXJpbmdUeXBlcztcbiAgICB9XG5cbiAgICBnZXRDb21tYW5kKCkge1xuICAgICAgICByZXR1cm4gYC8ke3RoaXMuY29tbWFuZH1gO1xuICAgIH1cblxuICAgIGdldENvbW1hbmRXaXRoQXJncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tbWFuZCgpICsgXCIgXCIgKyB0aGlzLmFyZ3M7XG4gICAgfVxuXG4gICAgcnVuKHJvb21JZDogc3RyaW5nLCB0aHJlYWRJZDogc3RyaW5nLCBhcmdzOiBzdHJpbmcpIHtcbiAgICAgICAgLy8gaWYgaXQgaGFzIG5vIHJ1bkZuIHRoZW4gaXRzIGFuIGlnbm9yZWQvbm9wIGNvbW1hbmQgKGF1dG9jb21wbGV0ZSBvbmx5KSBlLmcgYC9tZWBcbiAgICAgICAgaWYgKCF0aGlzLnJ1bkZuKSByZXR1cm4gcmVqZWN0KF90KFwiQ29tbWFuZCBlcnJvclwiKSk7XG5cbiAgICAgICAgY29uc3QgcmVuZGVyaW5nVHlwZSA9IHRocmVhZElkXG4gICAgICAgICAgICA/IFRpbWVsaW5lUmVuZGVyaW5nVHlwZS5UaHJlYWRcbiAgICAgICAgICAgIDogVGltZWxpbmVSZW5kZXJpbmdUeXBlLlJvb207XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmluZ1R5cGVzICYmICF0aGlzLnJlbmRlcmluZ1R5cGVzPy5pbmNsdWRlcyhyZW5kZXJpbmdUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChfdChcIkNvbW1hbmQgZXJyb3JcIikpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucnVuRm4uYmluZCh0aGlzKShyb29tSWQsIGFyZ3MpO1xuICAgIH1cblxuICAgIGdldFVzYWdlKCkge1xuICAgICAgICByZXR1cm4gX3QoJ1VzYWdlJykgKyAnOiAnICsgdGhpcy5nZXRDb21tYW5kV2l0aEFyZ3MoKTtcbiAgICB9XG5cbiAgICBpc0VuYWJsZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0VuYWJsZWQgPyB0aGlzLl9pc0VuYWJsZWQoKSA6IHRydWU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWplY3QoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xufVxuXG5mdW5jdGlvbiBzdWNjZXNzKHByb21pc2U/OiBQcm9taXNlPGFueT4pIHtcbiAgICByZXR1cm4geyBwcm9taXNlIH07XG59XG5cbmZ1bmN0aW9uIHN1Y2Nlc3NTeW5jKHZhbHVlOiBhbnkpIHtcbiAgICByZXR1cm4gc3VjY2VzcyhQcm9taXNlLnJlc29sdmUodmFsdWUpKTtcbn1cblxuLyogRGlzYWJsZSB0aGUgXCJ1bmV4cGVjdGVkIHRoaXNcIiBlcnJvciBmb3IgdGhlc2UgY29tbWFuZHMgLSBhbGwgb2YgdGhlIHJ1blxuICogZnVuY3Rpb25zIGFyZSBjYWxsZWQgd2l0aCBgdGhpc2AgYm91bmQgdG8gdGhlIENvbW1hbmQgaW5zdGFuY2UuXG4gKi9cblxuZXhwb3J0IGNvbnN0IENvbW1hbmRzID0gW1xuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogJ3Nwb2lsZXInLFxuICAgICAgICBhcmdzOiAnPG1lc3NhZ2U+JyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnU2VuZHMgdGhlIGdpdmVuIG1lc3NhZ2UgYXMgYSBzcG9pbGVyJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzU3luYyhDb250ZW50SGVscGVycy5tYWtlSHRtbE1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBgPHNwYW4gZGF0YS1teC1zcG9pbGVyPiR7bWVzc2FnZX08L3NwYW4+YCxcbiAgICAgICAgICAgICkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMubWVzc2FnZXMsXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAnc2hydWcnLFxuICAgICAgICBhcmdzOiAnPG1lc3NhZ2U+JyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnUHJlcGVuZHMgwq9cXFxcXyjjg4QpXy/CryB0byBhIHBsYWluLXRleHQgbWVzc2FnZScpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICfCr1xcXFxfKOODhClfL8KvJztcbiAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnICcgKyBhcmdzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3NTeW5jKENvbnRlbnRIZWxwZXJzLm1ha2VUZXh0TWVzc2FnZShtZXNzYWdlKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5tZXNzYWdlcyxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6ICd0YWJsZWZsaXAnLFxuICAgICAgICBhcmdzOiAnPG1lc3NhZ2U+JyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnUHJlcGVuZHMgKOKVr8Kw4pahwrDvvInila/vuLUg4pS74pSB4pS7IHRvIGEgcGxhaW4tdGV4dCBtZXNzYWdlJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJyjila/CsOKWocKw77yJ4pWv77i1IOKUu+KUgeKUuyc7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJyAnICsgYXJncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzU3luYyhDb250ZW50SGVscGVycy5tYWtlVGV4dE1lc3NhZ2UobWVzc2FnZSkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMubWVzc2FnZXMsXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAndW5mbGlwJyxcbiAgICAgICAgYXJnczogJzxtZXNzYWdlPicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoJ1ByZXBlbmRzIOKUrOKUgOKUgOKUrCDjg44oIOOCnC3jgpzjg44pIHRvIGEgcGxhaW4tdGV4dCBtZXNzYWdlJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGxldCBtZXNzYWdlID0gJ+KUrOKUgOKUgOKUrCDjg44oIOOCnC3jgpzjg44pJztcbiAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnICcgKyBhcmdzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3NTeW5jKENvbnRlbnRIZWxwZXJzLm1ha2VUZXh0TWVzc2FnZShtZXNzYWdlKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5tZXNzYWdlcyxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6ICdsZW5ueScsXG4gICAgICAgIGFyZ3M6ICc8bWVzc2FnZT4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKCdQcmVwZW5kcyAoIM2hwrAgzZzKliDNocKwKSB0byBhIHBsYWluLXRleHQgbWVzc2FnZScpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICcoIM2hwrAgzZzKliDNocKwKSc7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJyAnICsgYXJncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzU3luYyhDb250ZW50SGVscGVycy5tYWtlVGV4dE1lc3NhZ2UobWVzc2FnZSkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMubWVzc2FnZXMsXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAncGxhaW4nLFxuICAgICAgICBhcmdzOiAnPG1lc3NhZ2U+JyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnU2VuZHMgYSBtZXNzYWdlIGFzIHBsYWluIHRleHQsIHdpdGhvdXQgaW50ZXJwcmV0aW5nIGl0IGFzIG1hcmtkb3duJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIG1lc3NhZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VjY2Vzc1N5bmMoQ29udGVudEhlbHBlcnMubWFrZVRleHRNZXNzYWdlKG1lc3NhZ2VzKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5tZXNzYWdlcyxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6ICdodG1sJyxcbiAgICAgICAgYXJnczogJzxtZXNzYWdlPicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoJ1NlbmRzIGEgbWVzc2FnZSBhcyBodG1sLCB3aXRob3V0IGludGVycHJldGluZyBpdCBhcyBtYXJrZG93bicpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBtZXNzYWdlcykge1xuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3NTeW5jKENvbnRlbnRIZWxwZXJzLm1ha2VIdG1sTWVzc2FnZShtZXNzYWdlcywgbWVzc2FnZXMpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLm1lc3NhZ2VzLFxuICAgIH0pLFxuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogJ3VwZ3JhZGVyb29tJyxcbiAgICAgICAgYXJnczogJzxuZXdfdmVyc2lvbj4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKCdVcGdyYWRlcyBhIHJvb20gdG8gYSBuZXcgdmVyc2lvbicpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsaSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByb29tID0gY2xpLmdldFJvb20ocm9vbUlkKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJvb20uY3VycmVudFN0YXRlLm1heUNsaWVudFNlbmRTdGF0ZUV2ZW50KFwibS5yb29tLnRvbWJzdG9uZVwiLCBjbGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoX3QoXCJZb3UgZG8gbm90IGhhdmUgdGhlIHJlcXVpcmVkIHBlcm1pc3Npb25zIHRvIHVzZSB0aGlzIGNvbW1hbmQuXCIpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7IGZpbmlzaGVkIH0gPSBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdTbGFzaCBDb21tYW5kcycsICd1cGdyYWRlIHJvb20gY29uZmlybWF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgUm9vbVVwZ3JhZGVXYXJuaW5nRGlhbG9nLCB7IHJvb21JZDogcm9vbUlkLCB0YXJnZXRWZXJzaW9uOiBhcmdzIH0sIC8qY2xhc3NOYW1lPSovbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgLyppc1ByaW9yaXR5PSovZmFsc2UsIC8qaXNTdGF0aWM9Ki90cnVlKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKGZpbmlzaGVkLnRoZW4oYXN5bmMgKFtyZXNwXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3A/LmNvbnRpbnVlKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHVwZ3JhZGVSb29tKHJvb20sIGFyZ3MsIHJlc3AuaW52aXRlKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KHRoaXMuZ2V0VXNhZ2UoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5hZG1pbixcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAnbmljaycsXG4gICAgICAgIGFyZ3M6ICc8ZGlzcGxheV9uYW1lPicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoJ0NoYW5nZXMgeW91ciBkaXNwbGF5IG5pY2tuYW1lJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoTWF0cml4Q2xpZW50UGVnLmdldCgpLnNldERpc3BsYXlOYW1lKGFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWplY3QodGhpcy5nZXRVc2FnZSgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLmFjdGlvbnMsXG4gICAgICAgIHJlbmRlcmluZ1R5cGVzOiBbVGltZWxpbmVSZW5kZXJpbmdUeXBlLlJvb21dLFxuICAgIH0pLFxuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogJ215cm9vbW5pY2snLFxuICAgICAgICBhbGlhc2VzOiBbJ3Jvb21uaWNrJ10sXG4gICAgICAgIGFyZ3M6ICc8ZGlzcGxheV9uYW1lPicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoJ0NoYW5nZXMgeW91ciBkaXNwbGF5IG5pY2tuYW1lIGluIHRoZSBjdXJyZW50IHJvb20gb25seScpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsaSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBldiA9IGNsaS5nZXRSb29tKHJvb21JZCkuY3VycmVudFN0YXRlLmdldFN0YXRlRXZlbnRzKCdtLnJvb20ubWVtYmVyJywgY2xpLmdldFVzZXJJZCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi4oZXYgPyBldi5nZXRDb250ZW50KCkgOiB7IG1lbWJlcnNoaXA6ICdqb2luJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheW5hbWU6IGFyZ3MsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzcyhjbGkuc2VuZFN0YXRlRXZlbnQocm9vbUlkLCAnbS5yb29tLm1lbWJlcicsIGNvbnRlbnQsIGNsaS5nZXRVc2VySWQoKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCh0aGlzLmdldFVzYWdlKCkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWN0aW9ucyxcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAncm9vbWF2YXRhcicsXG4gICAgICAgIGFyZ3M6ICdbPG14Y191cmw+XScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoJ0NoYW5nZXMgdGhlIGF2YXRhciBvZiB0aGUgY3VycmVudCByb29tJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGFyZ3MpO1xuICAgICAgICAgICAgaWYgKCFhcmdzKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IHNpbmdsZU14Y1VwbG9hZCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc3VjY2Vzcyhwcm9taXNlLnRoZW4oKHVybCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdXJsKSByZXR1cm47XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdHJpeENsaWVudFBlZy5nZXQoKS5zZW5kU3RhdGVFdmVudChyb29tSWQsICdtLnJvb20uYXZhdGFyJywgeyB1cmwgfSwgJycpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWN0aW9ucyxcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAnbXlyb29tYXZhdGFyJyxcbiAgICAgICAgYXJnczogJ1s8bXhjX3VybD5dJyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnQ2hhbmdlcyB5b3VyIGF2YXRhciBpbiB0aGlzIGN1cnJlbnQgcm9vbSBvbmx5JyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJvb20gPSBjbGkuZ2V0Um9vbShyb29tSWQpO1xuICAgICAgICAgICAgY29uc3QgdXNlcklkID0gY2xpLmdldFVzZXJJZCgpO1xuXG4gICAgICAgICAgICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShhcmdzKTtcbiAgICAgICAgICAgIGlmICghYXJncykge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSBzaW5nbGVNeGNVcGxvYWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MocHJvbWlzZS50aGVuKCh1cmwpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXVybCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ID0gcm9vbS5jdXJyZW50U3RhdGUuZ2V0U3RhdGVFdmVudHMoJ20ucm9vbS5tZW1iZXInLCB1c2VySWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihldiA/IGV2LmdldENvbnRlbnQoKSA6IHsgbWVtYmVyc2hpcDogJ2pvaW4nIH0pLFxuICAgICAgICAgICAgICAgICAgICBhdmF0YXJfdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xpLnNlbmRTdGF0ZUV2ZW50KHJvb21JZCwgJ20ucm9vbS5tZW1iZXInLCBjb250ZW50LCB1c2VySWQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWN0aW9ucyxcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAnbXlhdmF0YXInLFxuICAgICAgICBhcmdzOiAnWzxteGNfdXJsPl0nLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKCdDaGFuZ2VzIHlvdXIgYXZhdGFyIGluIGFsbCByb29tcycpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShhcmdzKTtcbiAgICAgICAgICAgIGlmICghYXJncykge1xuICAgICAgICAgICAgICAgIHByb21pc2UgPSBzaW5nbGVNeGNVcGxvYWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MocHJvbWlzZS50aGVuKCh1cmwpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXVybCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRyaXhDbGllbnRQZWcuZ2V0KCkuc2V0QXZhdGFyVXJsKHVybCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5hY3Rpb25zLFxuICAgICAgICByZW5kZXJpbmdUeXBlczogW1RpbWVsaW5lUmVuZGVyaW5nVHlwZS5Sb29tXSxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6ICd0b3BpYycsXG4gICAgICAgIGFyZ3M6ICdbPHRvcGljPl0nLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKCdHZXRzIG9yIHNldHMgdGhlIHJvb20gdG9waWMnKSxcbiAgICAgICAgcnVuRm46IGZ1bmN0aW9uKHJvb21JZCwgYXJncykge1xuICAgICAgICAgICAgY29uc3QgY2xpID0gTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuICAgICAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzcyhjbGkuc2V0Um9vbVRvcGljKHJvb21JZCwgYXJncykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgcm9vbSA9IGNsaS5nZXRSb29tKHJvb21JZCk7XG4gICAgICAgICAgICBpZiAoIXJvb20pIHJldHVybiByZWplY3QoX3QoXCJGYWlsZWQgdG8gc2V0IHRvcGljXCIpKTtcblxuICAgICAgICAgICAgY29uc3QgdG9waWNFdmVudHMgPSByb29tLmN1cnJlbnRTdGF0ZS5nZXRTdGF0ZUV2ZW50cygnbS5yb29tLnRvcGljJywgJycpO1xuICAgICAgICAgICAgY29uc3QgdG9waWMgPSB0b3BpY0V2ZW50cyAmJiB0b3BpY0V2ZW50cy5nZXRDb250ZW50KCkudG9waWM7XG4gICAgICAgICAgICBjb25zdCB0b3BpY0h0bWwgPSB0b3BpYyA/IGxpbmtpZnlBbmRTYW5pdGl6ZUh0bWwodG9waWMpIDogX3QoJ1RoaXMgcm9vbSBoYXMgbm8gdG9waWMuJyk7XG5cbiAgICAgICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ1NsYXNoIENvbW1hbmRzJywgJ1RvcGljJywgSW5mb0RpYWxvZywge1xuICAgICAgICAgICAgICAgIHRpdGxlOiByb29tLm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IDxkaXYgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiB0b3BpY0h0bWwgfX0gLz4sXG4gICAgICAgICAgICAgICAgaGFzQ2xvc2VCdXR0b246IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5hZG1pbixcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAncm9vbW5hbWUnLFxuICAgICAgICBhcmdzOiAnPG5hbWU+JyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnU2V0cyB0aGUgcm9vbSBuYW1lJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoTWF0cml4Q2xpZW50UGVnLmdldCgpLnNldFJvb21OYW1lKHJvb21JZCwgYXJncykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCh0aGlzLmdldFVzYWdlKCkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWRtaW4sXG4gICAgICAgIHJlbmRlcmluZ1R5cGVzOiBbVGltZWxpbmVSZW5kZXJpbmdUeXBlLlJvb21dLFxuICAgIH0pLFxuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogJ2ludml0ZScsXG4gICAgICAgIGFyZ3M6ICc8dXNlci1pZD4gWzxyZWFzb24+XScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoJ0ludml0ZXMgdXNlciB3aXRoIGdpdmVuIGlkIHRvIGN1cnJlbnQgcm9vbScpLFxuICAgICAgICBpc0VuYWJsZWQ6ICgpID0+IHNob3VsZFNob3dDb21wb25lbnQoVUlDb21wb25lbnQuSW52aXRlVXNlcnMpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IFthZGRyZXNzLCByZWFzb25dID0gYXJncy5zcGxpdCgvXFxzKyguKykvKTtcbiAgICAgICAgICAgICAgICBpZiAoYWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgYSBNdWx0aUludml0ZXIgdG8gcmUtdXNlIHRoZSBpbnZpdGUgbG9naWMsIGV2ZW4gdGhvdWdoXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9ubHkgaW52aXRpbmcgb25lIHVzZXIuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIG5lZWQgYW4gaWRlbnRpdHkgc2VydmVyIGJ1dCBkb24ndCBoYXZlIG9uZSwgdGhpbmdzXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCBhIGJpdCBtb3JlIGNvbXBsZXggaGVyZSwgYnV0IHdlIHRyeSB0byBzaG93IHNvbWV0aGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBtZWFuaW5nZnVsLlxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvbSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRBZGRyZXNzVHlwZShhZGRyZXNzKSA9PT0gJ2VtYWlsJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIU1hdHJpeENsaWVudFBlZy5nZXQoKS5nZXRJZGVudGl0eVNlcnZlclVybCgpXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdElkZW50aXR5U2VydmVyVXJsID0gZ2V0RGVmYXVsdElkZW50aXR5U2VydmVyVXJsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdElkZW50aXR5U2VydmVyVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBmaW5pc2hlZCB9ID0gTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZzxbYm9vbGVhbl0+KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2xhc2ggQ29tbWFuZHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnSWRlbnRpdHkgc2VydmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUXVlc3Rpb25EaWFsb2csIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBfdChcIlVzZSBhbiBpZGVudGl0eSBzZXJ2ZXJcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogPHA+eyBfdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlVzZSBhbiBpZGVudGl0eSBzZXJ2ZXIgdG8gaW52aXRlIGJ5IGVtYWlsLiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDbGljayBjb250aW51ZSB0byB1c2UgdGhlIGRlZmF1bHQgaWRlbnRpdHkgc2VydmVyIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIiglKGRlZmF1bHRJZGVudGl0eVNlcnZlck5hbWUpcykgb3IgbWFuYWdlIGluIFNldHRpbmdzLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdElkZW50aXR5U2VydmVyTmFtZTogYWJicmV2aWF0ZVVybChkZWZhdWx0SWRlbnRpdHlTZXJ2ZXJVcmwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIH08L3A+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uOiBfdChcIkNvbnRpbnVlXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tID0gZmluaXNoZWQudGhlbigoW3VzZURlZmF1bHRdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VEZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VEZWZhdWx0SWRlbnRpdHlTZXJ2ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX3QoXCJVc2UgYW4gaWRlbnRpdHkgc2VydmVyIHRvIGludml0ZSBieSBlbWFpbC4gTWFuYWdlIGluIFNldHRpbmdzLlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoX3QoXCJVc2UgYW4gaWRlbnRpdHkgc2VydmVyIHRvIGludml0ZSBieSBlbWFpbC4gTWFuYWdlIGluIFNldHRpbmdzLlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW52aXRlciA9IG5ldyBNdWx0aUludml0ZXIocm9vbUlkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MocHJvbS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnZpdGVyLmludml0ZShbYWRkcmVzc10sIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludml0ZXIuZ2V0Q29tcGxldGlvblN0YXRlKGFkZHJlc3MpICE9PSBcImludml0ZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpbnZpdGVyLmdldEVycm9yVGV4dChhZGRyZXNzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KHRoaXMuZ2V0VXNhZ2UoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5hY3Rpb25zLFxuICAgICAgICByZW5kZXJpbmdUeXBlczogW1RpbWVsaW5lUmVuZGVyaW5nVHlwZS5Sb29tXSxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6ICdqb2luJyxcbiAgICAgICAgYWxpYXNlczogWydqJywgJ2dvdG8nXSxcbiAgICAgICAgYXJnczogJzxyb29tLWFkZHJlc3M+JyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnSm9pbnMgcm9vbSB3aXRoIGdpdmVuIGFkZHJlc3MnKSxcbiAgICAgICAgcnVuRm46IGZ1bmN0aW9uKHJvb21JZCwgYXJncykge1xuICAgICAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiB3ZSBzdXBwb3J0IDIgdmVyc2lvbnMgb2YgdGhpcyBjb21tYW5kLiBUaGUgZmlyc3QgaXNcbiAgICAgICAgICAgICAgICAvLyB0aGUgcHVibGljLWZhY2luZyBvbmUgZm9yIG1vc3QgdXNlcnMgYW5kIHRoZSBvdGhlciBpcyBhXG4gICAgICAgICAgICAgICAgLy8gcG93ZXItdXNlciBlZGl0aW9uIHdoZXJlIHNvbWVvbmUgbWF5IGpvaW4gdmlhIHBlcm1hbGluayBvclxuICAgICAgICAgICAgICAgIC8vIHJvb20gSUQgd2l0aCBvcHRpb25hbCBzZXJ2ZXJzLiBQcmFjdGljYWxseSwgdGhpcyByZXN1bHRzXG4gICAgICAgICAgICAgICAgLy8gaW4gdGhlIGZvbGxvd2luZyB2YXJpYXRpb25zOlxuICAgICAgICAgICAgICAgIC8vICAgL2pvaW4gI2V4YW1wbGU6ZXhhbXBsZS5vcmdcbiAgICAgICAgICAgICAgICAvLyAgIC9qb2luICFleGFtcGxlOmV4YW1wbGUub3JnXG4gICAgICAgICAgICAgICAgLy8gICAvam9pbiAhZXhhbXBsZTpleGFtcGxlLm9yZyBhbHRzZXJ2ZXIuY29tIGVsc2V3aGVyZS5jYVxuICAgICAgICAgICAgICAgIC8vICAgL2pvaW4gaHR0cHM6Ly9tYXRyaXgudG8vIy8hZXhhbXBsZTpleGFtcGxlLm9yZz92aWE9YWx0c2VydmVyLmNvbVxuICAgICAgICAgICAgICAgIC8vIFRoZSBjb21tYW5kIGFsc28gc3VwcG9ydHMgZXZlbnQgcGVybWFsaW5rcyB0cmFuc3BhcmVudGx5OlxuICAgICAgICAgICAgICAgIC8vICAgL2pvaW4gaHR0cHM6Ly9tYXRyaXgudG8vIy8hZXhhbXBsZTpleGFtcGxlLm9yZy8kc29tZXRoaW5nOmV4YW1wbGUub3JnXG4gICAgICAgICAgICAgICAgLy8gICAvam9pbiBodHRwczovL21hdHJpeC50by8jLyFleGFtcGxlOmV4YW1wbGUub3JnLyRzb21ldGhpbmc6ZXhhbXBsZS5vcmc/dmlhPWFsdHNlcnZlci5jb21cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBhcmdzLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPCAxKSByZXR1cm4gcmVqZWN0KHRoaXMuZ2V0VXNhZ2UoKSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgaXNQZXJtYWxpbmsgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zWzBdLnN0YXJ0c1dpdGgoXCJodHRwOlwiKSB8fCBwYXJhbXNbMF0uc3RhcnRzV2l0aChcImh0dHBzOlwiKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIGF0IGxlYXN0IGEgVVJMIC0gdHJ5IGFuZCBwdWxsIG91dCBhIGhvc3RuYW1lIHRvIGNoZWNrIGFnYWluc3QgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHBlcm1hbGluayBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwocGFyYW1zWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG9zdG5hbWUgPSBwYXJzZWRVcmwuaG9zdCB8fCBwYXJzZWRVcmwuaG9zdG5hbWU7IC8vIHRha2VzIGZpcnN0IG5vbi1mYWxzZXkgdmFsdWVcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSdyZSB1c2luZyBhIEVsZW1lbnQgcGVybWFsaW5rIGhhbmRsZXIsIHRoaXMgd2lsbCBjYXRjaCBpdCBiZWZvcmUgd2UgZ2V0IG11Y2ggZnVydGhlci5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2VlIGJlbG93IHdoZXJlIHdlIG1ha2UgYXNzdW1wdGlvbnMgYWJvdXQgcGFyc2luZyB0aGUgVVJMLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQZXJtYWxpbmtIb3N0KGhvc3RuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNQZXJtYWxpbmsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXNbMF1bMF0gPT09ICcjJykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcm9vbUFsaWFzID0gcGFyYW1zWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJvb21BbGlhcy5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb29tQWxpYXMgKz0gJzonICsgTWF0cml4Q2xpZW50UGVnLmdldCgpLmdldERvbWFpbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uLlZpZXdSb29tLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vbV9hbGlhczogcm9vbUFsaWFzLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b19qb2luOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3R5cGU6IFwic2xhc2hfY29tbWFuZFwiLCAvLyBpbnN0cnVtZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJhbXNbMF1bMF0gPT09ICchJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbcm9vbUlkLCAuLi52aWFTZXJ2ZXJzXSA9IHBhcmFtcztcblxuICAgICAgICAgICAgICAgICAgICBkaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uVmlld1Jvb20sXG4gICAgICAgICAgICAgICAgICAgICAgICByb29tX2lkOiByb29tSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2UgYXJlIHBhc3NlZCBkb3duIHRvIHRoZSBqcy1zZGsncyAvam9pbiBjYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlhU2VydmVyczogdmlhU2VydmVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWFfc2VydmVyczogdmlhU2VydmVycywgLy8gZm9yIHRoZSByZWpvaW4gYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvX2pvaW46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBfdHlwZTogXCJzbGFzaF9jb21tYW5kXCIsIC8vIGluc3RydW1lbnRhdGlvblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzUGVybWFsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcm1hbGlua1BhcnRzID0gcGFyc2VQZXJtYWxpbmsocGFyYW1zWzBdKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNoZWNrIHRlY2huaWNhbGx5IGlzbid0IG5lZWRlZCBiZWNhdXNlIHdlIGFscmVhZHkgZGlkIG91clxuICAgICAgICAgICAgICAgICAgICAvLyBzYWZldHkgY2hlY2tzIHVwIGFib3ZlLiBIb3dldmVyLCBmb3IgZ29vZCBtZWFzdXJlLCBsZXQncyBiZSBzdXJlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBlcm1hbGlua1BhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KHRoaXMuZ2V0VXNhZ2UoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBmb3Igc29tZSByZWFzb24gc29tZW9uZSB3YW50ZWQgdG8gam9pbiBhIGdyb3VwIG9yIHVzZXIsIHdlIHNob3VsZFxuICAgICAgICAgICAgICAgICAgICAvLyBzdG9wIHRoZW0gbm93LlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBlcm1hbGlua1BhcnRzLnJvb21JZE9yQWxpYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QodGhpcy5nZXRVc2FnZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHBlcm1hbGlua1BhcnRzLnJvb21JZE9yQWxpYXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpYVNlcnZlcnMgPSBwZXJtYWxpbmtQYXJ0cy52aWFTZXJ2ZXJzO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudElkID0gcGVybWFsaW5rUGFydHMuZXZlbnRJZDtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwYXRjaCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uLlZpZXdSb29tLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b19qb2luOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgX3R5cGU6IFwic2xhc2hfY29tbWFuZFwiLCAvLyBpbnN0cnVtZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5WzBdID09PSAnIScpIGRpc3BhdGNoW1wicm9vbV9pZFwiXSA9IGVudGl0eTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBkaXNwYXRjaFtcInJvb21fYWxpYXNcIl0gPSBlbnRpdHk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoW1wiZXZlbnRfaWRcIl0gPSBldmVudElkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hbXCJoaWdobGlnaHRlZFwiXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodmlhU2VydmVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIHRoZSBqb2luXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaFtcIm9wdHNcIl0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlc2UgYXJlIHBhc3NlZCBkb3duIHRvIHRoZSBqcy1zZGsncyAvam9pbiBjYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlhU2VydmVyczogdmlhU2VydmVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBpZiB0aGUgam9pbiBmYWlscyAocmVqb2luIGJ1dHRvbilcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoWyd2aWFfc2VydmVycyddID0gdmlhU2VydmVycztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGRpcy5kaXNwYXRjaChkaXNwYXRjaCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCh0aGlzLmdldFVzYWdlKCkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWN0aW9ucyxcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAncGFydCcsXG4gICAgICAgIGFyZ3M6ICdbPHJvb20tYWRkcmVzcz5dJyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnTGVhdmUgcm9vbScpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBjb25zdCBjbGkgPSBNYXRyaXhDbGllbnRQZWcuZ2V0KCk7XG5cbiAgICAgICAgICAgIGxldCB0YXJnZXRSb29tSWQ7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBhcmdzLm1hdGNoKC9eKFxcUyspJC8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByb29tQWxpYXMgPSBtYXRjaGVzWzFdO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm9vbUFsaWFzWzBdICE9PSAnIycpIHJldHVybiByZWplY3QodGhpcy5nZXRVc2FnZSgpKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJvb21BbGlhcy5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb29tQWxpYXMgKz0gJzonICsgY2xpLmdldERvbWFpbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgYSByb29tIHdpdGggdGhpcyBhbGlhc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tcyA9IGNsaS5nZXRSb29tcygpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvb21zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGlhc0V2ZW50cyA9IHJvb21zW2ldLmN1cnJlbnRTdGF0ZS5nZXRTdGF0ZUV2ZW50cygnbS5yb29tLmFsaWFzZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYWxpYXNFdmVudHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGlhc2VzID0gYWxpYXNFdmVudHNbal0uZ2V0Q29udGVudCgpLmFsaWFzZXMgfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBhbGlhc2VzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGlhc2VzW2tdID09PSByb29tQWxpYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFJvb21JZCA9IHJvb21zW2ldLnJvb21JZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRSb29tSWQpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFJvb21JZCkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRSb29tSWQpIHJldHVybiByZWplY3QoX3QoJ1VucmVjb2duaXNlZCByb29tIGFkZHJlc3M6JykgKyAnICcgKyByb29tQWxpYXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0YXJnZXRSb29tSWQpIHRhcmdldFJvb21JZCA9IHJvb21JZDtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKGxlYXZlUm9vbUJlaGF2aW91cih0YXJnZXRSb29tSWQpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLmFjdGlvbnMsXG4gICAgICAgIHJlbmRlcmluZ1R5cGVzOiBbVGltZWxpbmVSZW5kZXJpbmdUeXBlLlJvb21dLFxuICAgIH0pLFxuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogJ2tpY2snLFxuICAgICAgICBhcmdzOiAnPHVzZXItaWQ+IFtyZWFzb25dJyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnS2lja3MgdXNlciB3aXRoIGdpdmVuIGlkJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGFyZ3MubWF0Y2goL14oXFxTKz8pKCArKC4qKSk/JC8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKE1hdHJpeENsaWVudFBlZy5nZXQoKS5raWNrKHJvb21JZCwgbWF0Y2hlc1sxXSwgbWF0Y2hlc1szXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWplY3QodGhpcy5nZXRVc2FnZSgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLmFkbWluLFxuICAgICAgICByZW5kZXJpbmdUeXBlczogW1RpbWVsaW5lUmVuZGVyaW5nVHlwZS5Sb29tXSxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6ICdiYW4nLFxuICAgICAgICBhcmdzOiAnPHVzZXItaWQ+IFtyZWFzb25dJyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnQmFucyB1c2VyIHdpdGggZ2l2ZW4gaWQnKSxcbiAgICAgICAgcnVuRm46IGZ1bmN0aW9uKHJvb21JZCwgYXJncykge1xuICAgICAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gYXJncy5tYXRjaCgvXihcXFMrPykoICsoLiopKT8kLyk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoTWF0cml4Q2xpZW50UGVnLmdldCgpLmJhbihyb29tSWQsIG1hdGNoZXNbMV0sIG1hdGNoZXNbM10pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KHRoaXMuZ2V0VXNhZ2UoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5hZG1pbixcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAndW5iYW4nLFxuICAgICAgICBhcmdzOiAnPHVzZXItaWQ+JyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnVW5iYW5zIHVzZXIgd2l0aCBnaXZlbiBJRCcpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBhcmdzLm1hdGNoKC9eKFxcUyspJC8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB1c2VyIG1lbWJlcnNoaXAgdG8gXCJsZWF2ZVwiIHRvIHVuYmFuIGhpbVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzcyhNYXRyaXhDbGllbnRQZWcuZ2V0KCkudW5iYW4ocm9vbUlkLCBtYXRjaGVzWzFdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCh0aGlzLmdldFVzYWdlKCkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWRtaW4sXG4gICAgICAgIHJlbmRlcmluZ1R5cGVzOiBbVGltZWxpbmVSZW5kZXJpbmdUeXBlLlJvb21dLFxuICAgIH0pLFxuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogJ2lnbm9yZScsXG4gICAgICAgIGFyZ3M6ICc8dXNlci1pZD4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKCdJZ25vcmVzIGEgdXNlciwgaGlkaW5nIHRoZWlyIG1lc3NhZ2VzIGZyb20geW91JyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpID0gTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGFyZ3MubWF0Y2goL14oQFteOl0rOlxcUyspJC8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IG1hdGNoZXNbMV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlnbm9yZWRVc2VycyA9IGNsaS5nZXRJZ25vcmVkVXNlcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlZFVzZXJzLnB1c2godXNlcklkKTsgLy8gZGUtZHVwZWQgaW50ZXJuYWxseSBpbiB0aGUganMtc2RrXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpLnNldElnbm9yZWRVc2VycyhpZ25vcmVkVXNlcnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ1NsYXNoIENvbW1hbmRzJywgJ1VzZXIgaWdub3JlZCcsIEluZm9EaWFsb2csIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF90KCdJZ25vcmVkIHVzZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD57IF90KCdZb3UgYXJlIG5vdyBpZ25vcmluZyAlKHVzZXJJZClzJywgeyB1c2VySWQgfSkgfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCh0aGlzLmdldFVzYWdlKCkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWN0aW9ucyxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6ICd1bmlnbm9yZScsXG4gICAgICAgIGFyZ3M6ICc8dXNlci1pZD4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKCdTdG9wcyBpZ25vcmluZyBhIHVzZXIsIHNob3dpbmcgdGhlaXIgbWVzc2FnZXMgZ29pbmcgZm9yd2FyZCcpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsaSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBhcmdzLm1hdGNoKC8oXkBbXjpdKzpcXFMrJCkvKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VySWQgPSBtYXRjaGVzWzFdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZ25vcmVkVXNlcnMgPSBjbGkuZ2V0SWdub3JlZFVzZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gaWdub3JlZFVzZXJzLmluZGV4T2YodXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgaWdub3JlZFVzZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpLnNldElnbm9yZWRVc2VycyhpZ25vcmVkVXNlcnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ1NsYXNoIENvbW1hbmRzJywgJ1VzZXIgdW5pZ25vcmVkJywgSW5mb0RpYWxvZywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogX3QoJ1VuaWdub3JlZCB1c2VyJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+eyBfdCgnWW91IGFyZSBubyBsb25nZXIgaWdub3JpbmcgJSh1c2VySWQpcycsIHsgdXNlcklkIH0pIH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWplY3QodGhpcy5nZXRVc2FnZSgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLmFjdGlvbnMsXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAnb3AnLFxuICAgICAgICBhcmdzOiAnPHVzZXItaWQ+IFs8cG93ZXItbGV2ZWw+XScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoJ0RlZmluZSB0aGUgcG93ZXIgbGV2ZWwgb2YgYSB1c2VyJyksXG4gICAgICAgIGlzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJvb20gPSBjbGkuZ2V0Um9vbShSb29tVmlld1N0b3JlLmdldFJvb21JZCgpKTtcbiAgICAgICAgICAgIHJldHVybiByb29tPy5jdXJyZW50U3RhdGUubWF5U2VuZFN0YXRlRXZlbnQoRXZlbnRUeXBlLlJvb21Qb3dlckxldmVscywgY2xpLmdldFVzZXJJZCgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgcnVuRm46IGZ1bmN0aW9uKHJvb21JZCwgYXJncykge1xuICAgICAgICAgICAgaWYgKGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gYXJncy5tYXRjaCgvXihcXFMrPykoICsoLT9cXGQrKSk/JC8pO1xuICAgICAgICAgICAgICAgIGxldCBwb3dlckxldmVsID0gNTA7IC8vIGRlZmF1bHQgcG93ZXIgbGV2ZWwgZm9yIG9wXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlcklkID0gbWF0Y2hlc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID09PSA0ICYmIHVuZGVmaW5lZCAhPT0gbWF0Y2hlc1szXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG93ZXJMZXZlbCA9IHBhcnNlSW50KG1hdGNoZXNbM10sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBvd2VyTGV2ZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGkgPSBNYXRyaXhDbGllbnRQZWcuZ2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tID0gY2xpLmdldFJvb20ocm9vbUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcm9vbSkgcmV0dXJuIHJlamVjdChfdChcIkNvbW1hbmQgZmFpbGVkXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbWJlciA9IHJvb20uZ2V0TWVtYmVyKHVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lbWJlciB8fCBnZXRFZmZlY3RpdmVNZW1iZXJzaGlwKG1lbWJlci5tZW1iZXJzaGlwKSA9PT0gRWZmZWN0aXZlTWVtYmVyc2hpcC5MZWF2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoX3QoXCJDb3VsZCBub3QgZmluZCB1c2VyIGluIHJvb21cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG93ZXJMZXZlbEV2ZW50ID0gcm9vbS5jdXJyZW50U3RhdGUuZ2V0U3RhdGVFdmVudHMoJ20ucm9vbS5wb3dlcl9sZXZlbHMnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzcyhjbGkuc2V0UG93ZXJMZXZlbChyb29tSWQsIHVzZXJJZCwgcG93ZXJMZXZlbCwgcG93ZXJMZXZlbEV2ZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KHRoaXMuZ2V0VXNhZ2UoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5hZG1pbixcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAnZGVvcCcsXG4gICAgICAgIGFyZ3M6ICc8dXNlci1pZD4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKCdEZW9wcyB1c2VyIHdpdGggZ2l2ZW4gaWQnKSxcbiAgICAgICAgaXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICAgICAgY29uc3QgY2xpID0gTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuICAgICAgICAgICAgY29uc3Qgcm9vbSA9IGNsaS5nZXRSb29tKFJvb21WaWV3U3RvcmUuZ2V0Um9vbUlkKCkpO1xuICAgICAgICAgICAgcmV0dXJuIHJvb20/LmN1cnJlbnRTdGF0ZS5tYXlTZW5kU3RhdGVFdmVudChFdmVudFR5cGUuUm9vbVBvd2VyTGV2ZWxzLCBjbGkuZ2V0VXNlcklkKCkpO1xuICAgICAgICB9LFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAoYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBhcmdzLm1hdGNoKC9eKFxcUyspJC8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vbSA9IGNsaS5nZXRSb29tKHJvb21JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcm9vbSkgcmV0dXJuIHJlamVjdChfdChcIkNvbW1hbmQgZmFpbGVkXCIpKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3dlckxldmVsRXZlbnQgPSByb29tLmN1cnJlbnRTdGF0ZS5nZXRTdGF0ZUV2ZW50cygnbS5yb29tLnBvd2VyX2xldmVscycsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwb3dlckxldmVsRXZlbnQuZ2V0Q29udGVudCgpLnVzZXJzW2FyZ3NdKSByZXR1cm4gcmVqZWN0KF90KFwiQ291bGQgbm90IGZpbmQgdXNlciBpbiByb29tXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoY2xpLnNldFBvd2VyTGV2ZWwocm9vbUlkLCBhcmdzLCB1bmRlZmluZWQsIHBvd2VyTGV2ZWxFdmVudCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWplY3QodGhpcy5nZXRVc2FnZSgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLmFkbWluLFxuICAgICAgICByZW5kZXJpbmdUeXBlczogW1RpbWVsaW5lUmVuZGVyaW5nVHlwZS5Sb29tXSxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6ICdkZXZ0b29scycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoJ09wZW5zIHRoZSBEZXZlbG9wZXIgVG9vbHMgZGlhbG9nJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQpIHtcbiAgICAgICAgICAgIE1vZGFsLmNyZWF0ZURpYWxvZyhEZXZ0b29sc0RpYWxvZywgeyByb29tSWQgfSk7XG4gICAgICAgICAgICByZXR1cm4gc3VjY2VzcygpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWR2YW5jZWQsXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAnYWRkd2lkZ2V0JyxcbiAgICAgICAgYXJnczogJzx1cmwgfCBlbWJlZCBjb2RlIHwgSml0c2kgdXJsPicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoJ0FkZHMgYSBjdXN0b20gd2lkZ2V0IGJ5IFVSTCB0byB0aGUgcm9vbScpLFxuICAgICAgICBpc0VuYWJsZWQ6ICgpID0+IFNldHRpbmdzU3RvcmUuZ2V0VmFsdWUoVUlGZWF0dXJlLldpZGdldHMpLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCB3aWRnZXRVcmwpIHtcbiAgICAgICAgICAgIGlmICghd2lkZ2V0VXJsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChfdChcIlBsZWFzZSBzdXBwbHkgYSB3aWRnZXQgVVJMIG9yIGVtYmVkIGNvZGVcIikpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUcnkgYW5kIHBhcnNlIG91dCBhIHdpZGdldCBVUkwgZnJvbSBpZnJhbWVzXG4gICAgICAgICAgICBpZiAod2lkZ2V0VXJsLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChcIjxpZnJhbWUgXCIpKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgdXNlIHBhcnNlNSwgd2hpY2ggZG9lc24ndCByZW5kZXIvY3JlYXRlIGEgRE9NIG5vZGUuIEl0IGluc3RlYWQgcnVuc1xuICAgICAgICAgICAgICAgIC8vIHNvbWUgc3VwZXJmYXN0IHJlZ2V4IG92ZXIgdGhlIHRleHQgc28gd2UgZG9uJ3QgaGF2ZSB0by5cbiAgICAgICAgICAgICAgICBjb25zdCBlbWJlZCA9IHBhcnNlSHRtbCh3aWRnZXRVcmwpO1xuICAgICAgICAgICAgICAgIGlmIChlbWJlZCAmJiBlbWJlZC5jaGlsZE5vZGVzICYmIGVtYmVkLmNoaWxkTm9kZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlmcmFtZSA9IGVtYmVkLmNoaWxkTm9kZXNbMF0gYXMgQ2hpbGRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWZyYW1lLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lmcmFtZScgJiYgaWZyYW1lLmF0dHJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNBdHRyID0gaWZyYW1lLmF0dHJzLmZpbmQoYSA9PiBhLm5hbWUgPT09ICdzcmMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coXCJQdWxsaW5nIFVSTCBvdXQgb2YgaWZyYW1lIChlbWJlZCBjb2RlKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldFVybCA9IHNyY0F0dHIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghd2lkZ2V0VXJsLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKSAmJiAhd2lkZ2V0VXJsLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChfdChcIlBsZWFzZSBzdXBwbHkgYSBodHRwczovLyBvciBodHRwOi8vIHdpZGdldCBVUkxcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFdpZGdldFV0aWxzLmNhblVzZXJNb2RpZnlXaWRnZXRzKHJvb21JZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VySWQgPSBNYXRyaXhDbGllbnRQZWcuZ2V0KCkuZ2V0VXNlcklkKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm93TXMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdpZGdldElkID0gZW5jb2RlVVJJQ29tcG9uZW50KGAke3Jvb21JZH1fJHt1c2VySWR9XyR7bm93TXN9YCk7XG4gICAgICAgICAgICAgICAgbGV0IHR5cGUgPSBXaWRnZXRUeXBlLkNVU1RPTTtcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IFwiQ3VzdG9tIFdpZGdldFwiO1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0ge307XG5cbiAgICAgICAgICAgICAgICAvLyBNYWtlIHRoZSB3aWRnZXQgYSBKaXRzaSB3aWRnZXQgaWYgaXQgbG9va3MgbGlrZSBhIEppdHNpIHdpZGdldFxuICAgICAgICAgICAgICAgIGNvbnN0IGppdHNpRGF0YSA9IEppdHNpLmdldEluc3RhbmNlKCkucGFyc2VQcmVmZXJyZWRDb25mZXJlbmNlVXJsKHdpZGdldFVybCk7XG4gICAgICAgICAgICAgICAgaWYgKGppdHNpRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKFwiTWFraW5nIC9hZGR3aWRnZXQgd2lkZ2V0IGEgSml0c2kgY29uZmVyZW5jZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IFdpZGdldFR5cGUuSklUU0k7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBcIkppdHNpIENvbmZlcmVuY2VcIjtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGppdHNpRGF0YTtcbiAgICAgICAgICAgICAgICAgICAgd2lkZ2V0VXJsID0gV2lkZ2V0VXRpbHMuZ2V0TG9jYWxKaXRzaVdyYXBwZXJVcmwoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzcyhXaWRnZXRVdGlscy5zZXRSb29tV2lkZ2V0KHJvb21JZCwgd2lkZ2V0SWQsIHR5cGUsIHdpZGdldFVybCwgbmFtZSwgZGF0YSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KF90KFwiWW91IGNhbm5vdCBtb2RpZnkgd2lkZ2V0cyBpbiB0aGlzIHJvb20uXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLmFkbWluLFxuICAgICAgICByZW5kZXJpbmdUeXBlczogW1RpbWVsaW5lUmVuZGVyaW5nVHlwZS5Sb29tXSxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6ICd2ZXJpZnknLFxuICAgICAgICBhcmdzOiAnPHVzZXItaWQ+IDxkZXZpY2UtaWQ+IDxkZXZpY2Utc2lnbmluZy1rZXk+JyxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZCgnVmVyaWZpZXMgYSB1c2VyLCBzZXNzaW9uLCBhbmQgcHVia2V5IHR1cGxlJyksXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IGFyZ3MubWF0Y2goL14oXFxTKykgKyhcXFMrKSArKFxcUyspJC8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VySWQgPSBtYXRjaGVzWzFdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXZpY2VJZCA9IG1hdGNoZXNbMl07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmdlcnByaW50ID0gbWF0Y2hlc1szXTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3VjY2VzcygoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGV2aWNlID0gY2xpLmdldFN0b3JlZERldmljZSh1c2VySWQsIGRldmljZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKF90KCdVbmtub3duICh1c2VyLCBzZXNzaW9uKSBwYWlyOicpICsgYCAoJHt1c2VySWR9LCAke2RldmljZUlkfSlgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldmljZVRydXN0ID0gYXdhaXQgY2xpLmNoZWNrRGV2aWNlVHJ1c3QodXNlcklkLCBkZXZpY2VJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXZpY2VUcnVzdC5pc1ZlcmlmaWVkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGV2aWNlLmdldEZpbmdlcnByaW50KCkgPT09IGZpbmdlcnByaW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihfdCgnU2Vzc2lvbiBhbHJlYWR5IHZlcmlmaWVkIScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoX3QoJ1dBUk5JTkc6IFNlc3Npb24gYWxyZWFkeSB2ZXJpZmllZCwgYnV0IGtleXMgZG8gTk9UIE1BVENIIScpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXZpY2UuZ2V0RmluZ2VycHJpbnQoKSAhPT0gZmluZ2VycHJpbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcHJpbnQgPSBkZXZpY2UuZ2V0RmluZ2VycHJpbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90KCdXQVJOSU5HOiBLRVkgVkVSSUZJQ0FUSU9OIEZBSUxFRCEgVGhlIHNpZ25pbmcga2V5IGZvciAlKHVzZXJJZClzIGFuZCBzZXNzaW9uJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICUoZGV2aWNlSWQpcyBpcyBcIiUoZnByaW50KXNcIiB3aGljaCBkb2VzIG5vdCBtYXRjaCB0aGUgcHJvdmlkZWQga2V5ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiJShmaW5nZXJwcmludClzXCIuIFRoaXMgY291bGQgbWVhbiB5b3VyIGNvbW11bmljYXRpb25zIGFyZSBiZWluZyBpbnRlcmNlcHRlZCEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcHJpbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmdlcnByaW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNsaS5zZXREZXZpY2VWZXJpZmllZCh1c2VySWQsIGRldmljZUlkLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGVsbCB0aGUgdXNlciB3ZSB2ZXJpZmllZCBldmVyeXRoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdTbGFzaCBDb21tYW5kcycsICdWZXJpZmllZCBrZXknLCBJbmZvRGlhbG9nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF90KCdWZXJpZmllZCBrZXknKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3QoJ1RoZSBzaWduaW5nIGtleSB5b3UgcHJvdmlkZWQgbWF0Y2hlcyB0aGUgc2lnbmluZyBrZXkgeW91IHJlY2VpdmVkICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZnJvbSAlKHVzZXJJZClzXFwncyBzZXNzaW9uICUoZGV2aWNlSWQpcy4gU2Vzc2lvbiBtYXJrZWQgYXMgdmVyaWZpZWQuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHVzZXJJZCwgZGV2aWNlSWQgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KHRoaXMuZ2V0VXNhZ2UoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5hZHZhbmNlZCxcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiAnZGlzY2FyZHNlc3Npb24nLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKCdGb3JjZXMgdGhlIGN1cnJlbnQgb3V0Ym91bmQgZ3JvdXAgc2Vzc2lvbiBpbiBhbiBlbmNyeXB0ZWQgcm9vbSB0byBiZSBkaXNjYXJkZWQnKSxcbiAgICAgICAgcnVuRm46IGZ1bmN0aW9uKHJvb21JZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBNYXRyaXhDbGllbnRQZWcuZ2V0KCkuZm9yY2VEaXNjYXJkU2Vzc2lvbihyb29tSWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5hZHZhbmNlZCxcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiBcInJhaW5ib3dcIixcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIlNlbmRzIHRoZSBnaXZlbiBtZXNzYWdlIGNvbG91cmVkIGFzIGEgcmFpbmJvd1wiKSxcbiAgICAgICAgYXJnczogJzxtZXNzYWdlPicsXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmICghYXJncykgcmV0dXJuIHJlamVjdCh0aGlzLmdldFVzZXJJZCgpKTtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzU3luYyhDb250ZW50SGVscGVycy5tYWtlSHRtbE1lc3NhZ2UoYXJncywgdGV4dFRvSHRtbFJhaW5ib3coYXJncykpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLm1lc3NhZ2VzLFxuICAgIH0pLFxuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogXCJyYWluYm93bWVcIixcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIlNlbmRzIHRoZSBnaXZlbiBlbW90ZSBjb2xvdXJlZCBhcyBhIHJhaW5ib3dcIiksXG4gICAgICAgIGFyZ3M6ICc8bWVzc2FnZT4nLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBpZiAoIWFyZ3MpIHJldHVybiByZWplY3QodGhpcy5nZXRVc2VySWQoKSk7XG4gICAgICAgICAgICByZXR1cm4gc3VjY2Vzc1N5bmMoQ29udGVudEhlbHBlcnMubWFrZUh0bWxFbW90ZShhcmdzLCB0ZXh0VG9IdG1sUmFpbmJvdyhhcmdzKSkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMubWVzc2FnZXMsXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiBcImhlbHBcIixcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIkRpc3BsYXlzIGxpc3Qgb2YgY29tbWFuZHMgd2l0aCB1c2FnZXMgYW5kIGRlc2NyaXB0aW9uc1wiKSxcbiAgICAgICAgcnVuRm46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnU2xhc2ggQ29tbWFuZHMnLCAnSGVscCcsIFNsYXNoQ29tbWFuZEhlbHBEaWFsb2cpO1xuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLmFkdmFuY2VkLFxuICAgIH0pLFxuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogXCJ3aG9pc1wiLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiRGlzcGxheXMgaW5mb3JtYXRpb24gYWJvdXQgYSB1c2VyXCIpLFxuICAgICAgICBhcmdzOiBcIjx1c2VyLWlkPlwiLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCB1c2VySWQpIHtcbiAgICAgICAgICAgIGlmICghdXNlcklkIHx8ICF1c2VySWQuc3RhcnRzV2l0aChcIkBcIikgfHwgIXVzZXJJZC5pbmNsdWRlcyhcIjpcIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KHRoaXMuZ2V0VXNhZ2UoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG1lbWJlciA9IE1hdHJpeENsaWVudFBlZy5nZXQoKS5nZXRSb29tKHJvb21JZCkuZ2V0TWVtYmVyKHVzZXJJZCk7XG4gICAgICAgICAgICBkaXMuZGlzcGF0Y2g8Vmlld1VzZXJQYXlsb2FkPih7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uVmlld1VzZXIsXG4gICAgICAgICAgICAgICAgLy8gWFhYOiBXZSBzaG91bGQgYmUgdXNpbmcgYSByZWFsIG1lbWJlciBvYmplY3QgYW5kIG5vdCBhc3N1bWluZyB3aGF0IHRoZSByZWNlaXZlciB3YW50cy5cbiAgICAgICAgICAgICAgICBtZW1iZXI6IG1lbWJlciB8fCB7IHVzZXJJZCB9IGFzIFVzZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5hZHZhbmNlZCxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6IFwicmFnZXNoYWtlXCIsXG4gICAgICAgIGFsaWFzZXM6IFtcImJ1Z3JlcG9ydFwiXSxcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIlNlbmQgYSBidWcgcmVwb3J0IHdpdGggbG9nc1wiKSxcbiAgICAgICAgaXNFbmFibGVkOiAoKSA9PiAhIVNka0NvbmZpZy5nZXQoKS5idWdfcmVwb3J0X2VuZHBvaW50X3VybCxcbiAgICAgICAgYXJnczogXCI8ZGVzY3JpcHRpb24+XCIsXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKFxuICAgICAgICAgICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ1NsYXNoIENvbW1hbmRzJywgJ0J1ZyBSZXBvcnQgRGlhbG9nJywgQnVnUmVwb3J0RGlhbG9nLCB7XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxUZXh0OiBhcmdzLFxuICAgICAgICAgICAgICAgIH0pLmZpbmlzaGVkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLmFkdmFuY2VkLFxuICAgIH0pLFxuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogXCJxdWVyeVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiT3BlbnMgY2hhdCB3aXRoIHRoZSBnaXZlbiB1c2VyXCIpLFxuICAgICAgICBhcmdzOiBcIjx1c2VyLWlkPlwiLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCB1c2VySWQpIHtcbiAgICAgICAgICAgIC8vIGVhc3Rlci1lZ2cgZm9yIG5vdzogbG9vayB1cCBwaG9uZSBudW1iZXJzIHRocm91Z2ggdGhlIHRoaXJkcGFydHkgQVBJXG4gICAgICAgICAgICAvLyAodmVyeSBkdW1iIHBob25lIG51bWJlciBkZXRlY3Rpb24uLi4pXG4gICAgICAgICAgICBjb25zdCBpc1Bob25lTnVtYmVyID0gdXNlcklkICYmIC9eXFwrP1swMTIzNDU2Nzg5XSskLy50ZXN0KHVzZXJJZCk7XG4gICAgICAgICAgICBpZiAoIXVzZXJJZCB8fCAoIXVzZXJJZC5zdGFydHNXaXRoKFwiQFwiKSB8fCAhdXNlcklkLmluY2x1ZGVzKFwiOlwiKSkgJiYgIWlzUGhvbmVOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KHRoaXMuZ2V0VXNhZ2UoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzUGhvbmVOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IENhbGxIYW5kbGVyLnNoYXJlZEluc3RhbmNlKCkucHN0bkxvb2t1cCh0aGlzLnN0YXRlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHRzIHx8IHJlc3VsdHMubGVuZ3RoID09PSAwIHx8ICFyZXN1bHRzWzBdLnVzZXJpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGZpbmQgTWF0cml4IElEIGZvciBwaG9uZSBudW1iZXJcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdXNlcklkID0gcmVzdWx0c1swXS51c2VyaWQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vbUlkID0gYXdhaXQgZW5zdXJlRE1FeGlzdHMoTWF0cml4Q2xpZW50UGVnLmdldCgpLCB1c2VySWQpO1xuXG4gICAgICAgICAgICAgICAgZGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uVmlld1Jvb20sXG4gICAgICAgICAgICAgICAgICAgIHJvb21faWQ6IHJvb21JZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pKCkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWN0aW9ucyxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6IFwibXNnXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIGdpdmVuIHVzZXJcIiksXG4gICAgICAgIGFyZ3M6IFwiPHVzZXItaWQ+IFs8bWVzc2FnZT5dXCIsXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgICAgICAgLy8gbWF0Y2hlcyB0aGUgZmlyc3Qgd2hpdGVzcGFjZSBkZWxpbWl0ZWQgZ3JvdXAgYW5kIHRoZW4gdGhlIHJlc3Qgb2YgdGhlIHN0cmluZ1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBhcmdzLm1hdGNoKC9eKFxcUys/KSg/OiArKC4qKSk/JC9zKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbdXNlcklkLCBtc2ddID0gbWF0Y2hlcy5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJZCAmJiB1c2VySWQuc3RhcnRzV2l0aChcIkBcIikgJiYgdXNlcklkLmluY2x1ZGVzKFwiOlwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGkgPSBNYXRyaXhDbGllbnRQZWcuZ2V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vbUlkID0gYXdhaXQgZW5zdXJlRE1FeGlzdHMoY2xpLCB1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uLlZpZXdSb29tLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tX2lkOiByb29tSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGkuc2VuZFRleHRNZXNzYWdlKHJvb21JZCwgbXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdCh0aGlzLmdldFVzYWdlKCkpO1xuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuYWN0aW9ucyxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6IFwiaG9sZGNhbGxcIixcbiAgICAgICAgZGVzY3JpcHRpb246IF90ZChcIlBsYWNlcyB0aGUgY2FsbCBpbiB0aGUgY3VycmVudCByb29tIG9uIGhvbGRcIiksXG4gICAgICAgIGNhdGVnb3J5OiBDb21tYW5kQ2F0ZWdvcmllcy5vdGhlcixcbiAgICAgICAgcnVuRm46IGZ1bmN0aW9uKHJvb21JZCwgYXJncykge1xuICAgICAgICAgICAgY29uc3QgY2FsbCA9IENhbGxIYW5kbGVyLnNoYXJlZEluc3RhbmNlKCkuZ2V0Q2FsbEZvclJvb20ocm9vbUlkKTtcbiAgICAgICAgICAgIGlmICghY2FsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoXCJObyBhY3RpdmUgY2FsbCBpbiB0aGlzIHJvb21cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsLnNldFJlbW90ZU9uSG9sZCh0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcmluZ1R5cGVzOiBbVGltZWxpbmVSZW5kZXJpbmdUeXBlLlJvb21dLFxuICAgIH0pLFxuICAgIG5ldyBDb21tYW5kKHtcbiAgICAgICAgY29tbWFuZDogXCJ1bmhvbGRjYWxsXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJUYWtlcyB0aGUgY2FsbCBpbiB0aGUgY3VycmVudCByb29tIG9mZiBob2xkXCIpLFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMub3RoZXIsXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGwgPSBDYWxsSGFuZGxlci5zaGFyZWRJbnN0YW5jZSgpLmdldENhbGxGb3JSb29tKHJvb21JZCk7XG4gICAgICAgICAgICBpZiAoIWNhbGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KFwiTm8gYWN0aXZlIGNhbGwgaW4gdGhpcyByb29tXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbC5zZXRSZW1vdGVPbkhvbGQoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyaW5nVHlwZXM6IFtUaW1lbGluZVJlbmRlcmluZ1R5cGUuUm9vbV0sXG4gICAgfSksXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiBcImNvbnZlcnR0b2RtXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBfdGQoXCJDb252ZXJ0cyB0aGUgcm9vbSB0byBhIERNXCIpLFxuICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMub3RoZXIsXG4gICAgICAgIHJ1bkZuOiBmdW5jdGlvbihyb29tSWQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvb20gPSBNYXRyaXhDbGllbnRQZWcuZ2V0KCkuZ2V0Um9vbShyb29tSWQpO1xuICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoZ3Vlc3NBbmRTZXRETVJvb20ocm9vbSwgdHJ1ZSkpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXJpbmdUeXBlczogW1RpbWVsaW5lUmVuZGVyaW5nVHlwZS5Sb29tXSxcbiAgICB9KSxcbiAgICBuZXcgQ29tbWFuZCh7XG4gICAgICAgIGNvbW1hbmQ6IFwiY29udmVydHRvcm9vbVwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKFwiQ29udmVydHMgdGhlIERNIHRvIGEgcm9vbVwiKSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLm90aGVyLFxuICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICBjb25zdCByb29tID0gTWF0cml4Q2xpZW50UGVnLmdldCgpLmdldFJvb20ocm9vbUlkKTtcbiAgICAgICAgICAgIHJldHVybiBzdWNjZXNzKGd1ZXNzQW5kU2V0RE1Sb29tKHJvb20sIGZhbHNlKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcmluZ1R5cGVzOiBbVGltZWxpbmVSZW5kZXJpbmdUeXBlLlJvb21dLFxuICAgIH0pLFxuXG4gICAgLy8gQ29tbWFuZCBkZWZpbml0aW9ucyBmb3IgYXV0b2NvbXBsZXRpb24gT05MWTpcbiAgICAvLyAvbWUgaXMgc3BlY2lhbCBiZWNhdXNlIGl0cyBub3QgaGFuZGxlZCBieSBTbGFzaENvbW1hbmRzLmpzIGFuZCBpcyBpbnN0ZWFkIGRvbmUgaW5zaWRlIHRoZSBDb21wb3NlciBjbGFzc2VzXG4gICAgbmV3IENvbW1hbmQoe1xuICAgICAgICBjb21tYW5kOiBcIm1lXCIsXG4gICAgICAgIGFyZ3M6ICc8bWVzc2FnZT4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3RkKCdEaXNwbGF5cyBhY3Rpb24nKSxcbiAgICAgICAgY2F0ZWdvcnk6IENvbW1hbmRDYXRlZ29yaWVzLm1lc3NhZ2VzLFxuICAgICAgICBoaWRlQ29tcGxldGlvbkFmdGVyU3BhY2U6IHRydWUsXG4gICAgfSksXG5cbiAgICAuLi5DSEFUX0VGRkVDVFMubWFwKChlZmZlY3QpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21tYW5kKHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IGVmZmVjdC5jb21tYW5kLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGVmZmVjdC5kZXNjcmlwdGlvbigpLFxuICAgICAgICAgICAgYXJnczogJzxtZXNzYWdlPicsXG4gICAgICAgICAgICBydW5GbjogZnVuY3Rpb24ocm9vbUlkLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3MoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gZWZmZWN0LmZhbGxiYWNrTWVzc2FnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4Q2xpZW50UGVnLmdldCgpLnNlbmRFbW90ZU1lc3NhZ2Uocm9vbUlkLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNndHlwZTogZWZmZWN0Lm1zZ1R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogYXJncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhDbGllbnRQZWcuZ2V0KCkuc2VuZE1lc3NhZ2Uocm9vbUlkLCBjb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkaXMuZGlzcGF0Y2goeyBhY3Rpb246IGBlZmZlY3RzLiR7ZWZmZWN0LmNvbW1hbmR9YCB9KTtcbiAgICAgICAgICAgICAgICB9KSgpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYXRlZ29yeTogQ29tbWFuZENhdGVnb3JpZXMuZWZmZWN0cyxcbiAgICAgICAgICAgIHJlbmRlcmluZ1R5cGVzOiBbVGltZWxpbmVSZW5kZXJpbmdUeXBlLlJvb21dLFxuICAgICAgICB9KTtcbiAgICB9KSxcbl07XG5cbi8vIGJ1aWxkIGEgbWFwIGZyb20gbmFtZXMgYW5kIGFsaWFzZXMgdG8gdGhlIENvbW1hbmQgb2JqZWN0cy5cbmV4cG9ydCBjb25zdCBDb21tYW5kTWFwID0gbmV3IE1hcDxzdHJpbmcsIENvbW1hbmQ+KCk7XG5Db21tYW5kcy5mb3JFYWNoKGNtZCA9PiB7XG4gICAgQ29tbWFuZE1hcC5zZXQoY21kLmNvbW1hbmQsIGNtZCk7XG4gICAgY21kLmFsaWFzZXMuZm9yRWFjaChhbGlhcyA9PiB7XG4gICAgICAgIENvbW1hbmRNYXAuc2V0KGFsaWFzLCBjbWQpO1xuICAgIH0pO1xufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbW1hbmRTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHsgY21kPzogc3RyaW5nLCBhcmdzPzogc3RyaW5nIH0ge1xuICAgIC8vIHRyaW0gYW55IHRyYWlsaW5nIHdoaXRlc3BhY2UsIGFzIGl0IGNhbiBjb25mdXNlIHRoZSBwYXJzZXIgZm9yXG4gICAgLy8gSVJDLXN0eWxlIGNvbW1hbmRzXG4gICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC9cXHMrJC8sICcnKTtcbiAgICBpZiAoaW5wdXRbMF0gIT09ICcvJykgcmV0dXJuIHt9OyAvLyBub3QgYSBjb21tYW5kXG5cbiAgICBjb25zdCBiaXRzID0gaW5wdXQubWF0Y2goL14oXFxTKz8pKD86WyBcXG5dKygoLnxcXG4pKikpPyQvKTtcbiAgICBsZXQgY21kOiBzdHJpbmc7XG4gICAgbGV0IGFyZ3M6IHN0cmluZztcbiAgICBpZiAoYml0cykge1xuICAgICAgICBjbWQgPSBiaXRzWzFdLnN1YnN0cmluZygxKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBhcmdzID0gYml0c1syXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjbWQgPSBpbnB1dDtcbiAgICB9XG5cbiAgICByZXR1cm4geyBjbWQsIGFyZ3MgfTtcbn1cblxuaW50ZXJmYWNlIElDbWQge1xuICAgIGNtZD86IENvbW1hbmQ7XG4gICAgYXJncz86IHN0cmluZztcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSBnaXZlbiB0ZXh0IGZvciAvY29tbWFuZHMgYW5kIHJldHVybiBhIGJvdW5kIG1ldGhvZCB0byBwZXJmb3JtIHRoZW0uXG4gKiBAcGFyYW0ge3N0cmluZ30gcm9vbUlkIFRoZSByb29tIGluIHdoaWNoIHRoZSBjb21tYW5kIHdhcyBwZXJmb3JtZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5wdXQgVGhlIHJhdyB0ZXh0IGlucHV0IGJ5IHRoZSB1c2VyLlxuICogQHJldHVybiB7bnVsbHxmdW5jdGlvbigpOiBPYmplY3R9IEZ1bmN0aW9uIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCB0aGUgcHJvcGVydHkgJ2Vycm9yJyBpZiB0aGVyZSB3YXMgYW4gZXJyb3JcbiAqIHByb2Nlc3NpbmcgdGhlIGNvbW1hbmQsIG9yICdwcm9taXNlJyBpZiBhIHJlcXVlc3Qgd2FzIHNlbnQgb3V0LlxuICogUmV0dXJucyBudWxsIGlmIHRoZSBpbnB1dCBkaWRuJ3QgbWF0Y2ggYSBjb21tYW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tbWFuZChpbnB1dDogc3RyaW5nKTogSUNtZCB7XG4gICAgY29uc3QgeyBjbWQsIGFyZ3MgfSA9IHBhcnNlQ29tbWFuZFN0cmluZyhpbnB1dCk7XG5cbiAgICBpZiAoQ29tbWFuZE1hcC5oYXMoY21kKSAmJiBDb21tYW5kTWFwLmdldChjbWQpLmlzRW5hYmxlZCgpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjbWQ6IENvbW1hbmRNYXAuZ2V0KGNtZCksXG4gICAgICAgICAgICBhcmdzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge307XG59XG4iXX0=