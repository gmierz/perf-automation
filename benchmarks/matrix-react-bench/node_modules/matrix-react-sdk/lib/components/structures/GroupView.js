"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _MatrixClientPeg = require("../../MatrixClientPeg");

var sdk = _interopRequireWildcard(require("../../index"));

var _dispatcher = _interopRequireDefault(require("../../dispatcher/dispatcher"));

var _HostingLink = require("../../utils/HostingLink");

var _HtmlUtils = require("../../HtmlUtils");

var _languageHandler = require("../../languageHandler");

var _AccessibleButton = _interopRequireDefault(require("../views/elements/AccessibleButton"));

var _GroupHeaderButtons = _interopRequireDefault(require("../views/right_panel/GroupHeaderButtons"));

var _MainSplit = _interopRequireDefault(require("./MainSplit"));

var _RightPanel = _interopRequireDefault(require("./RightPanel"));

var _Modal = _interopRequireDefault(require("../../Modal"));

var _classnames = _interopRequireDefault(require("classnames"));

var _GroupStore = _interopRequireDefault(require("../../stores/GroupStore"));

var _FlairStore = _interopRequireDefault(require("../../stores/FlairStore"));

var _GroupAddressPicker = require("../../GroupAddressPicker");

var _Permalinks = require("../../utils/permalinks/Permalinks");

var _group = require("matrix-js-sdk/src/models/group");

var _utils = require("matrix-js-sdk/src/utils");

var _RightPanelStore = _interopRequireDefault(require("../../stores/RightPanelStore"));

var _AutoHideScrollbar = _interopRequireDefault(require("./AutoHideScrollbar"));

var _Media = require("../../customisations/Media");

var _replaceableComponent = require("../../utils/replaceableComponent");

var _space = require("../../utils/space");

var _actions = require("../../dispatcher/actions");

var _RightPanelStorePhases = require("../../stores/RightPanelStorePhases");

var _logger = require("matrix-js-sdk/src/logger");

var _dec, _class, _class2, _temp;

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

const LONG_DESC_PLACEHOLDER = (0, _languageHandler._td)(`<h1>HTML for your community's page</h1>
<p>
    Use the long description to introduce new members to the community, or distribute
    some important <a href="foo">links</a>
</p>
<p>
    You can even add images with Matrix URLs <img src="mxc://url" />
</p>
`);

const RoomSummaryType = _propTypes.default.shape({
  room_id: _propTypes.default.string.isRequired,
  profile: _propTypes.default.shape({
    name: _propTypes.default.string,
    avatar_url: _propTypes.default.string,
    canonical_alias: _propTypes.default.string
  }).isRequired
});

const UserSummaryType = _propTypes.default.shape({
  summaryInfo: _propTypes.default.shape({
    user_id: _propTypes.default.string.isRequired,
    role_id: _propTypes.default.string,
    avatar_url: _propTypes.default.string,
    displayname: _propTypes.default.string
  }).isRequired
});

class CategoryRoomList extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "onAddRoomsToSummaryClicked", ev => {
      ev.preventDefault();
      const AddressPickerDialog = sdk.getComponent("dialogs.AddressPickerDialog");

      _Modal.default.createTrackedDialog('Add Rooms to Group Summary', '', AddressPickerDialog, {
        title: (0, _languageHandler._t)('Add rooms to the community summary'),
        description: (0, _languageHandler._t)("Which rooms would you like to add to this summary?"),
        placeholder: (0, _languageHandler._t)("Room name or address"),
        button: (0, _languageHandler._t)("Add to summary"),
        pickerType: 'room',
        validAddressTypes: ['mx-room-id'],
        groupId: this.props.groupId,
        onFinished: (success, addrs) => {
          if (!success) return;
          const errorList = [];
          Promise.allSettled(addrs.map(addr => {
            return _GroupStore.default.addRoomToGroupSummary(this.props.groupId, addr.address).catch(() => {
              errorList.push(addr.address);
            });
          })).then(() => {
            if (errorList.length === 0) {
              return;
            }

            const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

            _Modal.default.createTrackedDialog('Failed to add the following room to the group summary', '', ErrorDialog, {
              title: (0, _languageHandler._t)("Failed to add the following rooms to the summary of %(groupId)s:", {
                groupId: this.props.groupId
              }),
              description: errorList.join(", ")
            });
          });
        }
      },
      /*className=*/
      null,
      /*isPriority=*/
      false,
      /*isStatic=*/
      true);
    });
  }

  render() {
    const addButton = this.props.editing ? /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: "mx_GroupView_featuredThings_addButton",
      onClick: this.onAddRoomsToSummaryClicked
    }, /*#__PURE__*/_react.default.createElement("img", {
      src: require("../../../res/img/icons-create-room.svg"),
      width: "64",
      height: "64"
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThings_addButton_label"
    }, (0, _languageHandler._t)('Add a Room'))) : /*#__PURE__*/_react.default.createElement("div", null);
    const roomNodes = this.props.rooms.map(r => {
      return /*#__PURE__*/_react.default.createElement(FeaturedRoom, {
        key: r.room_id,
        groupId: this.props.groupId,
        editing: this.props.editing,
        summaryInfo: r
      });
    });

    let catHeader = /*#__PURE__*/_react.default.createElement("div", null);

    if (this.props.category && this.props.category.profile) {
      catHeader = /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_featuredThings_category"
      }, this.props.category.profile.name);
    }

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThings_container"
    }, catHeader, roomNodes, addButton);
  }

}

(0, _defineProperty2.default)(CategoryRoomList, "propTypes", {
  rooms: _propTypes.default.arrayOf(RoomSummaryType).isRequired,
  category: _propTypes.default.shape({
    profile: _propTypes.default.shape({
      name: _propTypes.default.string
    }).isRequired
  }),
  groupId: _propTypes.default.string.isRequired,
  // Whether the list should be editable
  editing: _propTypes.default.bool.isRequired
});

class FeaturedRoom extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "onClick", e => {
      e.preventDefault();
      e.stopPropagation();

      _dispatcher.default.dispatch({
        action: _actions.Action.ViewRoom,
        room_alias: this.props.summaryInfo.profile.canonical_alias,
        room_id: this.props.summaryInfo.room_id
      });
    });
    (0, _defineProperty2.default)(this, "onDeleteClicked", e => {
      e.preventDefault();
      e.stopPropagation();

      _GroupStore.default.removeRoomFromGroupSummary(this.props.groupId, this.props.summaryInfo.room_id).catch(err => {
        _logger.logger.error('Error whilst removing room from group summary', err);

        const roomName = this.props.summaryInfo.name || this.props.summaryInfo.canonical_alias || this.props.summaryInfo.room_id;
        const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

        _Modal.default.createTrackedDialog('Failed to remove room from group summary', '', ErrorDialog, {
          title: (0, _languageHandler._t)("Failed to remove the room from the summary of %(groupId)s", {
            groupId: this.props.groupId
          }),
          description: (0, _languageHandler._t)("The room '%(roomName)s' could not be removed from the summary.", {
            roomName
          })
        });
      });
    });
  }

  render() {
    const RoomAvatar = sdk.getComponent("avatars.RoomAvatar");
    const roomName = this.props.summaryInfo.profile.name || this.props.summaryInfo.profile.canonical_alias || (0, _languageHandler._t)("Unnamed Room");
    const oobData = {
      roomId: this.props.summaryInfo.room_id,
      avatarUrl: this.props.summaryInfo.profile.avatar_url,
      name: roomName
    };
    let permalink = null;

    if (this.props.summaryInfo.profile && this.props.summaryInfo.profile.canonical_alias) {
      permalink = (0, _Permalinks.makeGroupPermalink)(this.props.summaryInfo.profile.canonical_alias);
    }

    let roomNameNode = null;

    if (permalink) {
      roomNameNode = /*#__PURE__*/_react.default.createElement("a", {
        href: permalink,
        onClick: this.onClick
      }, roomName);
    } else {
      roomNameNode = /*#__PURE__*/_react.default.createElement("span", null, roomName);
    }

    const deleteButton = this.props.editing ? /*#__PURE__*/_react.default.createElement("img", {
      className: "mx_GroupView_featuredThing_deleteButton",
      src: require("../../../res/img/cancel-small.svg"),
      width: "14",
      height: "14",
      alt: "Delete",
      onClick: this.onDeleteClicked
    }) : /*#__PURE__*/_react.default.createElement("div", null);
    return /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: "mx_GroupView_featuredThing",
      onClick: this.onClick
    }, /*#__PURE__*/_react.default.createElement(RoomAvatar, {
      oobData: oobData,
      width: 64,
      height: 64
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThing_name"
    }, roomNameNode), deleteButton);
  }

}

(0, _defineProperty2.default)(FeaturedRoom, "propTypes", {
  summaryInfo: RoomSummaryType.isRequired,
  editing: _propTypes.default.bool.isRequired,
  groupId: _propTypes.default.string.isRequired
});

class RoleUserList extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "onAddUsersClicked", ev => {
      ev.preventDefault();
      const AddressPickerDialog = sdk.getComponent("dialogs.AddressPickerDialog");

      _Modal.default.createTrackedDialog('Add Users to Group Summary', '', AddressPickerDialog, {
        title: (0, _languageHandler._t)('Add users to the community summary'),
        description: (0, _languageHandler._t)("Who would you like to add to this summary?"),
        placeholder: (0, _languageHandler._t)("Name or Matrix ID"),
        button: (0, _languageHandler._t)("Add to summary"),
        validAddressTypes: ['mx-user-id'],
        groupId: this.props.groupId,
        shouldOmitSelf: false,
        onFinished: (success, addrs) => {
          if (!success) return;
          const errorList = [];
          Promise.allSettled(addrs.map(addr => {
            return _GroupStore.default.addUserToGroupSummary(addr.address).catch(() => {
              errorList.push(addr.address);
            });
          })).then(() => {
            if (errorList.length === 0) {
              return;
            }

            const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

            _Modal.default.createTrackedDialog('Failed to add the following users to the community summary', '', ErrorDialog, {
              title: (0, _languageHandler._t)("Failed to add the following users to the summary of %(groupId)s:", {
                groupId: this.props.groupId
              }),
              description: errorList.join(", ")
            });
          });
        }
      },
      /*className=*/
      null,
      /*isPriority=*/
      false,
      /*isStatic=*/
      true);
    });
  }

  render() {
    const addButton = this.props.editing ? /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: "mx_GroupView_featuredThings_addButton",
      onClick: this.onAddUsersClicked
    }, /*#__PURE__*/_react.default.createElement("img", {
      src: require("../../../res/img/icons-create-room.svg"),
      width: "64",
      height: "64"
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThings_addButton_label"
    }, (0, _languageHandler._t)('Add a User'))) : /*#__PURE__*/_react.default.createElement("div", null);
    const userNodes = this.props.users.map(u => {
      return /*#__PURE__*/_react.default.createElement(FeaturedUser, {
        key: u.user_id,
        summaryInfo: u,
        editing: this.props.editing,
        groupId: this.props.groupId
      });
    });

    let roleHeader = /*#__PURE__*/_react.default.createElement("div", null);

    if (this.props.role && this.props.role.profile) {
      roleHeader = /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_featuredThings_category"
      }, this.props.role.profile.name);
    }

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThings_container"
    }, roleHeader, userNodes, addButton);
  }

}

(0, _defineProperty2.default)(RoleUserList, "propTypes", {
  users: _propTypes.default.arrayOf(UserSummaryType).isRequired,
  role: _propTypes.default.shape({
    profile: _propTypes.default.shape({
      name: _propTypes.default.string
    }).isRequired
  }),
  groupId: _propTypes.default.string.isRequired,
  // Whether the list should be editable
  editing: _propTypes.default.bool.isRequired
});

class FeaturedUser extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "onClick", e => {
      e.preventDefault();
      e.stopPropagation();

      _dispatcher.default.dispatch({
        action: 'view_start_chat_or_reuse',
        user_id: this.props.summaryInfo.user_id
      });
    });
    (0, _defineProperty2.default)(this, "onDeleteClicked", e => {
      e.preventDefault();
      e.stopPropagation();

      _GroupStore.default.removeUserFromGroupSummary(this.props.groupId, this.props.summaryInfo.user_id).catch(err => {
        _logger.logger.error('Error whilst removing user from group summary', err);

        const displayName = this.props.summaryInfo.displayname || this.props.summaryInfo.user_id;
        const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

        _Modal.default.createTrackedDialog('Failed to remove user from community summary', '', ErrorDialog, {
          title: (0, _languageHandler._t)("Failed to remove a user from the summary of %(groupId)s", {
            groupId: this.props.groupId
          }),
          description: (0, _languageHandler._t)("The user '%(displayName)s' could not be removed from the summary.", {
            displayName
          })
        });
      });
    });
  }

  render() {
    const BaseAvatar = sdk.getComponent("avatars.BaseAvatar");
    const name = this.props.summaryInfo.displayname || this.props.summaryInfo.user_id;
    const permalink = (0, _Permalinks.makeUserPermalink)(this.props.summaryInfo.user_id);

    const userNameNode = /*#__PURE__*/_react.default.createElement("a", {
      href: permalink,
      onClick: this.onClick
    }, name);

    const httpUrl = (0, _Media.mediaFromMxc)(this.props.summaryInfo.avatar_url).getSquareThumbnailHttp(64);
    const deleteButton = this.props.editing ? /*#__PURE__*/_react.default.createElement("img", {
      className: "mx_GroupView_featuredThing_deleteButton",
      src: require("../../../res/img/cancel-small.svg"),
      width: "14",
      height: "14",
      alt: "Delete",
      onClick: this.onDeleteClicked
    }) : /*#__PURE__*/_react.default.createElement("div", null);
    return /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: "mx_GroupView_featuredThing",
      onClick: this.onClick
    }, /*#__PURE__*/_react.default.createElement(BaseAvatar, {
      name: name,
      url: httpUrl,
      width: 64,
      height: 64
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThing_name"
    }, userNameNode), deleteButton);
  }

}

(0, _defineProperty2.default)(FeaturedUser, "propTypes", {
  summaryInfo: UserSummaryType.isRequired,
  editing: _propTypes.default.bool.isRequired,
  groupId: _propTypes.default.string.isRequired
});
const GROUP_JOINPOLICY_OPEN = "open";
const GROUP_JOINPOLICY_INVITE = "invite";
const UPGRADE_NOTICE_LS_KEY = "mx_hide_community_upgrade_notice";
let GroupView = (_dec = (0, _replaceableComponent.replaceableComponent)("structures.GroupView"), _dec(_class = (_temp = _class2 = class GroupView extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "state", {
      summary: null,
      isGroupPublicised: null,
      isUserPrivileged: null,
      groupRooms: null,
      groupRoomsLoading: null,
      error: null,
      editing: false,
      saving: false,
      uploadingAvatar: false,
      avatarChanged: false,
      membershipBusy: false,
      publicityBusy: false,
      inviterProfile: null,
      showRightPanel: _RightPanelStore.default.getSharedInstance().isOpenForGroup,
      showUpgradeNotice: !localStorage.getItem(UPGRADE_NOTICE_LS_KEY)
    });
    (0, _defineProperty2.default)(this, "_onRightPanelStoreUpdate", () => {
      this.setState({
        showRightPanel: _RightPanelStore.default.getSharedInstance().isOpenForGroup
      });
    });
    (0, _defineProperty2.default)(this, "_onGroupMyMembership", group => {
      if (this._unmounted || group.groupId !== this.props.groupId) return;

      if (group.myMembership === 'leave') {
        // Leave settings - the user might have clicked the "Leave" button
        this._closeSettings();
      }

      this.setState({
        membershipBusy: false
      });
    });
    (0, _defineProperty2.default)(this, "onGroupStoreUpdated", firstInit => {
      if (this._unmounted) return;

      const summary = _GroupStore.default.getSummary(this.props.groupId);

      if (summary.profile) {
        // Default profile fields should be "" for later sending to the server (which
        // requires that the fields are strings, not null)
        ["avatar_url", "long_description", "name", "short_description"].forEach(k => {
          summary.profile[k] = summary.profile[k] || "";
        });
      }

      this.setState({
        summary,
        summaryLoading: !_GroupStore.default.isStateReady(this.props.groupId, _GroupStore.default.STATE_KEY.Summary),
        isGroupPublicised: _GroupStore.default.getGroupPublicity(this.props.groupId),
        isUserPrivileged: _GroupStore.default.isUserPrivileged(this.props.groupId),
        groupRooms: _GroupStore.default.getGroupRooms(this.props.groupId),
        groupRoomsLoading: !_GroupStore.default.isStateReady(this.props.groupId, _GroupStore.default.STATE_KEY.GroupRooms),
        isUserMember: _GroupStore.default.getGroupMembers(this.props.groupId).some(m => m.userId === this._matrixClient.credentials.userId)
      }); // XXX: This might not work but this.props.groupIsNew unused anyway

      if (this.props.groupIsNew && firstInit) {
        this._onEditClick();
      }
    });
    (0, _defineProperty2.default)(this, "_onEditClick", () => {
      this.setState({
        editing: true,
        profileForm: Object.assign({}, this.state.summary.profile),
        joinableForm: {
          policyType: this.state.summary.profile.is_openly_joinable ? GROUP_JOINPOLICY_OPEN : GROUP_JOINPOLICY_INVITE
        }
      });
    });
    (0, _defineProperty2.default)(this, "_onShareClick", () => {
      const ShareDialog = sdk.getComponent("dialogs.ShareDialog");

      _Modal.default.createTrackedDialog('share community dialog', '', ShareDialog, {
        target: this._matrixClient.getGroup(this.props.groupId) || new _group.Group(this.props.groupId)
      });
    });
    (0, _defineProperty2.default)(this, "_onCancelClick", () => {
      this._closeSettings();
    });
    (0, _defineProperty2.default)(this, "_onAction", payload => {
      switch (payload.action) {
        // NOTE: close_settings is an app-wide dispatch; as it is dispatched from MatrixChat
        case 'close_settings':
          this.setState({
            editing: false,
            profileForm: null
          });
          break;

        default:
          break;
      }
    });
    (0, _defineProperty2.default)(this, "_closeSettings", () => {
      _dispatcher.default.dispatch({
        action: 'close_settings'
      });
    });
    (0, _defineProperty2.default)(this, "_onNameChange", value => {
      const newProfileForm = Object.assign(this.state.profileForm, {
        name: value
      });
      this.setState({
        profileForm: newProfileForm
      });
    });
    (0, _defineProperty2.default)(this, "_onShortDescChange", value => {
      const newProfileForm = Object.assign(this.state.profileForm, {
        short_description: value
      });
      this.setState({
        profileForm: newProfileForm
      });
    });
    (0, _defineProperty2.default)(this, "_onLongDescChange", e => {
      const newProfileForm = Object.assign(this.state.profileForm, {
        long_description: e.target.value
      });
      this.setState({
        profileForm: newProfileForm
      });
    });
    (0, _defineProperty2.default)(this, "_onAvatarSelected", ev => {
      const file = ev.target.files[0];
      if (!file) return;
      this.setState({
        uploadingAvatar: true
      });

      this._matrixClient.uploadContent(file).then(url => {
        const newProfileForm = Object.assign(this.state.profileForm, {
          avatar_url: url
        });
        this.setState({
          uploadingAvatar: false,
          profileForm: newProfileForm,
          // Indicate that FlairStore needs to be poked to show this change
          // in TagTile (GroupFilterPanel), Flair and GroupTile (MyGroups).
          avatarChanged: true
        });
      }).catch(e => {
        this.setState({
          uploadingAvatar: false
        });
        const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

        _logger.logger.error("Failed to upload avatar image", e);

        _Modal.default.createTrackedDialog('Failed to upload image', '', ErrorDialog, {
          title: (0, _languageHandler._t)('Error'),
          description: (0, _languageHandler._t)('Failed to upload image')
        });
      });
    });
    (0, _defineProperty2.default)(this, "_onJoinableChange", ev => {
      this.setState({
        joinableForm: {
          policyType: ev.target.value
        }
      });
    });
    (0, _defineProperty2.default)(this, "_onSaveClick", () => {
      this.setState({
        saving: true
      });
      const savePromise = this.state.isUserPrivileged ? this._saveGroup() : Promise.resolve();
      savePromise.then(result => {
        this.setState({
          saving: false,
          editing: false,
          summary: null
        });

        this._initGroupStore(this.props.groupId);

        if (this.state.avatarChanged) {
          // XXX: Evil - poking a store should be done from an async action
          _FlairStore.default.refreshGroupProfile(this._matrixClient, this.props.groupId);
        }
      }).catch(e => {
        this.setState({
          saving: false
        });
        const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

        _logger.logger.error("Failed to save community profile", e);

        _Modal.default.createTrackedDialog('Failed to update group', '', ErrorDialog, {
          title: (0, _languageHandler._t)('Error'),
          description: (0, _languageHandler._t)('Failed to update community')
        });
      }).finally(() => {
        this.setState({
          avatarChanged: false
        });
      });
    });
    (0, _defineProperty2.default)(this, "_onAcceptInviteClick", async () => {
      this.setState({
        membershipBusy: true
      }); // Wait 500ms to prevent flashing. Do this before sending a request otherwise we risk the
      // spinner disappearing after we have fetched new group data.

      await (0, _utils.sleep)(500);

      _GroupStore.default.acceptGroupInvite(this.props.groupId).then(() => {// don't reset membershipBusy here: wait for the membership change to come down the sync
      }).catch(e => {
        this.setState({
          membershipBusy: false
        });
        const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

        _Modal.default.createTrackedDialog('Error accepting invite', '', ErrorDialog, {
          title: (0, _languageHandler._t)("Error"),
          description: (0, _languageHandler._t)("Unable to accept invite")
        });
      });
    });
    (0, _defineProperty2.default)(this, "_onRejectInviteClick", async () => {
      this.setState({
        membershipBusy: true
      }); // Wait 500ms to prevent flashing. Do this before sending a request otherwise we risk the
      // spinner disappearing after we have fetched new group data.

      await (0, _utils.sleep)(500);

      _GroupStore.default.leaveGroup(this.props.groupId).then(() => {// don't reset membershipBusy here: wait for the membership change to come down the sync
      }).catch(e => {
        this.setState({
          membershipBusy: false
        });
        const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

        _Modal.default.createTrackedDialog('Error rejecting invite', '', ErrorDialog, {
          title: (0, _languageHandler._t)("Error"),
          description: (0, _languageHandler._t)("Unable to reject invite")
        });
      });
    });
    (0, _defineProperty2.default)(this, "_onJoinClick", async () => {
      if (this._matrixClient.isGuest()) {
        _dispatcher.default.dispatch({
          action: 'require_registration',
          screen_after: {
            screen: `group/${this.props.groupId}`
          }
        });

        return;
      }

      this.setState({
        membershipBusy: true
      }); // Wait 500ms to prevent flashing. Do this before sending a request otherwise we risk the
      // spinner disappearing after we have fetched new group data.

      await (0, _utils.sleep)(500);

      _GroupStore.default.joinGroup(this.props.groupId).then(() => {// don't reset membershipBusy here: wait for the membership change to come down the sync
      }).catch(e => {
        this.setState({
          membershipBusy: false
        });
        const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

        _Modal.default.createTrackedDialog('Error joining room', '', ErrorDialog, {
          title: (0, _languageHandler._t)("Error"),
          description: (0, _languageHandler._t)("Unable to join community")
        });
      });
    });
    (0, _defineProperty2.default)(this, "_onLeaveClick", () => {
      const QuestionDialog = sdk.getComponent("dialogs.QuestionDialog");

      const warnings = this._leaveGroupWarnings();

      _Modal.default.createTrackedDialog('Leave Group', '', QuestionDialog, {
        title: (0, _languageHandler._t)("Leave Community"),
        description: /*#__PURE__*/_react.default.createElement("span", null, (0, _languageHandler._t)("Leave %(groupName)s?", {
          groupName: this.props.groupId
        }), warnings),
        button: (0, _languageHandler._t)("Leave"),
        danger: this.state.isUserPrivileged,
        onFinished: async confirmed => {
          if (!confirmed) return;
          this.setState({
            membershipBusy: true
          }); // Wait 500ms to prevent flashing. Do this before sending a request otherwise we risk the
          // spinner disappearing after we have fetched new group data.

          await (0, _utils.sleep)(500);

          _GroupStore.default.leaveGroup(this.props.groupId).then(() => {// don't reset membershipBusy here: wait for the membership change to come down the sync
          }).catch(e => {
            this.setState({
              membershipBusy: false
            });
            const ErrorDialog = sdk.getComponent("dialogs.ErrorDialog");

            _Modal.default.createTrackedDialog('Error leaving community', '', ErrorDialog, {
              title: (0, _languageHandler._t)("Error"),
              description: (0, _languageHandler._t)("Unable to leave community")
            });
          });
        }
      });
    });
    (0, _defineProperty2.default)(this, "_onAddRoomsClick", () => {
      (0, _GroupAddressPicker.showGroupAddRoomDialog)(this.props.groupId);
    });
    (0, _defineProperty2.default)(this, "_dismissUpgradeNotice", () => {
      localStorage.setItem(UPGRADE_NOTICE_LS_KEY, "true");
      this.setState({
        showUpgradeNotice: false
      });
    });
    (0, _defineProperty2.default)(this, "_onCreateSpaceClick", () => {
      (0, _space.createSpaceFromCommunity)(this._matrixClient, this.props.groupId);
    });
    (0, _defineProperty2.default)(this, "_onAdminsLinkClick", () => {
      _dispatcher.default.dispatch({
        action: _actions.Action.SetRightPanelPhase,
        phase: _RightPanelStorePhases.RightPanelPhases.GroupMemberList
      });
    });
  }

  componentDidMount() {
    this._unmounted = false;
    this._matrixClient = _MatrixClientPeg.MatrixClientPeg.get();

    this._matrixClient.on("Group.myMembership", this._onGroupMyMembership);

    this._initGroupStore(this.props.groupId, true);

    this._dispatcherRef = _dispatcher.default.register(this._onAction);
    this._rightPanelStoreToken = _RightPanelStore.default.getSharedInstance().addListener(this._onRightPanelStoreUpdate);
  }

  componentWillUnmount() {
    this._unmounted = true;

    this._matrixClient.removeListener("Group.myMembership", this._onGroupMyMembership);

    _dispatcher.default.unregister(this._dispatcherRef); // Remove RightPanelStore listener


    if (this._rightPanelStoreToken) {
      this._rightPanelStoreToken.remove();
    }
  } // TODO: [REACT-WARNING] Replace with appropriate lifecycle event
  // eslint-disable-next-line camelcase


  UNSAFE_componentWillReceiveProps(newProps) {
    if (this.props.groupId !== newProps.groupId) {
      this.setState({
        summary: null,
        error: null
      }, () => {
        this._initGroupStore(newProps.groupId);
      });
    }
  }

  _initGroupStore(groupId, firstInit) {
    const group = this._matrixClient.getGroup(groupId);

    if (group && group.inviter && group.inviter.userId) {
      this._fetchInviterProfile(group.inviter.userId);
    }

    _GroupStore.default.registerListener(groupId, this.onGroupStoreUpdated.bind(this, firstInit));

    let willDoOnboarding = false; // XXX: This should be more fluxy - let's get the error from GroupStore .getError or something

    _GroupStore.default.on('error', (err, errorGroupId, stateKey) => {
      if (this._unmounted || groupId !== errorGroupId) return;

      if (err.errcode === 'M_GUEST_ACCESS_FORBIDDEN' && !willDoOnboarding) {
        _dispatcher.default.dispatch({
          action: 'do_after_sync_prepared',
          deferred_action: {
            action: 'view_group',
            group_id: groupId
          }
        });

        _dispatcher.default.dispatch({
          action: 'require_registration',
          screen_after: {
            screen: `group/${groupId}`
          }
        });

        willDoOnboarding = true;
      }

      if (stateKey === _GroupStore.default.STATE_KEY.Summary) {
        this.setState({
          summary: null,
          error: err,
          editing: false
        });
      }
    });
  }

  _fetchInviterProfile(userId) {
    this.setState({
      inviterProfileBusy: true
    });

    this._matrixClient.getProfileInfo(userId).then(resp => {
      if (this._unmounted) return;
      this.setState({
        inviterProfile: {
          avatarUrl: resp.avatar_url,
          displayName: resp.displayname
        }
      });
    }).catch(e => {
      _logger.logger.error('Error getting group inviter profile', e);
    }).finally(() => {
      if (this._unmounted) return;
      this.setState({
        inviterProfileBusy: false
      });
    });
  }

  async _saveGroup() {
    await this._matrixClient.setGroupProfile(this.props.groupId, this.state.profileForm);
    await this._matrixClient.setGroupJoinPolicy(this.props.groupId, {
      type: this.state.joinableForm.policyType
    });
  }

  _leaveGroupWarnings() {
    const warnings = [];

    if (this.state.isUserPrivileged) {
      warnings.push( /*#__PURE__*/_react.default.createElement("span", {
        className: "warning"
      }, " "
      /* Whitespace, otherwise the sentences get smashed together */
      , (0, _languageHandler._t)("You are an administrator of this community. You will not be " + "able to rejoin without an invite from another administrator.")));
    }

    return warnings;
  }

  _getGroupSection() {
    const groupSettingsSectionClasses = (0, _classnames.default)({
      "mx_GroupView_group": this.state.editing,
      "mx_GroupView_group_disabled": this.state.editing && !this.state.isUserPrivileged
    });
    const header = this.state.editing ? /*#__PURE__*/_react.default.createElement("h2", null, " ", (0, _languageHandler._t)('Community Settings'), " ") : /*#__PURE__*/_react.default.createElement("div", null);
    const hostingSignupLink = (0, _HostingLink.getHostingLink)('community-settings');
    let hostingSignup = null;

    if (hostingSignupLink && this.state.isUserPrivileged) {
      hostingSignup = /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_hostingSignup"
      }, (0, _languageHandler._t)("Want more than a community? <a>Get your own server</a>", {}, {
        a: sub => /*#__PURE__*/_react.default.createElement("a", {
          href: hostingSignupLink,
          target: "_blank",
          rel: "noreferrer noopener"
        }, sub)
      }), /*#__PURE__*/_react.default.createElement("a", {
        href: hostingSignupLink,
        target: "_blank",
        rel: "noreferrer noopener"
      }, /*#__PURE__*/_react.default.createElement("img", {
        src: require("../../../res/img/external-link.svg"),
        width: "11",
        height: "10",
        alt: ""
      })));
    }

    const changeDelayWarning = this.state.editing && this.state.isUserPrivileged ? /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_changeDelayWarning"
    }, (0, _languageHandler._t)('Changes made to your community <bold1>name</bold1> and <bold2>avatar</bold2> ' + 'might not be seen by other users for up to 30 minutes.', {}, {
      'bold1': sub => /*#__PURE__*/_react.default.createElement("b", null, " ", sub, " "),
      'bold2': sub => /*#__PURE__*/_react.default.createElement("b", null, " ", sub, " ")
    })) : /*#__PURE__*/_react.default.createElement("div", null);
    let communitiesUpgradeNotice;

    if (this.state.showUpgradeNotice) {
      let text;

      if (this.state.isUserPrivileged) {
        text = (0, _languageHandler._t)("You can create a Space from this community <a>here</a>.", {}, {
          a: sub => /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
            onClick: this._onCreateSpaceClick,
            kind: "link"
          }, sub)
        });
      } else {
        text = (0, _languageHandler._t)("Ask the <a>admins</a> of this community to make it into a Space " + "and keep a look out for the invite.", {}, {
          a: sub => /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
            onClick: this._onAdminsLinkClick,
            kind: "link"
          }, sub)
        });
      }

      communitiesUpgradeNotice = /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_spaceUpgradePrompt"
      }, /*#__PURE__*/_react.default.createElement("h2", null, (0, _languageHandler._t)("Communities can now be made into Spaces")), /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("Spaces are a new way to make a community, with new features coming."), "\xA0", text, "\xA0", (0, _languageHandler._t)("Communities won't receive further updates.")), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        className: "mx_GroupView_spaceUpgradePrompt_close",
        onClick: this._dismissUpgradeNotice
      }));
    }

    return /*#__PURE__*/_react.default.createElement("div", {
      className: groupSettingsSectionClasses
    }, header, hostingSignup, changeDelayWarning, communitiesUpgradeNotice, this._getJoinableNode(), this._getLongDescriptionNode(), this._getRoomsNode());
  }

  _getRoomsNode() {
    const RoomDetailList = sdk.getComponent('rooms.RoomDetailList');
    const AccessibleButton = sdk.getComponent('elements.AccessibleButton');
    const Spinner = sdk.getComponent('elements.Spinner');
    const TooltipButton = sdk.getComponent('elements.TooltipButton');
    const roomsHelpNode = this.state.editing ? /*#__PURE__*/_react.default.createElement(TooltipButton, {
      helpText: (0, _languageHandler._t)('These rooms are displayed to community members on the community page. ' + 'Community members can join the rooms by clicking on them.')
    }) : /*#__PURE__*/_react.default.createElement("div", null);
    const addRoomRow = this.state.editing ? /*#__PURE__*/_react.default.createElement(AccessibleButton, {
      className: "mx_GroupView_rooms_header_addRow",
      onClick: this._onAddRoomsClick
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_rooms_header_addRow_button"
    }, /*#__PURE__*/_react.default.createElement("img", {
      src: require("../../../res/img/icons-room-add.svg"),
      width: "24",
      height: "24"
    })), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_rooms_header_addRow_label"
    }, (0, _languageHandler._t)('Add rooms to this community'))) : /*#__PURE__*/_react.default.createElement("div", null);
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_rooms"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_rooms_header"
    }, /*#__PURE__*/_react.default.createElement("h3", null, (0, _languageHandler._t)('Rooms'), roomsHelpNode), addRoomRow), this.state.groupRoomsLoading ? /*#__PURE__*/_react.default.createElement(Spinner, null) : /*#__PURE__*/_react.default.createElement(RoomDetailList, {
      rooms: this.state.groupRooms
    }));
  }

  _getFeaturedRoomsNode() {
    const summary = this.state.summary;
    const defaultCategoryRooms = [];
    const categoryRooms = {};
    summary.rooms_section.rooms.forEach(r => {
      if (r.category_id === null) {
        defaultCategoryRooms.push(r);
      } else {
        let list = categoryRooms[r.category_id];

        if (list === undefined) {
          list = [];
          categoryRooms[r.category_id] = list;
        }

        list.push(r);
      }
    });

    const defaultCategoryNode = /*#__PURE__*/_react.default.createElement(CategoryRoomList, {
      rooms: defaultCategoryRooms,
      groupId: this.props.groupId,
      editing: this.state.editing
    });

    const categoryRoomNodes = Object.keys(categoryRooms).map(catId => {
      const cat = summary.rooms_section.categories[catId];
      return /*#__PURE__*/_react.default.createElement(CategoryRoomList, {
        key: catId,
        rooms: categoryRooms[catId],
        category: cat,
        groupId: this.props.groupId,
        editing: this.state.editing
      });
    });
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThings"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThings_header"
    }, (0, _languageHandler._t)('Featured Rooms:')), defaultCategoryNode, categoryRoomNodes);
  }

  _getFeaturedUsersNode() {
    const summary = this.state.summary;
    const noRoleUsers = [];
    const roleUsers = {};
    summary.users_section.users.forEach(u => {
      if (u.role_id === null) {
        noRoleUsers.push(u);
      } else {
        let list = roleUsers[u.role_id];

        if (list === undefined) {
          list = [];
          roleUsers[u.role_id] = list;
        }

        list.push(u);
      }
    });

    const noRoleNode = /*#__PURE__*/_react.default.createElement(RoleUserList, {
      users: noRoleUsers,
      groupId: this.props.groupId,
      editing: this.state.editing
    });

    const roleUserNodes = Object.keys(roleUsers).map(roleId => {
      const role = summary.users_section.roles[roleId];
      return /*#__PURE__*/_react.default.createElement(RoleUserList, {
        key: roleId,
        users: roleUsers[roleId],
        role: role,
        groupId: this.props.groupId,
        editing: this.state.editing
      });
    });
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThings"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_featuredThings_header"
    }, (0, _languageHandler._t)('Featured Users:')), noRoleNode, roleUserNodes);
  }

  _getMembershipSection() {
    const Spinner = sdk.getComponent("elements.Spinner");
    const BaseAvatar = sdk.getComponent("avatars.BaseAvatar");

    const group = this._matrixClient.getGroup(this.props.groupId);

    if (group && group.myMembership === 'invite') {
      if (this.state.membershipBusy || this.state.inviterProfileBusy) {
        return /*#__PURE__*/_react.default.createElement("div", {
          className: "mx_GroupView_membershipSection"
        }, /*#__PURE__*/_react.default.createElement(Spinner, null));
      }

      const httpInviterAvatar = this.state.inviterProfile && this.state.inviterProfile.avatarUrl ? (0, _Media.mediaFromMxc)(this.state.inviterProfile.avatarUrl).getSquareThumbnailHttp(36) : null;
      const inviter = group.inviter || {};
      let inviterName = inviter.userId;

      if (this.state.inviterProfile) {
        inviterName = this.state.inviterProfile.displayName || inviter.userId;
      }

      return /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_membershipSection mx_GroupView_membershipSection_invited"
      }, /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_membershipSubSection"
      }, /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_membershipSection_description"
      }, /*#__PURE__*/_react.default.createElement(BaseAvatar, {
        url: httpInviterAvatar,
        name: inviterName,
        width: 36,
        height: 36
      }), (0, _languageHandler._t)("%(inviter)s has invited you to join this community", {
        inviter: inviterName || (0, _languageHandler._t)("Someone")
      })), /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_membership_buttonContainer"
      }, /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        className: "mx_GroupView_textButton mx_RoomHeader_textButton",
        onClick: this._onAcceptInviteClick
      }, (0, _languageHandler._t)("Accept")), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        className: "mx_GroupView_textButton mx_RoomHeader_textButton",
        onClick: this._onRejectInviteClick
      }, (0, _languageHandler._t)("Decline")))));
    }

    let membershipContainerExtraClasses;
    let membershipButtonExtraClasses;
    let membershipButtonTooltip;
    let membershipButtonText;
    let membershipButtonOnClick; // User is not in the group

    if ((!group || group.myMembership === 'leave') && this.state.summary && this.state.summary.profile && Boolean(this.state.summary.profile.is_openly_joinable)) {
      membershipButtonText = (0, _languageHandler._t)("Join this community");
      membershipButtonOnClick = this._onJoinClick;
      membershipButtonExtraClasses = 'mx_GroupView_joinButton';
      membershipContainerExtraClasses = 'mx_GroupView_membershipSection_leave';
    } else if (group && group.myMembership === 'join' && this.state.editing) {
      membershipButtonText = (0, _languageHandler._t)("Leave this community");
      membershipButtonOnClick = this._onLeaveClick;
      membershipButtonTooltip = this.state.isUserPrivileged ? (0, _languageHandler._t)("You are an administrator of this community") : (0, _languageHandler._t)("You are a member of this community");
      membershipButtonExtraClasses = {
        'mx_GroupView_leaveButton': true,
        'mx_RoomHeader_textButton_danger': this.state.isUserPrivileged
      };
      membershipContainerExtraClasses = 'mx_GroupView_membershipSection_joined';
    } else {
      return null;
    }

    const membershipButtonClasses = (0, _classnames.default)(['mx_RoomHeader_textButton', 'mx_GroupView_textButton'], membershipButtonExtraClasses);
    const membershipContainerClasses = (0, _classnames.default)('mx_GroupView_membershipSection', membershipContainerExtraClasses);
    return /*#__PURE__*/_react.default.createElement("div", {
      className: membershipContainerClasses
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_membershipSubSection"
    }, this.state.membershipBusy ? /*#__PURE__*/_react.default.createElement(Spinner, null) : /*#__PURE__*/_react.default.createElement("div", null), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_membership_buttonContainer"
    }, /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: membershipButtonClasses,
      onClick: membershipButtonOnClick,
      title: membershipButtonTooltip
    }, membershipButtonText))));
  }

  _getJoinableNode() {
    const InlineSpinner = sdk.getComponent('elements.InlineSpinner');
    return this.state.editing ? /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("h3", null, (0, _languageHandler._t)('Who can join this community?'), this.state.groupJoinableLoading ? /*#__PURE__*/_react.default.createElement(InlineSpinner, null) : /*#__PURE__*/_react.default.createElement("div", null)), /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("label", null, /*#__PURE__*/_react.default.createElement("input", {
      type: "radio",
      value: GROUP_JOINPOLICY_INVITE,
      checked: this.state.joinableForm.policyType === GROUP_JOINPOLICY_INVITE,
      onChange: this._onJoinableChange
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_label_text"
    }, (0, _languageHandler._t)('Only people who have been invited')))), /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("label", null, /*#__PURE__*/_react.default.createElement("input", {
      type: "radio",
      value: GROUP_JOINPOLICY_OPEN,
      checked: this.state.joinableForm.policyType === GROUP_JOINPOLICY_OPEN,
      onChange: this._onJoinableChange
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_label_text"
    }, (0, _languageHandler._t)('Everyone'))))) : null;
  }

  _getLongDescriptionNode() {
    const summary = this.state.summary;
    let description = null;

    if (summary.profile && summary.profile.long_description) {
      description = (0, _HtmlUtils.sanitizedHtmlNode)(summary.profile.long_description);
    } else if (this.state.isUserPrivileged) {
      description = /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_groupDesc_placeholder",
        onClick: this._onEditClick
      }, (0, _languageHandler._t)('Your community hasn\'t got a Long Description, a HTML page to show to community members.<br />' + 'Click here to open settings and give it one!', {}, {
        'br': /*#__PURE__*/_react.default.createElement("br", null)
      }));
    }

    const groupDescEditingClasses = (0, _classnames.default)({
      "mx_GroupView_groupDesc": true,
      "mx_GroupView_groupDesc_disabled": !this.state.isUserPrivileged
    });
    return this.state.editing ? /*#__PURE__*/_react.default.createElement("div", {
      className: groupDescEditingClasses
    }, /*#__PURE__*/_react.default.createElement("h3", null, " ", (0, _languageHandler._t)("Long Description (HTML)"), " "), /*#__PURE__*/_react.default.createElement("textarea", {
      value: this.state.profileForm.long_description,
      placeholder: (0, _languageHandler._t)(LONG_DESC_PLACEHOLDER),
      onChange: this._onLongDescChange,
      tabIndex: "4",
      key: "editLongDesc"
    })) : /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_GroupView_groupDesc"
    }, description);
  }

  render() {
    const GroupAvatar = sdk.getComponent("avatars.GroupAvatar");
    const Spinner = sdk.getComponent("elements.Spinner");

    if (this.state.summaryLoading && this.state.error === null || this.state.saving) {
      return /*#__PURE__*/_react.default.createElement(Spinner, null);
    } else if (this.state.summary && !this.state.error) {
      const summary = this.state.summary;
      let avatarNode;
      let nameNode;
      let shortDescNode;
      const rightButtons = [];

      if (this.state.editing && this.state.isUserPrivileged) {
        let avatarImage;

        if (this.state.uploadingAvatar) {
          avatarImage = /*#__PURE__*/_react.default.createElement(Spinner, null);
        } else {
          const GroupAvatar = sdk.getComponent('avatars.GroupAvatar');
          avatarImage = /*#__PURE__*/_react.default.createElement(GroupAvatar, {
            groupId: this.props.groupId,
            groupName: this.state.profileForm.name,
            groupAvatarUrl: this.state.profileForm.avatar_url,
            width: 28,
            height: 28,
            resizeMethod: "crop"
          });
        }

        avatarNode = /*#__PURE__*/_react.default.createElement("div", {
          className: "mx_GroupView_avatarPicker"
        }, /*#__PURE__*/_react.default.createElement("label", {
          htmlFor: "avatarInput",
          className: "mx_GroupView_avatarPicker_label"
        }, avatarImage), /*#__PURE__*/_react.default.createElement("div", {
          className: "mx_GroupView_avatarPicker_edit"
        }, /*#__PURE__*/_react.default.createElement("label", {
          htmlFor: "avatarInput",
          className: "mx_GroupView_avatarPicker_label"
        }, /*#__PURE__*/_react.default.createElement("img", {
          src: require("../../../res/img/camera.svg"),
          alt: (0, _languageHandler._t)("Upload avatar"),
          title: (0, _languageHandler._t)("Upload avatar"),
          width: "17",
          height: "15"
        })), /*#__PURE__*/_react.default.createElement("input", {
          id: "avatarInput",
          className: "mx_GroupView_uploadInput",
          type: "file",
          onChange: this._onAvatarSelected
        })));
        const EditableText = sdk.getComponent("elements.EditableText");
        nameNode = /*#__PURE__*/_react.default.createElement(EditableText, {
          className: "mx_GroupView_editable",
          placeholderClassName: "mx_GroupView_placeholder",
          placeholder: (0, _languageHandler._t)('Community Name'),
          blurToCancel: false,
          initialValue: this.state.profileForm.name,
          onValueChanged: this._onNameChange,
          tabIndex: "0",
          dir: "auto"
        });
        shortDescNode = /*#__PURE__*/_react.default.createElement(EditableText, {
          className: "mx_GroupView_editable",
          placeholderClassName: "mx_GroupView_placeholder",
          placeholder: (0, _languageHandler._t)("Description"),
          blurToCancel: false,
          initialValue: this.state.profileForm.short_description,
          onValueChanged: this._onShortDescChange,
          tabIndex: "0",
          dir: "auto"
        });
      } else {
        const onGroupHeaderItemClick = this.state.isUserMember ? this._onEditClick : null;
        const groupAvatarUrl = summary.profile ? summary.profile.avatar_url : null;
        const groupName = summary.profile ? summary.profile.name : null;
        avatarNode = /*#__PURE__*/_react.default.createElement(GroupAvatar, {
          groupId: this.props.groupId,
          groupAvatarUrl: groupAvatarUrl,
          groupName: groupName,
          onClick: onGroupHeaderItemClick,
          width: 28,
          height: 28
        });

        if (summary.profile && summary.profile.name) {
          nameNode = /*#__PURE__*/_react.default.createElement("div", {
            onClick: onGroupHeaderItemClick
          }, /*#__PURE__*/_react.default.createElement("span", null, summary.profile.name), /*#__PURE__*/_react.default.createElement("span", {
            className: "mx_GroupView_header_groupid"
          }, "(", this.props.groupId, ")"));
        } else {
          nameNode = /*#__PURE__*/_react.default.createElement("span", {
            onClick: onGroupHeaderItemClick
          }, this.props.groupId);
        }

        if (summary.profile && summary.profile.short_description) {
          shortDescNode = /*#__PURE__*/_react.default.createElement("span", {
            onClick: onGroupHeaderItemClick
          }, summary.profile.short_description);
        }
      }

      if (this.state.editing) {
        rightButtons.push( /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
          className: "mx_GroupView_textButton mx_RoomHeader_textButton",
          key: "_saveButton",
          onClick: this._onSaveClick
        }, (0, _languageHandler._t)('Save')));
        rightButtons.push( /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
          className: "mx_RoomHeader_cancelButton",
          key: "_cancelButton",
          onClick: this._onCancelClick
        }, /*#__PURE__*/_react.default.createElement("img", {
          src: require("../../../res/img/cancel.svg"),
          className: "mx_filterFlipColor",
          width: "18",
          height: "18",
          alt: (0, _languageHandler._t)("Cancel")
        })));
      } else {
        if (summary.user && summary.user.membership === 'join') {
          rightButtons.push( /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
            className: "mx_GroupHeader_button mx_GroupHeader_editButton",
            key: "_editButton",
            onClick: this._onEditClick,
            title: (0, _languageHandler._t)("Community Settings")
          }));
        }

        rightButtons.push( /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
          className: "mx_GroupHeader_button mx_GroupHeader_shareButton",
          key: "_shareButton",
          onClick: this._onShareClick,
          title: (0, _languageHandler._t)('Share Community')
        }));
      }

      const rightPanel = this.state.showRightPanel ? /*#__PURE__*/_react.default.createElement(_RightPanel.default, {
        groupId: this.props.groupId
      }) : undefined;
      const headerClasses = {
        "mx_GroupView_header": true,
        "light-panel": true,
        "mx_GroupView_header_view": !this.state.editing,
        "mx_GroupView_header_isUserMember": this.state.isUserMember
      };
      return /*#__PURE__*/_react.default.createElement("main", {
        className: "mx_GroupView"
      }, /*#__PURE__*/_react.default.createElement("div", {
        className: (0, _classnames.default)(headerClasses)
      }, /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_header_leftCol"
      }, /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_header_avatar"
      }, avatarNode), /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_header_info"
      }, /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_header_name"
      }, nameNode), /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_header_shortDesc"
      }, shortDescNode))), /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_GroupView_header_rightCol"
      }, rightButtons), /*#__PURE__*/_react.default.createElement(_GroupHeaderButtons.default, null)), /*#__PURE__*/_react.default.createElement(_MainSplit.default, {
        panel: rightPanel,
        resizeNotifier: this.props.resizeNotifier
      }, /*#__PURE__*/_react.default.createElement(_AutoHideScrollbar.default, {
        className: "mx_GroupView_body"
      }, this._getMembershipSection(), this._getGroupSection())));
    } else if (this.state.error) {
      if (this.state.error.httpStatus === 404) {
        return /*#__PURE__*/_react.default.createElement("div", {
          className: "mx_GroupView_error"
        }, (0, _languageHandler._t)('Community %(groupId)s not found', {
          groupId: this.props.groupId
        }));
      } else {
        let extraText;

        if (this.state.error.errcode === 'M_UNRECOGNIZED') {
          extraText = /*#__PURE__*/_react.default.createElement("div", null, (0, _languageHandler._t)('This homeserver does not support communities'));
        }

        return /*#__PURE__*/_react.default.createElement("div", {
          className: "mx_GroupView_error"
        }, (0, _languageHandler._t)('Failed to load %(groupId)s', {
          groupId: this.props.groupId
        }), extraText);
      }
    } else {
      _logger.logger.error("Invalid state for GroupView");

      return /*#__PURE__*/_react.default.createElement("div", null);
    }
  }

}, (0, _defineProperty2.default)(_class2, "propTypes", {
  groupId: _propTypes.default.string.isRequired,
  // Whether this is the first time the group admin is viewing the group
  groupIsNew: _propTypes.default.bool
}), _temp)) || _class);
exports.default = GroupView;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3N0cnVjdHVyZXMvR3JvdXBWaWV3LmpzIl0sIm5hbWVzIjpbIkxPTkdfREVTQ19QTEFDRUhPTERFUiIsIlJvb21TdW1tYXJ5VHlwZSIsIlByb3BUeXBlcyIsInNoYXBlIiwicm9vbV9pZCIsInN0cmluZyIsImlzUmVxdWlyZWQiLCJwcm9maWxlIiwibmFtZSIsImF2YXRhcl91cmwiLCJjYW5vbmljYWxfYWxpYXMiLCJVc2VyU3VtbWFyeVR5cGUiLCJzdW1tYXJ5SW5mbyIsInVzZXJfaWQiLCJyb2xlX2lkIiwiZGlzcGxheW5hbWUiLCJDYXRlZ29yeVJvb21MaXN0IiwiUmVhY3QiLCJDb21wb25lbnQiLCJldiIsInByZXZlbnREZWZhdWx0IiwiQWRkcmVzc1BpY2tlckRpYWxvZyIsInNkayIsImdldENvbXBvbmVudCIsIk1vZGFsIiwiY3JlYXRlVHJhY2tlZERpYWxvZyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwbGFjZWhvbGRlciIsImJ1dHRvbiIsInBpY2tlclR5cGUiLCJ2YWxpZEFkZHJlc3NUeXBlcyIsImdyb3VwSWQiLCJwcm9wcyIsIm9uRmluaXNoZWQiLCJzdWNjZXNzIiwiYWRkcnMiLCJlcnJvckxpc3QiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsIm1hcCIsImFkZHIiLCJHcm91cFN0b3JlIiwiYWRkUm9vbVRvR3JvdXBTdW1tYXJ5IiwiYWRkcmVzcyIsImNhdGNoIiwicHVzaCIsInRoZW4iLCJsZW5ndGgiLCJFcnJvckRpYWxvZyIsImpvaW4iLCJyZW5kZXIiLCJhZGRCdXR0b24iLCJlZGl0aW5nIiwib25BZGRSb29tc1RvU3VtbWFyeUNsaWNrZWQiLCJyZXF1aXJlIiwicm9vbU5vZGVzIiwicm9vbXMiLCJyIiwiY2F0SGVhZGVyIiwiY2F0ZWdvcnkiLCJhcnJheU9mIiwiYm9vbCIsIkZlYXR1cmVkUm9vbSIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJkaXMiLCJkaXNwYXRjaCIsImFjdGlvbiIsIkFjdGlvbiIsIlZpZXdSb29tIiwicm9vbV9hbGlhcyIsInJlbW92ZVJvb21Gcm9tR3JvdXBTdW1tYXJ5IiwiZXJyIiwibG9nZ2VyIiwiZXJyb3IiLCJyb29tTmFtZSIsIlJvb21BdmF0YXIiLCJvb2JEYXRhIiwicm9vbUlkIiwiYXZhdGFyVXJsIiwicGVybWFsaW5rIiwicm9vbU5hbWVOb2RlIiwib25DbGljayIsImRlbGV0ZUJ1dHRvbiIsIm9uRGVsZXRlQ2xpY2tlZCIsIlJvbGVVc2VyTGlzdCIsInNob3VsZE9taXRTZWxmIiwiYWRkVXNlclRvR3JvdXBTdW1tYXJ5Iiwib25BZGRVc2Vyc0NsaWNrZWQiLCJ1c2VyTm9kZXMiLCJ1c2VycyIsInUiLCJyb2xlSGVhZGVyIiwicm9sZSIsIkZlYXR1cmVkVXNlciIsInJlbW92ZVVzZXJGcm9tR3JvdXBTdW1tYXJ5IiwiZGlzcGxheU5hbWUiLCJCYXNlQXZhdGFyIiwidXNlck5hbWVOb2RlIiwiaHR0cFVybCIsImdldFNxdWFyZVRodW1ibmFpbEh0dHAiLCJHUk9VUF9KT0lOUE9MSUNZX09QRU4iLCJHUk9VUF9KT0lOUE9MSUNZX0lOVklURSIsIlVQR1JBREVfTk9USUNFX0xTX0tFWSIsIkdyb3VwVmlldyIsInN1bW1hcnkiLCJpc0dyb3VwUHVibGljaXNlZCIsImlzVXNlclByaXZpbGVnZWQiLCJncm91cFJvb21zIiwiZ3JvdXBSb29tc0xvYWRpbmciLCJzYXZpbmciLCJ1cGxvYWRpbmdBdmF0YXIiLCJhdmF0YXJDaGFuZ2VkIiwibWVtYmVyc2hpcEJ1c3kiLCJwdWJsaWNpdHlCdXN5IiwiaW52aXRlclByb2ZpbGUiLCJzaG93UmlnaHRQYW5lbCIsIlJpZ2h0UGFuZWxTdG9yZSIsImdldFNoYXJlZEluc3RhbmNlIiwiaXNPcGVuRm9yR3JvdXAiLCJzaG93VXBncmFkZU5vdGljZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRTdGF0ZSIsImdyb3VwIiwiX3VubW91bnRlZCIsIm15TWVtYmVyc2hpcCIsIl9jbG9zZVNldHRpbmdzIiwiZmlyc3RJbml0IiwiZ2V0U3VtbWFyeSIsImZvckVhY2giLCJrIiwic3VtbWFyeUxvYWRpbmciLCJpc1N0YXRlUmVhZHkiLCJTVEFURV9LRVkiLCJTdW1tYXJ5IiwiZ2V0R3JvdXBQdWJsaWNpdHkiLCJnZXRHcm91cFJvb21zIiwiR3JvdXBSb29tcyIsImlzVXNlck1lbWJlciIsImdldEdyb3VwTWVtYmVycyIsInNvbWUiLCJtIiwidXNlcklkIiwiX21hdHJpeENsaWVudCIsImNyZWRlbnRpYWxzIiwiZ3JvdXBJc05ldyIsIl9vbkVkaXRDbGljayIsInByb2ZpbGVGb3JtIiwiT2JqZWN0IiwiYXNzaWduIiwic3RhdGUiLCJqb2luYWJsZUZvcm0iLCJwb2xpY3lUeXBlIiwiaXNfb3Blbmx5X2pvaW5hYmxlIiwiU2hhcmVEaWFsb2ciLCJ0YXJnZXQiLCJnZXRHcm91cCIsIkdyb3VwIiwicGF5bG9hZCIsInZhbHVlIiwibmV3UHJvZmlsZUZvcm0iLCJzaG9ydF9kZXNjcmlwdGlvbiIsImxvbmdfZGVzY3JpcHRpb24iLCJmaWxlIiwiZmlsZXMiLCJ1cGxvYWRDb250ZW50IiwidXJsIiwic2F2ZVByb21pc2UiLCJfc2F2ZUdyb3VwIiwicmVzb2x2ZSIsInJlc3VsdCIsIl9pbml0R3JvdXBTdG9yZSIsIkZsYWlyU3RvcmUiLCJyZWZyZXNoR3JvdXBQcm9maWxlIiwiZmluYWxseSIsImFjY2VwdEdyb3VwSW52aXRlIiwibGVhdmVHcm91cCIsImlzR3Vlc3QiLCJzY3JlZW5fYWZ0ZXIiLCJzY3JlZW4iLCJqb2luR3JvdXAiLCJRdWVzdGlvbkRpYWxvZyIsIndhcm5pbmdzIiwiX2xlYXZlR3JvdXBXYXJuaW5ncyIsImdyb3VwTmFtZSIsImRhbmdlciIsImNvbmZpcm1lZCIsInNldEl0ZW0iLCJTZXRSaWdodFBhbmVsUGhhc2UiLCJwaGFzZSIsIlJpZ2h0UGFuZWxQaGFzZXMiLCJHcm91cE1lbWJlckxpc3QiLCJjb21wb25lbnREaWRNb3VudCIsIk1hdHJpeENsaWVudFBlZyIsImdldCIsIm9uIiwiX29uR3JvdXBNeU1lbWJlcnNoaXAiLCJfZGlzcGF0Y2hlclJlZiIsInJlZ2lzdGVyIiwiX29uQWN0aW9uIiwiX3JpZ2h0UGFuZWxTdG9yZVRva2VuIiwiYWRkTGlzdGVuZXIiLCJfb25SaWdodFBhbmVsU3RvcmVVcGRhdGUiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInJlbW92ZUxpc3RlbmVyIiwidW5yZWdpc3RlciIsInJlbW92ZSIsIlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIiwibmV3UHJvcHMiLCJpbnZpdGVyIiwiX2ZldGNoSW52aXRlclByb2ZpbGUiLCJyZWdpc3Rlckxpc3RlbmVyIiwib25Hcm91cFN0b3JlVXBkYXRlZCIsImJpbmQiLCJ3aWxsRG9PbmJvYXJkaW5nIiwiZXJyb3JHcm91cElkIiwic3RhdGVLZXkiLCJlcnJjb2RlIiwiZGVmZXJyZWRfYWN0aW9uIiwiZ3JvdXBfaWQiLCJpbnZpdGVyUHJvZmlsZUJ1c3kiLCJnZXRQcm9maWxlSW5mbyIsInJlc3AiLCJzZXRHcm91cFByb2ZpbGUiLCJzZXRHcm91cEpvaW5Qb2xpY3kiLCJ0eXBlIiwiX2dldEdyb3VwU2VjdGlvbiIsImdyb3VwU2V0dGluZ3NTZWN0aW9uQ2xhc3NlcyIsImhlYWRlciIsImhvc3RpbmdTaWdudXBMaW5rIiwiaG9zdGluZ1NpZ251cCIsImEiLCJzdWIiLCJjaGFuZ2VEZWxheVdhcm5pbmciLCJjb21tdW5pdGllc1VwZ3JhZGVOb3RpY2UiLCJ0ZXh0IiwiX29uQ3JlYXRlU3BhY2VDbGljayIsIl9vbkFkbWluc0xpbmtDbGljayIsIl9kaXNtaXNzVXBncmFkZU5vdGljZSIsIl9nZXRKb2luYWJsZU5vZGUiLCJfZ2V0TG9uZ0Rlc2NyaXB0aW9uTm9kZSIsIl9nZXRSb29tc05vZGUiLCJSb29tRGV0YWlsTGlzdCIsIkFjY2Vzc2libGVCdXR0b24iLCJTcGlubmVyIiwiVG9vbHRpcEJ1dHRvbiIsInJvb21zSGVscE5vZGUiLCJhZGRSb29tUm93IiwiX29uQWRkUm9vbXNDbGljayIsIl9nZXRGZWF0dXJlZFJvb21zTm9kZSIsImRlZmF1bHRDYXRlZ29yeVJvb21zIiwiY2F0ZWdvcnlSb29tcyIsInJvb21zX3NlY3Rpb24iLCJjYXRlZ29yeV9pZCIsImxpc3QiLCJ1bmRlZmluZWQiLCJkZWZhdWx0Q2F0ZWdvcnlOb2RlIiwiY2F0ZWdvcnlSb29tTm9kZXMiLCJrZXlzIiwiY2F0SWQiLCJjYXQiLCJjYXRlZ29yaWVzIiwiX2dldEZlYXR1cmVkVXNlcnNOb2RlIiwibm9Sb2xlVXNlcnMiLCJyb2xlVXNlcnMiLCJ1c2Vyc19zZWN0aW9uIiwibm9Sb2xlTm9kZSIsInJvbGVVc2VyTm9kZXMiLCJyb2xlSWQiLCJyb2xlcyIsIl9nZXRNZW1iZXJzaGlwU2VjdGlvbiIsImh0dHBJbnZpdGVyQXZhdGFyIiwiaW52aXRlck5hbWUiLCJfb25BY2NlcHRJbnZpdGVDbGljayIsIl9vblJlamVjdEludml0ZUNsaWNrIiwibWVtYmVyc2hpcENvbnRhaW5lckV4dHJhQ2xhc3NlcyIsIm1lbWJlcnNoaXBCdXR0b25FeHRyYUNsYXNzZXMiLCJtZW1iZXJzaGlwQnV0dG9uVG9vbHRpcCIsIm1lbWJlcnNoaXBCdXR0b25UZXh0IiwibWVtYmVyc2hpcEJ1dHRvbk9uQ2xpY2siLCJCb29sZWFuIiwiX29uSm9pbkNsaWNrIiwiX29uTGVhdmVDbGljayIsIm1lbWJlcnNoaXBCdXR0b25DbGFzc2VzIiwibWVtYmVyc2hpcENvbnRhaW5lckNsYXNzZXMiLCJJbmxpbmVTcGlubmVyIiwiZ3JvdXBKb2luYWJsZUxvYWRpbmciLCJfb25Kb2luYWJsZUNoYW5nZSIsImdyb3VwRGVzY0VkaXRpbmdDbGFzc2VzIiwiX29uTG9uZ0Rlc2NDaGFuZ2UiLCJHcm91cEF2YXRhciIsImF2YXRhck5vZGUiLCJuYW1lTm9kZSIsInNob3J0RGVzY05vZGUiLCJyaWdodEJ1dHRvbnMiLCJhdmF0YXJJbWFnZSIsIl9vbkF2YXRhclNlbGVjdGVkIiwiRWRpdGFibGVUZXh0IiwiX29uTmFtZUNoYW5nZSIsIl9vblNob3J0RGVzY0NoYW5nZSIsIm9uR3JvdXBIZWFkZXJJdGVtQ2xpY2siLCJncm91cEF2YXRhclVybCIsIl9vblNhdmVDbGljayIsIl9vbkNhbmNlbENsaWNrIiwidXNlciIsIm1lbWJlcnNoaXAiLCJfb25TaGFyZUNsaWNrIiwicmlnaHRQYW5lbCIsImhlYWRlckNsYXNzZXMiLCJyZXNpemVOb3RpZmllciIsImh0dHBTdGF0dXMiLCJleHRyYVRleHQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBa0JBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOzs7Ozs7OztBQUVBLE1BQU1BLHFCQUFxQixHQUFHLDBCQUN6QjtBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FUOEIsQ0FBOUI7O0FBV0EsTUFBTUMsZUFBZSxHQUFHQyxtQkFBVUMsS0FBVixDQUFnQjtBQUNwQ0MsRUFBQUEsT0FBTyxFQUFFRixtQkFBVUcsTUFBVixDQUFpQkMsVUFEVTtBQUVwQ0MsRUFBQUEsT0FBTyxFQUFFTCxtQkFBVUMsS0FBVixDQUFnQjtBQUNyQkssSUFBQUEsSUFBSSxFQUFFTixtQkFBVUcsTUFESztBQUVyQkksSUFBQUEsVUFBVSxFQUFFUCxtQkFBVUcsTUFGRDtBQUdyQkssSUFBQUEsZUFBZSxFQUFFUixtQkFBVUc7QUFITixHQUFoQixFQUlOQztBQU5pQyxDQUFoQixDQUF4Qjs7QUFTQSxNQUFNSyxlQUFlLEdBQUdULG1CQUFVQyxLQUFWLENBQWdCO0FBQ3BDUyxFQUFBQSxXQUFXLEVBQUVWLG1CQUFVQyxLQUFWLENBQWdCO0FBQ3pCVSxJQUFBQSxPQUFPLEVBQUVYLG1CQUFVRyxNQUFWLENBQWlCQyxVQUREO0FBRXpCUSxJQUFBQSxPQUFPLEVBQUVaLG1CQUFVRyxNQUZNO0FBR3pCSSxJQUFBQSxVQUFVLEVBQUVQLG1CQUFVRyxN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SzZFLEtBQUwsQ0FBVzdFLEtBQVgsQ0FBaUI2TyxVQUFqQixLQUFnQyxHQUFwQyxFQUF5QztBQUNyQyw0QkFDSTtBQUFLLFVBQUEsU0FBUyxFQUFDO0FBQWYsV0FDTSx5QkFBRyxpQ0FBSCxFQUFzQztBQUFFeFIsVUFBQUEsT0FBTyxFQUFFLEtBQUtDLEtBQUwsQ0FBV0Q7QUFBdEIsU0FBdEMsQ0FETixDQURKO0FBS0gsT0FORCxNQU1PO0FBQ0gsWUFBSXlSLFNBQUo7O0FBQ0EsWUFBSSxLQUFLakssS0FBTCxDQUFXN0UsS0FBWCxDQUFpQmdKLE9BQWpCLEtBQTZCLGdCQUFqQyxFQUFtRDtBQUMvQzhGLFVBQUFBLFNBQVMsZ0JBQUcsMENBQU8seUJBQUcsOENBQUgsQ0FBUCxDQUFaO0FBQ0g7O0FBQ0QsNEJBQ0k7QUFBSyxVQUFBLFNBQVMsRUFBQztBQUFmLFdBQ00seUJBQUcsNEJBQUgsRUFBaUM7QUFBRXpSLFVBQUFBLE9BQU8sRUFBRSxLQUFLQyxLQUFMLENBQVdEO0FBQXRCLFNBQWpDLENBRE4sRUFFTXlSLFNBRk4sQ0FESjtBQU1IO0FBQ0osS0FuQk0sTUFtQkE7QUFDSC9PLHFCQUFPQyxLQUFQLENBQWEsNkJBQWI7O0FBQ0EsMEJBQU8seUNBQVA7QUFDSDtBQUNKOztBQTMvQmtELEMsc0RBQ2hDO0FBQ2YzQyxFQUFBQSxPQUFPLEVBQUU5QixtQkFBVUcsTUFBVixDQUFpQkMsVUFEWDtBQUVmO0FBQ0E2SSxFQUFBQSxVQUFVLEVBQUVqSixtQkFBVTREO0FBSFAsQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAxNyBWZWN0b3IgQ3JlYXRpb25zIEx0ZC5cbkNvcHlyaWdodCAyMDE3LCAyMDE4IE5ldyBWZWN0b3IgTHRkLlxuQ29weXJpZ2h0IDIwMTkgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IE1hdHJpeENsaWVudFBlZyB9IGZyb20gJy4uLy4uL01hdHJpeENsaWVudFBlZyc7XG5pbXBvcnQgKiBhcyBzZGsgZnJvbSAnLi4vLi4vaW5kZXgnO1xuaW1wb3J0IGRpcyBmcm9tICcuLi8uLi9kaXNwYXRjaGVyL2Rpc3BhdGNoZXInO1xuaW1wb3J0IHsgZ2V0SG9zdGluZ0xpbmsgfSBmcm9tICcuLi8uLi91dGlscy9Ib3N0aW5nTGluayc7XG5pbXBvcnQgeyBzYW5pdGl6ZWRIdG1sTm9kZSB9IGZyb20gJy4uLy4uL0h0bWxVdGlscyc7XG5pbXBvcnQgeyBfdCwgX3RkIH0gZnJvbSAnLi4vLi4vbGFuZ3VhZ2VIYW5kbGVyJztcbmltcG9ydCBBY2Nlc3NpYmxlQnV0dG9uIGZyb20gJy4uL3ZpZXdzL2VsZW1lbnRzL0FjY2Vzc2libGVCdXR0b24nO1xuaW1wb3J0IEdyb3VwSGVhZGVyQnV0dG9ucyBmcm9tICcuLi92aWV3cy9yaWdodF9wYW5lbC9Hcm91cEhlYWRlckJ1dHRvbnMnO1xuaW1wb3J0IE1haW5TcGxpdCBmcm9tICcuL01haW5TcGxpdCc7XG5pbXBvcnQgUmlnaHRQYW5lbCBmcm9tICcuL1JpZ2h0UGFuZWwnO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4uLy4uL01vZGFsJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgR3JvdXBTdG9yZSBmcm9tICcuLi8uLi9zdG9yZXMvR3JvdXBTdG9yZSc7XG5pbXBvcnQgRmxhaXJTdG9yZSBmcm9tICcuLi8uLi9zdG9yZXMvRmxhaXJTdG9yZSc7XG5pbXBvcnQgeyBzaG93R3JvdXBBZGRSb29tRGlhbG9nIH0gZnJvbSAnLi4vLi4vR3JvdXBBZGRyZXNzUGlja2VyJztcbmltcG9ydCB7IG1ha2VHcm91cFBlcm1hbGluaywgbWFrZVVzZXJQZXJtYWxpbmsgfSBmcm9tIFwiLi4vLi4vdXRpbHMvcGVybWFsaW5rcy9QZXJtYWxpbmtzXCI7XG5pbXBvcnQgeyBHcm91cCB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvZ3JvdXBcIjtcbmltcG9ydCB7IHNsZWVwIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL3V0aWxzXCI7XG5pbXBvcnQgUmlnaHRQYW5lbFN0b3JlIGZyb20gXCIuLi8uLi9zdG9yZXMvUmlnaHRQYW5lbFN0b3JlXCI7XG5pbXBvcnQgQXV0b0hpZGVTY3JvbGxiYXIgZnJvbSBcIi4vQXV0b0hpZGVTY3JvbGxiYXJcIjtcbmltcG9ydCB7IG1lZGlhRnJvbU14YyB9IGZyb20gXCIuLi8uLi9jdXN0b21pc2F0aW9ucy9NZWRpYVwiO1xuaW1wb3J0IHsgcmVwbGFjZWFibGVDb21wb25lbnQgfSBmcm9tIFwiLi4vLi4vdXRpbHMvcmVwbGFjZWFibGVDb21wb25lbnRcIjtcbmltcG9ydCB7IGNyZWF0ZVNwYWNlRnJvbUNvbW11bml0eSB9IGZyb20gXCIuLi8uLi91dGlscy9zcGFjZVwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4uLy4uL2Rpc3BhdGNoZXIvYWN0aW9uc1wiO1xuaW1wb3J0IHsgUmlnaHRQYW5lbFBoYXNlcyB9IGZyb20gXCIuLi8uLi9zdG9yZXMvUmlnaHRQYW5lbFN0b3JlUGhhc2VzXCI7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9sb2dnZXJcIjtcblxuY29uc3QgTE9OR19ERVNDX1BMQUNFSE9MREVSID0gX3RkKFxuICAgIGA8aDE+SFRNTCBmb3IgeW91ciBjb21tdW5pdHkncyBwYWdlPC9oMT5cbjxwPlxuICAgIFVzZSB0aGUgbG9uZyBkZXNjcmlwdGlvbiB0byBpbnRyb2R1Y2UgbmV3IG1lbWJlcnMgdG8gdGhlIGNvbW11bml0eSwgb3IgZGlzdHJpYnV0ZVxuICAgIHNvbWUgaW1wb3J0YW50IDxhIGhyZWY9XCJmb29cIj5saW5rczwvYT5cbjwvcD5cbjxwPlxuICAgIFlvdSBjYW4gZXZlbiBhZGQgaW1hZ2VzIHdpdGggTWF0cml4IFVSTHMgPGltZyBzcmM9XCJteGM6Ly91cmxcIiAvPlxuPC9wPlxuYCk7XG5cbmNvbnN0IFJvb21TdW1tYXJ5VHlwZSA9IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgcm9vbV9pZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHByb2ZpbGU6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGF2YXRhcl91cmw6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGNhbm9uaWNhbF9hbGlhczogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB9KS5pc1JlcXVpcmVkLFxufSk7XG5cbmNvbnN0IFVzZXJTdW1tYXJ5VHlwZSA9IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgc3VtbWFyeUluZm86IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIHVzZXJfaWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgcm9sZV9pZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgYXZhdGFyX3VybDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgZGlzcGxheW5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgfSkuaXNSZXF1aXJlZCxcbn0pO1xuXG5jbGFzcyBDYXRlZ29yeVJvb21MaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICByb29tczogUHJvcFR5cGVzLmFycmF5T2YoUm9vbVN1bW1hcnlUeXBlKS5pc1JlcXVpcmVkLFxuICAgICAgICBjYXRlZ29yeTogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICAgIHByb2ZpbGU6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgICAgIH0pLmlzUmVxdWlyZWQsXG4gICAgICAgIH0pLFxuICAgICAgICBncm91cElkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgLy8gV2hldGhlciB0aGUgbGlzdCBzaG91bGQgYmUgZWRpdGFibGVcbiAgICAgICAgZWRpdGluZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICB9O1xuXG4gICAgb25BZGRSb29tc1RvU3VtbWFyeUNsaWNrZWQgPSAoZXYpID0+IHtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgQWRkcmVzc1BpY2tlckRpYWxvZyA9IHNkay5nZXRDb21wb25lbnQoXCJkaWFsb2dzLkFkZHJlc3NQaWNrZXJEaWFsb2dcIik7XG4gICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ0FkZCBSb29tcyB0byBHcm91cCBTdW1tYXJ5JywgJycsIEFkZHJlc3NQaWNrZXJEaWFsb2csIHtcbiAgICAgICAgICAgIHRpdGxlOiBfdCgnQWRkIHJvb21zIHRvIHRoZSBjb21tdW5pdHkgc3VtbWFyeScpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IF90KFwiV2hpY2ggcm9vbXMgd291bGQgeW91IGxpa2UgdG8gYWRkIHRvIHRoaXMgc3VtbWFyeT9cIiksXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogX3QoXCJSb29tIG5hbWUgb3IgYWRkcmVzc1wiKSxcbiAgICAgICAgICAgIGJ1dHRvbjogX3QoXCJBZGQgdG8gc3VtbWFyeVwiKSxcbiAgICAgICAgICAgIHBpY2tlclR5cGU6ICdyb29tJyxcbiAgICAgICAgICAgIHZhbGlkQWRkcmVzc1R5cGVzOiBbJ214LXJvb20taWQnXSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMucHJvcHMuZ3JvdXBJZCxcbiAgICAgICAgICAgIG9uRmluaXNoZWQ6IChzdWNjZXNzLCBhZGRycykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghc3VjY2VzcykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsU2V0dGxlZChhZGRycy5tYXAoKGFkZHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdyb3VwU3RvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRSb29tVG9Hcm91cFN1bW1hcnkodGhpcy5wcm9wcy5ncm91cElkLCBhZGRyLmFkZHJlc3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4geyBlcnJvckxpc3QucHVzaChhZGRyLmFkZHJlc3MpOyB9KTtcbiAgICAgICAgICAgICAgICB9KSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvckxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgRXJyb3JEaWFsb2cgPSBzZGsuZ2V0Q29tcG9uZW50KFwiZGlhbG9ncy5FcnJvckRpYWxvZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICdGYWlsZWQgdG8gYWRkIHRoZSBmb2xsb3dpbmcgcm9vbSB0byB0aGUgZ3JvdXAgc3VtbWFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIEVycm9yRGlhbG9nLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBfdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJGYWlsZWQgdG8gYWRkIHRoZSBmb2xsb3dpbmcgcm9vbXMgdG8gdGhlIHN1bW1hcnkgb2YgJShncm91cElkKXM6XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZ3JvdXBJZDogdGhpcy5wcm9wcy5ncm91cElkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3JMaXN0LmpvaW4oXCIsIFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LCAvKmNsYXNzTmFtZT0qL251bGwsIC8qaXNQcmlvcml0eT0qL2ZhbHNlLCAvKmlzU3RhdGljPSovdHJ1ZSk7XG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gdGhpcy5wcm9wcy5lZGl0aW5nID9cbiAgICAgICAgICAgICg8QWNjZXNzaWJsZUJ1dHRvbiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfZmVhdHVyZWRUaGluZ3NfYWRkQnV0dG9uXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQWRkUm9vbXNUb1N1bW1hcnlDbGlja2VkfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtyZXF1aXJlKFwiLi4vLi4vLi4vcmVzL2ltZy9pY29ucy1jcmVhdGUtcm9vbS5zdmdcIil9IHdpZHRoPVwiNjRcIiBoZWlnaHQ9XCI2NFwiIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfZmVhdHVyZWRUaGluZ3NfYWRkQnV0dG9uX2xhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoJ0FkZCBhIFJvb20nKSB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+KSA6IDxkaXYgLz47XG5cbiAgICAgICAgY29uc3Qgcm9vbU5vZGVzID0gdGhpcy5wcm9wcy5yb29tcy5tYXAoKHIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiA8RmVhdHVyZWRSb29tXG4gICAgICAgICAgICAgICAga2V5PXtyLnJvb21faWR9XG4gICAgICAgICAgICAgICAgZ3JvdXBJZD17dGhpcy5wcm9wcy5ncm91cElkfVxuICAgICAgICAgICAgICAgIGVkaXRpbmc9e3RoaXMucHJvcHMuZWRpdGluZ31cbiAgICAgICAgICAgICAgICBzdW1tYXJ5SW5mbz17cn0gLz47XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBjYXRIZWFkZXIgPSA8ZGl2IC8+O1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYXRlZ29yeSAmJiB0aGlzLnByb3BzLmNhdGVnb3J5LnByb2ZpbGUpIHtcbiAgICAgICAgICAgIGNhdEhlYWRlciA9IDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2ZlYXR1cmVkVGhpbmdzX2NhdGVnb3J5XCI+XG4gICAgICAgICAgICAgICAgeyB0aGlzLnByb3BzLmNhdGVnb3J5LnByb2ZpbGUubmFtZSB9XG4gICAgICAgICAgICA8L2Rpdj47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2ZlYXR1cmVkVGhpbmdzX2NvbnRhaW5lclwiPlxuICAgICAgICAgICAgeyBjYXRIZWFkZXIgfVxuICAgICAgICAgICAgeyByb29tTm9kZXMgfVxuICAgICAgICAgICAgeyBhZGRCdXR0b24gfVxuICAgICAgICA8L2Rpdj47XG4gICAgfVxufVxuXG5jbGFzcyBGZWF0dXJlZFJvb20gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIHN1bW1hcnlJbmZvOiBSb29tU3VtbWFyeVR5cGUuaXNSZXF1aXJlZCxcbiAgICAgICAgZWRpdGluZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICAgICAgZ3JvdXBJZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIH07XG5cbiAgICBvbkNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGRpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb246IEFjdGlvbi5WaWV3Um9vbSxcbiAgICAgICAgICAgIHJvb21fYWxpYXM6IHRoaXMucHJvcHMuc3VtbWFyeUluZm8ucHJvZmlsZS5jYW5vbmljYWxfYWxpYXMsXG4gICAgICAgICAgICByb29tX2lkOiB0aGlzLnByb3BzLnN1bW1hcnlJbmZvLnJvb21faWQsXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBvbkRlbGV0ZUNsaWNrZWQgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIEdyb3VwU3RvcmUucmVtb3ZlUm9vbUZyb21Hcm91cFN1bW1hcnkoXG4gICAgICAgICAgICB0aGlzLnByb3BzLmdyb3VwSWQsXG4gICAgICAgICAgICB0aGlzLnByb3BzLnN1bW1hcnlJbmZvLnJvb21faWQsXG4gICAgICAgICkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciB3aGlsc3QgcmVtb3Zpbmcgcm9vbSBmcm9tIGdyb3VwIHN1bW1hcnknLCBlcnIpO1xuICAgICAgICAgICAgY29uc3Qgcm9vbU5hbWUgPSB0aGlzLnByb3BzLnN1bW1hcnlJbmZvLm5hbWUgfHxcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnN1bW1hcnlJbmZvLmNhbm9uaWNhbF9hbGlhcyB8fFxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc3VtbWFyeUluZm8ucm9vbV9pZDtcbiAgICAgICAgICAgIGNvbnN0IEVycm9yRGlhbG9nID0gc2RrLmdldENvbXBvbmVudChcImRpYWxvZ3MuRXJyb3JEaWFsb2dcIik7XG4gICAgICAgICAgICBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKFxuICAgICAgICAgICAgICAgICdGYWlsZWQgdG8gcmVtb3ZlIHJvb20gZnJvbSBncm91cCBzdW1tYXJ5JyxcbiAgICAgICAgICAgICAgICAnJywgRXJyb3JEaWFsb2csXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogX3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZhaWxlZCB0byByZW1vdmUgdGhlIHJvb20gZnJvbSB0aGUgc3VtbWFyeSBvZiAlKGdyb3VwSWQpc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBncm91cElkOiB0aGlzLnByb3BzLmdyb3VwSWQgfSxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF90KFwiVGhlIHJvb20gJyUocm9vbU5hbWUpcycgY291bGQgbm90IGJlIHJlbW92ZWQgZnJvbSB0aGUgc3VtbWFyeS5cIiwgeyByb29tTmFtZSB9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgUm9vbUF2YXRhciA9IHNkay5nZXRDb21wb25lbnQoXCJhdmF0YXJzLlJvb21BdmF0YXJcIik7XG5cbiAgICAgICAgY29uc3Qgcm9vbU5hbWUgPSB0aGlzLnByb3BzLnN1bW1hcnlJbmZvLnByb2ZpbGUubmFtZSB8fFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5zdW1tYXJ5SW5mby5wcm9maWxlLmNhbm9uaWNhbF9hbGlhcyB8fFxuICAgICAgICAgICAgX3QoXCJVbm5hbWVkIFJvb21cIik7XG5cbiAgICAgICAgY29uc3Qgb29iRGF0YSA9IHtcbiAgICAgICAgICAgIHJvb21JZDogdGhpcy5wcm9wcy5zdW1tYXJ5SW5mby5yb29tX2lkLFxuICAgICAgICAgICAgYXZhdGFyVXJsOiB0aGlzLnByb3BzLnN1bW1hcnlJbmZvLnByb2ZpbGUuYXZhdGFyX3VybCxcbiAgICAgICAgICAgIG5hbWU6IHJvb21OYW1lLFxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBwZXJtYWxpbmsgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5zdW1tYXJ5SW5mby5wcm9maWxlICYmIHRoaXMucHJvcHMuc3VtbWFyeUluZm8ucHJvZmlsZS5jYW5vbmljYWxfYWxpYXMpIHtcbiAgICAgICAgICAgIHBlcm1hbGluayA9IG1ha2VHcm91cFBlcm1hbGluayh0aGlzLnByb3BzLnN1bW1hcnlJbmZvLnByb2ZpbGUuY2Fub25pY2FsX2FsaWFzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByb29tTmFtZU5vZGUgPSBudWxsO1xuICAgICAgICBpZiAocGVybWFsaW5rKSB7XG4gICAgICAgICAgICByb29tTmFtZU5vZGUgPSA8YSBocmVmPXtwZXJtYWxpbmt9IG9uQ2xpY2s9e3RoaXMub25DbGlja30+eyByb29tTmFtZSB9PC9hPjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJvb21OYW1lTm9kZSA9IDxzcGFuPnsgcm9vbU5hbWUgfTwvc3Bhbj47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLnByb3BzLmVkaXRpbmcgP1xuICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19mZWF0dXJlZFRoaW5nX2RlbGV0ZUJ1dHRvblwiXG4gICAgICAgICAgICAgICAgc3JjPXtyZXF1aXJlKFwiLi4vLi4vLi4vcmVzL2ltZy9jYW5jZWwtc21hbGwuc3ZnXCIpfVxuICAgICAgICAgICAgICAgIHdpZHRoPVwiMTRcIlxuICAgICAgICAgICAgICAgIGhlaWdodD1cIjE0XCJcbiAgICAgICAgICAgICAgICBhbHQ9XCJEZWxldGVcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25EZWxldGVDbGlja2VkfSAvPlxuICAgICAgICAgICAgOiA8ZGl2IC8+O1xuXG4gICAgICAgIHJldHVybiA8QWNjZXNzaWJsZUJ1dHRvbiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfZmVhdHVyZWRUaGluZ1wiIG9uQ2xpY2s9e3RoaXMub25DbGlja30+XG4gICAgICAgICAgICA8Um9vbUF2YXRhciBvb2JEYXRhPXtvb2JEYXRhfSB3aWR0aD17NjR9IGhlaWdodD17NjR9IC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19mZWF0dXJlZFRoaW5nX25hbWVcIj57IHJvb21OYW1lTm9kZSB9PC9kaXY+XG4gICAgICAgICAgICB7IGRlbGV0ZUJ1dHRvbiB9XG4gICAgICAgIDwvQWNjZXNzaWJsZUJ1dHRvbj47XG4gICAgfVxufVxuXG5jbGFzcyBSb2xlVXNlckxpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIHVzZXJzOiBQcm9wVHlwZXMuYXJyYXlPZihVc2VyU3VtbWFyeVR5cGUpLmlzUmVxdWlyZWQsXG4gICAgICAgIHJvbGU6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICBwcm9maWxlOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICB9KS5pc1JlcXVpcmVkLFxuICAgICAgICB9KSxcbiAgICAgICAgZ3JvdXBJZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuXG4gICAgICAgIC8vIFdoZXRoZXIgdGhlIGxpc3Qgc2hvdWxkIGJlIGVkaXRhYmxlXG4gICAgICAgIGVkaXRpbmc6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgfTtcblxuICAgIG9uQWRkVXNlcnNDbGlja2VkID0gKGV2KSA9PiB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IEFkZHJlc3NQaWNrZXJEaWFsb2cgPSBzZGsuZ2V0Q29tcG9uZW50KFwiZGlhbG9ncy5BZGRyZXNzUGlja2VyRGlhbG9nXCIpO1xuICAgICAgICBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdBZGQgVXNlcnMgdG8gR3JvdXAgU3VtbWFyeScsICcnLCBBZGRyZXNzUGlja2VyRGlhbG9nLCB7XG4gICAgICAgICAgICB0aXRsZTogX3QoJ0FkZCB1c2VycyB0byB0aGUgY29tbXVuaXR5IHN1bW1hcnknKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdChcIldobyB3b3VsZCB5b3UgbGlrZSB0byBhZGQgdG8gdGhpcyBzdW1tYXJ5P1wiKSxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBfdChcIk5hbWUgb3IgTWF0cml4IElEXCIpLFxuICAgICAgICAgICAgYnV0dG9uOiBfdChcIkFkZCB0byBzdW1tYXJ5XCIpLFxuICAgICAgICAgICAgdmFsaWRBZGRyZXNzVHlwZXM6IFsnbXgtdXNlci1pZCddLFxuICAgICAgICAgICAgZ3JvdXBJZDogdGhpcy5wcm9wcy5ncm91cElkLFxuICAgICAgICAgICAgc2hvdWxkT21pdFNlbGY6IGZhbHNlLFxuICAgICAgICAgICAgb25GaW5pc2hlZDogKHN1Y2Nlc3MsIGFkZHJzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JMaXN0ID0gW107XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGxTZXR0bGVkKGFkZHJzLm1hcCgoYWRkcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gR3JvdXBTdG9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZFVzZXJUb0dyb3VwU3VtbWFyeShhZGRyLmFkZHJlc3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4geyBlcnJvckxpc3QucHVzaChhZGRyLmFkZHJlc3MpOyB9KTtcbiAgICAgICAgICAgICAgICB9KSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvckxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgRXJyb3JEaWFsb2cgPSBzZGsuZ2V0Q29tcG9uZW50KFwiZGlhbG9ncy5FcnJvckRpYWxvZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICdGYWlsZWQgdG8gYWRkIHRoZSBmb2xsb3dpbmcgdXNlcnMgdG8gdGhlIGNvbW11bml0eSBzdW1tYXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICcnLCBFcnJvckRpYWxvZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogX3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiRmFpbGVkIHRvIGFkZCB0aGUgZm9sbG93aW5nIHVzZXJzIHRvIHRoZSBzdW1tYXJ5IG9mICUoZ3JvdXBJZClzOlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGdyb3VwSWQ6IHRoaXMucHJvcHMuZ3JvdXBJZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGVycm9yTGlzdC5qb2luKFwiLCBcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSwgLypjbGFzc05hbWU9Ki9udWxsLCAvKmlzUHJpb3JpdHk9Ki9mYWxzZSwgLyppc1N0YXRpYz0qL3RydWUpO1xuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHRoaXMucHJvcHMuZWRpdGluZyA/XG4gICAgICAgICAgICAoPEFjY2Vzc2libGVCdXR0b24gY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2ZlYXR1cmVkVGhpbmdzX2FkZEJ1dHRvblwiIG9uQ2xpY2s9e3RoaXMub25BZGRVc2Vyc0NsaWNrZWR9PlxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtyZXF1aXJlKFwiLi4vLi4vLi4vcmVzL2ltZy9pY29ucy1jcmVhdGUtcm9vbS5zdmdcIil9IHdpZHRoPVwiNjRcIiBoZWlnaHQ9XCI2NFwiIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfZmVhdHVyZWRUaGluZ3NfYWRkQnV0dG9uX2xhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoJ0FkZCBhIFVzZXInKSB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+KSA6IDxkaXYgLz47XG4gICAgICAgIGNvbnN0IHVzZXJOb2RlcyA9IHRoaXMucHJvcHMudXNlcnMubWFwKCh1KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gPEZlYXR1cmVkVXNlclxuICAgICAgICAgICAgICAgIGtleT17dS51c2VyX2lkfVxuICAgICAgICAgICAgICAgIHN1bW1hcnlJbmZvPXt1fVxuICAgICAgICAgICAgICAgIGVkaXRpbmc9e3RoaXMucHJvcHMuZWRpdGluZ31cbiAgICAgICAgICAgICAgICBncm91cElkPXt0aGlzLnByb3BzLmdyb3VwSWR9IC8+O1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHJvbGVIZWFkZXIgPSA8ZGl2IC8+O1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5yb2xlICYmIHRoaXMucHJvcHMucm9sZS5wcm9maWxlKSB7XG4gICAgICAgICAgICByb2xlSGVhZGVyID0gPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfZmVhdHVyZWRUaGluZ3NfY2F0ZWdvcnlcIj57IHRoaXMucHJvcHMucm9sZS5wcm9maWxlLm5hbWUgfTwvZGl2PjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfZmVhdHVyZWRUaGluZ3NfY29udGFpbmVyXCI+XG4gICAgICAgICAgICB7IHJvbGVIZWFkZXIgfVxuICAgICAgICAgICAgeyB1c2VyTm9kZXMgfVxuICAgICAgICAgICAgeyBhZGRCdXR0b24gfVxuICAgICAgICA8L2Rpdj47XG4gICAgfVxufVxuXG5jbGFzcyBGZWF0dXJlZFVzZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIHN1bW1hcnlJbmZvOiBVc2VyU3VtbWFyeVR5cGUuaXNSZXF1aXJlZCxcbiAgICAgICAgZWRpdGluZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICAgICAgZ3JvdXBJZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIH07XG5cbiAgICBvbkNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGRpcy5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb246ICd2aWV3X3N0YXJ0X2NoYXRfb3JfcmV1c2UnLFxuICAgICAgICAgICAgdXNlcl9pZDogdGhpcy5wcm9wcy5zdW1tYXJ5SW5mby51c2VyX2lkLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgb25EZWxldGVDbGlja2VkID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBHcm91cFN0b3JlLnJlbW92ZVVzZXJGcm9tR3JvdXBTdW1tYXJ5KFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5ncm91cElkLFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5zdW1tYXJ5SW5mby51c2VyX2lkLFxuICAgICAgICApLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igd2hpbHN0IHJlbW92aW5nIHVzZXIgZnJvbSBncm91cCBzdW1tYXJ5JywgZXJyKTtcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gdGhpcy5wcm9wcy5zdW1tYXJ5SW5mby5kaXNwbGF5bmFtZSB8fCB0aGlzLnByb3BzLnN1bW1hcnlJbmZvLnVzZXJfaWQ7XG4gICAgICAgICAgICBjb25zdCBFcnJvckRpYWxvZyA9IHNkay5nZXRDb21wb25lbnQoXCJkaWFsb2dzLkVycm9yRGlhbG9nXCIpO1xuICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZyhcbiAgICAgICAgICAgICAgICAnRmFpbGVkIHRvIHJlbW92ZSB1c2VyIGZyb20gY29tbXVuaXR5IHN1bW1hcnknLFxuICAgICAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgICAgIEVycm9yRGlhbG9nLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF90KFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJGYWlsZWQgdG8gcmVtb3ZlIGEgdXNlciBmcm9tIHRoZSBzdW1tYXJ5IG9mICUoZ3JvdXBJZClzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGdyb3VwSWQ6IHRoaXMucHJvcHMuZ3JvdXBJZCB9LFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogX3QoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlRoZSB1c2VyICclKGRpc3BsYXlOYW1lKXMnIGNvdWxkIG5vdCBiZSByZW1vdmVkIGZyb20gdGhlIHN1bW1hcnkuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGRpc3BsYXlOYW1lIH0sXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IEJhc2VBdmF0YXIgPSBzZGsuZ2V0Q29tcG9uZW50KFwiYXZhdGFycy5CYXNlQXZhdGFyXCIpO1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5wcm9wcy5zdW1tYXJ5SW5mby5kaXNwbGF5bmFtZSB8fCB0aGlzLnByb3BzLnN1bW1hcnlJbmZvLnVzZXJfaWQ7XG5cbiAgICAgICAgY29uc3QgcGVybWFsaW5rID0gbWFrZVVzZXJQZXJtYWxpbmsodGhpcy5wcm9wcy5zdW1tYXJ5SW5mby51c2VyX2lkKTtcbiAgICAgICAgY29uc3QgdXNlck5hbWVOb2RlID0gPGEgaHJlZj17cGVybWFsaW5rfSBvbkNsaWNrPXt0aGlzLm9uQ2xpY2t9PnsgbmFtZSB9PC9hPjtcbiAgICAgICAgY29uc3QgaHR0cFVybCA9IG1lZGlhRnJvbU14Yyh0aGlzLnByb3BzLnN1bW1hcnlJbmZvLmF2YXRhcl91cmwpLmdldFNxdWFyZVRodW1ibmFpbEh0dHAoNjQpO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMucHJvcHMuZWRpdGluZyA/XG4gICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2ZlYXR1cmVkVGhpbmdfZGVsZXRlQnV0dG9uXCJcbiAgICAgICAgICAgICAgICBzcmM9e3JlcXVpcmUoXCIuLi8uLi8uLi9yZXMvaW1nL2NhbmNlbC1zbWFsbC5zdmdcIil9XG4gICAgICAgICAgICAgICAgd2lkdGg9XCIxNFwiXG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTRcIlxuICAgICAgICAgICAgICAgIGFsdD1cIkRlbGV0ZVwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkRlbGV0ZUNsaWNrZWR9IC8+XG4gICAgICAgICAgICA6IDxkaXYgLz47XG5cbiAgICAgICAgcmV0dXJuIDxBY2Nlc3NpYmxlQnV0dG9uIGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19mZWF0dXJlZFRoaW5nXCIgb25DbGljaz17dGhpcy5vbkNsaWNrfT5cbiAgICAgICAgICAgIDxCYXNlQXZhdGFyIG5hbWU9e25hbWV9IHVybD17aHR0cFVybH0gd2lkdGg9ezY0fSBoZWlnaHQ9ezY0fSAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfZmVhdHVyZWRUaGluZ19uYW1lXCI+eyB1c2VyTmFtZU5vZGUgfTwvZGl2PlxuICAgICAgICAgICAgeyBkZWxldGVCdXR0b24gfVxuICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+O1xuICAgIH1cbn1cblxuY29uc3QgR1JPVVBfSk9JTlBPTElDWV9PUEVOID0gXCJvcGVuXCI7XG5jb25zdCBHUk9VUF9KT0lOUE9MSUNZX0lOVklURSA9IFwiaW52aXRlXCI7XG5cbmNvbnN0IFVQR1JBREVfTk9USUNFX0xTX0tFWSA9IFwibXhfaGlkZV9jb21tdW5pdHlfdXBncmFkZV9ub3RpY2VcIjtcblxuQHJlcGxhY2VhYmxlQ29tcG9uZW50KFwic3RydWN0dXJlcy5Hcm91cFZpZXdcIilcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdyb3VwVmlldyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgZ3JvdXBJZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICAvLyBXaGV0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgdGhlIGdyb3VwIGFkbWluIGlzIHZpZXdpbmcgdGhlIGdyb3VwXG4gICAgICAgIGdyb3VwSXNOZXc6IFByb3BUeXBlcy5ib29sLFxuICAgIH07XG5cbiAgICBzdGF0ZSA9IHtcbiAgICAgICAgc3VtbWFyeTogbnVsbCxcbiAgICAgICAgaXNHcm91cFB1YmxpY2lzZWQ6IG51bGwsXG4gICAgICAgIGlzVXNlclByaXZpbGVnZWQ6IG51bGwsXG4gICAgICAgIGdyb3VwUm9vbXM6IG51bGwsXG4gICAgICAgIGdyb3VwUm9vbXNMb2FkaW5nOiBudWxsLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgZWRpdGluZzogZmFsc2UsXG4gICAgICAgIHNhdmluZzogZmFsc2UsXG4gICAgICAgIHVwbG9hZGluZ0F2YXRhcjogZmFsc2UsXG4gICAgICAgIGF2YXRhckNoYW5nZWQ6IGZhbHNlLFxuICAgICAgICBtZW1iZXJzaGlwQnVzeTogZmFsc2UsXG4gICAgICAgIHB1YmxpY2l0eUJ1c3k6IGZhbHNlLFxuICAgICAgICBpbnZpdGVyUHJvZmlsZTogbnVsbCxcbiAgICAgICAgc2hvd1JpZ2h0UGFuZWw6IFJpZ2h0UGFuZWxTdG9yZS5nZXRTaGFyZWRJbnN0YW5jZSgpLmlzT3BlbkZvckdyb3VwLFxuICAgICAgICBzaG93VXBncmFkZU5vdGljZTogIWxvY2FsU3RvcmFnZS5nZXRJdGVtKFVQR1JBREVfTk9USUNFX0xTX0tFWSksXG4gICAgfTtcblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLl91bm1vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fbWF0cml4Q2xpZW50ID0gTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuICAgICAgICB0aGlzLl9tYXRyaXhDbGllbnQub24oXCJHcm91cC5teU1lbWJlcnNoaXBcIiwgdGhpcy5fb25Hcm91cE15TWVtYmVyc2hpcCk7XG5cbiAgICAgICAgdGhpcy5faW5pdEdyb3VwU3RvcmUodGhpcy5wcm9wcy5ncm91cElkLCB0cnVlKTtcblxuICAgICAgICB0aGlzLl9kaXNwYXRjaGVyUmVmID0gZGlzLnJlZ2lzdGVyKHRoaXMuX29uQWN0aW9uKTtcbiAgICAgICAgdGhpcy5fcmlnaHRQYW5lbFN0b3JlVG9rZW4gPSBSaWdodFBhbmVsU3RvcmUuZ2V0U2hhcmVkSW5zdGFuY2UoKS5hZGRMaXN0ZW5lcih0aGlzLl9vblJpZ2h0UGFuZWxTdG9yZVVwZGF0ZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuX3VubW91bnRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX21hdHJpeENsaWVudC5yZW1vdmVMaXN0ZW5lcihcIkdyb3VwLm15TWVtYmVyc2hpcFwiLCB0aGlzLl9vbkdyb3VwTXlNZW1iZXJzaGlwKTtcbiAgICAgICAgZGlzLnVucmVnaXN0ZXIodGhpcy5fZGlzcGF0Y2hlclJlZik7XG5cbiAgICAgICAgLy8gUmVtb3ZlIFJpZ2h0UGFuZWxTdG9yZSBsaXN0ZW5lclxuICAgICAgICBpZiAodGhpcy5fcmlnaHRQYW5lbFN0b3JlVG9rZW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3JpZ2h0UGFuZWxTdG9yZVRva2VuLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVE9ETzogW1JFQUNULVdBUk5JTkddIFJlcGxhY2Ugd2l0aCBhcHByb3ByaWF0ZSBsaWZlY3ljbGUgZXZlbnRcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXG4gICAgVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHMpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZ3JvdXBJZCAhPT0gbmV3UHJvcHMuZ3JvdXBJZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc3VtbWFyeTogbnVsbCxcbiAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIH0sICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0R3JvdXBTdG9yZShuZXdQcm9wcy5ncm91cElkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX29uUmlnaHRQYW5lbFN0b3JlVXBkYXRlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dSaWdodFBhbmVsOiBSaWdodFBhbmVsU3RvcmUuZ2V0U2hhcmVkSW5zdGFuY2UoKS5pc09wZW5Gb3JHcm91cCxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9vbkdyb3VwTXlNZW1iZXJzaGlwID0gKGdyb3VwKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl91bm1vdW50ZWQgfHwgZ3JvdXAuZ3JvdXBJZCAhPT0gdGhpcy5wcm9wcy5ncm91cElkKSByZXR1cm47XG4gICAgICAgIGlmIChncm91cC5teU1lbWJlcnNoaXAgPT09ICdsZWF2ZScpIHtcbiAgICAgICAgICAgIC8vIExlYXZlIHNldHRpbmdzIC0gdGhlIHVzZXIgbWlnaHQgaGF2ZSBjbGlja2VkIHRoZSBcIkxlYXZlXCIgYnV0dG9uXG4gICAgICAgICAgICB0aGlzLl9jbG9zZVNldHRpbmdzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1lbWJlcnNoaXBCdXN5OiBmYWxzZSB9KTtcbiAgICB9O1xuXG4gICAgX2luaXRHcm91cFN0b3JlKGdyb3VwSWQsIGZpcnN0SW5pdCkge1xuICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuX21hdHJpeENsaWVudC5nZXRHcm91cChncm91cElkKTtcbiAgICAgICAgaWYgKGdyb3VwICYmIGdyb3VwLmludml0ZXIgJiYgZ3JvdXAuaW52aXRlci51c2VySWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2ZldGNoSW52aXRlclByb2ZpbGUoZ3JvdXAuaW52aXRlci51c2VySWQpO1xuICAgICAgICB9XG4gICAgICAgIEdyb3VwU3RvcmUucmVnaXN0ZXJMaXN0ZW5lcihncm91cElkLCB0aGlzLm9uR3JvdXBTdG9yZVVwZGF0ZWQuYmluZCh0aGlzLCBmaXJzdEluaXQpKTtcbiAgICAgICAgbGV0IHdpbGxEb09uYm9hcmRpbmcgPSBmYWxzZTtcbiAgICAgICAgLy8gWFhYOiBUaGlzIHNob3VsZCBiZSBtb3JlIGZsdXh5IC0gbGV0J3MgZ2V0IHRoZSBlcnJvciBmcm9tIEdyb3VwU3RvcmUgLmdldEVycm9yIG9yIHNvbWV0aGluZ1xuICAgICAgICBHcm91cFN0b3JlLm9uKCdlcnJvcicsIChlcnIsIGVycm9yR3JvdXBJZCwgc3RhdGVLZXkpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl91bm1vdW50ZWQgfHwgZ3JvdXBJZCAhPT0gZXJyb3JHcm91cElkKSByZXR1cm47XG4gICAgICAgICAgICBpZiAoZXJyLmVycmNvZGUgPT09ICdNX0dVRVNUX0FDQ0VTU19GT1JCSURERU4nICYmICF3aWxsRG9PbmJvYXJkaW5nKSB7XG4gICAgICAgICAgICAgICAgZGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZG9fYWZ0ZXJfc3luY19wcmVwYXJlZCcsXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkX2FjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAndmlld19ncm91cCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cF9pZDogZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkaXMuZGlzcGF0Y2goeyBhY3Rpb246ICdyZXF1aXJlX3JlZ2lzdHJhdGlvbicsIHNjcmVlbl9hZnRlcjogeyBzY3JlZW46IGBncm91cC8ke2dyb3VwSWR9YCB9IH0pO1xuICAgICAgICAgICAgICAgIHdpbGxEb09uYm9hcmRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlS2V5ID09PSBHcm91cFN0b3JlLlNUQVRFX0tFWS5TdW1tYXJ5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcnk6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgICAgIGVkaXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkdyb3VwU3RvcmVVcGRhdGVkID0gKGZpcnN0SW5pdCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fdW5tb3VudGVkKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSBHcm91cFN0b3JlLmdldFN1bW1hcnkodGhpcy5wcm9wcy5ncm91cElkKTtcbiAgICAgICAgaWYgKHN1bW1hcnkucHJvZmlsZSkge1xuICAgICAgICAgICAgLy8gRGVmYXVsdCBwcm9maWxlIGZpZWxkcyBzaG91bGQgYmUgXCJcIiBmb3IgbGF0ZXIgc2VuZGluZyB0byB0aGUgc2VydmVyICh3aGljaFxuICAgICAgICAgICAgLy8gcmVxdWlyZXMgdGhhdCB0aGUgZmllbGRzIGFyZSBzdHJpbmdzLCBub3QgbnVsbClcbiAgICAgICAgICAgIFtcImF2YXRhcl91cmxcIiwgXCJsb25nX2Rlc2NyaXB0aW9uXCIsIFwibmFtZVwiLCBcInNob3J0X2Rlc2NyaXB0aW9uXCJdLmZvckVhY2goKGspID0+IHtcbiAgICAgICAgICAgICAgICBzdW1tYXJ5LnByb2ZpbGVba10gPSBzdW1tYXJ5LnByb2ZpbGVba10gfHwgXCJcIjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc3VtbWFyeSxcbiAgICAgICAgICAgIHN1bW1hcnlMb2FkaW5nOiAhR3JvdXBTdG9yZS5pc1N0YXRlUmVhZHkodGhpcy5wcm9wcy5ncm91cElkLCBHcm91cFN0b3JlLlNUQVRFX0tFWS5TdW1tYXJ5KSxcbiAgICAgICAgICAgIGlzR3JvdXBQdWJsaWNpc2VkOiBHcm91cFN0b3JlLmdldEdyb3VwUHVibGljaXR5KHRoaXMucHJvcHMuZ3JvdXBJZCksXG4gICAgICAgICAgICBpc1VzZXJQcml2aWxlZ2VkOiBHcm91cFN0b3JlLmlzVXNlclByaXZpbGVnZWQodGhpcy5wcm9wcy5ncm91cElkKSxcbiAgICAgICAgICAgIGdyb3VwUm9vbXM6IEdyb3VwU3RvcmUuZ2V0R3JvdXBSb29tcyh0aGlzLnByb3BzLmdyb3VwSWQpLFxuICAgICAgICAgICAgZ3JvdXBSb29tc0xvYWRpbmc6ICFHcm91cFN0b3JlLmlzU3RhdGVSZWFkeSh0aGlzLnByb3BzLmdyb3VwSWQsIEdyb3VwU3RvcmUuU1RBVEVfS0VZLkdyb3VwUm9vbXMpLFxuICAgICAgICAgICAgaXNVc2VyTWVtYmVyOiBHcm91cFN0b3JlLmdldEdyb3VwTWVtYmVycyh0aGlzLnByb3BzLmdyb3VwSWQpLnNvbWUoXG4gICAgICAgICAgICAgICAgKG0pID0+IG0udXNlcklkID09PSB0aGlzLl9tYXRyaXhDbGllbnQuY3JlZGVudGlhbHMudXNlcklkLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFhYWDogVGhpcyBtaWdodCBub3Qgd29yayBidXQgdGhpcy5wcm9wcy5ncm91cElzTmV3IHVudXNlZCBhbnl3YXlcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuZ3JvdXBJc05ldyAmJiBmaXJzdEluaXQpIHtcbiAgICAgICAgICAgIHRoaXMuX29uRWRpdENsaWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgX2ZldGNoSW52aXRlclByb2ZpbGUodXNlcklkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaW52aXRlclByb2ZpbGVCdXN5OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbWF0cml4Q2xpZW50LmdldFByb2ZpbGVJbmZvKHVzZXJJZCkudGhlbigocmVzcCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3VubW91bnRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgaW52aXRlclByb2ZpbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFyVXJsOiByZXNwLmF2YXRhcl91cmwsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiByZXNwLmRpc3BsYXluYW1lLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZ2V0dGluZyBncm91cCBpbnZpdGVyIHByb2ZpbGUnLCBlKTtcbiAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fdW5tb3VudGVkKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBpbnZpdGVyUHJvZmlsZUJ1c3k6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9vbkVkaXRDbGljayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBlZGl0aW5nOiB0cnVlLFxuICAgICAgICAgICAgcHJvZmlsZUZvcm06IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc3RhdGUuc3VtbWFyeS5wcm9maWxlKSxcbiAgICAgICAgICAgIGpvaW5hYmxlRm9ybToge1xuICAgICAgICAgICAgICAgIHBvbGljeVR5cGU6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc3VtbWFyeS5wcm9maWxlLmlzX29wZW5seV9qb2luYWJsZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBHUk9VUF9KT0lOUE9MSUNZX09QRU4gOlxuICAgICAgICAgICAgICAgICAgICAgICAgR1JPVVBfSk9JTlBPTElDWV9JTlZJVEUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgX29uU2hhcmVDbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgU2hhcmVEaWFsb2cgPSBzZGsuZ2V0Q29tcG9uZW50KFwiZGlhbG9ncy5TaGFyZURpYWxvZ1wiKTtcbiAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnc2hhcmUgY29tbXVuaXR5IGRpYWxvZycsICcnLCBTaGFyZURpYWxvZywge1xuICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLl9tYXRyaXhDbGllbnQuZ2V0R3JvdXAodGhpcy5wcm9wcy5ncm91cElkKSB8fCBuZXcgR3JvdXAodGhpcy5wcm9wcy5ncm91cElkKSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9vbkNhbmNlbENsaWNrID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9jbG9zZVNldHRpbmdzKCk7XG4gICAgfTtcblxuICAgIF9vbkFjdGlvbiA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgIHN3aXRjaCAocGF5bG9hZC5hY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIE5PVEU6IGNsb3NlX3NldHRpbmdzIGlzIGFuIGFwcC13aWRlIGRpc3BhdGNoOyBhcyBpdCBpcyBkaXNwYXRjaGVkIGZyb20gTWF0cml4Q2hhdFxuICAgICAgICAgICAgY2FzZSAnY2xvc2Vfc2V0dGluZ3MnOlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBlZGl0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZUZvcm06IG51bGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9jbG9zZVNldHRpbmdzID0gKCkgPT4ge1xuICAgICAgICBkaXMuZGlzcGF0Y2goeyBhY3Rpb246ICdjbG9zZV9zZXR0aW5ncycgfSk7XG4gICAgfTtcblxuICAgIF9vbk5hbWVDaGFuZ2UgPSAodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgbmV3UHJvZmlsZUZvcm0gPSBPYmplY3QuYXNzaWduKHRoaXMuc3RhdGUucHJvZmlsZUZvcm0sIHsgbmFtZTogdmFsdWUgfSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgcHJvZmlsZUZvcm06IG5ld1Byb2ZpbGVGb3JtLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgX29uU2hvcnREZXNjQ2hhbmdlID0gKHZhbHVlKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1Byb2ZpbGVGb3JtID0gT2JqZWN0LmFzc2lnbih0aGlzLnN0YXRlLnByb2ZpbGVGb3JtLCB7IHNob3J0X2Rlc2NyaXB0aW9uOiB2YWx1ZSB9KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBwcm9maWxlRm9ybTogbmV3UHJvZmlsZUZvcm0sXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfb25Mb25nRGVzY0NoYW5nZSA9IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1Byb2ZpbGVGb3JtID0gT2JqZWN0LmFzc2lnbih0aGlzLnN0YXRlLnByb2ZpbGVGb3JtLCB7IGxvbmdfZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHByb2ZpbGVGb3JtOiBuZXdQcm9maWxlRm9ybSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9vbkF2YXRhclNlbGVjdGVkID0gZXYgPT4ge1xuICAgICAgICBjb25zdCBmaWxlID0gZXYudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICBpZiAoIWZpbGUpIHJldHVybjtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdXBsb2FkaW5nQXZhdGFyOiB0cnVlIH0pO1xuICAgICAgICB0aGlzLl9tYXRyaXhDbGllbnQudXBsb2FkQ29udGVudChmaWxlKS50aGVuKCh1cmwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Byb2ZpbGVGb3JtID0gT2JqZWN0LmFzc2lnbih0aGlzLnN0YXRlLnByb2ZpbGVGb3JtLCB7IGF2YXRhcl91cmw6IHVybCB9KTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHVwbG9hZGluZ0F2YXRhcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJvZmlsZUZvcm06IG5ld1Byb2ZpbGVGb3JtLFxuXG4gICAgICAgICAgICAgICAgLy8gSW5kaWNhdGUgdGhhdCBGbGFpclN0b3JlIG5lZWRzIHRvIGJlIHBva2VkIHRvIHNob3cgdGhpcyBjaGFuZ2VcbiAgICAgICAgICAgICAgICAvLyBpbiBUYWdUaWxlIChHcm91cEZpbHRlclBhbmVsKSwgRmxhaXIgYW5kIEdyb3VwVGlsZSAoTXlHcm91cHMpLlxuICAgICAgICAgICAgICAgIGF2YXRhckNoYW5nZWQ6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyB1cGxvYWRpbmdBdmF0YXI6IGZhbHNlIH0pO1xuICAgICAgICAgICAgY29uc3QgRXJyb3JEaWFsb2cgPSBzZGsuZ2V0Q29tcG9uZW50KFwiZGlhbG9ncy5FcnJvckRpYWxvZ1wiKTtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byB1cGxvYWQgYXZhdGFyIGltYWdlXCIsIGUpO1xuICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnRmFpbGVkIHRvIHVwbG9hZCBpbWFnZScsICcnLCBFcnJvckRpYWxvZywge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBfdCgnRXJyb3InKSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogX3QoJ0ZhaWxlZCB0byB1cGxvYWQgaW1hZ2UnKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgX29uSm9pbmFibGVDaGFuZ2UgPSBldiA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgam9pbmFibGVGb3JtOiB7IHBvbGljeVR5cGU6IGV2LnRhcmdldC52YWx1ZSB9LFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgX29uU2F2ZUNsaWNrID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2F2aW5nOiB0cnVlIH0pO1xuICAgICAgICBjb25zdCBzYXZlUHJvbWlzZSA9IHRoaXMuc3RhdGUuaXNVc2VyUHJpdmlsZWdlZCA/IHRoaXMuX3NhdmVHcm91cCgpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIHNhdmVQcm9taXNlLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2F2aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlZGl0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzdW1tYXJ5OiBudWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9pbml0R3JvdXBTdG9yZSh0aGlzLnByb3BzLmdyb3VwSWQpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5hdmF0YXJDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgLy8gWFhYOiBFdmlsIC0gcG9raW5nIGEgc3RvcmUgc2hvdWxkIGJlIGRvbmUgZnJvbSBhbiBhc3luYyBhY3Rpb25cbiAgICAgICAgICAgICAgICBGbGFpclN0b3JlLnJlZnJlc2hHcm91cFByb2ZpbGUodGhpcy5fbWF0cml4Q2xpZW50LCB0aGlzLnByb3BzLmdyb3VwSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2F2aW5nOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgRXJyb3JEaWFsb2cgPSBzZGsuZ2V0Q29tcG9uZW50KFwiZGlhbG9ncy5FcnJvckRpYWxvZ1wiKTtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBzYXZlIGNvbW11bml0eSBwcm9maWxlXCIsIGUpO1xuICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnRmFpbGVkIHRvIHVwZGF0ZSBncm91cCcsICcnLCBFcnJvckRpYWxvZywge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBfdCgnRXJyb3InKSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogX3QoJ0ZhaWxlZCB0byB1cGRhdGUgY29tbXVuaXR5JyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBhdmF0YXJDaGFuZ2VkOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgYXN5bmMgX3NhdmVHcm91cCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5fbWF0cml4Q2xpZW50LnNldEdyb3VwUHJvZmlsZSh0aGlzLnByb3BzLmdyb3VwSWQsIHRoaXMuc3RhdGUucHJvZmlsZUZvcm0pO1xuICAgICAgICBhd2FpdCB0aGlzLl9tYXRyaXhDbGllbnQuc2V0R3JvdXBKb2luUG9saWN5KHRoaXMucHJvcHMuZ3JvdXBJZCwge1xuICAgICAgICAgICAgdHlwZTogdGhpcy5zdGF0ZS5qb2luYWJsZUZvcm0ucG9saWN5VHlwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX29uQWNjZXB0SW52aXRlQ2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtZW1iZXJzaGlwQnVzeTogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBXYWl0IDUwMG1zIHRvIHByZXZlbnQgZmxhc2hpbmcuIERvIHRoaXMgYmVmb3JlIHNlbmRpbmcgYSByZXF1ZXN0IG90aGVyd2lzZSB3ZSByaXNrIHRoZVxuICAgICAgICAvLyBzcGlubmVyIGRpc2FwcGVhcmluZyBhZnRlciB3ZSBoYXZlIGZldGNoZWQgbmV3IGdyb3VwIGRhdGEuXG4gICAgICAgIGF3YWl0IHNsZWVwKDUwMCk7XG5cbiAgICAgICAgR3JvdXBTdG9yZS5hY2NlcHRHcm91cEludml0ZSh0aGlzLnByb3BzLmdyb3VwSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gZG9uJ3QgcmVzZXQgbWVtYmVyc2hpcEJ1c3kgaGVyZTogd2FpdCBmb3IgdGhlIG1lbWJlcnNoaXAgY2hhbmdlIHRvIGNvbWUgZG93biB0aGUgc3luY1xuICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1lbWJlcnNoaXBCdXN5OiBmYWxzZSB9KTtcbiAgICAgICAgICAgIGNvbnN0IEVycm9yRGlhbG9nID0gc2RrLmdldENvbXBvbmVudChcImRpYWxvZ3MuRXJyb3JEaWFsb2dcIik7XG4gICAgICAgICAgICBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdFcnJvciBhY2NlcHRpbmcgaW52aXRlJywgJycsIEVycm9yRGlhbG9nLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IF90KFwiRXJyb3JcIiksXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF90KFwiVW5hYmxlIHRvIGFjY2VwdCBpbnZpdGVcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9vblJlamVjdEludml0ZUNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbWVtYmVyc2hpcEJ1c3k6IHRydWUgfSk7XG5cbiAgICAgICAgLy8gV2FpdCA1MDBtcyB0byBwcmV2ZW50IGZsYXNoaW5nLiBEbyB0aGlzIGJlZm9yZSBzZW5kaW5nIGEgcmVxdWVzdCBvdGhlcndpc2Ugd2UgcmlzayB0aGVcbiAgICAgICAgLy8gc3Bpbm5lciBkaXNhcHBlYXJpbmcgYWZ0ZXIgd2UgaGF2ZSBmZXRjaGVkIG5ldyBncm91cCBkYXRhLlxuICAgICAgICBhd2FpdCBzbGVlcCg1MDApO1xuXG4gICAgICAgIEdyb3VwU3RvcmUubGVhdmVHcm91cCh0aGlzLnByb3BzLmdyb3VwSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gZG9uJ3QgcmVzZXQgbWVtYmVyc2hpcEJ1c3kgaGVyZTogd2FpdCBmb3IgdGhlIG1lbWJlcnNoaXAgY2hhbmdlIHRvIGNvbWUgZG93biB0aGUgc3luY1xuICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1lbWJlcnNoaXBCdXN5OiBmYWxzZSB9KTtcbiAgICAgICAgICAgIGNvbnN0IEVycm9yRGlhbG9nID0gc2RrLmdldENvbXBvbmVudChcImRpYWxvZ3MuRXJyb3JEaWFsb2dcIik7XG4gICAgICAgICAgICBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdFcnJvciByZWplY3RpbmcgaW52aXRlJywgJycsIEVycm9yRGlhbG9nLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IF90KFwiRXJyb3JcIiksXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF90KFwiVW5hYmxlIHRvIHJlamVjdCBpbnZpdGVcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9vbkpvaW5DbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX21hdHJpeENsaWVudC5pc0d1ZXN0KCkpIHtcbiAgICAgICAgICAgIGRpcy5kaXNwYXRjaCh7IGFjdGlvbjogJ3JlcXVpcmVfcmVnaXN0cmF0aW9uJywgc2NyZWVuX2FmdGVyOiB7IHNjcmVlbjogYGdyb3VwLyR7dGhpcy5wcm9wcy5ncm91cElkfWAgfSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtZW1iZXJzaGlwQnVzeTogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBXYWl0IDUwMG1zIHRvIHByZXZlbnQgZmxhc2hpbmcuIERvIHRoaXMgYmVmb3JlIHNlbmRpbmcgYSByZXF1ZXN0IG90aGVyd2lzZSB3ZSByaXNrIHRoZVxuICAgICAgICAvLyBzcGlubmVyIGRpc2FwcGVhcmluZyBhZnRlciB3ZSBoYXZlIGZldGNoZWQgbmV3IGdyb3VwIGRhdGEuXG4gICAgICAgIGF3YWl0IHNsZWVwKDUwMCk7XG5cbiAgICAgICAgR3JvdXBTdG9yZS5qb2luR3JvdXAodGhpcy5wcm9wcy5ncm91cElkKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGRvbid0IHJlc2V0IG1lbWJlcnNoaXBCdXN5IGhlcmU6IHdhaXQgZm9yIHRoZSBtZW1iZXJzaGlwIGNoYW5nZSB0byBjb21lIGRvd24gdGhlIHN5bmNcbiAgICAgICAgfSkuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBtZW1iZXJzaGlwQnVzeTogZmFsc2UgfSk7XG4gICAgICAgICAgICBjb25zdCBFcnJvckRpYWxvZyA9IHNkay5nZXRDb21wb25lbnQoXCJkaWFsb2dzLkVycm9yRGlhbG9nXCIpO1xuICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnRXJyb3Igam9pbmluZyByb29tJywgJycsIEVycm9yRGlhbG9nLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IF90KFwiRXJyb3JcIiksXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF90KFwiVW5hYmxlIHRvIGpvaW4gY29tbXVuaXR5XCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfbGVhdmVHcm91cFdhcm5pbmdzKCkge1xuICAgICAgICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzVXNlclByaXZpbGVnZWQpIHtcbiAgICAgICAgICAgIHdhcm5pbmdzLnB1c2goKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIndhcm5pbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgeyBcIiBcIiAvKiBXaGl0ZXNwYWNlLCBvdGhlcndpc2UgdGhlIHNlbnRlbmNlcyBnZXQgc21hc2hlZCB0b2dldGhlciAqLyB9XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJZb3UgYXJlIGFuIGFkbWluaXN0cmF0b3Igb2YgdGhpcyBjb21tdW5pdHkuIFlvdSB3aWxsIG5vdCBiZSBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgXCJhYmxlIHRvIHJlam9pbiB3aXRob3V0IGFuIGludml0ZSBmcm9tIGFub3RoZXIgYWRtaW5pc3RyYXRvci5cIikgfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHdhcm5pbmdzO1xuICAgIH1cblxuICAgIF9vbkxlYXZlQ2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFF1ZXN0aW9uRGlhbG9nID0gc2RrLmdldENvbXBvbmVudChcImRpYWxvZ3MuUXVlc3Rpb25EaWFsb2dcIik7XG4gICAgICAgIGNvbnN0IHdhcm5pbmdzID0gdGhpcy5fbGVhdmVHcm91cFdhcm5pbmdzKCk7XG5cbiAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnTGVhdmUgR3JvdXAnLCAnJywgUXVlc3Rpb25EaWFsb2csIHtcbiAgICAgICAgICAgIHRpdGxlOiBfdChcIkxlYXZlIENvbW11bml0eVwiKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAoXG4gICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJMZWF2ZSAlKGdyb3VwTmFtZSlzP1wiLCB7IGdyb3VwTmFtZTogdGhpcy5wcm9wcy5ncm91cElkIH0pIH1cbiAgICAgICAgICAgICAgICAgICAgeyB3YXJuaW5ncyB9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGJ1dHRvbjogX3QoXCJMZWF2ZVwiKSxcbiAgICAgICAgICAgIGRhbmdlcjogdGhpcy5zdGF0ZS5pc1VzZXJQcml2aWxlZ2VkLFxuICAgICAgICAgICAgb25GaW5pc2hlZDogYXN5bmMgKGNvbmZpcm1lZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY29uZmlybWVkKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbWVtYmVyc2hpcEJ1c3k6IHRydWUgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBXYWl0IDUwMG1zIHRvIHByZXZlbnQgZmxhc2hpbmcuIERvIHRoaXMgYmVmb3JlIHNlbmRpbmcgYSByZXF1ZXN0IG90aGVyd2lzZSB3ZSByaXNrIHRoZVxuICAgICAgICAgICAgICAgIC8vIHNwaW5uZXIgZGlzYXBwZWFyaW5nIGFmdGVyIHdlIGhhdmUgZmV0Y2hlZCBuZXcgZ3JvdXAgZGF0YS5cbiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcCg1MDApO1xuXG4gICAgICAgICAgICAgICAgR3JvdXBTdG9yZS5sZWF2ZUdyb3VwKHRoaXMucHJvcHMuZ3JvdXBJZCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IHJlc2V0IG1lbWJlcnNoaXBCdXN5IGhlcmU6IHdhaXQgZm9yIHRoZSBtZW1iZXJzaGlwIGNoYW5nZSB0byBjb21lIGRvd24gdGhlIHN5bmNcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgbWVtYmVyc2hpcEJ1c3k6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBFcnJvckRpYWxvZyA9IHNkay5nZXRDb21wb25lbnQoXCJkaWFsb2dzLkVycm9yRGlhbG9nXCIpO1xuICAgICAgICAgICAgICAgICAgICBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdFcnJvciBsZWF2aW5nIGNvbW11bml0eScsICcnLCBFcnJvckRpYWxvZywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF90KFwiRXJyb3JcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogX3QoXCJVbmFibGUgdG8gbGVhdmUgY29tbXVuaXR5XCIpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfb25BZGRSb29tc0NsaWNrID0gKCkgPT4ge1xuICAgICAgICBzaG93R3JvdXBBZGRSb29tRGlhbG9nKHRoaXMucHJvcHMuZ3JvdXBJZCk7XG4gICAgfTtcblxuICAgIF9kaXNtaXNzVXBncmFkZU5vdGljZSA9ICgpID0+IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVVBHUkFERV9OT1RJQ0VfTFNfS0VZLCBcInRydWVcIik7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaG93VXBncmFkZU5vdGljZTogZmFsc2UgfSk7XG4gICAgfVxuXG4gICAgX29uQ3JlYXRlU3BhY2VDbGljayA9ICgpID0+IHtcbiAgICAgICAgY3JlYXRlU3BhY2VGcm9tQ29tbXVuaXR5KHRoaXMuX21hdHJpeENsaWVudCwgdGhpcy5wcm9wcy5ncm91cElkKTtcbiAgICB9O1xuXG4gICAgX29uQWRtaW5zTGlua0NsaWNrID0gKCkgPT4ge1xuICAgICAgICBkaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uU2V0UmlnaHRQYW5lbFBoYXNlLFxuICAgICAgICAgICAgcGhhc2U6IFJpZ2h0UGFuZWxQaGFzZXMuR3JvdXBNZW1iZXJMaXN0LFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgX2dldEdyb3VwU2VjdGlvbigpIHtcbiAgICAgICAgY29uc3QgZ3JvdXBTZXR0aW5nc1NlY3Rpb25DbGFzc2VzID0gY2xhc3NuYW1lcyh7XG4gICAgICAgICAgICBcIm14X0dyb3VwVmlld19ncm91cFwiOiB0aGlzLnN0YXRlLmVkaXRpbmcsXG4gICAgICAgICAgICBcIm14X0dyb3VwVmlld19ncm91cF9kaXNhYmxlZFwiOiB0aGlzLnN0YXRlLmVkaXRpbmcgJiYgIXRoaXMuc3RhdGUuaXNVc2VyUHJpdmlsZWdlZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5zdGF0ZS5lZGl0aW5nID8gPGgyPiB7IF90KCdDb21tdW5pdHkgU2V0dGluZ3MnKSB9IDwvaDI+IDogPGRpdiAvPjtcblxuICAgICAgICBjb25zdCBob3N0aW5nU2lnbnVwTGluayA9IGdldEhvc3RpbmdMaW5rKCdjb21tdW5pdHktc2V0dGluZ3MnKTtcbiAgICAgICAgbGV0IGhvc3RpbmdTaWdudXAgPSBudWxsO1xuICAgICAgICBpZiAoaG9zdGluZ1NpZ251cExpbmsgJiYgdGhpcy5zdGF0ZS5pc1VzZXJQcml2aWxlZ2VkKSB7XG4gICAgICAgICAgICBob3N0aW5nU2lnbnVwID0gPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfaG9zdGluZ1NpZ251cFwiPlxuICAgICAgICAgICAgICAgIHsgX3QoXG4gICAgICAgICAgICAgICAgICAgIFwiV2FudCBtb3JlIHRoYW4gYSBjb21tdW5pdHk/IDxhPkdldCB5b3VyIG93biBzZXJ2ZXI8L2E+XCIsIHt9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhOiBzdWIgPT4gPGEgaHJlZj17aG9zdGluZ1NpZ251cExpbmt9IHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vcmVmZXJyZXIgbm9vcGVuZXJcIj57IHN1YiB9PC9hPixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICApIH1cbiAgICAgICAgICAgICAgICA8YSBocmVmPXtob3N0aW5nU2lnbnVwTGlua30gdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9yZWZlcnJlciBub29wZW5lclwiPlxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17cmVxdWlyZShcIi4uLy4uLy4uL3Jlcy9pbWcvZXh0ZXJuYWwtbGluay5zdmdcIil9IHdpZHRoPVwiMTFcIiBoZWlnaHQ9XCIxMFwiIGFsdD0nJyAvPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvZGl2PjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNoYW5nZURlbGF5V2FybmluZyA9IHRoaXMuc3RhdGUuZWRpdGluZyAmJiB0aGlzLnN0YXRlLmlzVXNlclByaXZpbGVnZWQgP1xuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfY2hhbmdlRGVsYXlXYXJuaW5nXCI+XG4gICAgICAgICAgICAgICAgeyBfdChcbiAgICAgICAgICAgICAgICAgICAgJ0NoYW5nZXMgbWFkZSB0byB5b3VyIGNvbW11bml0eSA8Ym9sZDE+bmFtZTwvYm9sZDE+IGFuZCA8Ym9sZDI+YXZhdGFyPC9ib2xkMj4gJyArXG4gICAgICAgICAgICAgICAgICAgICdtaWdodCBub3QgYmUgc2VlbiBieSBvdGhlciB1c2VycyBmb3IgdXAgdG8gMzAgbWludXRlcy4nLFxuICAgICAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2JvbGQxJzogKHN1YikgPT4gPGI+IHsgc3ViIH0gPC9iPixcbiAgICAgICAgICAgICAgICAgICAgICAgICdib2xkMic6IChzdWIpID0+IDxiPiB7IHN1YiB9IDwvYj4sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKSB9XG4gICAgICAgICAgICA8L2Rpdj4gOiA8ZGl2IC8+O1xuXG4gICAgICAgIGxldCBjb21tdW5pdGllc1VwZ3JhZGVOb3RpY2U7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3dVcGdyYWRlTm90aWNlKSB7XG4gICAgICAgICAgICBsZXQgdGV4dDtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmlzVXNlclByaXZpbGVnZWQpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gX3QoXCJZb3UgY2FuIGNyZWF0ZSBhIFNwYWNlIGZyb20gdGhpcyBjb21tdW5pdHkgPGE+aGVyZTwvYT4uXCIsIHt9LCB7XG4gICAgICAgICAgICAgICAgICAgIGE6IHN1YiA9PiA8QWNjZXNzaWJsZUJ1dHRvbiBvbkNsaWNrPXt0aGlzLl9vbkNyZWF0ZVNwYWNlQ2xpY2t9IGtpbmQ9XCJsaW5rXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IHN1YiB9XG4gICAgICAgICAgICAgICAgICAgIDwvQWNjZXNzaWJsZUJ1dHRvbj4sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRleHQgPSBfdChcIkFzayB0aGUgPGE+YWRtaW5zPC9hPiBvZiB0aGlzIGNvbW11bml0eSB0byBtYWtlIGl0IGludG8gYSBTcGFjZSBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiYW5kIGtlZXAgYSBsb29rIG91dCBmb3IgdGhlIGludml0ZS5cIiwge30sIHtcbiAgICAgICAgICAgICAgICAgICAgYTogc3ViID0+IDxBY2Nlc3NpYmxlQnV0dG9uIG9uQ2xpY2s9e3RoaXMuX29uQWRtaW5zTGlua0NsaWNrfSBraW5kPVwibGlua1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzdWIgfVxuICAgICAgICAgICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb21tdW5pdGllc1VwZ3JhZGVOb3RpY2UgPSA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19zcGFjZVVwZ3JhZGVQcm9tcHRcIj5cbiAgICAgICAgICAgICAgICA8aDI+eyBfdChcIkNvbW11bml0aWVzIGNhbiBub3cgYmUgbWFkZSBpbnRvIFNwYWNlc1wiKSB9PC9oMj5cbiAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgeyBfdChcIlNwYWNlcyBhcmUgYSBuZXcgd2F5IHRvIG1ha2UgYSBjb21tdW5pdHksIHdpdGggbmV3IGZlYXR1cmVzIGNvbWluZy5cIikgfVxuICAgICAgICAgICAgICAgICAgICAmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgeyB0ZXh0IH1cbiAgICAgICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJDb21tdW5pdGllcyB3b24ndCByZWNlaXZlIGZ1cnRoZXIgdXBkYXRlcy5cIikgfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfc3BhY2VVcGdyYWRlUHJvbXB0X2Nsb3NlXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fZGlzbWlzc1VwZ3JhZGVOb3RpY2V9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17Z3JvdXBTZXR0aW5nc1NlY3Rpb25DbGFzc2VzfT5cbiAgICAgICAgICAgIHsgaGVhZGVyIH1cbiAgICAgICAgICAgIHsgaG9zdGluZ1NpZ251cCB9XG4gICAgICAgICAgICB7IGNoYW5nZURlbGF5V2FybmluZyB9XG4gICAgICAgICAgICB7IGNvbW11bml0aWVzVXBncmFkZU5vdGljZSB9XG4gICAgICAgICAgICB7IHRoaXMuX2dldEpvaW5hYmxlTm9kZSgpIH1cbiAgICAgICAgICAgIHsgdGhpcy5fZ2V0TG9uZ0Rlc2NyaXB0aW9uTm9kZSgpIH1cbiAgICAgICAgICAgIHsgdGhpcy5fZ2V0Um9vbXNOb2RlKCkgfVxuICAgICAgICA8L2Rpdj47XG4gICAgfVxuXG4gICAgX2dldFJvb21zTm9kZSgpIHtcbiAgICAgICAgY29uc3QgUm9vbURldGFpbExpc3QgPSBzZGsuZ2V0Q29tcG9uZW50KCdyb29tcy5Sb29tRGV0YWlsTGlzdCcpO1xuICAgICAgICBjb25zdCBBY2Nlc3NpYmxlQnV0dG9uID0gc2RrLmdldENvbXBvbmVudCgnZWxlbWVudHMuQWNjZXNzaWJsZUJ1dHRvbicpO1xuICAgICAgICBjb25zdCBTcGlubmVyID0gc2RrLmdldENvbXBvbmVudCgnZWxlbWVudHMuU3Bpbm5lcicpO1xuICAgICAgICBjb25zdCBUb29sdGlwQnV0dG9uID0gc2RrLmdldENvbXBvbmVudCgnZWxlbWVudHMuVG9vbHRpcEJ1dHRvbicpO1xuXG4gICAgICAgIGNvbnN0IHJvb21zSGVscE5vZGUgPSB0aGlzLnN0YXRlLmVkaXRpbmcgPyA8VG9vbHRpcEJ1dHRvbiBoZWxwVGV4dD17XG4gICAgICAgICAgICBfdChcbiAgICAgICAgICAgICAgICAnVGhlc2Ugcm9vbXMgYXJlIGRpc3BsYXllZCB0byBjb21tdW5pdHkgbWVtYmVycyBvbiB0aGUgY29tbXVuaXR5IHBhZ2UuICcrXG4gICAgICAgICAgICAgICAgJ0NvbW11bml0eSBtZW1iZXJzIGNhbiBqb2luIHRoZSByb29tcyBieSBjbGlja2luZyBvbiB0aGVtLicsXG4gICAgICAgICAgICApXG4gICAgICAgIH0gLz4gOiA8ZGl2IC8+O1xuXG4gICAgICAgIGNvbnN0IGFkZFJvb21Sb3cgPSB0aGlzLnN0YXRlLmVkaXRpbmcgP1xuICAgICAgICAgICAgKDxBY2Nlc3NpYmxlQnV0dG9uIGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19yb29tc19oZWFkZXJfYWRkUm93XCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vbkFkZFJvb21zQ2xpY2t9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfcm9vbXNfaGVhZGVyX2FkZFJvd19idXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9e3JlcXVpcmUoXCIuLi8uLi8uLi9yZXMvaW1nL2ljb25zLXJvb20tYWRkLnN2Z1wiKX0gd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19yb29tc19oZWFkZXJfYWRkUm93X2xhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoJ0FkZCByb29tcyB0byB0aGlzIGNvbW11bml0eScpIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQWNjZXNzaWJsZUJ1dHRvbj4pIDogPGRpdiAvPjtcblxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfcm9vbXNcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X3Jvb21zX2hlYWRlclwiPlxuICAgICAgICAgICAgICAgIDxoMz5cbiAgICAgICAgICAgICAgICAgICAgeyBfdCgnUm9vbXMnKSB9XG4gICAgICAgICAgICAgICAgICAgIHsgcm9vbXNIZWxwTm9kZSB9XG4gICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICB7IGFkZFJvb21Sb3cgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7IHRoaXMuc3RhdGUuZ3JvdXBSb29tc0xvYWRpbmcgP1xuICAgICAgICAgICAgICAgIDxTcGlubmVyIC8+IDpcbiAgICAgICAgICAgICAgICA8Um9vbURldGFpbExpc3Qgcm9vbXM9e3RoaXMuc3RhdGUuZ3JvdXBSb29tc30gLz5cbiAgICAgICAgICAgIH1cbiAgICAgICAgPC9kaXY+O1xuICAgIH1cblxuICAgIF9nZXRGZWF0dXJlZFJvb21zTm9kZSgpIHtcbiAgICAgICAgY29uc3Qgc3VtbWFyeSA9IHRoaXMuc3RhdGUuc3VtbWFyeTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2F0ZWdvcnlSb29tcyA9IFtdO1xuICAgICAgICBjb25zdCBjYXRlZ29yeVJvb21zID0ge307XG4gICAgICAgIHN1bW1hcnkucm9vbXNfc2VjdGlvbi5yb29tcy5mb3JFYWNoKChyKSA9PiB7XG4gICAgICAgICAgICBpZiAoci5jYXRlZ29yeV9pZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRDYXRlZ29yeVJvb21zLnB1c2gocik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBsaXN0ID0gY2F0ZWdvcnlSb29tc1tyLmNhdGVnb3J5X2lkXTtcbiAgICAgICAgICAgICAgICBpZiAobGlzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlSb29tc1tyLmNhdGVnb3J5X2lkXSA9IGxpc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxpc3QucHVzaChyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhdGVnb3J5Tm9kZSA9IDxDYXRlZ29yeVJvb21MaXN0XG4gICAgICAgICAgICByb29tcz17ZGVmYXVsdENhdGVnb3J5Um9vbXN9XG4gICAgICAgICAgICBncm91cElkPXt0aGlzLnByb3BzLmdyb3VwSWR9XG4gICAgICAgICAgICBlZGl0aW5nPXt0aGlzLnN0YXRlLmVkaXRpbmd9IC8+O1xuICAgICAgICBjb25zdCBjYXRlZ29yeVJvb21Ob2RlcyA9IE9iamVjdC5rZXlzKGNhdGVnb3J5Um9vbXMpLm1hcCgoY2F0SWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhdCA9IHN1bW1hcnkucm9vbXNfc2VjdGlvbi5jYXRlZ29yaWVzW2NhdElkXTtcbiAgICAgICAgICAgIHJldHVybiA8Q2F0ZWdvcnlSb29tTGlzdFxuICAgICAgICAgICAgICAgIGtleT17Y2F0SWR9XG4gICAgICAgICAgICAgICAgcm9vbXM9e2NhdGVnb3J5Um9vbXNbY2F0SWRdfVxuICAgICAgICAgICAgICAgIGNhdGVnb3J5PXtjYXR9XG4gICAgICAgICAgICAgICAgZ3JvdXBJZD17dGhpcy5wcm9wcy5ncm91cElkfVxuICAgICAgICAgICAgICAgIGVkaXRpbmc9e3RoaXMuc3RhdGUuZWRpdGluZ30gLz47XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19mZWF0dXJlZFRoaW5nc1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfZmVhdHVyZWRUaGluZ3NfaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgeyBfdCgnRmVhdHVyZWQgUm9vbXM6JykgfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7IGRlZmF1bHRDYXRlZ29yeU5vZGUgfVxuICAgICAgICAgICAgeyBjYXRlZ29yeVJvb21Ob2RlcyB9XG4gICAgICAgIDwvZGl2PjtcbiAgICB9XG5cbiAgICBfZ2V0RmVhdHVyZWRVc2Vyc05vZGUoKSB7XG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSB0aGlzLnN0YXRlLnN1bW1hcnk7XG5cbiAgICAgICAgY29uc3Qgbm9Sb2xlVXNlcnMgPSBbXTtcbiAgICAgICAgY29uc3Qgcm9sZVVzZXJzID0ge307XG4gICAgICAgIHN1bW1hcnkudXNlcnNfc2VjdGlvbi51c2Vycy5mb3JFYWNoKCh1KSA9PiB7XG4gICAgICAgICAgICBpZiAodS5yb2xlX2lkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbm9Sb2xlVXNlcnMucHVzaCh1KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGxpc3QgPSByb2xlVXNlcnNbdS5yb2xlX2lkXTtcbiAgICAgICAgICAgICAgICBpZiAobGlzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcm9sZVVzZXJzW3Uucm9sZV9pZF0gPSBsaXN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsaXN0LnB1c2godSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG5vUm9sZU5vZGUgPSA8Um9sZVVzZXJMaXN0XG4gICAgICAgICAgICB1c2Vycz17bm9Sb2xlVXNlcnN9XG4gICAgICAgICAgICBncm91cElkPXt0aGlzLnByb3BzLmdyb3VwSWR9XG4gICAgICAgICAgICBlZGl0aW5nPXt0aGlzLnN0YXRlLmVkaXRpbmd9IC8+O1xuICAgICAgICBjb25zdCByb2xlVXNlck5vZGVzID0gT2JqZWN0LmtleXMocm9sZVVzZXJzKS5tYXAoKHJvbGVJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm9sZSA9IHN1bW1hcnkudXNlcnNfc2VjdGlvbi5yb2xlc1tyb2xlSWRdO1xuICAgICAgICAgICAgcmV0dXJuIDxSb2xlVXNlckxpc3RcbiAgICAgICAgICAgICAgICBrZXk9e3JvbGVJZH1cbiAgICAgICAgICAgICAgICB1c2Vycz17cm9sZVVzZXJzW3JvbGVJZF19XG4gICAgICAgICAgICAgICAgcm9sZT17cm9sZX1cbiAgICAgICAgICAgICAgICBncm91cElkPXt0aGlzLnByb3BzLmdyb3VwSWR9XG4gICAgICAgICAgICAgICAgZWRpdGluZz17dGhpcy5zdGF0ZS5lZGl0aW5nfSAvPjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2ZlYXR1cmVkVGhpbmdzXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19mZWF0dXJlZFRoaW5nc19oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICB7IF90KCdGZWF0dXJlZCBVc2VyczonKSB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHsgbm9Sb2xlTm9kZSB9XG4gICAgICAgICAgICB7IHJvbGVVc2VyTm9kZXMgfVxuICAgICAgICA8L2Rpdj47XG4gICAgfVxuXG4gICAgX2dldE1lbWJlcnNoaXBTZWN0aW9uKCkge1xuICAgICAgICBjb25zdCBTcGlubmVyID0gc2RrLmdldENvbXBvbmVudChcImVsZW1lbnRzLlNwaW5uZXJcIik7XG4gICAgICAgIGNvbnN0IEJhc2VBdmF0YXIgPSBzZGsuZ2V0Q29tcG9uZW50KFwiYXZhdGFycy5CYXNlQXZhdGFyXCIpO1xuXG4gICAgICAgIGNvbnN0IGdyb3VwID0gdGhpcy5fbWF0cml4Q2xpZW50LmdldEdyb3VwKHRoaXMucHJvcHMuZ3JvdXBJZCk7XG5cbiAgICAgICAgaWYgKGdyb3VwICYmIGdyb3VwLm15TWVtYmVyc2hpcCA9PT0gJ2ludml0ZScpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLm1lbWJlcnNoaXBCdXN5IHx8IHRoaXMuc3RhdGUuaW52aXRlclByb2ZpbGVCdXN5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X21lbWJlcnNoaXBTZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxTcGlubmVyIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaHR0cEludml0ZXJBdmF0YXIgPSB0aGlzLnN0YXRlLmludml0ZXJQcm9maWxlICYmIHRoaXMuc3RhdGUuaW52aXRlclByb2ZpbGUuYXZhdGFyVXJsXG4gICAgICAgICAgICAgICAgPyBtZWRpYUZyb21NeGModGhpcy5zdGF0ZS5pbnZpdGVyUHJvZmlsZS5hdmF0YXJVcmwpLmdldFNxdWFyZVRodW1ibmFpbEh0dHAoMzYpXG4gICAgICAgICAgICAgICAgOiBudWxsO1xuXG4gICAgICAgICAgICBjb25zdCBpbnZpdGVyID0gZ3JvdXAuaW52aXRlciB8fCB7fTtcbiAgICAgICAgICAgIGxldCBpbnZpdGVyTmFtZSA9IGludml0ZXIudXNlcklkO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW52aXRlclByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICBpbnZpdGVyTmFtZSA9IHRoaXMuc3RhdGUuaW52aXRlclByb2ZpbGUuZGlzcGxheU5hbWUgfHwgaW52aXRlci51c2VySWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfbWVtYmVyc2hpcFNlY3Rpb24gbXhfR3JvdXBWaWV3X21lbWJlcnNoaXBTZWN0aW9uX2ludml0ZWRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19tZW1iZXJzaGlwU3ViU2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19tZW1iZXJzaGlwU2VjdGlvbl9kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJhc2VBdmF0YXIgdXJsPXtodHRwSW52aXRlckF2YXRhcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtpbnZpdGVyTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17MzZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXszNn1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IF90KFwiJShpbnZpdGVyKXMgaGFzIGludml0ZWQgeW91IHRvIGpvaW4gdGhpcyBjb21tdW5pdHlcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludml0ZXI6IGludml0ZXJOYW1lIHx8IF90KFwiU29tZW9uZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X21lbWJlcnNoaXBfYnV0dG9uQ29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfdGV4dEJ1dHRvbiBteF9Sb29tSGVhZGVyX3RleHRCdXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uQWNjZXB0SW52aXRlQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBfdChcIkFjY2VwdFwiKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfdGV4dEJ1dHRvbiBteF9Sb29tSGVhZGVyX3RleHRCdXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uUmVqZWN0SW52aXRlQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBfdChcIkRlY2xpbmVcIikgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtZW1iZXJzaGlwQ29udGFpbmVyRXh0cmFDbGFzc2VzO1xuICAgICAgICBsZXQgbWVtYmVyc2hpcEJ1dHRvbkV4dHJhQ2xhc3NlcztcbiAgICAgICAgbGV0IG1lbWJlcnNoaXBCdXR0b25Ub29sdGlwO1xuICAgICAgICBsZXQgbWVtYmVyc2hpcEJ1dHRvblRleHQ7XG4gICAgICAgIGxldCBtZW1iZXJzaGlwQnV0dG9uT25DbGljaztcblxuICAgICAgICAvLyBVc2VyIGlzIG5vdCBpbiB0aGUgZ3JvdXBcbiAgICAgICAgaWYgKCghZ3JvdXAgfHwgZ3JvdXAubXlNZW1iZXJzaGlwID09PSAnbGVhdmUnKSAmJlxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zdW1tYXJ5ICYmXG4gICAgICAgICAgICB0aGlzLnN0YXRlLnN1bW1hcnkucHJvZmlsZSAmJlxuICAgICAgICAgICAgQm9vbGVhbih0aGlzLnN0YXRlLnN1bW1hcnkucHJvZmlsZS5pc19vcGVubHlfam9pbmFibGUpXG4gICAgICAgICkge1xuICAgICAgICAgICAgbWVtYmVyc2hpcEJ1dHRvblRleHQgPSBfdChcIkpvaW4gdGhpcyBjb21tdW5pdHlcIik7XG4gICAgICAgICAgICBtZW1iZXJzaGlwQnV0dG9uT25DbGljayA9IHRoaXMuX29uSm9pbkNsaWNrO1xuXG4gICAgICAgICAgICBtZW1iZXJzaGlwQnV0dG9uRXh0cmFDbGFzc2VzID0gJ214X0dyb3VwVmlld19qb2luQnV0dG9uJztcbiAgICAgICAgICAgIG1lbWJlcnNoaXBDb250YWluZXJFeHRyYUNsYXNzZXMgPSAnbXhfR3JvdXBWaWV3X21lbWJlcnNoaXBTZWN0aW9uX2xlYXZlJztcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIGdyb3VwICYmXG4gICAgICAgICAgICBncm91cC5teU1lbWJlcnNoaXAgPT09ICdqb2luJyAmJlxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5lZGl0aW5nXG4gICAgICAgICkge1xuICAgICAgICAgICAgbWVtYmVyc2hpcEJ1dHRvblRleHQgPSBfdChcIkxlYXZlIHRoaXMgY29tbXVuaXR5XCIpO1xuICAgICAgICAgICAgbWVtYmVyc2hpcEJ1dHRvbk9uQ2xpY2sgPSB0aGlzLl9vbkxlYXZlQ2xpY2s7XG4gICAgICAgICAgICBtZW1iZXJzaGlwQnV0dG9uVG9vbHRpcCA9IHRoaXMuc3RhdGUuaXNVc2VyUHJpdmlsZWdlZCA/XG4gICAgICAgICAgICAgICAgX3QoXCJZb3UgYXJlIGFuIGFkbWluaXN0cmF0b3Igb2YgdGhpcyBjb21tdW5pdHlcIikgOlxuICAgICAgICAgICAgICAgIF90KFwiWW91IGFyZSBhIG1lbWJlciBvZiB0aGlzIGNvbW11bml0eVwiKTtcblxuICAgICAgICAgICAgbWVtYmVyc2hpcEJ1dHRvbkV4dHJhQ2xhc3NlcyA9IHtcbiAgICAgICAgICAgICAgICAnbXhfR3JvdXBWaWV3X2xlYXZlQnV0dG9uJzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAnbXhfUm9vbUhlYWRlcl90ZXh0QnV0dG9uX2Rhbmdlcic6IHRoaXMuc3RhdGUuaXNVc2VyUHJpdmlsZWdlZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBtZW1iZXJzaGlwQ29udGFpbmVyRXh0cmFDbGFzc2VzID0gJ214X0dyb3VwVmlld19tZW1iZXJzaGlwU2VjdGlvbl9qb2luZWQnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZW1iZXJzaGlwQnV0dG9uQ2xhc3NlcyA9IGNsYXNzbmFtZXMoXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgJ214X1Jvb21IZWFkZXJfdGV4dEJ1dHRvbicsXG4gICAgICAgICAgICAgICAgJ214X0dyb3VwVmlld190ZXh0QnV0dG9uJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBtZW1iZXJzaGlwQnV0dG9uRXh0cmFDbGFzc2VzLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG1lbWJlcnNoaXBDb250YWluZXJDbGFzc2VzID0gY2xhc3NuYW1lcyhcbiAgICAgICAgICAgICdteF9Hcm91cFZpZXdfbWVtYmVyc2hpcFNlY3Rpb24nLFxuICAgICAgICAgICAgbWVtYmVyc2hpcENvbnRhaW5lckV4dHJhQ2xhc3NlcyxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e21lbWJlcnNoaXBDb250YWluZXJDbGFzc2VzfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X21lbWJlcnNoaXBTdWJTZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgeyAvKiBUaGUgPGRpdiAvPiBpcyBmb3IgZmxleCBhbGlnbm1lbnQgKi8gfVxuICAgICAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5tZW1iZXJzaGlwQnVzeSA/IDxTcGlubmVyIC8+IDogPGRpdiAvPiB9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfbWVtYmVyc2hpcF9idXR0b25Db250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17bWVtYmVyc2hpcEJ1dHRvbkNsYXNzZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXttZW1iZXJzaGlwQnV0dG9uT25DbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXttZW1iZXJzaGlwQnV0dG9uVG9vbHRpcH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtZW1iZXJzaGlwQnV0dG9uVGV4dCB9XG4gICAgICAgICAgICAgICAgICAgIDwvQWNjZXNzaWJsZUJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj47XG4gICAgfVxuXG4gICAgX2dldEpvaW5hYmxlTm9kZSgpIHtcbiAgICAgICAgY29uc3QgSW5saW5lU3Bpbm5lciA9IHNkay5nZXRDb21wb25lbnQoJ2VsZW1lbnRzLklubGluZVNwaW5uZXInKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuZWRpdGluZyA/IDxkaXY+XG4gICAgICAgICAgICA8aDM+XG4gICAgICAgICAgICAgICAgeyBfdCgnV2hvIGNhbiBqb2luIHRoaXMgY29tbXVuaXR5PycpIH1cbiAgICAgICAgICAgICAgICB7IHRoaXMuc3RhdGUuZ3JvdXBKb2luYWJsZUxvYWRpbmcgP1xuICAgICAgICAgICAgICAgICAgICA8SW5saW5lU3Bpbm5lciAvPiA6IDxkaXYgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e0dST1VQX0pPSU5QT0xJQ1lfSU5WSVRFfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5qb2luYWJsZUZvcm0ucG9saWN5VHlwZSA9PT0gR1JPVVBfSk9JTlBPTElDWV9JTlZJVEV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5fb25Kb2luYWJsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfbGFiZWxfdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBfdCgnT25seSBwZW9wbGUgd2hvIGhhdmUgYmVlbiBpbnZpdGVkJykgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17R1JPVVBfSk9JTlBPTElDWV9PUEVOfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5qb2luYWJsZUZvcm0ucG9saWN5VHlwZSA9PT0gR1JPVVBfSk9JTlBPTElDWV9PUEVOfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uSm9pbmFibGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2xhYmVsX3RleHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgX3QoJ0V2ZXJ5b25lJykgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PiA6IG51bGw7XG4gICAgfVxuXG4gICAgX2dldExvbmdEZXNjcmlwdGlvbk5vZGUoKSB7XG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSB0aGlzLnN0YXRlLnN1bW1hcnk7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIGlmIChzdW1tYXJ5LnByb2ZpbGUgJiYgc3VtbWFyeS5wcm9maWxlLmxvbmdfZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gc2FuaXRpemVkSHRtbE5vZGUoc3VtbWFyeS5wcm9maWxlLmxvbmdfZGVzY3JpcHRpb24pO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuaXNVc2VyUHJpdmlsZWdlZCkge1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2dyb3VwRGVzY19wbGFjZWhvbGRlclwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25FZGl0Q2xpY2t9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgeyBfdChcbiAgICAgICAgICAgICAgICAgICAgJ1lvdXIgY29tbXVuaXR5IGhhc25cXCd0IGdvdCBhIExvbmcgRGVzY3JpcHRpb24sIGEgSFRNTCBwYWdlIHRvIHNob3cgdG8gY29tbXVuaXR5IG1lbWJlcnMuPGJyIC8+JyArXG4gICAgICAgICAgICAgICAgICAgICdDbGljayBoZXJlIHRvIG9wZW4gc2V0dGluZ3MgYW5kIGdpdmUgaXQgb25lIScsXG4gICAgICAgICAgICAgICAgICAgIHt9LFxuICAgICAgICAgICAgICAgICAgICB7ICdicic6IDxiciAvPiB9LFxuICAgICAgICAgICAgICAgICkgfVxuICAgICAgICAgICAgPC9kaXY+O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdyb3VwRGVzY0VkaXRpbmdDbGFzc2VzID0gY2xhc3NuYW1lcyh7XG4gICAgICAgICAgICBcIm14X0dyb3VwVmlld19ncm91cERlc2NcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwibXhfR3JvdXBWaWV3X2dyb3VwRGVzY19kaXNhYmxlZFwiOiAhdGhpcy5zdGF0ZS5pc1VzZXJQcml2aWxlZ2VkLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5lZGl0aW5nID9cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtncm91cERlc2NFZGl0aW5nQ2xhc3Nlc30+XG4gICAgICAgICAgICAgICAgPGgzPiB7IF90KFwiTG9uZyBEZXNjcmlwdGlvbiAoSFRNTClcIikgfSA8L2gzPlxuICAgICAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5wcm9maWxlRm9ybS5sb25nX2Rlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17X3QoTE9OR19ERVNDX1BMQUNFSE9MREVSKX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuX29uTG9uZ0Rlc2NDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PVwiNFwiXG4gICAgICAgICAgICAgICAgICAgIGtleT1cImVkaXRMb25nRGVzY1wiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PiA6XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19ncm91cERlc2NcIj5cbiAgICAgICAgICAgICAgICB7IGRlc2NyaXB0aW9uIH1cbiAgICAgICAgICAgIDwvZGl2PjtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IEdyb3VwQXZhdGFyID0gc2RrLmdldENvbXBvbmVudChcImF2YXRhcnMuR3JvdXBBdmF0YXJcIik7XG4gICAgICAgIGNvbnN0IFNwaW5uZXIgPSBzZGsuZ2V0Q29tcG9uZW50KFwiZWxlbWVudHMuU3Bpbm5lclwiKTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zdW1tYXJ5TG9hZGluZyAmJiB0aGlzLnN0YXRlLmVycm9yID09PSBudWxsIHx8IHRoaXMuc3RhdGUuc2F2aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gPFNwaW5uZXIgLz47XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5zdW1tYXJ5ICYmICF0aGlzLnN0YXRlLmVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0gdGhpcy5zdGF0ZS5zdW1tYXJ5O1xuXG4gICAgICAgICAgICBsZXQgYXZhdGFyTm9kZTtcbiAgICAgICAgICAgIGxldCBuYW1lTm9kZTtcbiAgICAgICAgICAgIGxldCBzaG9ydERlc2NOb2RlO1xuICAgICAgICAgICAgY29uc3QgcmlnaHRCdXR0b25zID0gW107XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nICYmIHRoaXMuc3RhdGUuaXNVc2VyUHJpdmlsZWdlZCkge1xuICAgICAgICAgICAgICAgIGxldCBhdmF0YXJJbWFnZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS51cGxvYWRpbmdBdmF0YXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFySW1hZ2UgPSA8U3Bpbm5lciAvPjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBHcm91cEF2YXRhciA9IHNkay5nZXRDb21wb25lbnQoJ2F2YXRhcnMuR3JvdXBBdmF0YXInKTtcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFySW1hZ2UgPSA8R3JvdXBBdmF0YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ9e3RoaXMucHJvcHMuZ3JvdXBJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTmFtZT17dGhpcy5zdGF0ZS5wcm9maWxlRm9ybS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBBdmF0YXJVcmw9e3RoaXMuc3RhdGUucHJvZmlsZUZvcm0uYXZhdGFyX3VybH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXsyOH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17Mjh9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemVNZXRob2Q9J2Nyb3AnXG4gICAgICAgICAgICAgICAgICAgIC8+O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF2YXRhck5vZGUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2F2YXRhclBpY2tlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJhdmF0YXJJbnB1dFwiIGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19hdmF0YXJQaWNrZXJfbGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGF2YXRhckltYWdlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19hdmF0YXJQaWNrZXJfZWRpdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwiYXZhdGFySW5wdXRcIiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfYXZhdGFyUGlja2VyX2xhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17cmVxdWlyZShcIi4uLy4uLy4uL3Jlcy9pbWcvY2FtZXJhLnN2Z1wiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17X3QoXCJVcGxvYWQgYXZhdGFyXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e190KFwiVXBsb2FkIGF2YXRhclwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiMTVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwiYXZhdGFySW5wdXRcIiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfdXBsb2FkSW5wdXRcIiB0eXBlPVwiZmlsZVwiIG9uQ2hhbmdlPXt0aGlzLl9vbkF2YXRhclNlbGVjdGVkfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBFZGl0YWJsZVRleHQgPSBzZGsuZ2V0Q29tcG9uZW50KFwiZWxlbWVudHMuRWRpdGFibGVUZXh0XCIpO1xuXG4gICAgICAgICAgICAgICAgbmFtZU5vZGUgPSA8RWRpdGFibGVUZXh0XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19lZGl0YWJsZVwiXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyQ2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X3BsYWNlaG9sZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e190KCdDb21tdW5pdHkgTmFtZScpfVxuICAgICAgICAgICAgICAgICAgICBibHVyVG9DYW5jZWw9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICBpbml0aWFsVmFsdWU9e3RoaXMuc3RhdGUucHJvZmlsZUZvcm0ubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgb25WYWx1ZUNoYW5nZWQ9e3RoaXMuX29uTmFtZUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgdGFiSW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgZGlyPVwiYXV0b1wiIC8+O1xuXG4gICAgICAgICAgICAgICAgc2hvcnREZXNjTm9kZSA9IDxFZGl0YWJsZVRleHRcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2VkaXRhYmxlXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXJDbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfcGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17X3QoXCJEZXNjcmlwdGlvblwiKX1cbiAgICAgICAgICAgICAgICAgICAgYmx1clRvQ2FuY2VsPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlPXt0aGlzLnN0YXRlLnByb2ZpbGVGb3JtLnNob3J0X2Rlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICBvblZhbHVlQ2hhbmdlZD17dGhpcy5fb25TaG9ydERlc2NDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgICAgIGRpcj1cImF1dG9cIiAvPjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb25Hcm91cEhlYWRlckl0ZW1DbGljayA9IHRoaXMuc3RhdGUuaXNVc2VyTWVtYmVyID8gdGhpcy5fb25FZGl0Q2xpY2sgOiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwQXZhdGFyVXJsID0gc3VtbWFyeS5wcm9maWxlID8gc3VtbWFyeS5wcm9maWxlLmF2YXRhcl91cmwgOiBudWxsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwTmFtZSA9IHN1bW1hcnkucHJvZmlsZSA/IHN1bW1hcnkucHJvZmlsZS5uYW1lIDogbnVsbDtcbiAgICAgICAgICAgICAgICBhdmF0YXJOb2RlID0gPEdyb3VwQXZhdGFyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ9e3RoaXMucHJvcHMuZ3JvdXBJZH1cbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBBdmF0YXJVcmw9e2dyb3VwQXZhdGFyVXJsfVxuICAgICAgICAgICAgICAgICAgICBncm91cE5hbWU9e2dyb3VwTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25Hcm91cEhlYWRlckl0ZW1DbGlja31cbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezI4fVxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezI4fVxuICAgICAgICAgICAgICAgIC8+O1xuICAgICAgICAgICAgICAgIGlmIChzdW1tYXJ5LnByb2ZpbGUgJiYgc3VtbWFyeS5wcm9maWxlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZU5vZGUgPSA8ZGl2IG9uQ2xpY2s9e29uR3JvdXBIZWFkZXJJdGVtQ2xpY2t9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+eyBzdW1tYXJ5LnByb2ZpbGUubmFtZSB9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2hlYWRlcl9ncm91cGlkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHsgdGhpcy5wcm9wcy5ncm91cElkIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuYW1lTm9kZSA9IDxzcGFuIG9uQ2xpY2s9e29uR3JvdXBIZWFkZXJJdGVtQ2xpY2t9PnsgdGhpcy5wcm9wcy5ncm91cElkIH08L3NwYW4+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3VtbWFyeS5wcm9maWxlICYmIHN1bW1hcnkucHJvZmlsZS5zaG9ydF9kZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBzaG9ydERlc2NOb2RlID0gPHNwYW4gb25DbGljaz17b25Hcm91cEhlYWRlckl0ZW1DbGlja30+eyBzdW1tYXJ5LnByb2ZpbGUuc2hvcnRfZGVzY3JpcHRpb24gfTwvc3Bhbj47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5lZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmlnaHRCdXR0b25zLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uIGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld190ZXh0QnV0dG9uIG14X1Jvb21IZWFkZXJfdGV4dEJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJfc2F2ZUJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblNhdmVDbGlja31cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBfdCgnU2F2ZScpIH1cbiAgICAgICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPixcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJpZ2h0QnV0dG9ucy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBjbGFzc05hbWU9XCJteF9Sb29tSGVhZGVyX2NhbmNlbEJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJfY2FuY2VsQnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuX29uQ2FuY2VsQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3JlcXVpcmUoXCIuLi8uLi8uLi9yZXMvaW1nL2NhbmNlbC5zdmdcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfZmlsdGVyRmxpcENvbG9yXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjE4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9XCIxOFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtfdChcIkNhbmNlbFwiKX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPixcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoc3VtbWFyeS51c2VyICYmIHN1bW1hcnkudXNlci5tZW1iZXJzaGlwID09PSAnam9pbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRCdXR0b25zLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X0dyb3VwSGVhZGVyX2J1dHRvbiBteF9Hcm91cEhlYWRlcl9lZGl0QnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJfZWRpdEJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fb25FZGl0Q2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e190KFwiQ29tbXVuaXR5IFNldHRpbmdzXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz4sXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJpZ2h0QnV0dG9ucy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfR3JvdXBIZWFkZXJfYnV0dG9uIG14X0dyb3VwSGVhZGVyX3NoYXJlQnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cIl9zaGFyZUJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLl9vblNoYXJlQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoJ1NoYXJlIENvbW11bml0eScpfVxuICAgICAgICAgICAgICAgICAgICAvPixcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByaWdodFBhbmVsID0gdGhpcy5zdGF0ZS5zaG93UmlnaHRQYW5lbCA/IDxSaWdodFBhbmVsIGdyb3VwSWQ9e3RoaXMucHJvcHMuZ3JvdXBJZH0gLz4gOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlckNsYXNzZXMgPSB7XG4gICAgICAgICAgICAgICAgXCJteF9Hcm91cFZpZXdfaGVhZGVyXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJsaWdodC1wYW5lbFwiOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwibXhfR3JvdXBWaWV3X2hlYWRlcl92aWV3XCI6ICF0aGlzLnN0YXRlLmVkaXRpbmcsXG4gICAgICAgICAgICAgICAgXCJteF9Hcm91cFZpZXdfaGVhZGVyX2lzVXNlck1lbWJlclwiOiB0aGlzLnN0YXRlLmlzVXNlck1lbWJlcixcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPG1haW4gY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc25hbWVzKGhlYWRlckNsYXNzZXMpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2hlYWRlcl9sZWZ0Q29sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfaGVhZGVyX2F2YXRhclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGF2YXRhck5vZGUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2hlYWRlcl9pbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2hlYWRlcl9uYW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWVOb2RlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2hlYWRlcl9zaG9ydERlc2NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc2hvcnREZXNjTm9kZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0dyb3VwVmlld19oZWFkZXJfcmlnaHRDb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHJpZ2h0QnV0dG9ucyB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxHcm91cEhlYWRlckJ1dHRvbnMgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxNYWluU3BsaXQgcGFuZWw9e3JpZ2h0UGFuZWx9IHJlc2l6ZU5vdGlmaWVyPXt0aGlzLnByb3BzLnJlc2l6ZU5vdGlmaWVyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBdXRvSGlkZVNjcm9sbGJhciBjbGFzc05hbWU9XCJteF9Hcm91cFZpZXdfYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGhpcy5fZ2V0TWVtYmVyc2hpcFNlY3Rpb24oKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0aGlzLl9nZXRHcm91cFNlY3Rpb24oKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0F1dG9IaWRlU2Nyb2xsYmFyPlxuICAgICAgICAgICAgICAgICAgICA8L01haW5TcGxpdD5cbiAgICAgICAgICAgICAgICA8L21haW4+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmVycm9yLmh0dHBTdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2Vycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IF90KCdDb21tdW5pdHkgJShncm91cElkKXMgbm90IGZvdW5kJywgeyBncm91cElkOiB0aGlzLnByb3BzLmdyb3VwSWQgfSkgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgZXh0cmFUZXh0O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmVycm9yLmVycmNvZGUgPT09ICdNX1VOUkVDT0dOSVpFRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFUZXh0ID0gPGRpdj57IF90KCdUaGlzIGhvbWVzZXJ2ZXIgZG9lcyBub3Qgc3VwcG9ydCBjb21tdW5pdGllcycpIH08L2Rpdj47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfR3JvdXBWaWV3X2Vycm9yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IF90KCdGYWlsZWQgdG8gbG9hZCAlKGdyb3VwSWQpcycsIHsgZ3JvdXBJZDogdGhpcy5wcm9wcy5ncm91cElkIH0pIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgZXh0cmFUZXh0IH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkludmFsaWQgc3RhdGUgZm9yIEdyb3VwVmlld1wiKTtcbiAgICAgICAgICAgIHJldHVybiA8ZGl2IC8+O1xuICAgICAgICB9XG4gICAgfVxufVxuIl19