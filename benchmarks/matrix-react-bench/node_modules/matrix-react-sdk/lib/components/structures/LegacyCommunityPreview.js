"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireWildcard(require("react"));

var _MatrixClientContext = _interopRequireDefault(require("../../contexts/MatrixClientContext"));

var _languageHandler = require("../../languageHandler");

var _AccessibleButton = _interopRequireDefault(require("../views/elements/AccessibleButton"));

var _ErrorBoundary = _interopRequireDefault(require("../views/elements/ErrorBoundary"));

var _useAsyncMemo = require("../../hooks/useAsyncMemo");

var _Spinner = _interopRequireDefault(require("../views/elements/Spinner"));

var _GroupAvatar = _interopRequireDefault(require("../views/avatars/GroupAvatar"));

var _HtmlUtils = require("../../HtmlUtils");

var _dispatcher = _interopRequireDefault(require("../../dispatcher/dispatcher"));

var _actions = require("../../dispatcher/actions");

var _UserSettingsDialog = require("../views/dialogs/UserSettingsDialog");

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/*
Copyright 2021 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const onSwapClick = () => {
  _dispatcher.default.dispatch({
    action: _actions.Action.ViewUserSettings,
    initialTabId: _UserSettingsDialog.UserTab.Preferences
  });
}; // XXX: temporary community migration component, reuses SpaceRoomView & SpacePreview classes for simplicity


const LegacyCommunityPreview = ({
  groupId
}) => {
  var _groupSummary$user;

  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const groupSummary = (0, _useAsyncMemo.useAsyncMemo)(() => cli.getGroupSummary(groupId), [cli, groupId]);

  if (!groupSummary) {
    return /*#__PURE__*/_react.default.createElement("main", {
      className: "mx_SpaceRoomView"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_MainSplit"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SpaceRoomView_preview"
    }, /*#__PURE__*/_react.default.createElement(_Spinner.default, null))));
  }

  let visibilitySection;

  if (groupSummary.profile.is_public) {
    visibilitySection = /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SpaceRoomView_info_public"
    }, (0, _languageHandler._t)("Public community"));
  } else {
    visibilitySection = /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SpaceRoomView_info_private"
    }, (0, _languageHandler._t)("Private community"));
  }

  return /*#__PURE__*/_react.default.createElement("main", {
    className: "mx_SpaceRoomView"
  }, /*#__PURE__*/_react.default.createElement(_ErrorBoundary.default, null, /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_MainSplit"
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SpaceRoomView_preview"
  }, /*#__PURE__*/_react.default.createElement(_GroupAvatar.default, {
    groupId: groupId,
    groupName: groupSummary.profile.name,
    groupAvatarUrl: groupSummary.profile.avatar_url,
    height: 80,
    width: 80,
    resizeMethod: "crop"
  }), /*#__PURE__*/_react.default.createElement("h1", {
    className: "mx_SpaceRoomView_preview_name"
  }, groupSummary.profile.name), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SpaceRoomView_info"
  }, visibilitySection), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SpaceRoomView_preview_topic",
    ref: e => e && (0, _HtmlUtils.linkifyElement)(e)
  }, groupSummary.profile.short_description), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SpaceRoomView_preview_spaceBetaPrompt"
  }, ((_groupSummary$user = groupSummary.user) === null || _groupSummary$user === void 0 ? void 0 : _groupSummary$user.membership) === "join" ? (0, _languageHandler._t)("To view %(communityName)s, swap to communities in your <a>preferences</a>", {
    communityName: groupSummary.profile.name
  }, {
    a: sub => /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: onSwapClick,
      kind: "link"
    }, sub)
  }) : (0, _languageHandler._t)("To join %(communityName)s, swap to communities in your <a>preferences</a>", {
    communityName: groupSummary.profile.name
  }, {
    a: sub => /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: onSwapClick,
      kind: "link"
    }, sub)
  }))))));
};

var _default = LegacyCommunityPreview;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3N0cnVjdHVyZXMvTGVnYWN5Q29tbXVuaXR5UHJldmlldy50c3giXSwibmFtZXMiOlsib25Td2FwQ2xpY2siLCJkZWZhdWx0RGlzcGF0Y2hlciIsImRpc3BhdGNoIiwiYWN0aW9uIiwiQWN0aW9uIiwiVmlld1VzZXJTZXR0aW5ncyIsImluaXRpYWxUYWJJZCIsIlVzZXJUYWIiLCJQcmVmZXJlbmNlcyIsIkxlZ2FjeUNvbW11bml0eVByZXZpZXciLCJncm91cElkIiwiY2xpIiwiTWF0cml4Q2xpZW50Q29udGV4dCIsImdyb3VwU3VtbWFyeSIsImdldEdyb3VwU3VtbWFyeSIsInZpc2liaWxpdHlTZWN0aW9uIiwicHJvZmlsZSIsImlzX3B1YmxpYyIsIm5hbWUiLCJhdmF0YXJfdXJsIiwiZSIsInNob3J0X2Rlc2NyaXB0aW9uIiwidXNlciIsIm1lbWJlcnNoaXAiLCJjb21tdW5pdHlOYW1lIiwiYSIsInN1YiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBZ0JBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7QUE3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcUJBLE1BQU1BLFdBQVcsR0FBRyxNQUFNO0FBQ3RCQyxzQkFBa0JDLFFBQWxCLENBQTJCO0FBQ3ZCQyxJQUFBQSxNQUFNLEVBQUVDLGdCQUFPQyxnQkFEUTtBQUV2QkMsSUFBQUEsWUFBWSxFQUFFQyw0QkFBUUM7QUFGQyxHQUEzQjtBQUlILENBTEQsQyxDQU9BOzs7QUFDQSxNQUFNQyxzQkFBc0IsR0FBRyxDQUFDO0FBQUVDLEVBQUFBO0FBQUYsQ0FBRCxLQUF5QjtBQUFBOztBQUNwRCxRQUFNQyxHQUFHLEdBQUcsdUJBQVdDLDRCQUFYLENBQVo7QUFFQSxRQUFNQyxZQUFZLEdBQUcsZ0NBQTRCLE1BQU1GLEdBQUcsQ0FBQ0csZUFBSixDQUFvQkosT0FBcEIsQ0FBbEMsRUFBZ0UsQ0FBQ0MsR0FBRCxFQUFNRCxPQUFOLENBQWhFLENBQXJCOztBQUVBLE1BQUksQ0FBQ0csWUFBTCxFQUFtQjtBQUNmLHdCQUFPO0FBQU0sTUFBQSxTQUFTLEVBQUM7QUFBaEIsb0JBQ0g7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLG9CQUNJO0FBQUssTUFBQSxTQUFTLEVBQUM7QUFBZixvQkFDSSw2QkFBQyxnQkFBRCxPQURKLENBREosQ0FERyxDQUFQO0FBT0g7O0FBRUQsTUFBSUUsaUJBQUo7O0FBQ0EsTUFBSUYsWUFBWSxDQUFDRyxPQUFiLENBQXFCQyxTQUF6QixFQUFvQztBQUNoQ0YsSUFBQUEsaUJBQWlCLGdCQUFHO0FBQU0sTUFBQSxTQUFTLEVBQUM7QUFBaEIsT0FDZCx5QkFBRyxrQkFBSCxDQURjLENBQXBCO0FBR0gsR0FKRCxNQUlPO0FBQ0hBLElBQUFBLGlCQUFpQixnQkFBRztBQUFNLE1BQUEsU0FBUyxFQUFDO0FBQWhCLE9BQ2QseUJBQUcsbUJBQUgsQ0FEYyxDQUFwQjtBQUdIOztBQUVELHNCQUFPO0FBQU0sSUFBQSxTQUFTLEVBQUM7QUFBaEIsa0JBQ0gsNkJBQUMsc0JBQUQscUJBQ0k7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLGtCQUNJO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixrQkFDSSw2QkFBQyxvQkFBRDtBQUNJLElBQUEsT0FBTyxFQUFFTCxPQURiO0FBRUksSUFBQSxTQUFTLEVBQUVHLFlBQVksQ0FBQ0csT0FBYixDQUFxQkUsSUFGcEM7QUFHSSxJQUFBLGNBQWMsRUFBRUwsWUFBWSxDQUFDRyxPQUFiLENBQXFCRyxVQUh6QztBQUlJLElBQUEsTUFBTSxFQUFFLEVBSlo7QUFLSSxJQUFBLEtBQUssRUFBRSxFQUxYO0FBTUksSUFBQSxZQUFZLEVBQUM7QUFOakIsSUFESixlQVNJO0FBQUksSUFBQSxTQUFTLEVBQUM7QUFBZCxLQUNNTixZQUFZLENBQUNHLE9BQWIsQ0FBcUJFLElBRDNCLENBVEosZUFZSTtBQUFLLElBQUEsU0FBUyxFQUFDO0FBQWYsS0FDTUgsaUJBRE4sQ0FaSixlQWVJO0FBQUssSUFBQSxTQUFTLEVBQUMsZ0NBQWY7QUFBZ0QsSUFBQSxHQUFHLEVBQUVLLENBQUMsSUFBSUEsQ0FBQyxJQUFJLCtCQUFlQSxDQUFmO0FBQS9ELEtBQ01QLFlBQVksQ0FBQ0csT0FBYixDQUFxQkssaUJBRDNCLENBZkosZUFrQkk7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLEtBQ00sdUJBQUFSLFlBQVksQ0FBQ1MsSUFBYiwwRUFBbUJDLFVBQW5CLE1BQWtDLE1BQWxDLEdBQ0kseUJBQUcsMkVBQUgsRUFBZ0Y7QUFDOUVDLElBQUFBLGFBQWEsRUFBRVgsWUFBWSxDQUFDRyxPQUFiLENBQXFCRTtBQUQwQyxHQUFoRixFQUVDO0FBQ0NPLElBQUFBLENBQUMsRUFBRUMsR0FBRyxpQkFDRiw2QkFBQyx5QkFBRDtBQUFrQixNQUFBLE9BQU8sRUFBRTFCLFdBQTNCO0FBQXdDLE1BQUEsSUFBSSxFQUFDO0FBQTdDLE9BQXNEMEIsR0FBdEQ7QUFGTCxHQUZELENBREosR0FRSSx5QkFBRywyRUFBSCxFQUFnRjtBQUM5RUYsSUFBQUEsYUFBYSxFQUFFWCxZQUFZLENBQUNHLE9BQWIsQ0FBcUJFO0FBRDBDLEdBQWhGLEVBRUM7QUFDQ08sSUFBQUEsQ0FBQyxFQUFFQyxHQUFHLGlCQUNGLDZCQUFDLHlCQUFEO0FBQWtCLE1BQUEsT0FBTyxFQUFFMUIsV0FBM0I7QUFBd0MsTUFBQSxJQUFJLEVBQUM7QUFBN0MsT0FBc0QwQixHQUF0RDtBQUZMLEdBRkQsQ0FUVixDQWxCSixDQURKLENBREosQ0FERyxDQUFQO0FBMkNILENBckVEOztlQXVFZWpCLHNCIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDIxIFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IE1hdHJpeENsaWVudENvbnRleHQgZnJvbSBcIi4uLy4uL2NvbnRleHRzL01hdHJpeENsaWVudENvbnRleHRcIjtcbmltcG9ydCB7IF90IH0gZnJvbSBcIi4uLy4uL2xhbmd1YWdlSGFuZGxlclwiO1xuaW1wb3J0IEFjY2Vzc2libGVCdXR0b24gZnJvbSBcIi4uL3ZpZXdzL2VsZW1lbnRzL0FjY2Vzc2libGVCdXR0b25cIjtcbmltcG9ydCBFcnJvckJvdW5kYXJ5IGZyb20gXCIuLi92aWV3cy9lbGVtZW50cy9FcnJvckJvdW5kYXJ5XCI7XG5pbXBvcnQgeyBJR3JvdXBTdW1tYXJ5IH0gZnJvbSBcIi4uL3ZpZXdzL2RpYWxvZ3MvQ3JlYXRlU3BhY2VGcm9tQ29tbXVuaXR5RGlhbG9nXCI7XG5pbXBvcnQgeyB1c2VBc3luY01lbW8gfSBmcm9tIFwiLi4vLi4vaG9va3MvdXNlQXN5bmNNZW1vXCI7XG5pbXBvcnQgU3Bpbm5lciBmcm9tIFwiLi4vdmlld3MvZWxlbWVudHMvU3Bpbm5lclwiO1xuaW1wb3J0IEdyb3VwQXZhdGFyIGZyb20gXCIuLi92aWV3cy9hdmF0YXJzL0dyb3VwQXZhdGFyXCI7XG5pbXBvcnQgeyBsaW5raWZ5RWxlbWVudCB9IGZyb20gXCIuLi8uLi9IdG1sVXRpbHNcIjtcbmltcG9ydCBkZWZhdWx0RGlzcGF0Y2hlciBmcm9tIFwiLi4vLi4vZGlzcGF0Y2hlci9kaXNwYXRjaGVyXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi4vLi4vZGlzcGF0Y2hlci9hY3Rpb25zXCI7XG5pbXBvcnQgeyBVc2VyVGFiIH0gZnJvbSBcIi4uL3ZpZXdzL2RpYWxvZ3MvVXNlclNldHRpbmdzRGlhbG9nXCI7XG5cbmludGVyZmFjZSBJUHJvcHMge1xuICAgIGdyb3VwSWQ6IHN0cmluZztcbn1cblxuY29uc3Qgb25Td2FwQ2xpY2sgPSAoKSA9PiB7XG4gICAgZGVmYXVsdERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICBhY3Rpb246IEFjdGlvbi5WaWV3VXNlclNldHRpbmdzLFxuICAgICAgICBpbml0aWFsVGFiSWQ6IFVzZXJUYWIuUHJlZmVyZW5jZXMsXG4gICAgfSk7XG59O1xuXG4vLyBYWFg6IHRlbXBvcmFyeSBjb21tdW5pdHkgbWlncmF0aW9uIGNvbXBvbmVudCwgcmV1c2VzIFNwYWNlUm9vbVZpZXcgJiBTcGFjZVByZXZpZXcgY2xhc3NlcyBmb3Igc2ltcGxpY2l0eVxuY29uc3QgTGVnYWN5Q29tbXVuaXR5UHJldmlldyA9ICh7IGdyb3VwSWQgfTogSVByb3BzKSA9PiB7XG4gICAgY29uc3QgY2xpID0gdXNlQ29udGV4dChNYXRyaXhDbGllbnRDb250ZXh0KTtcblxuICAgIGNvbnN0IGdyb3VwU3VtbWFyeSA9IHVzZUFzeW5jTWVtbzxJR3JvdXBTdW1tYXJ5PigoKSA9PiBjbGkuZ2V0R3JvdXBTdW1tYXJ5KGdyb3VwSWQpLCBbY2xpLCBncm91cElkXSk7XG5cbiAgICBpZiAoIWdyb3VwU3VtbWFyeSkge1xuICAgICAgICByZXR1cm4gPG1haW4gY2xhc3NOYW1lPVwibXhfU3BhY2VSb29tVmlld1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9NYWluU3BsaXRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NwYWNlUm9vbVZpZXdfcHJldmlld1wiPlxuICAgICAgICAgICAgICAgICAgICA8U3Bpbm5lciAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbWFpbj47XG4gICAgfVxuXG4gICAgbGV0IHZpc2liaWxpdHlTZWN0aW9uOiBKU1guRWxlbWVudDtcbiAgICBpZiAoZ3JvdXBTdW1tYXJ5LnByb2ZpbGUuaXNfcHVibGljKSB7XG4gICAgICAgIHZpc2liaWxpdHlTZWN0aW9uID0gPHNwYW4gY2xhc3NOYW1lPVwibXhfU3BhY2VSb29tVmlld19pbmZvX3B1YmxpY1wiPlxuICAgICAgICAgICAgeyBfdChcIlB1YmxpYyBjb21tdW5pdHlcIikgfVxuICAgICAgICA8L3NwYW4+O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZpc2liaWxpdHlTZWN0aW9uID0gPHNwYW4gY2xhc3NOYW1lPVwibXhfU3BhY2VSb29tVmlld19pbmZvX3ByaXZhdGVcIj5cbiAgICAgICAgICAgIHsgX3QoXCJQcml2YXRlIGNvbW11bml0eVwiKSB9XG4gICAgICAgIDwvc3Bhbj47XG4gICAgfVxuXG4gICAgcmV0dXJuIDxtYWluIGNsYXNzTmFtZT1cIm14X1NwYWNlUm9vbVZpZXdcIj5cbiAgICAgICAgPEVycm9yQm91bmRhcnk+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X01haW5TcGxpdFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfU3BhY2VSb29tVmlld19wcmV2aWV3XCI+XG4gICAgICAgICAgICAgICAgICAgIDxHcm91cEF2YXRhclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZD17Z3JvdXBJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTmFtZT17Z3JvdXBTdW1tYXJ5LnByb2ZpbGUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQXZhdGFyVXJsPXtncm91cFN1bW1hcnkucHJvZmlsZS5hdmF0YXJfdXJsfVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXs4MH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXs4MH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6ZU1ldGhvZD0nY3JvcCdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIm14X1NwYWNlUm9vbVZpZXdfcHJldmlld19uYW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IGdyb3VwU3VtbWFyeS5wcm9maWxlLm5hbWUgfVxuICAgICAgICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NwYWNlUm9vbVZpZXdfaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyB2aXNpYmlsaXR5U2VjdGlvbiB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NwYWNlUm9vbVZpZXdfcHJldmlld190b3BpY1wiIHJlZj17ZSA9PiBlICYmIGxpbmtpZnlFbGVtZW50KGUpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgZ3JvdXBTdW1tYXJ5LnByb2ZpbGUuc2hvcnRfZGVzY3JpcHRpb24gfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TcGFjZVJvb21WaWV3X3ByZXZpZXdfc3BhY2VCZXRhUHJvbXB0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IGdyb3VwU3VtbWFyeS51c2VyPy5tZW1iZXJzaGlwID09PSBcImpvaW5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gX3QoXCJUbyB2aWV3ICUoY29tbXVuaXR5TmFtZSlzLCBzd2FwIHRvIGNvbW11bml0aWVzIGluIHlvdXIgPGE+cHJlZmVyZW5jZXM8L2E+XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbXVuaXR5TmFtZTogZ3JvdXBTdW1tYXJ5LnByb2ZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGE6IHN1YiA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBvbkNsaWNrPXtvblN3YXBDbGlja30ga2luZD1cImxpbmtcIj57IHN1YiB9PC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBfdChcIlRvIGpvaW4gJShjb21tdW5pdHlOYW1lKXMsIHN3YXAgdG8gY29tbXVuaXRpZXMgaW4geW91ciA8YT5wcmVmZXJlbmNlczwvYT5cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tdW5pdHlOYW1lOiBncm91cFN1bW1hcnkucHJvZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYTogc3ViID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uIG9uQ2xpY2s9e29uU3dhcENsaWNrfSBraW5kPVwibGlua1wiPnsgc3ViIH08L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9FcnJvckJvdW5kYXJ5PlxuICAgIDwvbWFpbj47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBMZWdhY3lDb21tdW5pdHlQcmV2aWV3O1xuIl19