"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _ContentMessages = _interopRequireDefault(require("../../ContentMessages"));

var _dispatcher = _interopRequireDefault(require("../../dispatcher/dispatcher"));

var _filesize = _interopRequireDefault(require("filesize"));

var _languageHandler = require("../../languageHandler");

var _actions = require("../../dispatcher/actions");

var _ProgressBar = _interopRequireDefault(require("../views/elements/ProgressBar"));

var _AccessibleButton = _interopRequireDefault(require("../views/elements/AccessibleButton"));

var _replaceableComponent = require("../../utils/replaceableComponent");

var _MatrixClientContext = _interopRequireDefault(require("../../contexts/MatrixClientContext"));

var _dec, _class, _class2, _temp;

let UploadBar = (_dec = (0, _replaceableComponent.replaceableComponent)("structures.UploadBar"), _dec(_class = (_temp = _class2 = class UploadBar extends _react.default.Component {
  constructor(props) {
    super(props); // Set initial state to any available upload in this room - we might be mounting
    // earlier than the first progress event, so should show something relevant.

    (0, _defineProperty2.default)(this, "dispatcherRef", void 0);
    (0, _defineProperty2.default)(this, "mounted", void 0);
    (0, _defineProperty2.default)(this, "onAction", payload => {
      switch (payload.action) {
        case _actions.Action.UploadStarted:
        case _actions.Action.UploadProgress:
        case _actions.Action.UploadFinished:
        case _actions.Action.UploadCanceled:
        case _actions.Action.UploadFailed:
          {
            if (!this.mounted) return;
            const uploadsHere = this.getUploadsInRoom();
            this.setState({
              currentUpload: uploadsHere[0],
              uploadsHere
            });
            break;
          }
      }
    });
    (0, _defineProperty2.default)(this, "onCancelClick", ev => {
      ev.preventDefault();

      _ContentMessages.default.sharedInstance().cancelUpload(this.state.currentUpload.promise, this.context);
    });

    const _uploadsHere = this.getUploadsInRoom();

    this.state = {
      currentUpload: _uploadsHere[0],
      uploadsHere: _uploadsHere
    };
  }

  componentDidMount() {
    this.dispatcherRef = _dispatcher.default.register(this.onAction);
    this.mounted = true;
  }

  componentWillUnmount() {
    this.mounted = false;

    _dispatcher.default.unregister(this.dispatcherRef);
  }

  getUploadsInRoom() {
    const uploads = _ContentMessages.default.sharedInstance().getCurrentUploads(this.props.relation);

    return uploads.filter(u => u.roomId === this.props.room.roomId);
  }

  render() {
    if (!this.state.currentUpload) {
      return null;
    } // MUST use var name 'count' for pluralization to kick in


    const uploadText = (0, _languageHandler._t)("Uploading %(filename)s and %(count)s others", {
      filename: this.state.currentUpload.fileName,
      count: this.state.uploadsHere.length - 1
    });
    const uploadSize = (0, _filesize.default)(this.state.currentUpload.total);
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_UploadBar"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_UploadBar_filename"
    }, uploadText, " (", uploadSize, ")"), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: this.onCancelClick,
      className: "mx_UploadBar_cancel"
    }), /*#__PURE__*/_react.default.createElement(_ProgressBar.default, {
      value: this.state.currentUpload.loaded,
      max: this.state.currentUpload.total
    }));
  }

}, (0, _defineProperty2.default)(_class2, "contextType", _MatrixClientContext.default), _temp)) || _class);
exports.default = UploadBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3N0cnVjdHVyZXMvVXBsb2FkQmFyLnRzeCJdLCJuYW1lcyI6WyJVcGxvYWRCYXIiLCJSZWFjdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJwYXlsb2FkIiwiYWN0aW9uIiwiQWN0aW9uIiwiVXBsb2FkU3RhcnRlZCIsIlVwbG9hZFByb2dyZXNzIiwiVXBsb2FkRmluaXNoZWQiLCJVcGxvYWRDYW5jZWxlZCIsIlVwbG9hZEZhaWxlZCIsIm1vdW50ZWQiLCJ1cGxvYWRzSGVyZSIsImdldFVwbG9hZHNJblJvb20iLCJzZXRTdGF0ZSIsImN1cnJlbnRVcGxvYWQiLCJldiIsInByZXZlbnREZWZhdWx0IiwiQ29udGVudE1lc3NhZ2VzIiwic2hhcmVkSW5zdGFuY2UiLCJjYW5jZWxVcGxvYWQiLCJzdGF0ZSIsInByb21pc2UiLCJjb250ZXh0IiwiY29tcG9uZW50RGlkTW91bnQiLCJkaXNwYXRjaGVyUmVmIiwiZGlzIiwicmVnaXN0ZXIiLCJvbkFjdGlvbiIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwidW5yZWdpc3RlciIsInVwbG9hZHMiLCJnZXRDdXJyZW50VXBsb2FkcyIsInJlbGF0aW9uIiwiZmlsdGVyIiwidSIsInJvb21JZCIsInJvb20iLCJyZW5kZXIiLCJ1cGxvYWRUZXh0IiwiZmlsZW5hbWUiLCJmaWxlTmFtZSIsImNvdW50IiwibGVuZ3RoIiwidXBsb2FkU2l6ZSIsInRvdGFsIiwib25DYW5jZWxDbGljayIsImxvYWRlZCIsIk1hdHJpeENsaWVudENvbnRleHQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBZ0JBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOzs7O0lBY3FCQSxTLFdBRHBCLGdEQUFxQixzQkFBckIsQyxtQ0FBRCxNQUNxQkEsU0FEckIsU0FDdUNDLGVBQU1DLFNBRDdDLENBQ3VFO0FBTW5FQyxFQUFBQSxXQUFXLENB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QUFMLENBQVdOLGFBQVgsQ0FBeUI4QjtBQUFuRixNQUhKLENBREo7QUFPSDs7QUF2RWtFLEMsd0RBQzlDRyw0QiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAxNSwgMjAxNiwgMjAxOSwgMjAyMSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBSb29tIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL21vZGVscy9yb29tXCI7XG5pbXBvcnQgQ29udGVudE1lc3NhZ2VzIGZyb20gJy4uLy4uL0NvbnRlbnRNZXNzYWdlcyc7XG5pbXBvcnQgZGlzIGZyb20gXCIuLi8uLi9kaXNwYXRjaGVyL2Rpc3BhdGNoZXJcIjtcbmltcG9ydCBmaWxlc2l6ZSBmcm9tIFwiZmlsZXNpemVcIjtcbmltcG9ydCB7IF90IH0gZnJvbSAnLi4vLi4vbGFuZ3VhZ2VIYW5kbGVyJztcbmltcG9ydCB7IEFjdGlvblBheWxvYWQgfSBmcm9tIFwiLi4vLi4vZGlzcGF0Y2hlci9wYXlsb2Fkc1wiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4uLy4uL2Rpc3BhdGNoZXIvYWN0aW9uc1wiO1xuaW1wb3J0IFByb2dyZXNzQmFyIGZyb20gXCIuLi92aWV3cy9lbGVtZW50cy9Qcm9ncmVzc0JhclwiO1xuaW1wb3J0IEFjY2Vzc2libGVCdXR0b24gZnJvbSBcIi4uL3ZpZXdzL2VsZW1lbnRzL0FjY2Vzc2libGVCdXR0b25cIjtcbmltcG9ydCB7IElVcGxvYWQgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL0lVcGxvYWRcIjtcbmltcG9ydCB7IHJlcGxhY2VhYmxlQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uL3V0aWxzL3JlcGxhY2VhYmxlQ29tcG9uZW50XCI7XG5pbXBvcnQgTWF0cml4Q2xpZW50Q29udGV4dCBmcm9tIFwiLi4vLi4vY29udGV4dHMvTWF0cml4Q2xpZW50Q29udGV4dFwiO1xuaW1wb3J0IHsgSUV2ZW50UmVsYXRpb24gfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYyc7XG5cbmludGVyZmFjZSBJUHJvcHMge1xuICAgIHJvb206IFJvb207XG4gICAgcmVsYXRpb24/OiBJRXZlbnRSZWxhdGlvbjtcbn1cblxuaW50ZXJmYWNlIElTdGF0ZSB7XG4gICAgY3VycmVudFVwbG9hZD86IElVcGxvYWQ7XG4gICAgdXBsb2Fkc0hlcmU6IElVcGxvYWRbXTtcbn1cblxuQHJlcGxhY2VhYmxlQ29tcG9uZW50KFwic3RydWN0dXJlcy5VcGxvYWRCYXJcIilcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVwbG9hZEJhciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuICAgIHN0YXRpYyBjb250ZXh0VHlwZSA9IE1hdHJpeENsaWVudENvbnRleHQ7XG5cbiAgICBwcml2YXRlIGRpc3BhdGNoZXJSZWY6IHN0cmluZztcbiAgICBwcml2YXRlIG1vdW50ZWQ6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgLy8gU2V0IGluaXRpYWwgc3RhdGUgdG8gYW55IGF2YWlsYWJsZSB1cGxvYWQgaW4gdGhpcyByb29tIC0gd2UgbWlnaHQgYmUgbW91bnRpbmdcbiAgICAgICAgLy8gZWFybGllciB0aGFuIHRoZSBmaXJzdCBwcm9ncmVzcyBldmVudCwgc28gc2hvdWxkIHNob3cgc29tZXRoaW5nIHJlbGV2YW50LlxuICAgICAgICBjb25zdCB1cGxvYWRzSGVyZSA9IHRoaXMuZ2V0VXBsb2Fkc0luUm9vbSgpO1xuICAgICAgICB0aGlzLnN0YXRlID0geyBjdXJyZW50VXBsb2FkOiB1cGxvYWRzSGVyZVswXSwgdXBsb2Fkc0hlcmUgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyUmVmID0gZGlzLnJlZ2lzdGVyKHRoaXMub25BY3Rpb24pO1xuICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICB0aGlzLm1vdW50ZWQgPSBmYWxzZTtcbiAgICAgICAgZGlzLnVucmVnaXN0ZXIodGhpcy5kaXNwYXRjaGVyUmVmKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFVwbG9hZHNJblJvb20oKTogSVVwbG9hZFtdIHtcbiAgICAgICAgY29uc3QgdXBsb2FkcyA9IENvbnRlbnRNZXNzYWdlcy5zaGFyZWRJbnN0YW5jZSgpLmdldEN1cnJlbnRVcGxvYWRzKHRoaXMucHJvcHMucmVsYXRpb24pO1xuICAgICAgICByZXR1cm4gdXBsb2Fkcy5maWx0ZXIodSA9PiB1LnJvb21JZCA9PT0gdGhpcy5wcm9wcy5yb29tLnJvb21JZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkFjdGlvbiA9IChwYXlsb2FkOiBBY3Rpb25QYXlsb2FkKSA9PiB7XG4gICAgICAgIHN3aXRjaCAocGF5bG9hZC5hY3Rpb24pIHtcbiAgICAgICAgICAgIGNhc2UgQWN0aW9uLlVwbG9hZFN0YXJ0ZWQ6XG4gICAgICAgICAgICBjYXNlIEFjdGlvbi5VcGxvYWRQcm9ncmVzczpcbiAgICAgICAgICAgIGNhc2UgQWN0aW9uLlVwbG9hZEZpbmlzaGVkOlxuICAgICAgICAgICAgY2FzZSBBY3Rpb24uVXBsb2FkQ2FuY2VsZWQ6XG4gICAgICAgICAgICBjYXNlIEFjdGlvbi5VcGxvYWRGYWlsZWQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubW91bnRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVwbG9hZHNIZXJlID0gdGhpcy5nZXRVcGxvYWRzSW5Sb29tKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGN1cnJlbnRVcGxvYWQ6IHVwbG9hZHNIZXJlWzBdLCB1cGxvYWRzSGVyZSB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcml2YXRlIG9uQ2FuY2VsQ2xpY2sgPSAoZXYpID0+IHtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgQ29udGVudE1lc3NhZ2VzLnNoYXJlZEluc3RhbmNlKCkuY2FuY2VsVXBsb2FkKHRoaXMuc3RhdGUuY3VycmVudFVwbG9hZC5wcm9taXNlLCB0aGlzLmNvbnRleHQpO1xuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5jdXJyZW50VXBsb2FkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1VU1QgdXNlIHZhciBuYW1lICdjb3VudCcgZm9yIHBsdXJhbGl6YXRpb24gdG8ga2ljayBpblxuICAgICAgICBjb25zdCB1cGxvYWRUZXh0ID0gX3QoXG4gICAgICAgICAgICBcIlVwbG9hZGluZyAlKGZpbGVuYW1lKXMgYW5kICUoY291bnQpcyBvdGhlcnNcIiwge1xuICAgICAgICAgICAgICAgIGZpbGVuYW1lOiB0aGlzLnN0YXRlLmN1cnJlbnRVcGxvYWQuZmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgY291bnQ6IHRoaXMuc3RhdGUudXBsb2Fkc0hlcmUubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgdXBsb2FkU2l6ZSA9IGZpbGVzaXplKHRoaXMuc3RhdGUuY3VycmVudFVwbG9hZC50b3RhbCk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1VwbG9hZEJhclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfVXBsb2FkQmFyX2ZpbGVuYW1lXCI+eyB1cGxvYWRUZXh0IH0gKHsgdXBsb2FkU2l6ZSB9KTwvZGl2PlxuICAgICAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uIG9uQ2xpY2s9e3RoaXMub25DYW5jZWxDbGlja30gY2xhc3NOYW1lPSdteF9VcGxvYWRCYXJfY2FuY2VsJyAvPlxuICAgICAgICAgICAgICAgIDxQcm9ncmVzc0JhciB2YWx1ZT17dGhpcy5zdGF0ZS5jdXJyZW50VXBsb2FkLmxvYWRlZH0gbWF4PXt0aGlzLnN0YXRlLmN1cnJlbnRVcGxvYWQudG90YWx9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iXX0=