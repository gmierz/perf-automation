"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.BetaPill = void 0;

var _react = _interopRequireDefault(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _languageHandler = require("../../../languageHandler");

var _AccessibleButton = _interopRequireDefault(require("../elements/AccessibleButton"));

var _SettingsStore = _interopRequireDefault(require("../../../settings/SettingsStore"));

var _SettingLevel = require("../../../settings/SettingLevel");

var _TextWithTooltip = _interopRequireDefault(require("../elements/TextWithTooltip"));

var _Modal = _interopRequireDefault(require("../../../Modal"));

var _BetaFeedbackDialog = _interopRequireDefault(require("../dialogs/BetaFeedbackDialog"));

var _SdkConfig = _interopRequireDefault(require("../../../SdkConfig"));

var _SettingsFlag = _interopRequireDefault(require("../elements/SettingsFlag"));

/*
Copyright 2021 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const BetaPill = ({
  onClick
}) => {
  if (onClick) {
    return /*#__PURE__*/_react.default.createElement(_TextWithTooltip.default, {
      class: (0, _classnames.default)("mx_BetaCard_betaPill", {
        mx_BetaCard_betaPill_clickable: !!onClick
      }),
      tooltip: /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_Tooltip_title"
      }, (0, _languageHandler._t)("Spaces is a beta feature")), /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_Tooltip_sub"
      }, (0, _languageHandler._t)("Tap for more info"))),
      onClick: onClick,
      tooltipProps: {
        yOffset: -10
      }
    }, (0, _languageHandler._t)("Beta"));
  }

  return /*#__PURE__*/_react.default.createElement("span", {
    className: (0, _classnames.default)("mx_BetaCard_betaPill", {
      mx_BetaCard_betaPill_clickable: !!onClick
    }),
    onClick: onClick
  }, (0, _languageHandler._t)("Beta"));
};

exports.BetaPill = BetaPill;

const BetaCard = ({
  title: titleOverride,
  featureId
}) => {
  const info = _SettingsStore.default.getBetaInfo(featureId);

  if (!info) return null; // Beta is invalid/disabled

  const {
    title,
    caption,
    disclaimer,
    image,
    feedbackLabel,
    feedbackSubheading,
    extraSettings
  } = info;

  const value = _SettingsStore.default.getValue(featureId);

  let feedbackButton;

  if (value && feedbackLabel && feedbackSubheading && _SdkConfig.default.get().bug_report_endpoint_url) {
    feedbackButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: () => {
        _Modal.default.createTrackedDialog("Beta Feedback", featureId, _BetaFeedbackDialog.default, {
          featureId
        });
      },
      kind: "primary"
    }, (0, _languageHandler._t)("Feedback"));
  }

  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_BetaCard"
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_BetaCard_columns"
  }, /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("h3", {
    className: "mx_BetaCard_title"
  }, titleOverride || (0, _languageHandler._t)(title), /*#__PURE__*/_react.default.createElement(BetaPill, null)), /*#__PURE__*/_react.default.createElement("span", {
    className: "mx_BetaCard_caption"
  }, (0, _languageHandler._t)(caption)), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_BetaCard_buttons"
  }, feedbackButton, /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    onClick: () => _SettingsStore.default.setValue(featureId, null, _SettingLevel.SettingLevel.DEVICE, !value),
    kind: feedbackButton ? "primary_outline" : "primary"
  }, value ? (0, _languageHandler._t)("Leave the beta") : (0, _languageHandler._t)("Join the beta"))), disclaimer && /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_BetaCard_disclaimer"
  }, disclaimer(value))), /*#__PURE__*/_react.default.createElement("img", {
    src: image,
    alt: ""
  })), extraSettings && value && /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_BetaCard_relatedSettings"
  }, extraSettings.map(key => /*#__PURE__*/_react.default.createElement(_SettingsFlag.default, {
    key: key,
    name: key,
    level: _SettingLevel.SettingLevel.DEVICE
  }))));
};

var _default = BetaCard;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL2JldGEvQmV0YUNhcmQudHN4Il0sIm5hbWVzIjpbIkJldGFQaWxsIiwib25DbGljayIsIm14X0JldGFDYXJkX2JldGFQaWxsX2NsaWNrYWJsZSIsInlPZmZzZXQiLCJCZXRhQ2FyZCIsInRpdGxlIiwidGl0bGVPdmVycmlkZSIsImZlYXR1cmVJZCIsImluZm8iLCJTZXR0aW5nc1N0b3JlIiwiZ2V0QmV0YUluZm8iLCJjYXB0aW9uIiwiZGlzY2xhaW1lciIsImltYWdlIiwiZmVlZGJhY2tMYWJlbCIsImZlZWRiYWNrU3ViaGVhZGluZyIsImV4dHJhU2V0dGluZ3MiLCJ2YWx1ZSIsImdldFZhbHVlIiwiZmVlZGJhY2tCdXR0b24iLCJTZGtDb25maWciLCJnZXQiLCJidWdfcmVwb3J0X2VuZHBvaW50X3VybCIsIk1vZGFsIiwiY3JlYXRlVHJhY2tlZERpYWxvZyIsIkJldGFGZWVkYmFja0RpYWxvZyIsInNldFZhbHVlIiwiU2V0dGluZ0xldmVsIiwiREVWSUNFIiwibWFwIiwia2V5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFnQkE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXNCTyxNQUFNQSxRQUFRLEdBQUcsQ0FBQztBQUFFQyxFQUFBQTtBQUFGLENBQUQsS0FBMkM7QUFDL0QsTUFBSUEsT0FBSixFQUFhO0FBQ1Qsd0JBQU8sNkJBQUMsd0JBQUQ7QUFDSCxNQUFBLEtBQUssRUFBRSx5QkFBVyxzQkFBWCxFQUFtQztBQUN0Q0MsUUFBQUEsOEJBQThCLEVBQUUsQ0FBQyxDQUFDRDtBQURJLE9BQW5DLENBREo7QUFJSCxNQUFBLE9BQU8sZUFBRSx1REFDTDtBQUFLLFFBQUEsU0FBUyxFQUFDO0FB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S0FDdEJELGFBQWEsQ0FBQ2EsR0FBZCxDQUFrQkMsR0FBRyxpQkFDbkIsNkJBQUMscUJBQUQ7QUFBYyxJQUFBLEdBQUcsRUFBRUEsR0FBbkI7QUFBd0IsSUFBQSxJQUFJLEVBQUVBLEdBQTlCO0FBQW1DLElBQUEsS0FBSyxFQUFFSCwyQkFBYUM7QUFBdkQsSUFERixDQURzQixDQXZCekIsQ0FBUDtBQTZCSCxDQWhERDs7ZUFrRGV4QixRIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDIxIFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSBcImNsYXNzbmFtZXNcIjtcblxuaW1wb3J0IHsgX3QgfSBmcm9tIFwiLi4vLi4vLi4vbGFuZ3VhZ2VIYW5kbGVyXCI7XG5pbXBvcnQgQWNjZXNzaWJsZUJ1dHRvbiBmcm9tIFwiLi4vZWxlbWVudHMvQWNjZXNzaWJsZUJ1dHRvblwiO1xuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcIi4uLy4uLy4uL3NldHRpbmdzL1NldHRpbmdzU3RvcmVcIjtcbmltcG9ydCB7IFNldHRpbmdMZXZlbCB9IGZyb20gXCIuLi8uLi8uLi9zZXR0aW5ncy9TZXR0aW5nTGV2ZWxcIjtcbmltcG9ydCBUZXh0V2l0aFRvb2x0aXAgZnJvbSBcIi4uL2VsZW1lbnRzL1RleHRXaXRoVG9vbHRpcFwiO1xuaW1wb3J0IE1vZGFsIGZyb20gXCIuLi8uLi8uLi9Nb2RhbFwiO1xuaW1wb3J0IEJldGFGZWVkYmFja0RpYWxvZyBmcm9tIFwiLi4vZGlhbG9ncy9CZXRhRmVlZGJhY2tEaWFsb2dcIjtcbmltcG9ydCBTZGtDb25maWcgZnJvbSBcIi4uLy4uLy4uL1Nka0NvbmZpZ1wiO1xuaW1wb3J0IFNldHRpbmdzRmxhZyBmcm9tIFwiLi4vZWxlbWVudHMvU2V0dGluZ3NGbGFnXCI7XG5cbi8vIFhYWDogS2VlcCB0aGlzIGFyb3VuZCBmb3IgcmUtdXNlIGluIGZ1dHVyZSBCZXRhc1xuXG5pbnRlcmZhY2UgSVByb3BzIHtcbiAgICB0aXRsZT86IHN0cmluZztcbiAgICBmZWF0dXJlSWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IEJldGFQaWxsID0gKHsgb25DbGljayB9OiB7IG9uQ2xpY2s/OiAoKSA9PiB2b2lkIH0pID0+IHtcbiAgICBpZiAob25DbGljaykge1xuICAgICAgICByZXR1cm4gPFRleHRXaXRoVG9vbHRpcFxuICAgICAgICAgICAgY2xhc3M9e2NsYXNzTmFtZXMoXCJteF9CZXRhQ2FyZF9iZXRhUGlsbFwiLCB7XG4gICAgICAgICAgICAgICAgbXhfQmV0YUNhcmRfYmV0YVBpbGxfY2xpY2thYmxlOiAhIW9uQ2xpY2ssXG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIHRvb2x0aXA9ezxkaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Ub29sdGlwX3RpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJTcGFjZXMgaXMgYSBiZXRhIGZlYXR1cmVcIikgfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfVG9vbHRpcF9zdWJcIj5cbiAgICAgICAgICAgICAgICAgICAgeyBfdChcIlRhcCBmb3IgbW9yZSBpbmZvXCIpIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2Pn1cbiAgICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICAgICAgICB0b29sdGlwUHJvcHM9e3sgeU9mZnNldDogLTEwIH19XG4gICAgICAgID5cbiAgICAgICAgICAgIHsgX3QoXCJCZXRhXCIpIH1cbiAgICAgICAgPC9UZXh0V2l0aFRvb2x0aXA+O1xuICAgIH1cblxuICAgIHJldHVybiA8c3BhblxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXCJteF9CZXRhQ2FyZF9iZXRhUGlsbFwiLCB7XG4gICAgICAgICAgICBteF9CZXRhQ2FyZF9iZXRhUGlsbF9jbGlja2FibGU6ICEhb25DbGljayxcbiAgICAgICAgfSl9XG4gICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgPlxuICAgICAgICB7IF90KFwiQmV0YVwiKSB9XG4gICAgPC9zcGFuPjtcbn07XG5cbmNvbnN0IEJldGFDYXJkID0gKHsgdGl0bGU6IHRpdGxlT3ZlcnJpZGUsIGZlYXR1cmVJZCB9OiBJUHJvcHMpID0+IHtcbiAgICBjb25zdCBpbmZvID0gU2V0dGluZ3NTdG9yZS5nZXRCZXRhSW5mbyhmZWF0dXJlSWQpO1xuICAgIGlmICghaW5mbykgcmV0dXJuIG51bGw7IC8vIEJldGEgaXMgaW52YWxpZC9kaXNhYmxlZFxuXG4gICAgY29uc3QgeyB0aXRsZSwgY2FwdGlvbiwgZGlzY2xhaW1lciwgaW1hZ2UsIGZlZWRiYWNrTGFiZWwsIGZlZWRiYWNrU3ViaGVhZGluZywgZXh0cmFTZXR0aW5ncyB9ID0gaW5mbztcbiAgICBjb25zdCB2YWx1ZSA9IFNldHRpbmdzU3RvcmUuZ2V0VmFsdWUoZmVhdHVyZUlkKTtcblxuICAgIGxldCBmZWVkYmFja0J1dHRvbjtcbiAgICBpZiAodmFsdWUgJiYgZmVlZGJhY2tMYWJlbCAmJiBmZWVkYmFja1N1YmhlYWRpbmcgJiYgU2RrQ29uZmlnLmdldCgpLmJ1Z19yZXBvcnRfZW5kcG9pbnRfdXJsKSB7XG4gICAgICAgIGZlZWRiYWNrQnV0dG9uID0gPEFjY2Vzc2libGVCdXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKFwiQmV0YSBGZWVkYmFja1wiLCBmZWF0dXJlSWQsIEJldGFGZWVkYmFja0RpYWxvZywgeyBmZWF0dXJlSWQgfSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAga2luZD1cInByaW1hcnlcIlxuICAgICAgICA+XG4gICAgICAgICAgICB7IF90KFwiRmVlZGJhY2tcIikgfVxuICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+O1xuICAgIH1cblxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cIm14X0JldGFDYXJkXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfQmV0YUNhcmRfY29sdW1uc1wiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwibXhfQmV0YUNhcmRfdGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgeyB0aXRsZU92ZXJyaWRlIHx8IF90KHRpdGxlKSB9XG4gICAgICAgICAgICAgICAgICAgIDxCZXRhUGlsbCAvPlxuICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXhfQmV0YUNhcmRfY2FwdGlvblwiPnsgX3QoY2FwdGlvbikgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0JldGFDYXJkX2J1dHRvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgeyBmZWVkYmFja0J1dHRvbiB9XG4gICAgICAgICAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBTZXR0aW5nc1N0b3JlLnNldFZhbHVlKGZlYXR1cmVJZCwgbnVsbCwgU2V0dGluZ0xldmVsLkRFVklDRSwgIXZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ9e2ZlZWRiYWNrQnV0dG9uID8gXCJwcmltYXJ5X291dGxpbmVcIiA6IFwicHJpbWFyeVwifVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IHZhbHVlID8gX3QoXCJMZWF2ZSB0aGUgYmV0YVwiKSA6IF90KFwiSm9pbiB0aGUgYmV0YVwiKSB9XG4gICAgICAgICAgICAgICAgICAgIDwvQWNjZXNzaWJsZUJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7IGRpc2NsYWltZXIgJiYgPGRpdiBjbGFzc05hbWU9XCJteF9CZXRhQ2FyZF9kaXNjbGFpbWVyXCI+XG4gICAgICAgICAgICAgICAgICAgIHsgZGlzY2xhaW1lcih2YWx1ZSkgfVxuICAgICAgICAgICAgICAgIDwvZGl2PiB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxpbWcgc3JjPXtpbWFnZX0gYWx0PVwiXCIgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHsgZXh0cmFTZXR0aW5ncyAmJiB2YWx1ZSAmJiA8ZGl2IGNsYXNzTmFtZT1cIm14X0JldGFDYXJkX3JlbGF0ZWRTZXR0aW5nc1wiPlxuICAgICAgICAgICAgeyBleHRyYVNldHRpbmdzLm1hcChrZXkgPT4gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nc0ZsYWcga2V5PXtrZXl9IG5hbWU9e2tleX0gbGV2ZWw9e1NldHRpbmdMZXZlbC5ERVZJQ0V9IC8+XG4gICAgICAgICAgICApKSB9XG4gICAgICAgIDwvZGl2PiB9XG4gICAgPC9kaXY+O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQmV0YUNhcmQ7XG4iXX0=