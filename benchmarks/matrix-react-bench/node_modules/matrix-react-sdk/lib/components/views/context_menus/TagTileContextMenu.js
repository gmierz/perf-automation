"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _languageHandler = require("../../../languageHandler");

var _dispatcher = _interopRequireDefault(require("../../../dispatcher/dispatcher"));

var _TagOrderActions = _interopRequireDefault(require("../../../actions/TagOrderActions"));

var _ContextMenu = require("../../structures/ContextMenu");

var _MatrixClientContext = _interopRequireDefault(require("../../../contexts/MatrixClientContext"));

var _replaceableComponent = require("../../../utils/replaceableComponent");

var _GroupFilterOrderStore = _interopRequireDefault(require("../../../stores/GroupFilterOrderStore"));

var _space = require("../../../utils/space");

var _GroupStore = _interopRequireDefault(require("../../../stores/GroupStore"));

var _dec, _class, _class2, _temp;

let TagTileContextMenu = (_dec = (0, _replaceableComponent.replaceableComponent)("views.context_menus.TagTileContextMenu"), _dec(_class = (_temp = _class2 = class TagTileContextMenu extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "_onViewCommunityClick", () => {
      _dispatcher.default.dispatch({
        action: 'view_group',
        group_id: this.props.tag
      });

      this.props.onFinished();
    });
    (0, _defineProperty2.default)(this, "_onRemoveClick", () => {
      _dispatcher.default.dispatch(_TagOrderActions.default.removeTag(this.context, this.props.tag));

      this.props.onFinished();
    });
    (0, _defineProperty2.default)(this, "_onCreateSpaceClick", () => {
      (0, _space.createSpaceFromCommunity)(this.context, this.props.tag);
      this.props.onFinished();
    });
    (0, _defineProperty2.default)(this, "_onMoveUp", () => {
      _dispatcher.default.dispatch(_TagOrderActions.default.moveTag(this.context, this.props.tag, this.props.index - 1));

      this.props.onFinished();
    });
    (0, _defineProperty2.default)(this, "_onMoveDown", () => {
      _dispatcher.default.dispatch(_TagOrderActions.default.moveTag(this.context, this.props.tag, this.props.index + 1));

      this.props.onFinished();
    });
  }

  render() {
    let moveUp;
    let moveDown;

    if (this.props.index > 0) {
      moveUp = /*#__PURE__*/_react.default.createElement(_ContextMenu.MenuItem, {
        className: "mx_TagTileContextMenu_item mx_TagTileContextMenu_moveUp",
        onClick: this._onMoveUp
      }, (0, _languageHandler._t)("Move up"));
    }

    if (this.props.index < (_GroupFilterOrderStore.default.getOrderedTags() || []).length - 1) {
      moveDown = /*#__PURE__*/_react.default.createElement(_ContextMenu.MenuItem, {
        className: "mx_TagTileContextMenu_item mx_TagTileContextMenu_moveDown",
        onClick: this._onMoveDown
      }, (0, _languageHandler._t)("Move down"));
    }

    let createSpaceOption;

    if (_GroupStore.default.isUserPrivileged(this.props.tag)) {
      createSpaceOption = /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement("hr", {
        className: "mx_TagTileContextMenu_separator",
        role: "separator"
      }), /*#__PURE__*/_react.default.createElement(_ContextMenu.MenuItem, {
        className: "mx_TagTileContextMenu_item mx_TagTileContextMenu_createSpace",
        onClick: this._onCreateSpaceClick
      }, (0, _languageHandler._t)("Create Space")));
    }

    return /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement(_ContextMenu.MenuItem, {
      className: "mx_TagTileContextMenu_item mx_TagTileContextMenu_viewCommunity",
      onClick: this._onViewCommunityClick
    }, (0, _languageHandler._t)('View Community')), moveUp || moveDown ? /*#__PURE__*/_react.default.createElement("hr", {
      className: "mx_TagTileContextMenu_separator",
      role: "separator"
    }) : null, moveUp, moveDown, /*#__PURE__*/_react.default.createElement("hr", {
      className: "mx_TagTileContextMenu_separator",
      role: "separator"
    }), /*#__PURE__*/_react.default.createElement(_ContextMenu.MenuItem, {
      className: "mx_TagTileContextMenu_item mx_TagTileContextMenu_hideCommunity",
      onClick: this._onRemoveClick
    }, (0, _languageHandler._t)("Unpin")), createSpaceOption);
  }

}, (0, _defineProperty2.default)(_class2, "propTypes", {
  tag: _propTypes.default.string.isRequired,
  index: _propTypes.default.number.isRequired,

  /* callback called when the menu is dismissed */
  onFinished: _propTypes.default.func.isRequired
}), (0, _defineProperty2.default)(_class2, "contextType", _MatrixClientContext.default), _temp)) || _class);
exports.default = TagTileContextMenu;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL2NvbnRleHRfbWVudXMvVGFnVGlsZUNvbnRleHRNZW51LmpzIl0sIm5hbWVzIjpbIlRhZ1RpbGVDb250ZXh0TWVudSIsIlJlYWN0IiwiQ29tcG9uZW50IiwiZGlzIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJncm91cF9pZCIsInByb3BzIiwidGFnIiwib25GaW5pc2hlZCIsIlRhZ09yZGVyQWN0aW9ucyIsInJlbW92ZVRhZyIsImNvbnRleHQiLCJtb3ZlVGFnIiwiaW5kZXgiLCJyZW5kZXIiLCJtb3ZlVXAiLCJtb3ZlRG93biIsIl9vbk1vdmVVcCIsIkdyb3VwRmlsdGVyT3JkZXJTdG9yZSIsImdldE9yZGVyZWRUYWdzIiwibGVuZ3RoIiwiX29uTW92ZURvd24iLCJjcmVhdGVTcGFjZU9wdGlvbiIsIkdyb3VwU3RvcmUiLCJpc1VzZXJQcml2aWxlZ2VkIiwiX29uQ3JlYXRlU3BhY2VDbGljayIsIl9vblZpZXdDb21tdW5pdHlDbGljayIsIl9vblJlbW92ZUNsaWNrIiwiUHJvcFR5cGVzIiwic3RyaW5nIiwiaXNSZXF1aXJlZCIsIm51bWJlciIsImZ1bmMiLCJNYXRyaXhDbGllbnRDb250ZXh0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWlCQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztJQUdxQkEsa0IsV0FEcEIsZ0RBQXFCLHdDQUFyQixDLG1DQUFELE1BQ3FCQSxrQkFEckIsU0FDZ0RDLGVBQU1DLFNBRHRELENBQ2dFO0FBQUE7QUFBQTtBQUFBLGlFQVVwQyxNQUFNO0FBQzFCQywwQkFBSUMsUUFBSixDQUFhO0FBQ1RDLFFBQUFBLE1BQU0sRUFBRSxZQURDO0FBRVRDLFFBQUFBLFFBQVEsRUFBRSxLQUFLQyxLQUFMLENBQVdDO0FBRlosT0FBYjs7QUFJQSxXQUFLRCxLQUFMLENBQVdFLFVBQVg7QUFDSCxLQWhCMkQ7QUFB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RUFXREwsaUJBWEMsQ0FBUDtBQWFIOztBQS9FMkQsQyxzREFDekM7QUFDZmYsRUFBQUEsR0FBRyxFQUFFcUIsbUJBQVVDLE1BQVYsQ0FBaUJDLFVBRFA7QUFFZmpCLEVBQUFBLEtBQUssRUFBRWUsbUJBQVVHLE1BQVYsQ0FBaUJELFVBRlQ7O0FBR2Y7QUFDQXRCLEVBQUFBLFVBQVUsRUFBRW9CLG1CQUFVSSxJQUFWLENBQWVGO0FBSlosQyx5REFPRUcsNEIiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMTggTmV3IFZlY3RvciBMdGRcbkNvcHlyaWdodCAyMDE5IFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBfdCB9IGZyb20gJy4uLy4uLy4uL2xhbmd1YWdlSGFuZGxlcic7XG5pbXBvcnQgZGlzIGZyb20gJy4uLy4uLy4uL2Rpc3BhdGNoZXIvZGlzcGF0Y2hlcic7XG5pbXBvcnQgVGFnT3JkZXJBY3Rpb25zIGZyb20gJy4uLy4uLy4uL2FjdGlvbnMvVGFnT3JkZXJBY3Rpb25zJztcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSBcIi4uLy4uL3N0cnVjdHVyZXMvQ29udGV4dE1lbnVcIjtcbmltcG9ydCBNYXRyaXhDbGllbnRDb250ZXh0IGZyb20gXCIuLi8uLi8uLi9jb250ZXh0cy9NYXRyaXhDbGllbnRDb250ZXh0XCI7XG5pbXBvcnQgeyByZXBsYWNlYWJsZUNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy9yZXBsYWNlYWJsZUNvbXBvbmVudFwiO1xuaW1wb3J0IEdyb3VwRmlsdGVyT3JkZXJTdG9yZSBmcm9tIFwiLi4vLi4vLi4vc3RvcmVzL0dyb3VwRmlsdGVyT3JkZXJTdG9yZVwiO1xuaW1wb3J0IHsgY3JlYXRlU3BhY2VGcm9tQ29tbXVuaXR5IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3NwYWNlXCI7XG5pbXBvcnQgR3JvdXBTdG9yZSBmcm9tIFwiLi4vLi4vLi4vc3RvcmVzL0dyb3VwU3RvcmVcIjtcblxuQHJlcGxhY2VhYmxlQ29tcG9uZW50KFwidmlld3MuY29udGV4dF9tZW51cy5UYWdUaWxlQ29udGV4dE1lbnVcIilcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhZ1RpbGVDb250ZXh0TWVudSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgdGFnOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIGluZGV4OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgIC8qIGNhbGxiYWNrIGNhbGxlZCB3aGVuIHRoZSBtZW51IGlzIGRpc21pc3NlZCAqL1xuICAgICAgICBvbkZpbmlzaGVkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIH07XG5cbiAgICBzdGF0aWMgY29udGV4dFR5cGUgPSBNYXRyaXhDbGllbnRDb250ZXh0O1xuXG4gICAgX29uVmlld0NvbW11bml0eUNsaWNrID0gKCkgPT4ge1xuICAgICAgICBkaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiAndmlld19ncm91cCcsXG4gICAgICAgICAgICBncm91cF9pZDogdGhpcy5wcm9wcy50YWcsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb3BzLm9uRmluaXNoZWQoKTtcbiAgICB9O1xuXG4gICAgX29uUmVtb3ZlQ2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGRpcy5kaXNwYXRjaChUYWdPcmRlckFjdGlvbnMucmVtb3ZlVGFnKHRoaXMuY29udGV4dCwgdGhpcy5wcm9wcy50YWcpKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkZpbmlzaGVkKCk7XG4gICAgfTtcblxuICAgIF9vbkNyZWF0ZVNwYWNlQ2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNyZWF0ZVNwYWNlRnJvbUNvbW11bml0eSh0aGlzLmNvbnRleHQsIHRoaXMucHJvcHMudGFnKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkZpbmlzaGVkKCk7XG4gICAgfTtcblxuICAgIF9vbk1vdmVVcCA9ICgpID0+IHtcbiAgICAgICAgZGlzLmRpc3BhdGNoKFRhZ09yZGVyQWN0aW9ucy5tb3ZlVGFnKHRoaXMuY29udGV4dCwgdGhpcy5wcm9wcy50YWcsIHRoaXMucHJvcHMuaW5kZXggLSAxKSk7XG4gICAgICAgIHRoaXMucHJvcHMub25GaW5pc2hlZCgpO1xuICAgIH07XG5cbiAgICBfb25Nb3ZlRG93biA9ICgpID0+IHtcbiAgICAgICAgZGlzLmRpc3BhdGNoKFRhZ09yZGVyQWN0aW9ucy5tb3ZlVGFnKHRoaXMuY29udGV4dCwgdGhpcy5wcm9wcy50YWcsIHRoaXMucHJvcHMuaW5kZXggKyAxKSk7XG4gICAgICAgIHRoaXMucHJvcHMub25GaW5pc2hlZCgpO1xuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBtb3ZlVXA7XG4gICAgICAgIGxldCBtb3ZlRG93bjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaW5kZXggPiAwKSB7XG4gICAgICAgICAgICBtb3ZlVXAgPSAoXG4gICAgICAgICAgICAgICAgPE1lbnVJdGVtIGNsYXNzTmFtZT1cIm14X1RhZ1RpbGVDb250ZXh0TWVudV9pdGVtIG14X1RhZ1RpbGVDb250ZXh0TWVudV9tb3ZlVXBcIiBvbkNsaWNrPXt0aGlzLl9vbk1vdmVVcH0+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJNb3ZlIHVwXCIpIH1cbiAgICAgICAgICAgICAgICA8L01lbnVJdGVtPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pbmRleCA8IChHcm91cEZpbHRlck9yZGVyU3RvcmUuZ2V0T3JkZXJlZFRhZ3MoKSB8fCBbXSkubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgbW92ZURvd24gPSAoXG4gICAgICAgICAgICAgICAgPE1lbnVJdGVtIGNsYXNzTmFtZT1cIm14X1RhZ1RpbGVDb250ZXh0TWVudV9pdGVtIG14X1RhZ1RpbGVDb250ZXh0TWVudV9tb3ZlRG93blwiIG9uQ2xpY2s9e3RoaXMuX29uTW92ZURvd259PlxuICAgICAgICAgICAgICAgICAgICB7IF90KFwiTW92ZSBkb3duXCIpIH1cbiAgICAgICAgICAgICAgICA8L01lbnVJdGVtPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjcmVhdGVTcGFjZU9wdGlvbjtcbiAgICAgICAgaWYgKEdyb3VwU3RvcmUuaXNVc2VyUHJpdmlsZWdlZCh0aGlzLnByb3BzLnRhZykpIHtcbiAgICAgICAgICAgIGNyZWF0ZVNwYWNlT3B0aW9uID0gPD5cbiAgICAgICAgICAgICAgICA8aHIgY2xhc3NOYW1lPVwibXhfVGFnVGlsZUNvbnRleHRNZW51X3NlcGFyYXRvclwiIHJvbGU9XCJzZXBhcmF0b3JcIiAvPlxuICAgICAgICAgICAgICAgIDxNZW51SXRlbSBjbGFzc05hbWU9XCJteF9UYWdUaWxlQ29udGV4dE1lbnVfaXRlbSBteF9UYWdUaWxlQ29udGV4dE1lbnVfY3JlYXRlU3BhY2VcIiBvbkNsaWNrPXt0aGlzLl9vbkNyZWF0ZVNwYWNlQ2xpY2t9PlxuICAgICAgICAgICAgICAgICAgICB7IF90KFwiQ3JlYXRlIFNwYWNlXCIpIH1cbiAgICAgICAgICAgICAgICA8L01lbnVJdGVtPlxuICAgICAgICAgICAgPC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDxkaXY+XG4gICAgICAgICAgICA8TWVudUl0ZW0gY2xhc3NOYW1lPVwibXhfVGFnVGlsZUNvbnRleHRNZW51X2l0ZW0gbXhfVGFnVGlsZUNvbnRleHRNZW51X3ZpZXdDb21tdW5pdHlcIiBvbkNsaWNrPXt0aGlzLl9vblZpZXdDb21tdW5pdHlDbGlja30+XG4gICAgICAgICAgICAgICAgeyBfdCgnVmlldyBDb21tdW5pdHknKSB9XG4gICAgICAgICAgICA8L01lbnVJdGVtPlxuICAgICAgICAgICAgeyAobW92ZVVwIHx8IG1vdmVEb3duKSA/IDxociBjbGFzc05hbWU9XCJteF9UYWdUaWxlQ29udGV4dE1lbnVfc2VwYXJhdG9yXCIgcm9sZT1cInNlcGFyYXRvclwiIC8+IDogbnVsbCB9XG4gICAgICAgICAgICB7IG1vdmVVcCB9XG4gICAgICAgICAgICB7IG1vdmVEb3duIH1cbiAgICAgICAgICAgIDxociBjbGFzc05hbWU9XCJteF9UYWdUaWxlQ29udGV4dE1lbnVfc2VwYXJhdG9yXCIgcm9sZT1cInNlcGFyYXRvclwiIC8+XG4gICAgICAgICAgICA8TWVudUl0ZW0gY2xhc3NOYW1lPVwibXhfVGFnVGlsZUNvbnRleHRNZW51X2l0ZW0gbXhfVGFnVGlsZUNvbnRleHRNZW51X2hpZGVDb21tdW5pdHlcIiBvbkNsaWNrPXt0aGlzLl9vblJlbW92ZUNsaWNrfT5cbiAgICAgICAgICAgICAgICB7IF90KFwiVW5waW5cIikgfVxuICAgICAgICAgICAgPC9NZW51SXRlbT5cbiAgICAgICAgICAgIHsgY3JlYXRlU3BhY2VPcHRpb24gfVxuICAgICAgICA8L2Rpdj47XG4gICAgfVxufVxuIl19