"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _languageHandler = require("../../../languageHandler");

var _SettingsStore = _interopRequireDefault(require("../../../settings/SettingsStore"));

var _dispatcher = _interopRequireDefault(require("../../../dispatcher/dispatcher"));

var _MatrixClientPeg = require("../../../MatrixClientPeg");

var _actions = require("../../../dispatcher/actions");

var _SettingLevel = require("../../../settings/SettingLevel");

var _replaceableComponent = require("../../../utils/replaceableComponent");

var _SettingsFlag = _interopRequireDefault(require("../elements/SettingsFlag"));

var _dec, _class;

let UrlPreviewSettings = (_dec = (0, _replaceableComponent.replaceableComponent)("views.room_settings.UrlPreviewSettings"), _dec(_class = class UrlPreviewSettings extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "onClickUserSettings", e => {
      e.preventDefault();
      e.stopPropagation();

      _dispatcher.default.fire(_actions.Action.ViewUserSettings);
    });
  }

  render() {
    const roomId = this.props.room.roomId;

    const isEncrypted = _MatrixClientPeg.MatrixClientPeg.get().isRoomEncrypted(roomId);

    let previewsForAccount = null;
    let previewsForRoom = null;

    if (!isEncrypted) {
      // Only show account setting state and room state setting state in non-e2ee rooms where they apply
      const accountEnabled = _SettingsStore.default.getValueAt(_SettingLevel.SettingLevel.ACCOUNT, "urlPreviewsEnabled");

      if (accountEnabled) {
        previewsForAccount = (0, _languageHandler._t)("You have <a>enabled</a> URL previews by default.", {}, {
          'a': sub => /*#__PURE__*/_react.default.createElement("a", {
            onClick: this.onClickUserSettings,
            href: ""
          }, sub)
        });
      } else {
        previewsForAccount = (0, _languageHandler._t)("You have <a>disabled</a> URL previews by default.", {}, {
          'a': sub => /*#__PURE__*/_react.default.createElement("a", {
            onClick: this.onClickUserSettings,
            href: ""
          }, sub)
        });
      }

      if (_SettingsStore.default.canSetValue("urlPreviewsEnabled", roomId, _SettingLevel.SettingLevel.ROOM)) {
        previewsForRoom = /*#__PURE__*/_react.default.createElement("label", null, /*#__PURE__*/_react.default.createElement(_SettingsFlag.default, {
          name: "urlPreviewsEnabled",
          level: _SettingLevel.SettingLevel.ROOM,
          roomId: roomId,
          isExplicit: true
        }));
      } else {
        let str = (0, _languageHandler._td)("URL previews are enabled by default for participants in this room.");

        if (!_SettingsStore.default.getValueAt(_SettingLevel.SettingLevel.ROOM, "urlPreviewsEnabled", roomId,
        /*explicit=*/
        true)) {
          str = (0, _languageHandler._td)("URL previews are disabled by default for participants in this room.");
        }

        previewsForRoom = /*#__PURE__*/_react.default.createElement("label", null, (0, _languageHandler._t)(str));
      }
    } else {
      previewsForAccount = (0, _languageHandler._t)("In encrypted rooms, like this one, URL previews are disabled by default to ensure that your " + "homeserver (where the previews are generated) cannot gather information about links you see in " + "this room.");
    }

    const previewsForRoomAccount =
    /*#__PURE__*/
    // in an e2ee room we use a special key to enforce per-room opt-in
    _react.default.createElement(_SettingsFlag.default, {
      name: isEncrypted ? 'urlPreviewsEnabled_e2ee' : 'urlPreviewsEnabled',
      level: _SettingLevel.SettingLevel.ROOM_ACCOUNT,
      roomId: roomId
    });

    return /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_subsectionText"
    }, (0, _languageHandler._t)('When someone puts a URL in their message, a URL preview can be shown to give more ' + 'information about that link such as the title, description, and an image from the website.')), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_subsectionText"
    }, previewsForAccount), previewsForRoom, /*#__PURE__*/_react.default.createElement("label", null, previewsForRoomAccount));
  }

}) || _class);
exports.default = UrlPreviewSettings;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3Jvb21fc2V0dGluZ3MvVXJsUHJldmlld1NldHRpbmdzLnRzeCJdLCJuYW1lcyI6WyJVcmxQcmV2aWV3U2V0dGluZ3MiLCJSZWFjdCIsIkNvbXBvbmVudCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImRpcyIsImZpcmUiLCJBY3Rpb24iLCJWaWV3VXNlclNldHRpbmdzIiwicmVuZGVyIiwicm9vbUlkIiwicHJvcHMiLCJyb29tIiwiaXNFbmNyeXB0ZWQiLCJNYXRyaXhDbGllbnRQZWciLCJnZXQiLCJpc1Jvb21FbmNyeXB0ZWQiLCJwcmV2aWV3c0ZvckFjY291bnQiLCJwcmV2aWV3c0ZvclJvb20iLCJhY2NvdW50RW5hYmxlZCIsIlNldHRpbmdzU3RvcmUiLCJnZXRWYWx1ZUF0IiwiU2V0dGluZ0xldmVsIiwiQUNDT1VOVCIsInN1YiIsIm9uQ2xpY2tVc2VyU2V0dGluZ3MiLCJjYW5TZXRWYWx1ZSIsIlJPT00iLCJzdHIiLCJwcmV2aWV3c0ZvclJvb21BY2NvdW50IiwiUk9PTV9BQ0NPVU5UIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQW1CQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7OztJQU9xQkEsa0IsV0FEcEIsZ0RBQXFCLHdDQUFyQixDLGdCQUFELE1BQ3FCQSxrQkFEckIsU0FDZ0RDLGVBQU1DLFNBRHRELENBQ3dFO0FBQUE7QUFBQTtBQUFBLCtEQUNyQ0MsQ0FBRCxJQUErQjtBQUN6REEsTUFBQUEsQ0FBQyxDQUFDQyxjQUFGO0FBQ0FELE1BQUFBLENBQUMsQ0FBQ0UsZUFBRjs7QUFDQUMsMEJBQUlDLElBQUosQ0FBU0MsZ0JBQU9DLGdCQUFoQjtBQUNILEtBTG1FO0FBQUE7O0FBTzdEQyxFQUFBQSxNQUFNLEdBQWdCO0FBQ3pCLFVBQU1DLE1BQU0sR0FBRyxLQUFLQyxLQUFMLENBQVdDLElBQVgsQ0FBZ0JGLE1BQS9COztBQUNBLFVBQU1HLFdBQVcsR0FBR0MsaUNBQWdCQyxHQUFoQixHQUFzQkMsZUFBdEIsQ0FBc0NOLE1BQXRDLENBQXBCOztBQUVBLFFBQUlPLGtCQUFrQixHQUFHLElBQXpCO0FBQ0EsUUFBSUMsZUFBZSxHQUFHLElBQXRCOztBQUVBLFFBQUksQ0FBQ0wsV0FBTCxFQUFrQjtBQUNkO0FBQ0EsWUFBTU0sY0FBYyxHQUFHQyx1QkFBY0MsVUFBZCxDQUF5QkMsMkJBQWFDLE9BQXRDLEVBQStDLG9CQUEvQyxDQUF2Qjs7QUFDQSxVQUFJSixjQUFKLEVBQW9CO0FBQ2hCRixRQUFBQSxrQkFBa0IsR0FDZCx5QkFBRyxrREFBSCxFQUF1RCxFQUF2RCxFQUEyRDtBQUN2RCxlQUFNTyxHQUFELGlCQUFPO0FBQUcsWUFBQSxPQUFPLEVBQUUsS0FBS0MsbUJBQWpCO0FBQXNDLFlBQUEsSUFBSSxFQUFDO0FBQTNDLGFBQWdERCxHQUFoRDtBQUQyQyxTQUEzRCxDQURKO0FBS0gsT0FORCxNQU1PO0FBQ0hQLFFBQUFBLGtCQUFrQixHQUNkLHlCQUFHLG1EQUFILEVBQXdELEVBQXhELEVBQTREO0FBQ3hELGVBQU1PLEdBQUQsaUJBQU87QUFBRyxZQUFBLE9BQU8sRUFBRSxLQUFLQyxtQkFBakI7QUFBc0MsWUFBQSxJQUFJLEVBQUM7QUFBM0MsYUFBZ0RELEdBQWhEO0FBRDRDLFNBQTVELENBREo7QUFLSDs7QUFFRCxVQUFJSix1QkFBY00sV0FBZCxDQUEwQixvQkFBMUIsRUFBZ0RoQixNQUFoRCxFQUF3RFksMkJBQWFLLElBQXJFLENBQUosRUFBZ0Y7QUFDNUVULFFBQUFBLGVBQWUsZ0JBQ1gseURBQ0ksNkJBQUMscUJBQUQ7QUFDSSxVQUFBLElBQUksRUFBQyxvQkFEVDtBQUVJLFVBQUEsS0FBSyxFQUFFSSwyQkFBYUssSUFGeEI7QUFHSSxVQUFBLE1BQU0sRUFBRWpCLE1BSFo7QUFJSSxVQUFBLFVBQVUsRUFBRTtBQUpoQixVQURKLENBREo7QUFVSCxPQVhELE1BV087QUFDSCxZQUFJa0IsR0FBRyxHQUFHLDBCQUFJLG9FQUFKLENBQVY7O0FBQ0EsWUFBSSxDQUFDUix1QkFBY0MsVUFBZCxDQUF5QkMsMkJBQWFLLElBQXRDLEVBQTRDLG9CQUE1QyxFQUFrRWpCLE1BQWxFO0FBQTBFO0FBQWEsWUFBdkYsQ0FBTCxFQUFtRztBQUMvRmtCLFVBQUFBLEdBQUcsR0FBRywwQkFBSSxxRUFBSixDQUFOO0FBQ0g7O0FBQ0RWLFFBQUFBLGVBQWUsZ0JBQUksNENBQVMseUJBQUdVLEdBQUgsQ0FBVCxDQUFuQjtBQUNIO0FBQ0osS0FuQ0QsTUFtQ087QUFDSFgsTUFBQUEsa0JBQWtCLEdBQ2QseUJBQUcsaUdBQ0MsaUdBREQsR0FFQyxZQUZKLENBREo7QUFLSDs7QUFFRCxVQUFNWSxzQkFBc0I7QUFBQTtBQUFLO0FBQzdCLGlDQUFDLHFCQUFEO0FBQWMsTUFBQSxJQUFJLEVBQUVoQixXQUFXLEdBQUcseUJBQUgsR0FBK0Isb0JBQTlEO0FBQ0ksTUFBQSxLQUFLLEVBQUVTLDJCQUFhUSxZQUR4QjtBQUVJLE1BQUEsTUFBTSxFQUFFcEI7QUFGWixNQURKOztBQU1BLHdCQUNJLHVEQUNJO0FBQUssTUFBQSxTQUFTLEVBQUM7QUFBZixPQUNNLHlCQUFHLHVGQUNELDRGQURGLENBRE4sQ0FESixlQUtJO0FBQUssTUFBQSxTQUFTLEVBQUM7QUFBZixPQUNNTyxrQkFETixDQUxKLEVBUU1DLGVBUk4sZUFTSSw0Q0FBU1csc0JBQVQsQ0FUSixDQURKO0FBYUg7O0FBNUVtRSxDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDE2IE9wZW5NYXJrZXQgTHRkXG5Db3B5cmlnaHQgMjAxNyBUcmF2aXMgUmFsc3RvblxuQ29weXJpZ2h0IDIwMTgsIDIwMTkgTmV3IFZlY3RvciBMdGRcbkNvcHlyaWdodCAyMDE5IFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IF90LCBfdGQgfSBmcm9tICcuLi8uLi8uLi9sYW5ndWFnZUhhbmRsZXInO1xuaW1wb3J0IFNldHRpbmdzU3RvcmUgZnJvbSBcIi4uLy4uLy4uL3NldHRpbmdzL1NldHRpbmdzU3RvcmVcIjtcbmltcG9ydCBkaXMgZnJvbSBcIi4uLy4uLy4uL2Rpc3BhdGNoZXIvZGlzcGF0Y2hlclwiO1xuaW1wb3J0IHsgTWF0cml4Q2xpZW50UGVnIH0gZnJvbSBcIi4uLy4uLy4uL01hdHJpeENsaWVudFBlZ1wiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4uLy4uLy4uL2Rpc3BhdGNoZXIvYWN0aW9uc1wiO1xuaW1wb3J0IHsgU2V0dGluZ0xldmVsIH0gZnJvbSBcIi4uLy4uLy4uL3NldHRpbmdzL1NldHRpbmdMZXZlbFwiO1xuaW1wb3J0IHsgcmVwbGFjZWFibGVDb21wb25lbnQgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvcmVwbGFjZWFibGVDb21wb25lbnRcIjtcbmltcG9ydCB7IFJvb20gfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvbW9kZWxzL3Jvb21cIjtcbmltcG9ydCBTZXR0aW5nc0ZsYWcgZnJvbSBcIi4uL2VsZW1lbnRzL1NldHRpbmdzRmxhZ1wiO1xuXG5pbnRlcmZhY2UgSVByb3BzIHtcbiAgICByb29tOiBSb29tO1xufVxuXG5AcmVwbGFjZWFibGVDb21wb25lbnQoXCJ2aWV3cy5yb29tX3NldHRpbmdzLlVybFByZXZpZXdTZXR0aW5nc1wiKVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXJsUHJldmlld1NldHRpbmdzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElQcm9wcz4ge1xuICAgIHByaXZhdGUgb25DbGlja1VzZXJTZXR0aW5ncyA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZGlzLmZpcmUoQWN0aW9uLlZpZXdVc2VyU2V0dGluZ3MpO1xuICAgIH07XG5cbiAgICBwdWJsaWMgcmVuZGVyKCk6IEpTWC5FbGVtZW50IHtcbiAgICAgICAgY29uc3Qgcm9vbUlkID0gdGhpcy5wcm9wcy5yb29tLnJvb21JZDtcbiAgICAgICAgY29uc3QgaXNFbmNyeXB0ZWQgPSBNYXRyaXhDbGllbnRQZWcuZ2V0KCkuaXNSb29tRW5jcnlwdGVkKHJvb21JZCk7XG5cbiAgICAgICAgbGV0IHByZXZpZXdzRm9yQWNjb3VudCA9IG51bGw7XG4gICAgICAgIGxldCBwcmV2aWV3c0ZvclJvb20gPSBudWxsO1xuXG4gICAgICAgIGlmICghaXNFbmNyeXB0ZWQpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgc2hvdyBhY2NvdW50IHNldHRpbmcgc3RhdGUgYW5kIHJvb20gc3RhdGUgc2V0dGluZyBzdGF0ZSBpbiBub24tZTJlZSByb29tcyB3aGVyZSB0aGV5IGFwcGx5XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50RW5hYmxlZCA9IFNldHRpbmdzU3RvcmUuZ2V0VmFsdWVBdChTZXR0aW5nTGV2ZWwuQUNDT1VOVCwgXCJ1cmxQcmV2aWV3c0VuYWJsZWRcIik7XG4gICAgICAgICAgICBpZiAoYWNjb3VudEVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBwcmV2aWV3c0ZvckFjY291bnQgPSAoXG4gICAgICAgICAgICAgICAgICAgIF90KFwiWW91IGhhdmUgPGE+ZW5hYmxlZDwvYT4gVVJMIHByZXZpZXdzIGJ5IGRlZmF1bHQuXCIsIHt9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnYSc6IChzdWIpPT48YSBvbkNsaWNrPXt0aGlzLm9uQ2xpY2tVc2VyU2V0dGluZ3N9IGhyZWY9Jyc+eyBzdWIgfTwvYT4sXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldmlld3NGb3JBY2NvdW50ID0gKFxuICAgICAgICAgICAgICAgICAgICBfdChcIllvdSBoYXZlIDxhPmRpc2FibGVkPC9hPiBVUkwgcHJldmlld3MgYnkgZGVmYXVsdC5cIiwge30sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdhJzogKHN1Yik9PjxhIG9uQ2xpY2s9e3RoaXMub25DbGlja1VzZXJTZXR0aW5nc30gaHJlZj0nJz57IHN1YiB9PC9hPixcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoU2V0dGluZ3NTdG9yZS5jYW5TZXRWYWx1ZShcInVybFByZXZpZXdzRW5hYmxlZFwiLCByb29tSWQsIFNldHRpbmdMZXZlbC5ST09NKSkge1xuICAgICAgICAgICAgICAgIHByZXZpZXdzRm9yUm9vbSA9IChcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFNldHRpbmdzRmxhZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJ1cmxQcmV2aWV3c0VuYWJsZWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsPXtTZXR0aW5nTGV2ZWwuUk9PTX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tSWQ9e3Jvb21JZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0V4cGxpY2l0PXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RyID0gX3RkKFwiVVJMIHByZXZpZXdzIGFyZSBlbmFibGVkIGJ5IGRlZmF1bHQgZm9yIHBhcnRpY2lwYW50cyBpbiB0aGlzIHJvb20uXCIpO1xuICAgICAgICAgICAgICAgIGlmICghU2V0dGluZ3NTdG9yZS5nZXRWYWx1ZUF0KFNldHRpbmdMZXZlbC5ST09NLCBcInVybFByZXZpZXdzRW5hYmxlZFwiLCByb29tSWQsIC8qZXhwbGljaXQ9Ki90cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICBzdHIgPSBfdGQoXCJVUkwgcHJldmlld3MgYXJlIGRpc2FibGVkIGJ5IGRlZmF1bHQgZm9yIHBhcnRpY2lwYW50cyBpbiB0aGlzIHJvb20uXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmV2aWV3c0ZvclJvb20gPSAoPGxhYmVsPnsgX3Qoc3RyKSB9PC9sYWJlbD4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJldmlld3NGb3JBY2NvdW50ID0gKFxuICAgICAgICAgICAgICAgIF90KFwiSW4gZW5jcnlwdGVkIHJvb21zLCBsaWtlIHRoaXMgb25lLCBVUkwgcHJldmlld3MgYXJlIGRpc2FibGVkIGJ5IGRlZmF1bHQgdG8gZW5zdXJlIHRoYXQgeW91ciBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiaG9tZXNlcnZlciAod2hlcmUgdGhlIHByZXZpZXdzIGFyZSBnZW5lcmF0ZWQpIGNhbm5vdCBnYXRoZXIgaW5mb3JtYXRpb24gYWJvdXQgbGlua3MgeW91IHNlZSBpbiBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwidGhpcyByb29tLlwiKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByZXZpZXdzRm9yUm9vbUFjY291bnQgPSAoIC8vIGluIGFuIGUyZWUgcm9vbSB3ZSB1c2UgYSBzcGVjaWFsIGtleSB0byBlbmZvcmNlIHBlci1yb29tIG9wdC1pblxuICAgICAgICAgICAgPFNldHRpbmdzRmxhZyBuYW1lPXtpc0VuY3J5cHRlZCA/ICd1cmxQcmV2aWV3c0VuYWJsZWRfZTJlZScgOiAndXJsUHJldmlld3NFbmFibGVkJ31cbiAgICAgICAgICAgICAgICBsZXZlbD17U2V0dGluZ0xldmVsLlJPT01fQUNDT1VOVH1cbiAgICAgICAgICAgICAgICByb29tSWQ9e3Jvb21JZH0gLz5cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXhfU2V0dGluZ3NUYWJfc3Vic2VjdGlvblRleHQnPlxuICAgICAgICAgICAgICAgICAgICB7IF90KCdXaGVuIHNvbWVvbmUgcHV0cyBhIFVSTCBpbiB0aGVpciBtZXNzYWdlLCBhIFVSTCBwcmV2aWV3IGNhbiBiZSBzaG93biB0byBnaXZlIG1vcmUgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnaW5mb3JtYXRpb24gYWJvdXQgdGhhdCBsaW5rIHN1Y2ggYXMgdGhlIHRpdGxlLCBkZXNjcmlwdGlvbiwgYW5kIGFuIGltYWdlIGZyb20gdGhlIHdlYnNpdGUuJykgfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdteF9TZXR0aW5nc1RhYl9zdWJzZWN0aW9uVGV4dCc+XG4gICAgICAgICAgICAgICAgICAgIHsgcHJldmlld3NGb3JBY2NvdW50IH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7IHByZXZpZXdzRm9yUm9vbSB9XG4gICAgICAgICAgICAgICAgPGxhYmVsPnsgcHJldmlld3NGb3JSb29tQWNjb3VudCB9PC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiJdfQ==