"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireDefault(require("react"));

var _replaceableComponent = require("../../../utils/replaceableComponent");

var _InlineSpinner = _interopRequireDefault(require("../elements/InlineSpinner"));

var _languageHandler = require("../../../languageHandler");

var _RecordingPlayback = _interopRequireDefault(require("../audio_messages/RecordingPlayback"));

var _MAudioBody = _interopRequireDefault(require("./MAudioBody"));

var _MFileBody = _interopRequireDefault(require("./MFileBody"));

var _dec, _class;

let MVoiceMessageBody = (_dec = (0, _replaceableComponent.replaceableComponent)("views.messages.MVoiceMessageBody"), _dec(_class = class MVoiceMessageBody extends _MAudioBody.default {
  // A voice message is an audio file but rendered in a special way.
  render() {
    if (this.state.error) {
      return /*#__PURE__*/_react.default.createElement("span", {
        className: "mx_MVoiceMessageBody"
      }, /*#__PURE__*/_react.default.createElement("img", {
        src: require("../../../../res/img/warning.svg"),
        width: "16",
        height: "16"
      }), (0, _languageHandler._t)("Error processing voice message"));
    }

    if (!this.state.playback) {
      return /*#__PURE__*/_react.default.createElement("span", {
        className: "mx_MVoiceMessageBody"
      }, /*#__PURE__*/_react.default.createElement(_InlineSpinner.default, null));
    } // At this point we should have a playable state


    return /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_MVoiceMessageBody"
    }, /*#__PURE__*/_react.default.createElement(_RecordingPlayback.default, {
      playback: this.state.playback,
      tileShape: this.props.tileShape
    }), this.props.tileShape && /*#__PURE__*/_react.default.createElement(_MFileBody.default, (0, _extends2.default)({}, this.props, {
      showGenericPlaceholder: false
    })));
  }

}) || _class);
exports.default = MVoiceMessageBody;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL21lc3NhZ2VzL01Wb2ljZU1lc3NhZ2VCb2R5LnRzeCJdLCJuYW1lcyI6WyJNVm9pY2VNZXNzYWdlQm9keSIsIk1BdWRpb0JvZHkiLCJyZW5kZXIiLCJzdGF0ZSIsImVycm9yIiwicmVxdWlyZSIsInBsYXliYWNrIiwicHJvcHMiLCJ0aWxlU2hhcGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBZ0JBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0lBR3FCQSxpQixXQURwQixnREFBcUIsa0NBQXJCLEMsZ0JBQUQsTUFDcUJBLGlCQURyQixTQUMrQ0MsbUJBRC9DLENBQzBEO0FBQ3REO0FBQ09DLEVBQUFBLE1BQU0sR0FBRztBQUNaLFFBQUksS0FBS0MsS0FBTCxDQUFXQyxLQUFmLEVBQXNCO0FBQ2xCLDBCQUNJO0FBQU0sUUFBQSxTQUFTLEVBQUM7QUFBaEIsc0JBQ0k7QUFBSyxRQUFBLEdBQUcsRUFBRUMsT0FBTyxDQUFDLGlDQUFELENBQWpCO0FBQXNELFFBQUEsS0FBSyxFQUFDLElBQTVEO0FBQWlFLFFBQUEsTUFBTSxFQUFDO0FBQXhFLFFBREosRUFFTSx5QkFBRyxnQ0FBSCxDQUZOLENBREo7QUFNSDs7QUFFRCxRQUFJLENBQUMsS0FBS0YsS0FBTCxDQUFXRyxRQUFoQixFQUEwQjtBQUN0QiwwQkFDSTtBQUFNLFFBQUEsU0FBUyxFQUFDO0FBQWhCLHNCQUNJLDZCQUFDLHNCQUFELE9BREosQ0FESjtBQUtILEtBaEJXLENBa0JaOzs7QUFDQSx3QkFDSTtBQUFNLE1BQUEsU0FBUyxFQUFDO0FBQWhCLG9CQUNJLDZCQUFDLDBCQUFEO0FBQW1CLE1BQUEsUUFBUSxFQUFFLEtBQUtILEtBQUwsQ0FBV0csUUFBeEM7QUFBa0QsTUFBQSxTQUFTLEVBQUUsS0FBS0MsS0FBTCxDQUFXQztBQUF4RSxNQURKLEVBRU0sS0FBS0QsS0FBTCxDQUFXQyxTQUFYLGlCQUF3Qiw2QkFBQyxrQkFBRCw2QkFBZSxLQUFLRCxLQUFwQjtBQUEyQixNQUFBLHNCQUFzQixFQUFFO0FBQW5ELE9BRjlCLENBREo7QUFNSDs7QUEzQnFELEMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMjEgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyByZXBsYWNlYWJsZUNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy9yZXBsYWNlYWJsZUNvbXBvbmVudFwiO1xuaW1wb3J0IElubGluZVNwaW5uZXIgZnJvbSAnLi4vZWxlbWVudHMvSW5saW5lU3Bpbm5lcic7XG5pbXBvcnQgeyBfdCB9IGZyb20gXCIuLi8uLi8uLi9sYW5ndWFnZUhhbmRsZXJcIjtcbmltcG9ydCBSZWNvcmRpbmdQbGF5YmFjayBmcm9tIFwiLi4vYXVkaW9fbWVzc2FnZXMvUmVjb3JkaW5nUGxheWJhY2tcIjtcbmltcG9ydCBNQXVkaW9Cb2R5IGZyb20gXCIuL01BdWRpb0JvZHlcIjtcbmltcG9ydCBNRmlsZUJvZHkgZnJvbSBcIi4vTUZpbGVCb2R5XCI7XG5cbkByZXBsYWNlYWJsZUNvbXBvbmVudChcInZpZXdzLm1lc3NhZ2VzLk1Wb2ljZU1lc3NhZ2VCb2R5XCIpXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNVm9pY2VNZXNzYWdlQm9keSBleHRlbmRzIE1BdWRpb0JvZHkge1xuICAgIC8vIEEgdm9pY2UgbWVzc2FnZSBpcyBhbiBhdWRpbyBmaWxlIGJ1dCByZW5kZXJlZCBpbiBhIHNwZWNpYWwgd2F5LlxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm14X01Wb2ljZU1lc3NhZ2VCb2R5XCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtyZXF1aXJlKFwiLi4vLi4vLi4vLi4vcmVzL2ltZy93YXJuaW5nLnN2Z1wiKX0gd2lkdGg9XCIxNlwiIGhlaWdodD1cIjE2XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgeyBfdChcIkVycm9yIHByb2Nlc3Npbmcgdm9pY2UgbWVzc2FnZVwiKSB9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5wbGF5YmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9NVm9pY2VNZXNzYWdlQm9keVwiPlxuICAgICAgICAgICAgICAgICAgICA8SW5saW5lU3Bpbm5lciAvPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHdlIHNob3VsZCBoYXZlIGEgcGxheWFibGUgc3RhdGVcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm14X01Wb2ljZU1lc3NhZ2VCb2R5XCI+XG4gICAgICAgICAgICAgICAgPFJlY29yZGluZ1BsYXliYWNrIHBsYXliYWNrPXt0aGlzLnN0YXRlLnBsYXliYWNrfSB0aWxlU2hhcGU9e3RoaXMucHJvcHMudGlsZVNoYXBlfSAvPlxuICAgICAgICAgICAgICAgIHsgdGhpcy5wcm9wcy50aWxlU2hhcGUgJiYgPE1GaWxlQm9keSB7Li4udGhpcy5wcm9wc30gc2hvd0dlbmVyaWNQbGFjZWhvbGRlcj17ZmFsc2V9IC8+IH1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iXX0=