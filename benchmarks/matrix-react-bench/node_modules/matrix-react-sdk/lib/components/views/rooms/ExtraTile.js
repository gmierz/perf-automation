"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _RovingTabIndex = require("../../../accessibility/RovingTabIndex");

var _NotificationBadge = _interopRequireDefault(require("./NotificationBadge"));

/*
Copyright 2020, 2021 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class ExtraTile extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onTileMouseEnter", () => {
      this.setState({
        hover: true
      });
    });
    (0, _defineProperty2.default)(this, "onTileMouseLeave", () => {
      this.setState({
        hover: false
      });
    });
    this.state = {
      hover: false
    };
  }

  render() {
    var _this$props$notificat;

    // XXX: We copy classes because it's easier
    const classes = (0, _classnames.default)({
      'mx_ExtraTile': true,
      'mx_RoomTile': true,
      'mx_RoomTile_selected': this.props.isSelected,
      'mx_RoomTile_minimized': this.props.isMinimized
    });
    let badge;

    if (this.props.notificationState) {
      badge = /*#__PURE__*/_react.default.createElement(_NotificationBadge.default, {
        notification: this.props.notificationState,
        forceCount: false
      });
    }

    let name = this.props.displayName;
    if (typeof name !== 'string') name = '';
    name = name.replace(":", ":\u200b"); // add a zero-width space to allow linewrapping after the colon

    const nameClasses = (0, _classnames.default)({
      "mx_RoomTile_name": true,
      "mx_RoomTile_nameHasUnreadEvents": (_this$props$notificat = this.props.notificationState) === null || _this$props$notificat === void 0 ? void 0 : _this$props$notificat.isUnread
    });

    let nameContainer = /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_RoomTile_nameContainer"
    }, /*#__PURE__*/_react.default.createElement("div", {
      title: name,
      className: nameClasses,
      tabIndex: -1,
      dir: "auto"
    }, name));

    if (this.props.isMinimized) nameContainer = null;
    let Button = _RovingTabIndex.RovingAccessibleButton;

    if (this.props.isMinimized) {
      Button = _RovingTabIndex.RovingAccessibleTooltipButton;
    }

    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(Button, {
      className: classes,
      onMouseEnter: this.onTileMouseEnter,
      onMouseLeave: this.onTileMouseLeave,
      onClick: this.props.onClick,
      role: "treeitem",
      title: this.props.isMinimized ? name : undefined
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_RoomTile_avatarContainer"
    }, this.props.avatar), nameContainer, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_RoomTile_badgeContainer"
    }, badge)));
  }

}

exports.default = ExtraTile;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3Jvb21zL0V4dHJhVGlsZS50c3giXSwibmFtZXMiOlsiRXh0cmFUaWxlIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwic2V0U3RhdGUiLCJob3ZlciIsInN0YXRlIiwicmVuZGVyIiwiY2xhc3NlcyIsImlzU2VsZWN0ZWQiLCJpc01pbmltaXplZCIsImJhZGdlIiwibm90aWZpY2F0aW9uU3RhdGUiLCJuYW1lIiwiZGlzcGxheU5hbWUiLCJyZXBsYWNlIiwibmFtZUNsYXNzZXMiLCJpc1VucmVhZCIsIm5hbWVDb250YWluZXIiLCJCdXR0b24iLCJSb3ZpbmdBY2Nlc3NpYmxlQnV0dG9uIiwiUm92aW5nQWNjZXNzaWJsZVRvb2x0aXBCdXR0b24iLCJvblRpbGVNb3VzZUVudGVyIiwib25UaWxlTW91c2VMZWF2ZSIsIm9uQ2xpY2siLCJ1bmRlZmluZWQiLCJhdmF0YXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBZ0JBOztBQUNBOztBQUNBOztBQUlBOztBQXRCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF3QmUsTUFBTUEsU0FBTixTQUF3QkMsZUFBTUMsU0FBOUIsQ0FBd0Q7QUFDbkVDLEVBQUFBLFdBQVcsQ0FBQ0MsS0FBRCxFQUFnQjtBQUN2QixVQUFNQSxLQUFOO0FBRHVCLDREQVFBLE1BQU07QUFDN0IsV0FBS0MsUUFBTCxDQUFjO0FBQUVDLFFBQUFBLEtBQUssRUFBRTtBQUFULE9BQWQ7QUFDSCxLQVYwQjtBQUFBLDREQVlBLE1BQU07QUFDN0IsV0FBS0QsUUFBTCxDQUFjO0FBQUVDLFFBQUFBLEtBQUssRUFBRTtBQUFULE9BQWQ7QUFDSCxLQWQwQjtBQUd2QixTQUFLQyxLQUFMLEdBQWE7QUFDVEQsTUFBQUEsS0FBSyxFQUFFO0FBREUsS0FBYjtBQUdIOztBQVVNRSxFQUFBQSxNQUFNLEdBQXVCO0FBQUE7O0FBQ2hDO0FBQ0EsVUFBTUMsT0FBTyxHQUFHLHlCQUFXO0FBQ3ZCLHNCQUFnQixJQURPO0FBRXZCLHFCQUFlLElBRlE7QUFHdkIsOEJBQXdCLEtBQUtMLEtBQUwsQ0FBV00sVUFIWjtBQUl2QiwrQkFBeUIsS0FBS04sS0FBTCxDQUFXTztBQUpiLEtBQVgsQ0FBaEI7QUFPQSxRQUFJQyxLQUFKOztBQUNBLFFBQUksS0FBS1IsS0FBTCxDQUFXUyxpQkFBZixFQUFrQztBQUM5QkQsTUFBQUEsS0FBSyxnQkFDRCw2QkFBQywwQkFBRDtBQUNJLFFBQUEsWUFBWSxFQUFFLEtBQUtSLEtBQUwsQ0FBV1MsaUJBRDdCO0FBRUksUUFBQSxVQUFVLEVBQUU7QUFGaEIsUUFESjtBQU1IOztBQUVELFFBQUlDLElBQUksR0FBRyxLQUFLVixLQUFMLENBQVdXLFdBQXRCO0FBQ0EsUUFBSSxPQUFPRCxJQUFQLEtBQWdCLFFBQXBCLEVBQThCQSxJQUFJLEdBQUcsRUFBUDtBQUM5QkEsSUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNFLE9BQUwsQ0FBYSxHQUFiLEVBQWtCLFNBQWxCLENBQVAsQ0FyQmdDLENBcUJLOztBQUVyQyxVQUFNQyxXQUFXLEdBQUcseUJBQVc7QUFDM0IsMEJBQW9CLElBRE87QUFFM0Isa0VBQW1DLEtBQUtiLEtBQUwsQ0FBV1MsaUJBQTlDLDBEQUFtQyxzQkFBOEJLO0FBRnRDLEtBQVgsQ0FBcEI7O0FBS0EsUUFBSUMsYUFBYSxnQkFDYjtBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsb0JBQ0k7QUFBSyxNQUFBLEtBQUssRUFBRUwsSUFBWjtBQUFrQixNQUFBLFNBQVMsRUFBRUcsV0FBN0I7QUFBMEMsTUFBQSxRQUFRLEVBQUUsQ0FBQyxDQUFyRDtBQUF3RCxNQUFBLEdBQUcsRUFBQztBQUE1RCxPQUNNSCxJQUROLENBREosQ0FESjs7QUFPQSxRQUFJLEtBQUtWLEtBQUwsQ0FBV08sV0FBZixFQUE0QlEsYUFBYSxHQUFHLElBQWhCO0FBRTVCLFFBQUlDLE1BQU0sR0FBR0Msc0NBQWI7O0FBQ0EsUUFBSSxLQUFLakIsS0FBTCxDQUFXTyxXQUFmLEVBQTRCO0FBQ3hCUyxNQUFBQSxNQUFNLEdBQUdFLDZDQUFUO0FBQ0g7O0FBRUQsd0JBQ0ksNkJBQUMsY0FBRCxDQUFPLFFBQVAscUJBQ0ksNkJBQUMsTUFBRDtBQUNJLE1BQUEsU0FBUyxFQUFFYixPQURmO0FBRUksTUFBQSxZQUFZLEVBQUUsS0FBS2MsZ0JBRnZCO0FBR0ksTUFBQSxZQUFZLEVBQUUsS0FBS0MsZ0JBSHZCO0FBSUksTUFBQSxPQUFPLEVBQUUsS0FBS3BCLEtBQUwsQ0FBV3FCLE9BSnhCO0FBS0ksTUFBQSxJQUFJLEVBQUMsVUFMVDtBQU1JLE1BQUEsS0FBSyxFQUFFLEtBQUtyQixLQUFMLENBQVdPLFdBQVgsR0FBeUJHLElBQXpCLEdBQWdDWTtBQU4zQyxvQkFRSTtBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsT0FDTSxLQUFLdEIsS0FBTCxDQUFXdUIsTUFEakIsQ0FSSixFQVdNUixhQVhOLGVBWUk7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLE9BQ01QLEtBRE4sQ0FaSixDQURKLENBREo7QUFvQkg7O0FBL0VrRSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAyMCwgMjAyMSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQge1xuICAgIFJvdmluZ0FjY2Vzc2libGVCdXR0b24sXG4gICAgUm92aW5nQWNjZXNzaWJsZVRvb2x0aXBCdXR0b24sXG59IGZyb20gXCIuLi8uLi8uLi9hY2Nlc3NpYmlsaXR5L1JvdmluZ1RhYkluZGV4XCI7XG5pbXBvcnQgTm90aWZpY2F0aW9uQmFkZ2UgZnJvbSBcIi4vTm90aWZpY2F0aW9uQmFkZ2VcIjtcbmltcG9ydCB7IE5vdGlmaWNhdGlvblN0YXRlIH0gZnJvbSBcIi4uLy4uLy4uL3N0b3Jlcy9ub3RpZmljYXRpb25zL05vdGlmaWNhdGlvblN0YXRlXCI7XG5cbmludGVyZmFjZSBJUHJvcHMge1xuICAgIGlzTWluaW1pemVkOiBib29sZWFuO1xuICAgIGlzU2VsZWN0ZWQ6IGJvb2xlYW47XG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgICBhdmF0YXI6IFJlYWN0LlJlYWN0RWxlbWVudDtcbiAgICBub3RpZmljYXRpb25TdGF0ZT86IE5vdGlmaWNhdGlvblN0YXRlO1xuICAgIG9uQ2xpY2s6ICgpID0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBJU3RhdGUge1xuICAgIGhvdmVyOiBib29sZWFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeHRyYVRpbGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogSVByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaG92ZXI6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgb25UaWxlTW91c2VFbnRlciA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyOiB0cnVlIH0pO1xuICAgIH07XG5cbiAgICBwcml2YXRlIG9uVGlsZU1vdXNlTGVhdmUgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBob3ZlcjogZmFsc2UgfSk7XG4gICAgfTtcblxuICAgIHB1YmxpYyByZW5kZXIoKTogUmVhY3QuUmVhY3RFbGVtZW50IHtcbiAgICAgICAgLy8gWFhYOiBXZSBjb3B5IGNsYXNzZXMgYmVjYXVzZSBpdCdzIGVhc2llclxuICAgICAgICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcyh7XG4gICAgICAgICAgICAnbXhfRXh0cmFUaWxlJzogdHJ1ZSxcbiAgICAgICAgICAgICdteF9Sb29tVGlsZSc6IHRydWUsXG4gICAgICAgICAgICAnbXhfUm9vbVRpbGVfc2VsZWN0ZWQnOiB0aGlzLnByb3BzLmlzU2VsZWN0ZWQsXG4gICAgICAgICAgICAnbXhfUm9vbVRpbGVfbWluaW1pemVkJzogdGhpcy5wcm9wcy5pc01pbmltaXplZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGJhZGdlO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5ub3RpZmljYXRpb25TdGF0ZSkge1xuICAgICAgICAgICAgYmFkZ2UgPSAoXG4gICAgICAgICAgICAgICAgPE5vdGlmaWNhdGlvbkJhZGdlXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbj17dGhpcy5wcm9wcy5ub3RpZmljYXRpb25TdGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgZm9yY2VDb3VudD17ZmFsc2V9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbmFtZSA9IHRoaXMucHJvcHMuZGlzcGxheU5hbWU7XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIG5hbWUgPSAnJztcbiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShcIjpcIiwgXCI6XFx1MjAwYlwiKTsgLy8gYWRkIGEgemVyby13aWR0aCBzcGFjZSB0byBhbGxvdyBsaW5ld3JhcHBpbmcgYWZ0ZXIgdGhlIGNvbG9uXG5cbiAgICAgICAgY29uc3QgbmFtZUNsYXNzZXMgPSBjbGFzc05hbWVzKHtcbiAgICAgICAgICAgIFwibXhfUm9vbVRpbGVfbmFtZVwiOiB0cnVlLFxuICAgICAgICAgICAgXCJteF9Sb29tVGlsZV9uYW1lSGFzVW5yZWFkRXZlbnRzXCI6IHRoaXMucHJvcHMubm90aWZpY2F0aW9uU3RhdGU/LmlzVW5yZWFkLFxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgbmFtZUNvbnRhaW5lciA9IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfUm9vbVRpbGVfbmFtZUNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgdGl0bGU9e25hbWV9IGNsYXNzTmFtZT17bmFtZUNsYXNzZXN9IHRhYkluZGV4PXstMX0gZGlyPVwiYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICB7IG5hbWUgfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzTWluaW1pemVkKSBuYW1lQ29udGFpbmVyID0gbnVsbDtcblxuICAgICAgICBsZXQgQnV0dG9uID0gUm92aW5nQWNjZXNzaWJsZUJ1dHRvbjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNNaW5pbWl6ZWQpIHtcbiAgICAgICAgICAgIEJ1dHRvbiA9IFJvdmluZ0FjY2Vzc2libGVUb29sdGlwQnV0dG9uO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlc31cbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUVudGVyPXt0aGlzLm9uVGlsZU1vdXNlRW50ZXJ9XG4gICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17dGhpcy5vblRpbGVNb3VzZUxlYXZlfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgIHJvbGU9XCJ0cmVlaXRlbVwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0aGlzLnByb3BzLmlzTWluaW1pemVkID8gbmFtZSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfUm9vbVRpbGVfYXZhdGFyQ29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IHRoaXMucHJvcHMuYXZhdGFyIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZUNvbnRhaW5lciB9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfUm9vbVRpbGVfYmFkZ2VDb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgYmFkZ2UgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICk7XG4gICAgfVxufVxuIl19