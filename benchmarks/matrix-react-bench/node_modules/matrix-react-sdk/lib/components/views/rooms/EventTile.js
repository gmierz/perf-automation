"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.TileShape = void 0;
exports.getHandlerTile = getHandlerTile;
exports.haveTileForEvent = haveTileForEvent;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _event = require("matrix-js-sdk/src/@types/event");

var _event2 = require("matrix-js-sdk/src/models/event");

var _thread = require("matrix-js-sdk/src/models/thread");

var _ReplyChain = _interopRequireDefault(require("../elements/ReplyChain"));

var _languageHandler = require("../../../languageHandler");

var _TextForEvent = require("../../../TextForEvent");

var sdk = _interopRequireWildcard(require("../../../index"));

var _dispatcher = _interopRequireDefault(require("../../../dispatcher/dispatcher"));

var _Layout = require("../../../settings/enums/Layout");

var _DateUtils = require("../../../DateUtils");

var _MatrixClientPeg = require("../../../MatrixClientPeg");

var _BanList = require("../../../mjolnir/BanList");

var _MatrixClientContext = _interopRequireDefault(require("../../../contexts/MatrixClientContext"));

var _E2EIcon = require("./E2EIcon");

var _units = require("../../../utils/units");

var _WidgetType = require("../../../widgets/WidgetType");

var _RoomAvatar = _interopRequireDefault(require("../avatars/RoomAvatar"));

var _WidgetLayoutStore = require("../../../stores/widgets/WidgetLayoutStore");

var _objects = require("../../../utils/objects");

var _replaceableComponent = require("../../../utils/replaceableComponent");

var _Tooltip = _interopRequireDefault(require("../elements/Tooltip"));

var _StaticNotificationState = require("../../../stores/notifications/StaticNotificationState");

var _NotificationBadge = _interopRequireDefault(require("./NotificationBadge"));

var _actions = require("../../../dispatcher/actions");

var _MemberAvatar = _interopRequireDefault(require("../avatars/MemberAvatar"));

var _SenderProfile = _interopRequireDefault(require("../messages/SenderProfile"));

var _MessageTimestamp = _interopRequireDefault(require("../messages/MessageTimestamp"));

var _TooltipButton = _interopRequireDefault(require("../elements/TooltipButton"));

var _ReadReceiptMarker = _interopRequireDefault(require("./ReadReceiptMarker"));

var _MessageActionBar = _interopRequireDefault(require("../messages/MessageActionBar"));

var _ReactionsRow = _interopRequireDefault(require("../messages/ReactionsRow"));

var _EventUtils = require("../../../utils/EventUtils");

var _SettingsStore = _interopRequireDefault(require("../../../settings/SettingsStore"));

var _MKeyVerificationConclusion = _interopRequireDefault(require("../messages/MKeyVerificationConclusion"));

var _threads = require("../../../dispatcher/dispatch-actions/threads");

var _MessagePreviewStore = require("../../../stores/room-list/MessagePreviewStore");

var _logger = require("matrix-js-sdk/src/logger");

var _MediaEventHelper = require("../../../utils/MediaEventHelper");

var _Toolbar = _interopRequireDefault(require("../../../accessibility/Toolbar"));

var _consts = require("../../../polls/consts");

var _RovingAccessibleTooltipButton = require("../../../accessibility/roving/RovingAccessibleTooltipButton");

var _ThreadListContextMenu = _interopRequireDefault(require("../context_menus/ThreadListContextMenu"));

var _dec, _class, _class2, _temp;

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

const eventTileTypes = {
  [_event.EventType.RoomMessage]: 'messages.MessageEvent',
  [_event.EventType.Sticker]: 'messages.MessageEvent',
  [_consts.POLL_START_EVENT_TYPE.name]: 'messages.MessageEvent',
  [_event.EventType.KeyVerificationCancel]: 'messages.MKeyVerificationConclusion',
  [_event.EventType.KeyVerificationDone]: 'messages.MKeyVerificationConclusion',
  [_event.EventType.CallInvite]: 'messages.CallEvent'
};
const stateEventTileTypes = {
  [_event.EventType.RoomEncryption]: 'messages.EncryptionEvent',
  [_event.EventType.RoomCanonicalAlias]: 'messages.TextualEvent',
  [_event.EventType.RoomCreate]: 'messages.RoomCreate',
  [_event.EventType.RoomMember]: 'messages.TextualEvent',
  [_event.EventType.RoomName]: 'messages.TextualEvent',
  [_event.EventType.RoomAvatar]: 'messages.RoomAvatarEvent',
  [_event.EventType.RoomThirdPartyInvite]: 'messages.TextualEvent',
  [_event.EventType.RoomHistoryVisibility]: 'messages.TextualEvent',
  [_event.EventType.RoomTopic]: 'messages.TextualEvent',
  [_event.EventType.RoomPowerLevels]: 'messages.TextualEvent',
  [_event.EventType.RoomPinnedEvents]: 'messages.TextualEvent',
  [_event.EventType.RoomServerAcl]: 'messages.TextualEvent',
  // TODO: Enable support for m.widget event type (https://github.com/vector-im/element-web/issues/13111)
  'im.vector.modular.widgets': 'messages.TextualEvent',
  [_WidgetLayoutStore.WIDGET_LAYOUT_EVENT_TYPE]: 'messages.TextualEvent',
  [_event.EventType.RoomTombstone]: 'messages.TextualEvent',
  [_event.EventType.RoomJoinRules]: 'messages.TextualEvent',
  [_event.EventType.RoomGuestAccess]: 'messages.TextualEvent',
  'm.room.related_groups': 'messages.TextualEvent' // legacy communities flair

};
const stateEventSingular = new Set([_event.EventType.RoomEncryption, _event.EventType.RoomCanonicalAlias, _event.EventType.RoomCreate, _event.EventType.RoomName, _event.EventType.RoomAvatar, _event.EventType.RoomHistoryVisibility, _event.EventType.RoomTopic, _event.EventType.RoomPowerLevels, _event.EventType.RoomPinnedEvents, _event.EventType.RoomServerAcl, _WidgetLayoutStore.WIDGET_LAYOUT_EVENT_TYPE, _event.EventType.RoomTombstone, _event.EventType.RoomJoinRules, _event.EventType.RoomGuestAccess, 'm.room.related_groups']); // Add all the Mjolnir stuff to the renderer

for (const evType of _BanList.ALL_RULE_TYPES) {
  stateEventTileTypes[evType] = 'messages.TextualEvent';
}

function getHandlerTile(ev) {
  const type = ev.getType(); // don't show verification requests we're not involved in,
  // not even when showing hidden events

  if (type === "m.room.message") {
    const content = ev.getContent();

    if (content && content.msgtype === _event.MsgType.KeyVerificationRequest) {
      const client = _MatrixClientPeg.MatrixClientPeg.get();

      const me = client && client.getUserId();

      if (ev.getSender() !== me && content.to !== me) {
        return undefined;
      } else {
        return "messages.MKeyVerificationRequest";
      }
    }
  } // these events are sent by both parties during verification, but we only want to render one
  // tile once the verification concludes, so filter out the one from the other party.


  if (type === "m.key.verification.done") {
    const client = _MatrixClientPeg.MatrixClientPeg.get();

    const me = client && client.getUserId();

    if (ev.getSender() !== me) {
      return undefined;
    }
  } // sometimes MKeyVerificationConclusion declines to render.  Jankily decline to render and
  // fall back to showing hidden events, if we're viewing hidden events
  // XXX: This is extremely a hack. Possibly these components should have an interface for
  // declining to render?


  if (type === "m.key.verification.cancel" || type === "m.key.verification.done") {
    if (!_MKeyVerificationConclusion.default.shouldRender(ev, ev.request)) {
      return;
    }
  } // TODO: Enable support for m.widget event type (https://github.com/vector-im/element-web/issues/13111)


  if (type === "im.vector.modular.widgets") {
    let type = ev.getContent()['type'];

    if (!type) {
      // deleted/invalid widget - try the past widget type
      type = ev.getPrevContent()['type'];
    }

    if (_WidgetType.WidgetType.JITSI.matches(type)) {
      return "messages.MJitsiWidgetEvent";
    }
  }

  if (ev.isState()) {
    if (stateEventSingular.has(type) && ev.getStateKey() !== "") return undefined;
    return stateEventTileTypes[type];
  }

  return eventTileTypes[type];
} // Our component structure for EventTiles on the timeline is:
//
// .-EventTile------------------------------------------------.
// | MemberAvatar (SenderProfile)                   TimeStamp |
// |    .-{Message,Textual}Event---------------. Read Avatars |
// |    |   .-MFooBody-------------------.     |              |
// |    |   |  (only if MessageEvent)    |     |              |
// |    |   '----------------------------'     |              |
// |    '--------------------------------------'              |
// '----------------------------------------------------------'


let TileShape;
exports.TileShape = TileShape;

(function (TileShape) {
  TileShape["Notif"] = "notif";
  TileShape["FileGrid"] = "file_grid";
  TileShape["Pinned"] = "pinned";
  TileShape["Thread"] = "thread";
  TileShape["ThreadPanel"] = "thread_list";
})(TileShape || (exports.TileShape = TileShape = {}));

let EventTile = (_dec = (0, _replaceableComponent.replaceableComponent)("views.rooms.EventTile"), _dec(_class = (_temp = _class2 = class EventTile extends _react.default.Component {
  // TODO: Types
  constructor(props, context) {
    var _this$props$mxEvent;

    super(props, context);
    (0, _defineProperty2.default)(this, "suppressReadReceiptAnimation", void 0);
    (0, _defineProperty2.default)(this, "isListeningForReceipts", void 0);
    (0, _defineProperty2.default)(this, "tile", /*#__PURE__*/_react.default.createRef());
    (0, _defineProperty2.default)(this, "replyChain", /*#__PURE__*/_react.default.createRef());
    (0, _defineProperty2.default)(this, "ref", /*#__PURE__*/(0, _react.createRef)());
    (0, _defineProperty2.default)(this, "updateThread", thread => {
      this.setState({
        thread
      });
      this.forceUpdate();
    });
    (0, _defineProperty2.default)(this, "onNewThread", thread => {
      if (thread.id === this.props.mxEvent.getId()) {
        this.updateThread(thread);
        const room = this.context.getRoom(this.props.mxEvent.getRoomId());
        room.off(_thread.ThreadEvent.New, this.onNewThread);
      }
    });
    (0, _defineProperty2.default)(this, "onRoomReceipt", (ev, room) => {
      // ignore events for other rooms
      const tileRoom = _MatrixClientPeg.MatrixClientPeg.get().getRoom(this.props.mxEvent.getRoomId());

      if (room !== tileRoom) return;

      if (!this.shouldShowSentReceipt && !this.shouldShowSendingReceipt && !this.isListeningForReceipts) {
        return;
      } // We force update because we have no state or prop changes to queue up, instead relying on
      // the getters we use here to determine what needs rendering.


      this.forceUpdate(() => {
        // Per elsewhere in this file, we can remove the listener once we will have no further purpose for it.
        if (!this.shouldShowSentReceipt && !this.shouldShowSendingReceipt) {
          this.context.removeListener("Room.receipt", this.onRoomReceipt);
          this.isListeningForReceipts = false;
        }
      });
    });
    (0, _defineProperty2.default)(this, "onDecrypted", () => {
      // we need to re-verify the sending device.
      // (we call onHeightChanged in verifyEvent to handle the case where decryption
      // has caused a change in size of the event tile)
      this.verifyEvent(this.props.mxEvent);
      this.forceUpdate();
    });
    (0, _defineProperty2.default)(this, "onDeviceVerificationChanged", (userId, device) => {
      if (userId === this.props.mxEvent.getSender()) {
        this.verifyEvent(this.props.mxEvent);
      }
    });
    (0, _defineProperty2.default)(this, "onUserVerificationChanged", (userId, _trustStatus) => {
      if (userId === this.props.mxEvent.getSender()) {
        this.verifyEvent(this.props.mxEvent);
      }
    });
    (0, _defineProperty2.default)(this, "toggleAllReadAvatars", () => {
      this.setState({
        allReadAvatars: !this.state.allReadAvatars
      });
    });
    (0, _defineProperty2.default)(this, "onSenderProfileClick", () => {
      if (!this.props.timelineRenderingType) return;

      _dispatcher.default.dispatch({
        action: _actions.Action.ComposerInsert,
        userId: this.props.mxEvent.getSender(),
        timelineRenderingType: this.props.timelineRenderingType
      });
    });
    (0, _defineProperty2.default)(this, "onRequestKeysClick", () => {
      this.setState({
        // Indicate in the UI that the keys have been requested (this is expected to
        // be reset if the component is mounted in the future).
        previouslyRequestedKeys: true
      }); // Cancel any outgoing key request for this event and resend it. If a response
      // is received for the request with the required keys, the event could be
      // decrypted successfully.

      this.context.cancelAndResendEventRoomKeyRequest(this.props.mxEvent);
    });
    (0, _defineProperty2.default)(this, "onPermalinkClicked", e => {
      // This allows the permalink to be opened in a new tab/window or copied as
      // matrix.to, but also for it to enable routing within Element when clicked.
      e.preventDefault();

      _dispatcher.default.dispatch({
        action: _actions.Action.ViewRoom,
        event_id: this.props.mxEvent.getId(),
        highlighted: true,
        room_id: this.props.mxEvent.getRoomId()
      });
    });
    (0, _defineProperty2.default)(this, "onActionBarFocusChange", focused => {
      this.setState({
        actionBarFocused: focused
      });
    });
    (0, _defineProperty2.default)(this, "getTile", () => this.tile.current);
    (0, _defineProperty2.default)(this, "getReplyChain", () => this.replyChain.current);
    (0, _defineProperty2.default)(this, "getReactions", () => {
      if (!this.props.showReactions || !this.props.getRelationsForEvent) {
        return null;
      }

      const eventId = this.props.mxEvent.getId();
      return this.props.getRelationsForEvent(eventId, "m.annotation", "m.reaction");
    });
    (0, _defineProperty2.default)(this, "onReactionsCreated", (relationType, eventType) => {
      if (relationType !== "m.annotation" || eventType !== "m.reaction") {
        return;
      }

      this.props.mxEvent.removeListener("Event.relationsCreated", this.onReactionsCreated);
      this.setState({
        reactions: this.getReactions()
      });
    });
    (0, _defineProperty2.default)(this, "setQuoteExpanded", expanded => {
      this.setState({
        isQuoteExpanded: expanded
      });
    });
    this.state = {
      // Whether the action bar is focused.
      actionBarFocused: false,
      // Whether all read receipts are being displayed. If not, only display
      // a truncation of them.
      allReadAvatars: false,
      // Whether the event's sender has been verified.
      verified: null,
      // Whether onRequestKeysClick has been called since mounting.
      previouslyRequestedKeys: false,
      // The Relations model from the JS SDK for reactions to `mxEvent`
      reactions: this.getReactions(),
      hover: false,
      thread: (_this$props$mxEvent = this.props.mxEvent) === null || _this$props$mxEvent === void 0 ? void 0 : _this$props$mxEvent.getThread()
    }; // don't do RR animations until we are mounted

    this.suppressReadReceiptAnimation = true; // Throughout the component we manage a read receipt listener to see if our tile still
    // qualifies for a "sent" or "sending" state (based on their relevant conditions). We
    // don't want to over-subscribe to the read receipt events being fired, so we use a flag
    // to determine if we've already subscribed and use a combination of other flags to find
    // out if we should even be subscribed at all.

    this.isListeningForReceipts = false;
  }
  /**
   * When true, the tile qualifies for some sort of special read receipt. This could be a 'sending'
   * or 'sent' receipt, for example.
   * @returns {boolean}
   */


  get isEligibleForSpecialReceipt() {
    // First, if there are other read receipts then just short-circuit this.
    if (this.props.readReceipts && this.props.readReceipts.length > 0) return false;
    if (!this.props.mxEvent) return false; // Sanity check (should never happen, but we shouldn't explode if it does)

    const room = this.context.getRoom(this.props.mxEvent.getRoomId());
    if (!room) return false; // Quickly check to see if the event was sent by us. If it wasn't, it won't qualify for
    // special read receipts.

    const myUserId = _MatrixClientPeg.MatrixClientPeg.get().getUserId();

    if (this.props.mxEvent.getSender() !== myUserId) return false; // Finally, determine if the type is relevant to the user. This notably excludes state
    // events and pretty much anything that can't be sent by the composer as a message. For
    // those we rely on local echo giving the impression of things changing, and expect them
    // to be quick.

    const simpleSendableEvents = [_event.EventType.Sticker, _event.EventType.RoomMessage, _event.EventType.RoomMessageEncrypted];
    if (!simpleSendableEvents.includes(this.props.mxEvent.getType())) return false; // Default case

    return true;
  }

  get shouldShowSentReceipt() {
    // If we're not even eligible, don't show the receipt.
    if (!this.isEligibleForSpecialReceipt) return false; // We only show the 'sent' receipt on the last successful event.

    if (!this.props.lastSuccessful) return false; // Check to make sure the sending state is appropriate. A null/undefined send status means
    // that the message is 'sent', so we're just double checking that it's explicitly not sent.

    if (this.props.eventSendStatus && this.props.eventSendStatus !== 'sent') return false; // If anyone has read the event besides us, we don't want to show a sent receipt.

    const receipts = this.props.readReceipts || [];

    const myUserId = _MatrixClientPeg.MatrixClientPeg.get().getUserId();

    if (receipts.some(r => r.userId !== myUserId)) return false; // Finally, we should show a receipt.

    return true;
  }

  get shouldShowSendingReceipt() {
    // If we're not even eligible, don't show the receipt.
    if (!this.isEligibleForSpecialReceipt) return false; // Check the event send status to see if we are pending. Null/undefined status means the
    // message was sent, so check for that and 'sent' explicitly.

    if (!this.props.eventSendStatus || this.props.eventSendStatus === 'sent') return false; // Default to showing - there's no other event properties/behaviours we care about at
    // this point.

    return true;
  } // TODO: [REACT-WARNING] Move into constructor
  // eslint-disable-next-line


  UNSAFE_componentWillMount() {
    this.verifyEvent(this.props.mxEvent);
  }

  componentDidMount() {
    this.suppressReadReceiptAnimation = false;
    const client = this.context;

    if (!this.props.forExport) {
      client.on("deviceVerificationChanged", this.onDeviceVerificationChanged);
      client.on("userTrustStatusChanged", this.onUserVerificationChanged);
      this.props.mxEvent.on("Event.decrypted", this.onDecrypted);

      if (this.props.showReactions) {
        this.props.mxEvent.on("Event.relationsCreated", this.onReactionsCreated);
      }

      if (this.shouldShowSentReceipt || this.shouldShowSendingReceipt) {
        client.on("Room.receipt", this.onRoomReceipt);
        this.isListeningForReceipts = true;
      }
    }

    if (_SettingsStore.default.getValue("feature_thread")) {
      this.props.mxEvent.once(_thread.ThreadEvent.Ready, this.updateThread);
      this.props.mxEvent.on(_thread.ThreadEvent.Update, this.updateThread);
    }

    const room = this.context.getRoom(this.props.mxEvent.getRoomId());
    room === null || room === void 0 ? void 0 : room.on(_thread.ThreadEvent.New, this.onNewThread);
  }

  // TODO: [REACT-WARNING] Replace with appropriate lifecycle event
  // eslint-disable-next-line
  UNSAFE_componentWillReceiveProps(nextProps) {
    // re-check the sender verification as outgoing events progress through
    // the send process.
    if (nextProps.eventSendStatus !== this.props.eventSendStatus) {
      this.verifyEvent(nextProps.mxEvent);
    }
  }

  shouldComponentUpdate(nextProps, nextState, nextContext) {
    if ((0, _objects.objectHasDiff)(this.state, nextState)) {
      return true;
    }

    return !this.propsEqual(this.props, nextProps);
  }

  componentWillUnmount() {
    const client = this.context;
    client.removeListener("deviceVerificationChanged", this.onDeviceVerificationChanged);
    client.removeListener("userTrustStatusChanged", this.onUserVerificationChanged);
    client.removeListener("Room.receipt", this.onRoomReceipt);
    this.isListeningForReceipts = false;
    this.props.mxEvent.removeListener("Event.decrypted", this.onDecrypted);

    if (this.props.showReactions) {
      this.props.mxEvent.removeListener("Event.relationsCreated", this.onReactionsCreated);
    }

    if (_SettingsStore.default.getValue("feature_thread")) {
      this.props.mxEvent.off(_thread.ThreadEvent.Ready, this.updateThread);
      this.props.mxEvent.off(_thread.ThreadEvent.Update, this.updateThread);
    }

    const room = this.context.getRoom(this.props.mxEvent.getRoomId());
    room === null || room === void 0 ? void 0 : room.off(_thread.ThreadEvent.New, this.onNewThread);
  }

  componentDidUpdate(prevProps, prevState, snapshot) {
    // If we're not listening for receipts and expect to be, register a listener.
    if (!this.isListeningForReceipts && (this.shouldShowSentReceipt || this.shouldShowSendingReceipt)) {
      this.context.on("Room.receipt", this.onRoomReceipt);
      this.isListeningForReceipts = true;
    }
  }

  get thread() {
    if (!_SettingsStore.default.getValue("feature_thread")) {
      return null;
    }
    /**
     * Accessing the threads value through the room due to a race condition
     * that will be solved when there are proper backend support for threads
     * We currently have no reliable way to discover than an event is a thread
     * when we are at the sync stage
     */


    const room = _MatrixClientPeg.MatrixClientPeg.get().getRoom(this.props.mxEvent.getRoomId());

    const thread = room === null || room === void 0 ? void 0 : room.threads.get(this.props.mxEvent.getId());

    if (!thread || thread.length === 0) {
      return null;
    }

    return thread;
  }

  renderThreadPanelSummary() {
    if (!this.thread) {
      return null;
    }

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_ThreadPanel_replies"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_ThreadPanel_repliesSummary"
    }, this.thread.length), this.renderThreadLastMessagePreview());
  }

  renderThreadLastMessagePreview() {
    if (!this.thread) {
      return null;
    }

    const [lastEvent] = this.thread.events.filter(event => event.isThreadRelation).slice(-1);

    const threadMessagePreview = _MessagePreviewStore.MessagePreviewStore.instance.generatePreviewForEvent(lastEvent);

    if (!threadMessagePreview || !lastEvent.sender) {
      return null;
    }

    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_MemberAvatar.default, {
      member: lastEvent.sender,
      width: 24,
      height: 24,
      className: "mx_ThreadInfo_avatar"
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_ThreadInfo_content"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_ThreadInfo_message-preview"
    }, threadMessagePreview)));
  }

  renderThreadInfo() {
    if (!this.thread) {
      return null;
    }

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_ThreadInfo",
      onClick: () => {
        (0, _threads.dispatchShowThreadEvent)(this.props.mxEvent);
      }
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_ThreadInfo_threads-amount"
    }, (0, _languageHandler._t)("%(count)s reply", {
      count: this.thread.length
    })), this.renderThreadLastMessagePreview());
  }

  async verifyEvent(mxEvent) {
    if (!mxEvent.isEncrypted()) {
      return;
    }

    const encryptionInfo = this.context.getEventEncryptionInfo(mxEvent);
    const senderId = mxEvent.getSender();
    const userTrust = this.context.checkUserTrust(senderId);

    if (encryptionInfo.mismatchedSender) {
      // something definitely wrong is going on here
      this.setState({
        verified: _E2EIcon.E2EState.Warning
      }, this.props.onHeightChanged); // Decryption may have caused a change in size

      return;
    }

    if (!userTrust.isCrossSigningVerified()) {
      // user is not verified, so default to everything is normal
      this.setState({
        verified: _E2EIcon.E2EState.Normal
      }, this.props.onHeightChanged); // Decryption may have caused a change in size

      return;
    }

    const eventSenderTrust = encryptionInfo.sender && this.context.checkDeviceTrust(senderId, encryptionInfo.sender.deviceId);

    if (!eventSenderTrust) {
      this.setState({
        verified: _E2EIcon.E2EState.Unknown
      }, this.props.onHeightChanged); // Decryption may have caused a change in size

      return;
    }

    if (!eventSenderTrust.isVerified()) {
      this.setState({
        verified: _E2EIcon.E2EState.Warning
      }, this.props.onHeightChanged); // Decryption may have caused a change in size

      return;
    }

    if (!encryptionInfo.authenticated) {
      this.setState({
        verified: _E2EIcon.E2EState.Unauthenticated
      }, this.props.onHeightChanged); // Decryption may have caused a change in size

      return;
    }

    this.setState({
      verified: _E2EIcon.E2EState.Verified
    }, this.props.onHeightChanged); // Decryption may have caused a change in size
  }

  propsEqual(objA, objB) {
    const keysA = Object.keys(objA);
    const keysB = Object.keys(objB);

    if (keysA.length !== keysB.length) {
      return false;
    }

    for (let i = 0; i < keysA.length; i++) {
      const key = keysA[i];

      if (!objB.hasOwnProperty(key)) {
        return false;
      } // need to deep-compare readReceipts


      if (key === 'readReceipts') {
        const rA = objA[key];
        const rB = objB[key];

        if (rA === rB) {
          continue;
        }

        if (!rA || !rB) {
          return false;
        }

        if (rA.length !== rB.length) {
          return false;
        }

        for (let j = 0; j < rA.length; j++) {
          if (rA[j].userId !== rB[j].userId) {
            return false;
          } // one has a member set and the other doesn't?


          if (rA[j].roomMember !== rB[j].roomMember) {
            return false;
          }
        }
      } else {
        if (objA[key] !== objB[key]) {
          return false;
        }
      }
    }

    return true;
  }

  shouldHighlight() {
    if (this.props.forExport) return false;
    const actions = this.context.getPushActionsForEvent(this.props.mxEvent.replacingEvent() || this.props.mxEvent);

    if (!actions || !actions.tweaks) {
      return false;
    } // don't show self-highlights from another of our clients


    if (this.props.mxEvent.getSender() === this.context.credentials.userId) {
      return false;
    }

    return actions.tweaks.highlight;
  }

  getReadAvatars() {
    if (this.shouldShowSentReceipt || this.shouldShowSendingReceipt) {
      return /*#__PURE__*/_react.default.createElement(SentReceipt, {
        messageState: this.props.mxEvent.getAssociatedStatus()
      });
    }

    const MAX_READ_AVATARS = this.props.layout == _Layout.Layout.Bubble ? 2 : 5; // return early if there are no read receipts

    if (!this.props.readReceipts || this.props.readReceipts.length === 0) {
      // We currently must include `mx_EventTile_readAvatars` in the DOM
      // of all events, as it is the positioned parent of the animated
      // read receipts. We can't let it unmount when a receipt moves
      // events, so for now we mount it for all events. Without it, the
      // animation will start from the top of the timeline (because it
      // lost its container).
      // See also https://github.com/vector-im/element-web/issues/17561
      return /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_EventTile_msgOption"
      }, /*#__PURE__*/_react.default.createElement("span", {
        className: "mx_EventTile_readAvatars"
      }));
    }

    const avatars = [];
    const receiptOffset = 15;
    let left = 0;
    const receipts = this.props.readReceipts;

    for (let i = 0; i < receipts.length; ++i) {
      const receipt = receipts[i];
      let hidden = true;

      if (i < MAX_READ_AVATARS || this.state.allReadAvatars) {
        hidden = false;
      } // TODO: we keep the extra read avatars in the dom to make animation simpler
      // we could optimise this to reduce the dom size.
      // If hidden, set offset equal to the offset of the final visible avatar or
      // else set it proportional to index


      left = (hidden ? MAX_READ_AVATARS - 1 : i) * -receiptOffset;
      const userId = receipt.userId;
      let readReceiptInfo;

      if (this.props.readReceiptMap) {
        readReceiptInfo = this.props.readReceiptMap[userId];

        if (!readReceiptInfo) {
          readReceiptInfo = {};
          this.props.readReceiptMap[userId] = readReceiptInfo;
        }
      } // add to the start so the most recent is on the end (ie. ends up rightmost)


      avatars.unshift( /*#__PURE__*/_react.default.createElement(_ReadReceiptMarker.default, {
        key: userId,
        member: receipt.roomMember,
        fallbackUserId: userId,
        leftOffset: left,
        hidden: hidden,
        readReceiptInfo: readReceiptInfo,
        checkUnmounting: this.props.checkUnmounting,
        suppressAnimation: this.suppressReadReceiptAnimation,
        onClick: this.toggleAllReadAvatars,
        timestamp: receipt.ts,
        showTwelveHour: this.props.isTwelveHour
      }));
    }

    let remText;

    if (!this.state.allReadAvatars) {
      const remainder = receipts.length - MAX_READ_AVATARS;

      if (remainder > 0) {
        remText = /*#__PURE__*/_react.default.createElement("span", {
          className: "mx_EventTile_readAvatarRemainder",
          onClick: this.toggleAllReadAvatars,
          style: {
            right: "calc(" + (0, _units.toRem)(-left) + " + " + receiptOffset + "px)"
          },
          "aria-live": "off"
        }, remainder, "+");
      }
    }

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_EventTile_msgOption"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_EventTile_readAvatars"
    }, remText, avatars));
  }

  renderE2EPadlock() {
    const ev = this.props.mxEvent; // event could not be decrypted

    if (ev.getContent().msgtype === 'm.bad.encrypted') {
      return /*#__PURE__*/_react.default.createElement(E2ePadlockUndecryptable, null);
    } // event is encrypted, display padlock corresponding to whether or not it is verified


    if (ev.isEncrypted()) {
      if (this.state.verified === _E2EIcon.E2EState.Normal) {
        return; // no icon if we've not even cross-signed the user
      } else if (this.state.verified === _E2EIcon.E2EState.Verified) {
        return; // no icon for verified
      } else if (this.state.verified === _E2EIcon.E2EState.Unauthenticated) {
        return /*#__PURE__*/_react.default.createElement(E2ePadlockUnauthenticated, null);
      } else if (this.state.verified === _E2EIcon.E2EState.Unknown) {
        return /*#__PURE__*/_react.default.createElement(E2ePadlockUnknown, null);
      } else {
        return /*#__PURE__*/_react.default.createElement(E2ePadlockUnverified, null);
      }
    }

    if (this.context.isRoomEncrypted(ev.getRoomId())) {
      // else if room is encrypted
      // and event is being encrypted or is not_sent (Unknown Devices/Network Error)
      if (ev.status === _event2.EventStatus.ENCRYPTING) {
        return;
      }

      if (ev.status === _event2.EventStatus.NOT_SENT) {
        return;
      }

      if (ev.isState()) {
        return; // we expect this to be unencrypted
      } // if the event is not encrypted, but it's an e2e room, show the open padlock


      return /*#__PURE__*/_react.default.createElement(E2ePadlockUnencrypted, null);
    } // no padlock needed


    return null;
  }

  render() {
    var _room$findThreadForEv;

    const msgtype = this.props.mxEvent.getContent().msgtype;
    const eventType = this.props.mxEvent.getType();
    const {
      tileHandler,
      isBubbleMessage,
      isInfoMessage,
      isLeftAlignedBubbleMessage
    } = (0, _EventUtils.getEventDisplayInfo)(this.props.mxEvent);
    const {
      isQuoteExpanded
    } = this.state; // This shouldn't happen: the caller should check we support this type
    // before trying to instantiate us

    if (!tileHandler) {
      const {
        mxEvent
      } = this.props;

      _logger.logger.warn(`Event type not supported: type:${eventType} isState:${mxEvent.isState()}`);

      return /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_EventTile mx_EventTile_info mx_MNoticeBody"
      }, /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_EventTile_line"
      }, (0, _languageHandler._t)('This event could not be displayed')));
    }

    const EventTileType = sdk.getComponent(tileHandler);

    const isProbablyMedia = _MediaEventHelper.MediaEventHelper.isEligible(this.props.mxEvent);

    const lineClasses = (0, _classnames.default)({
      mx_EventTile_line: true,
      mx_EventTile_mediaLine: isProbablyMedia
    });
    const isSending = ['sending', 'queued', 'encrypting'].indexOf(this.props.eventSendStatus) !== -1;
    const isRedacted = isMessageEvent(this.props.mxEvent) && this.props.isRedacted;
    const isEncryptionFailure = this.props.mxEvent.isDecryptionFailure();
    const isEditing = !!this.props.editState;
    const classes = (0, _classnames.default)({
      mx_EventTile_bubbleContainer: isBubbleMessage,
      mx_EventTile_leftAlignedBubble: isLeftAlignedBubbleMessage,
      mx_EventTile: true,
      mx_EventTile_isEditing: isEditing,
      mx_EventTile_info: isInfoMessage,
      mx_EventTile_12hr: this.props.isTwelveHour,
      // Note: we keep the `sending` state class for tests, not for our styles
      mx_EventTile_sending: !isEditing && isSending,
      mx_EventTile_highlight: this.props.tileShape === TileShape.Notif ? false : this.shouldHighlight(),
      mx_EventTile_selected: this.props.isSelectedEvent,
      mx_EventTile_continuation: (this.props.tileShape ? '' : this.props.continuation) || eventType === _event.EventType.CallInvite,
      mx_EventTile_last: this.props.last,
      mx_EventTile_lastInSection: this.props.lastInSection,
      mx_EventTile_contextual: this.props.contextual,
      mx_EventTile_actionBarFocused: this.state.actionBarFocused,
      mx_EventTile_verified: !isBubbleMessage && this.state.verified === _E2EIcon.E2EState.Verified,
      mx_EventTile_unverified: !isBubbleMessage && this.state.verified === _E2EIcon.E2EState.Warning,
      mx_EventTile_unknown: !isBubbleMessage && this.state.verified === _E2EIcon.E2EState.Unknown,
      mx_EventTile_bad: isEncryptionFailure,
      mx_EventTile_emote: msgtype === 'm.emote',
      mx_EventTile_noSender: this.props.hideSender,
      mx_EventTile_clamp: this.props.tileShape === TileShape.ThreadPanel
    }); // If the tile is in the Sending state, don't speak the message.

    const ariaLive = this.props.eventSendStatus !== null ? 'off' : undefined;
    let permalink = "#";

    if (this.props.permalinkCreator) {
      permalink = this.props.permalinkCreator.forEvent(this.props.mxEvent.getId());
    } // we can't use local echoes as scroll tokens, because their event IDs change.
    // Local echos have a send "status".


    const scrollToken = this.props.mxEvent.status ? undefined : this.props.mxEvent.getId();
    let avatar;
    let sender;
    let avatarSize;
    let needsSenderProfile;

    if (this.props.tileShape === TileShape.Notif) {
      avatarSize = 24;
      needsSenderProfile = true;
    } else if (tileHandler === 'messages.RoomCreate' || isBubbleMessage) {
      avatarSize = 0;
      needsSenderProfile = false;
    } else if (isInfoMessage) {
      // a small avatar, with no sender profile, for
      // joins/parts/etc
      avatarSize = 14;
      needsSenderProfile = false;
    } else if (this.props.layout == _Layout.Layout.IRC) {
      avatarSize = 14;
      needsSenderProfile = true;
    } else if (this.props.continuation && this.props.tileShape !== TileShape.FileGrid || eventType === _event.EventType.CallInvite) {
      // no avatar or sender profile for continuation messages and call tiles
      avatarSize = 0;
      needsSenderProfile = false;
    } else {
      avatarSize = 30;
      needsSenderProfile = true;
    }

    if (this.props.mxEvent.sender && avatarSize) {
      let member; // set member to receiver (target) if it is a 3PID invite
      // so that the correct avatar is shown as the text is
      // `$target accepted the invitation for $email`

      if (this.props.mxEvent.getContent().third_party_invite) {
        member = this.props.mxEvent.target;
      } else {
        member = this.props.mxEvent.sender;
      }

      avatar = /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_EventTile_avatar"
      }, /*#__PURE__*/_react.default.createElement(_MemberAvatar.default, {
        member: member,
        width: avatarSize,
        height: avatarSize,
        viewUserOnClick: true
      }));
    }

    if (needsSenderProfile && this.props.hideSender !== true) {
      if (!this.props.tileShape || this.props.tileShape === TileShape.Thread) {
        sender = /*#__PURE__*/_react.default.createElement(_SenderProfile.default, {
          onClick: this.onSenderProfileClick,
          mxEvent: this.props.mxEvent,
          enableFlair: this.props.enableFlair
        });
      } else {
        sender = /*#__PURE__*/_react.default.createElement(_SenderProfile.default, {
          mxEvent: this.props.mxEvent,
          enableFlair: this.props.enableFlair
        });
      }
    }

    const showMessageActionBar = !isEditing && !this.props.forExport;
    const actionBar = showMessageActionBar ? /*#__PURE__*/_react.default.createElement(_MessageActionBar.default, {
      mxEvent: this.props.mxEvent,
      reactions: this.state.reactions,
      permalinkCreator: this.props.permalinkCreator,
      getTile: this.getTile,
      getReplyChain: this.getReplyChain,
      onFocusChange: this.onActionBarFocusChange,
      isQuoteExpanded: isQuoteExpanded,
      toggleThreadExpanded: () => this.setQuoteExpanded(!isQuoteExpanded)
    }) : undefined;
    const showTimestamp = this.props.mxEvent.getTs() && (this.props.alwaysShowTimestamps || this.props.last || this.state.hover || this.state.actionBarFocused);

    const room = _MatrixClientPeg.MatrixClientPeg.get().getRoom(this.props.mxEvent.getRoomId());

    const thread = room === null || room === void 0 ? void 0 : (_room$findThreadForEv = room.findThreadForEvent) === null || _room$findThreadForEv === void 0 ? void 0 : _room$findThreadForEv.call(room, this.props.mxEvent); // Thread panel shows the timestamp of the last reply in that thread

    const ts = this.props.tileShape !== TileShape.ThreadPanel ? this.props.mxEvent.getTs() : thread === null || thread === void 0 ? void 0 : thread.lastReply.getTs();
    const timestamp = showTimestamp && ts ? /*#__PURE__*/_react.default.createElement(_MessageTimestamp.default, {
      showRelative: this.props.tileShape === TileShape.ThreadPanel,
      showTwelveHour: this.props.isTwelveHour,
      ts: ts
    }) : null;

    const keyRequestHelpText = /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_EventTile_keyRequestInfo_tooltip_contents"
    }, /*#__PURE__*/_react.default.createElement("p", null, this.state.previouslyRequestedKeys ? (0, _languageHandler._t)('Your key share request has been sent - please check your other sessions ' + 'for key share requests.') : (0, _languageHandler._t)('Key share requests are sent to your other sessions automatically. If you ' + 'rejected or dismissed the key share request on your other sessions, click ' + 'here to request the keys for this session again.')), /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)('If your other sessions do not have the key for this message you will not ' + 'be able to decrypt them.')));

    const keyRequestInfoContent = this.state.previouslyRequestedKeys ? (0, _languageHandler._t)('Key request sent.') : (0, _languageHandler._t)('<requestLink>Re-request encryption keys</requestLink> from your other sessions.', {}, {
      'requestLink': sub => /*#__PURE__*/_react.default.createElement("a", {
        onClick: this.onRequestKeysClick
      }, sub)
    });
    const keyRequestInfo = isEncryptionFailure && !isRedacted ? /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_EventTile_keyRequestInfo"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_EventTile_keyRequestInfo_text"
    }, keyRequestInfoContent), /*#__PURE__*/_react.default.createElement(_TooltipButton.default, {
      helpText: keyRequestHelpText
    })) : null;
    let reactionsRow;

    if (!isRedacted) {
      reactionsRow = /*#__PURE__*/_react.default.createElement(_ReactionsRow.default, {
        mxEvent: this.props.mxEvent,
        reactions: this.state.reactions
      });
    }

    const linkedTimestamp = /*#__PURE__*/_react.default.createElement("a", {
      href: permalink,
      onClick: this.onPermalinkClicked,
      "aria-label": (0, _DateUtils.formatTime)(new Date(this.props.mxEvent.getTs()), this.props.isTwelveHour)
    }, timestamp);

    const useIRCLayout = this.props.layout == _Layout.Layout.IRC;
    const groupTimestamp = !useIRCLayout ? linkedTimestamp : null;
    const ircTimestamp = useIRCLayout ? linkedTimestamp : null;
    const groupPadlock = !useIRCLayout && !isBubbleMessage && this.renderE2EPadlock();
    const ircPadlock = useIRCLayout && !isBubbleMessage && this.renderE2EPadlock();
    let msgOption;

    if (this.props.showReadReceipts) {
      const readAvatars = this.getReadAvatars();
      msgOption = readAvatars;
    }

    const replyChain = haveTileForEvent(this.props.mxEvent) && _ReplyChain.default.hasReply(this.props.mxEvent) ? /*#__PURE__*/_react.default.createElement(_ReplyChain.default, {
      parentEv: this.props.mxEvent,
      onHeightChanged: this.props.onHeightChanged,
      ref: this.replyChain,
      forExport: this.props.forExport,
      permalinkCreator: this.props.permalinkCreator,
      layout: this.props.layout,
      alwaysShowTimestamps: this.props.alwaysShowTimestamps || this.state.hover,
      isQuoteExpanded: isQuoteExpanded,
      setQuoteExpanded: this.setQuoteExpanded
    }) : null;

    switch (this.props.tileShape) {
      case TileShape.Notif:
        {
          const room = this.context.getRoom(this.props.mxEvent.getRoomId());
          return /*#__PURE__*/_react.default.createElement(this.props.as || "li", {
            "className": classes,
            "aria-live": ariaLive,
            "aria-atomic": true,
            "data-scroll-tokens": scrollToken
          }, [/*#__PURE__*/_react.default.createElement("div", {
            className: "mx_EventTile_roomName",
            key: "mx_EventTile_roomName"
          }, /*#__PURE__*/_react.default.createElement(_RoomAvatar.default, {
            room: room,
            width: 28,
            height: 28
          }), /*#__PURE__*/_react.default.createElement("a", {
            href: permalink,
            onClick: this.onPermalinkClicked
          }, room ? room.name : '')), /*#__PURE__*/_react.default.createElement("div", {
            className: "mx_EventTile_senderDetails",
            key: "mx_EventTile_senderDetails"
          }, avatar, /*#__PURE__*/_react.default.createElement("a", {
            href: permalink,
            onClick: this.onPermalinkClicked
          }, sender, timestamp)), /*#__PURE__*/_react.default.createElement("div", {
            className: lineClasses,
            key: "mx_EventTile_line"
          }, /*#__PURE__*/_react.default.createElement(EventTileType, {
            ref: this.tile,
            mxEvent: this.props.mxEvent,
            highlights: this.props.highlights,
            highlightLink: this.props.highlightLink,
            showUrlPreview: this.props.showUrlPreview,
            onHeightChanged: this.props.onHeightChanged,
            tileShape: this.props.tileShape,
            editState: this.props.editState,
            getRelationsForEvent: this.props.getRelationsForEvent
          }))]);
        }

      case TileShape.Thread:
        {
          const room = this.context.getRoom(this.props.mxEvent.getRoomId());
          return /*#__PURE__*/_react.default.createElement(this.props.as || "li", {
            "className": classes,
            "aria-live": ariaLive,
            "aria-atomic": true,
            "data-scroll-tokens": scrollToken,
            "data-has-reply": !!replyChain,
            "onMouseEnter": () => this.setState({
              hover: true
            }),
            "onMouseLeave": () => this.setState({
              hover: false
            })
          }, [/*#__PURE__*/_react.default.createElement("div", {
            className: "mx_EventTile_roomName",
            key: "mx_EventTile_roomName"
          }, /*#__PURE__*/_react.default.createElement(_RoomAvatar.default, {
            room: room,
            width: 28,
            height: 28
          }), /*#__PURE__*/_react.default.createElement("a", {
            href: permalink,
            onClick: this.onPermalinkClicked
          }, room ? room.name : '')), /*#__PURE__*/_react.default.createElement("div", {
            className: "mx_EventTile_senderDetails",
            key: "mx_EventTile_senderDetails"
          }, avatar, /*#__PURE__*/_react.default.createElement("a", {
            href: permalink,
            onClick: this.onPermalinkClicked
          }, sender)), /*#__PURE__*/_react.default.createElement("div", {
            className: lineClasses,
            key: "mx_EventTile_line"
          }, replyChain, /*#__PURE__*/_react.default.createElement(EventTileType, {
            ref: this.tile,
            mxEvent: this.props.mxEvent,
            highlights: this.props.highlights,
            highlightLink: this.props.highlightLink,
            showUrlPreview: this.props.showUrlPreview,
            onHeightChanged: this.props.onHeightChanged,
            tileShape: this.props.tileShape,
            editState: this.props.editState,
            replacingEventId: this.props.replacingEventId,
            getRelationsForEvent: this.props.getRelationsForEvent
          }), actionBar, timestamp), reactionsRow]);
        }

      case TileShape.ThreadPanel:
        {
          var _this$props$mxEvent2, _this$props$mxEvent2$;

          const isOwnEvent = ((_this$props$mxEvent2 = this.props.mxEvent) === null || _this$props$mxEvent2 === void 0 ? void 0 : (_this$props$mxEvent2$ = _this$props$mxEvent2.sender) === null || _this$props$mxEvent2$ === void 0 ? void 0 : _this$props$mxEvent2$.userId) === _MatrixClientPeg.MatrixClientPeg.get().getUserId(); // tab-index=-1 to allow it to be focusable but do not add tab stop for it, primarily for screen readers


          return /*#__PURE__*/_react.default.createElement(this.props.as || "li", {
            "ref": this.ref,
            "className": classes,
            "tabIndex": -1,
            "aria-live": ariaLive,
            "aria-atomic": "true",
            "data-scroll-tokens": scrollToken,
            "data-layout": this.props.layout,
            "data-shape": this.props.tileShape,
            "data-self": isOwnEvent,
            "data-has-reply": !!replyChain,
            "onMouseEnter": () => this.setState({
              hover: true
            }),
            "onMouseLeave": () => this.setState({
              hover: false
            })
          }, /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, sender, avatar, /*#__PURE__*/_react.default.createElement("div", {
            className: lineClasses,
            onClick: () => (0, _threads.dispatchShowThreadEvent)(this.props.mxEvent),
            key: "mx_EventTile_line"
          }, linkedTimestamp, this.renderE2EPadlock(), /*#__PURE__*/_react.default.createElement("div", {
            className: "mx_EventTile_body"
          }, _MessagePreviewStore.MessagePreviewStore.instance.generatePreviewForEvent(this.props.mxEvent)), this.renderThreadPanelSummary()), /*#__PURE__*/_react.default.createElement(_Toolbar.default, {
            className: "mx_MessageActionBar",
            "aria-label": (0, _languageHandler._t)("Message Actions"),
            "aria-live": "off"
          }, /*#__PURE__*/_react.default.createElement(_RovingAccessibleTooltipButton.RovingAccessibleTooltipButton, {
            className: "mx_MessageActionBar_maskButton mx_MessageActionBar_threadButton",
            title: (0, _languageHandler._t)("Reply in thread"),
            onClick: () => (0, _threads.dispatchShowThreadEvent)(this.props.mxEvent),
            key: "thread"
          }), /*#__PURE__*/_react.default.createElement(_ThreadListContextMenu.default, {
            mxEvent: this.props.mxEvent,
            permalinkCreator: this.props.permalinkCreator,
            onMenuToggle: this.onActionBarFocusChange
          })), msgOption));
        }

      case TileShape.FileGrid:
        {
          return /*#__PURE__*/_react.default.createElement(this.props.as || "li", {
            "className": classes,
            "aria-live": ariaLive,
            "aria-atomic": true,
            "data-scroll-tokens": scrollToken
          }, [/*#__PURE__*/_react.default.createElement("div", {
            className: lineClasses,
            key: "mx_EventTile_line"
          }, /*#__PURE__*/_react.default.createElement(EventTileType, {
            ref: this.tile,
            mxEvent: this.props.mxEvent,
            highlights: this.props.highlights,
            highlightLink: this.props.highlightLink,
            showUrlPreview: this.props.showUrlPreview,
            tileShape: this.props.tileShape,
            onHeightChanged: this.props.onHeightChanged,
            editState: this.props.editState,
            getRelationsForEvent: this.props.getRelationsForEvent
          })), /*#__PURE__*/_react.default.createElement("a", {
            className: "mx_EventTile_senderDetailsLink",
            key: "mx_EventTile_senderDetailsLink",
            href: permalink,
            onClick: this.onPermalinkClicked
          }, /*#__PURE__*/_react.default.createElement("div", {
            className: "mx_EventTile_senderDetails"
          }, sender, timestamp))]);
        }

      default:
        {
          var _this$props$mxEvent3, _this$props$mxEvent3$;

          const isOwnEvent = ((_this$props$mxEvent3 = this.props.mxEvent) === null || _this$props$mxEvent3 === void 0 ? void 0 : (_this$props$mxEvent3$ = _this$props$mxEvent3.sender) === null || _this$props$mxEvent3$ === void 0 ? void 0 : _this$props$mxEvent3$.userId) === _MatrixClientPeg.MatrixClientPeg.get().getUserId(); // tab-index=-1 to allow it to be focusable but do not add tab stop for it, primarily for screen readers


          return /*#__PURE__*/_react.default.createElement(this.props.as || "li", {
            "ref": this.ref,
            "className": classes,
            "tabIndex": -1,
            "aria-live": ariaLive,
            "aria-atomic": "true",
            "data-scroll-tokens": scrollToken,
            "data-layout": this.props.layout,
            "data-self": isOwnEvent,
            "data-has-reply": !!replyChain,
            "onMouseEnter": () => this.setState({
              hover: true
            }),
            "onMouseLeave": () => this.setState({
              hover: false
            })
          }, /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, ircTimestamp, sender, ircPadlock, avatar, /*#__PURE__*/_react.default.createElement("div", {
            className: lineClasses,
            key: "mx_EventTile_line"
          }, groupTimestamp, groupPadlock, replyChain, /*#__PURE__*/_react.default.createElement(EventTileType, {
            ref: this.tile,
            mxEvent: this.props.mxEvent,
            forExport: this.props.forExport,
            replacingEventId: this.props.replacingEventId,
            editState: this.props.editState,
            highlights: this.props.highlights,
            highlightLink: this.props.highlightLink,
            showUrlPreview: this.props.showUrlPreview,
            permalinkCreator: this.props.permalinkCreator,
            onHeightChanged: this.props.onHeightChanged,
            callEventGrouper: this.props.callEventGrouper,
            getRelationsForEvent: this.props.getRelationsForEvent
          }), keyRequestInfo, actionBar, this.props.layout === _Layout.Layout.IRC && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, reactionsRow, this.renderThreadInfo())), this.props.layout !== _Layout.Layout.IRC && /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, reactionsRow, this.renderThreadInfo()), msgOption));
        }
    }
  }

}, (0, _defineProperty2.default)(_class2, "defaultProps", {
  // no-op function because onHeightChanged is optional yet some sub-components assume its existence
  onHeightChanged: function () {},
  forExport: false,
  layout: _Layout.Layout.Group
}), (0, _defineProperty2.default)(_class2, "contextType", _MatrixClientContext.default), _temp)) || _class);
exports.default = EventTile;
// XXX this'll eventually be dynamic based on the fields once we have extensible event types
const messageTypes = ['m.room.message', 'm.sticker'];

function isMessageEvent(ev) {
  return messageTypes.includes(ev.getType());
}

function haveTileForEvent(e, showHiddenEvents) {
  // Only messages have a tile (black-rectangle) if redacted
  if (e.isRedacted() && !isMessageEvent(e)) return false; // No tile for replacement events since they update the original tile

  if (e.isRelation("m.replace")) return false;
  const handler = getHandlerTile(e);
  if (handler === undefined) return false;

  if (handler === 'messages.TextualEvent') {
    return (0, _TextForEvent.hasText)(e, showHiddenEvents);
  } else if (handler === 'messages.RoomCreate') {
    return Boolean(e.getContent()['predecessor']);
  } else {
    return true;
  }
}

function E2ePadlockUndecryptable(props) {
  return /*#__PURE__*/_react.default.createElement(E2ePadlock, (0, _extends2.default)({
    title: (0, _languageHandler._t)("This message cannot be decrypted"),
    icon: E2ePadlockIcon.Warning
  }, props));
}

function E2ePadlockUnverified(props) {
  return /*#__PURE__*/_react.default.createElement(E2ePadlock, (0, _extends2.default)({
    title: (0, _languageHandler._t)("Encrypted by an unverified session"),
    icon: E2ePadlockIcon.Warning
  }, props));
}

function E2ePadlockUnencrypted(props) {
  return /*#__PURE__*/_react.default.createElement(E2ePadlock, (0, _extends2.default)({
    title: (0, _languageHandler._t)("Unencrypted"),
    icon: E2ePadlockIcon.Warning
  }, props));
}

function E2ePadlockUnknown(props) {
  return /*#__PURE__*/_react.default.createElement(E2ePadlock, (0, _extends2.default)({
    title: (0, _languageHandler._t)("Encrypted by a deleted session"),
    icon: E2ePadlockIcon.Normal
  }, props));
}

function E2ePadlockUnauthenticated(props) {
  return /*#__PURE__*/_react.default.createElement(E2ePadlock, (0, _extends2.default)({
    title: (0, _languageHandler._t)("The authenticity of this encrypted message can't be guaranteed on this device."),
    icon: E2ePadlockIcon.Normal
  }, props));
}

var E2ePadlockIcon;

(function (E2ePadlockIcon) {
  E2ePadlockIcon["Normal"] = "normal";
  E2ePadlockIcon["Warning"] = "warning";
})(E2ePadlockIcon || (E2ePadlockIcon = {}));

class E2ePadlock extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onHoverStart", () => {
      this.setState({
        hover: true
      });
    });
    (0, _defineProperty2.default)(this, "onHoverEnd", () => {
      this.setState({
        hover: false
      });
    });
    this.state = {
      hover: false
    };
  }

  render() {
    let tooltip = null;

    if (this.state.hover) {
      tooltip = /*#__PURE__*/_react.default.createElement(_Tooltip.default, {
        className: "mx_EventTile_e2eIcon_tooltip",
        label: this.props.title
      });
    }

    const classes = `mx_EventTile_e2eIcon mx_EventTile_e2eIcon_${this.props.icon}`;
    return /*#__PURE__*/_react.default.createElement("div", {
      className: classes,
      onMouseEnter: this.onHoverStart,
      onMouseLeave: this.onHoverEnd
    }, tooltip);
  }

}

class SentReceipt extends _react.default.PureComponent {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onHoverStart", () => {
      this.setState({
        hover: true
      });
    });
    (0, _defineProperty2.default)(this, "onHoverEnd", () => {
      this.setState({
        hover: false
      });
    });
    this.state = {
      hover: false
    };
  }

  render() {
    const isSent = !this.props.messageState || this.props.messageState === 'sent';
    const isFailed = this.props.messageState === 'not_sent';
    const receiptClasses = (0, _classnames.default)({
      'mx_EventTile_receiptSent': isSent,
      'mx_EventTile_receiptSending': !isSent && !isFailed
    });
    let nonCssBadge = null;

    if (isFailed) {
      nonCssBadge = /*#__PURE__*/_react.default.createElement(_NotificationBadge.default, {
        notification: _StaticNotificationState.StaticNotificationState.RED_EXCLAMATION
      });
    }

    let tooltip = null;

    if (this.state.hover) {
      let label = (0, _languageHandler._t)("Sending your message...");

      if (this.props.messageState === 'encrypting') {
        label = (0, _languageHandler._t)("Encrypting your message...");
      } else if (isSent) {
        label = (0, _languageHandler._t)("Your message was sent");
      } else if (isFailed) {
        label = (0, _languageHandler._t)("Failed to send");
      } // The yOffset is somewhat arbitrary - it just brings the tooltip down to be more associated
      // with the read receipt.


      tooltip = /*#__PURE__*/_react.default.createElement(_Tooltip.default, {
        className: "mx_EventTile_readAvatars_receiptTooltip",
        label: label,
        yOffset: 20
      });
    }

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_EventTile_msgOption"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_EventTile_readAvatars"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: receiptClasses,
      onMouseEnter: this.onHoverStart,
      onMouseLeave: this.onHoverEnd
    }, nonCssBadge, tooltip)));
  }

}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3Jvb21zL0V2ZW50VGlsZS50c3giXSwibmFtZXMiOlsiZXZlbnRUaWxlVHlwZXMiLCJFdmVudFR5cGUiLCJSb29tTWVzc2FnZSIsIlN0aWNrZXIiLCJQT0xMX1NUQVJUX0VWRU5UX1RZUEUiLCJuYW1lIiwiS2V5VmVyaWZpY2F0aW9uQ2FuY2VsIiwiS2V5VmVyaWZpY2F0aW9uRG9uZSIsIkNhbGxJbnZpdGUiLCJzdGF0ZUV2ZW50VGlsZVR5cGVzIiwiUm9vbUVuY3J5cHRpb24iLCJSb29tQ2Fub25pY2FsQWxpYXMiLCJSb29tQ3JlYXRlIiwiUm9vbU1lbWJlciIsIlJvb21OYW1lIiwiUm9vbUF2YXRhciIsIlJvb21UaGlyZFBhcnR5SW52aXRlIiwiUm9vbUhpc3RvcnlWaXNpYmlsaXR5IiwiUm9vbVRvcGljIiwiUm9vbVBvd2VyTGV2ZWxzIiwiUm9vbVBpbm5lZEV2ZW50cyIsIlJvb21TZXJ2ZXJBY2wiLCJXSURHRVRfTEFZT1VUX0VWRU5UX1RZUEUiLCJSb29tVG9tYnN0b25lIiwiUm9vbUpvaW5SdWxlcyIsIlJvb21HdWVzdEFjY2VzcyIsInN0YXRlRXZlbnRTaW5ndWxhciIsIlNldCIsImV2VHlwZSIsIkFMTF9SVUxFX1RZUEVTIiwiZ2V0SGFuZGxlclRpbGUiLCJldiIsInR5cGUiLCJnZXRUeXBlIiwiY29udGVudCIsImdldENvbnRlbnQiLCJtc2d0eXBlIiwiTXNnVHlwZSIsIktleVZlcmlmaWNhdGlvblJlcXVlc3QiLCJjbGllbnQiLCJNYXRyaXhDbGllbnRQZWciLCJnZXQiLCJtZSIsImdldFVzZXJJZCIsImdldFNlbmRlciIsInRvIiwidW5kZWZpbmVkIiwiTUtleVZlcmlmaWNhdGlvbkNvbmNsdXNpb24iLCJzaG91bGRSZW5kZXIiLCJyZXF1ZXN0IiwiZ2V0UHJldkNvbnRlbnQiLCJXaWRnZXRUeXBlIiwiSklUU0kiLCJtYXRjaGVzIiwiaXNTdGF0ZSIsImhhcyIsImdldFN0YXRlS2V5IiwiVGlsZVNoYXBlIiwiRXZlbnRUaWxlIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiY29udGV4dCIsImNyZWF0ZVJlZiIsInRocmVhZCIsInNldFN0YXRlIiwiZm9yY2VVcGRhdGUiLCJpZCIsIm14RXZlbnQiLCJnZXRJZCIsInVwZGF0ZVRocmVhZCIsInJvb20iLCJnZXRSb29tIiwiZ2V0Um9vbUlkIiwib2ZmIiwiVGhyZWFkRXZlbnQiLCJOZXciLCJvbk5ld1RocmVhZCIsInRpbGVSb29tIiwic2hvdWxkU2hvd1NlbnRSZWNlaXB0Iiwic2hvdWxkU2hvd1NlbmRpbmdSZWNlaXB0IiwiaXNMaXN0ZW5pbmdGb3JSZWNlaXB0cyIsInJlbW92ZUxpc3RlbmVyIiwib25Sb29tUmVjZWlwdCIsInZlcmlmeUV2ZW50IiwidXNlcklkIiwiZGV2aWNlIiwiX3RydXN0U3RhdHVzIiwiYWxsUmVhZEF2YXRhcnMiLCJzdGF0ZSIsInRpbWVsaW5lUmVuZGVyaW5nVHlwZSIsImRpcyIsImRpc3BhdGNoIiwiYWN0aW9uIiwiQWN0aW9uIiwiQ29tcG9zZXJJbnNlcnQiLCJwcmV2aW91c2x5UmVxdWVzdGVkS2V5cyIsImNhbmNlbEFuZFJlc2VuZEV2ZW50Um9vbUtleVJlcXVlc3QiLCJlIiwicHJldmVudERlZmF1bHQiLCJWaWV3Um9vbSIsImV2ZW50X2lkIiwiaGlnaGxpZ2h0ZWQiLCJyb29tX2lkIiwiZm9jdXNlZCIsImFjdGlvbkJhckZvY3VzZWQiLCJ0aWxlIiwiY3VycmVudCIsInJlcGx5Q2hhaW4iLCJzaG93UmVhY3Rpb25zIiwiZ2V0UmVsYXRpb25zRm9yRXZlbnQiLCJldmVudElkIiwicmVsYXRpb25UeXBlIiwiZXZlbnRUeXBlIiwib25SZWFjdGlvbnNDcmVhdGVkIiwicmVhY3Rpb25zIiwiZ2V0UmVhY3Rpb25zIiwiZXhwYW5kZWQiLCJpc1F1b3RlRXhwYW5kZWQiLCJ2ZXJpZmllZCIsImhvdmVyIiwiZ2V0VGhyZWFkIiwic3VwcHJlc3NSZWFkUmVjZWlwdEFuaW1hdGlvbiIsImlzRWxpZ2libGVGb3JTcGVjaWFsUmVjZWlwdCIsInJlYWRSZWNlaXB0cyIsImxlbmd0aCIsIm15VXNlcklkIiwic2ltcGxlU2VuZGFibGVFdmVudHMiLCJSb29tTWVzc2FnZUVuY3J5cHRlZCIsImluY2x1ZGVzIiwibGFzdFN1Y2Nlc3NmdWwiLCJldmVudFNlbmRTdGF0dXMiLCJyZWNlaXB0cyIsInNvbWUiLCJyIiwiVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCIsImNvbXBvbmVudERpZE1vdW50IiwiZm9yRXhwb3J0Iiwib24iLCJvbkRldmljZVZlcmlmaWNhdGlvbkNoYW5nZWQiLCJvblVzZXJWZXJpZmljYXRpb25DaGFuZ2VkIiwib25EZWNyeXB0ZWQiLCJTZXR0aW5nc1N0b3JlIiwiZ2V0VmFsdWUiLCJvbmNlIiwiUmVhZHkiLCJVcGRhdGUiLCJVTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyIsIm5leHRQcm9wcyIsInNob3VsZENvbXBvbmVudFVwZGF0ZSIsIm5leHRTdGF0ZSIsIm5leHRDb250ZXh0IiwicHJvcHNFcXVhbCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwicHJldlN0YXRlIiwic25hcHNob3QiLCJ0aHJlYWRzIiwicmVuZGVyVGhyZWFkUGFuZWxTdW1tYXJ5IiwicmVuZGVyVGhyZWFkTGFzdE1lc3NhZ2VQcmV2aWV3IiwibGFzdEV2ZW50IiwiZXZlbnRzIiwiZmlsdGVyIiwiZXZlbnQiLCJpc1RocmVhZFJlbGF0aW9uIiwic2xpY2UiLCJ0aHJlYWRNZXNzYWdlUHJldmlldyIsIk1lc3NhZ2VQcmV2aWV3U3RvcmUiLCJpbnN0YW5jZSIsImdlbmVyYXRlUHJldmlld0ZvckV2ZW50Iiwic2VuZGVyIiwicmVuZGVyVGhyZWFkSW5mbyIsImNvdW50IiwiaXNFbmNyeXB0ZWQiLCJlbmNyeXB0aW9uSW5mbyIsImdldEV2ZW50RW5jcnlwdGlvbkluZm8iLCJzZW5kZXJJZCIsInVzZXJUcnVzdCIsImNoZWNrVXNlclRydXN0IiwibWlzbWF0Y2hlZFNlbmRlciIsIkUyRVN0YXRlIiwiV2FybmluZyIsIm9uSGVpZ2h0Q2hhbmdlZCIsImlzQ3Jvc3NTaWduaW5nVmVyaWZpZWQiLCJOb3JtYWwiLCJldmVudFNlbmRlclRydXN0IiwiY2hlY2tEZXZpY2VUcnVzdCIsImRldmljZUlkIiwiVW5rbm93biIsImlzVmVyaWZpZWQiLCJhdXRoZW50aWNhdGVkIiwiVW5hdXRoZW50aWNhdGVkIiwiVmVyaWZpZWQiLCJvYmpBIiwib2JqQiIsImtleXNBIiwiT2JqZWN0Iiwia2V5cyIsImtleXNCIiwiaSIsImtleSIsImhhc093blByb3BlcnR5IiwickEiLCJyQiIsImoiLCJyb29tTWVtYmVyIiwic2hvdWxkSGlnaGxpZ2h0IiwiYWN0aW9ucyIsImdldFB1c2hBY3Rpb25zRm9yRXZlbnQiLCJyZXBsYWNpbmdFdmVudCIsInR3ZWFrcyIsImNyZWRlbnRpYWxzIiwiaGlnaGxpZ2h0IiwiZ2V0UmVhZEF2YXRhcnMiLCJnZXRBc3NvY2lhdGVkU3RhdHVzIiwiTUFYX1JFQURfQVZBVEFSUyIsImxheW91dCIsIkxheW91dCIsIkJ1YmJsZSIsImF2YXRhcnMiLCJyZWNlaXB0T2Zmc2V0IiwibGVmdCIsInJlY2VpcHQiLCJoaWRkZW4iLCJyZWFkUmVjZWlwdEluZm8iLCJyZWFkUmVjZWlwdE1hcCIsInVuc2hpZnQiLCJjaGVja1VubW91bnRpbmciLCJ0b2dnbGVBbGxSZWFkQXZhdGFycyIsInRzIiwiaXNUd2VsdmVIb3VyIiwicmVtVGV4dCIsInJlbWFpbmRlciIsInJpZ2h0IiwicmVuZGVyRTJFUGFkbG9jayIsImlzUm9vbUVuY3J5cHRlZCIsInN0YXR1cyIsIkV2ZW50U3RhdHVzIiwiRU5DUllQVElORyIsIk5PVF9TRU5UIiwicmVuZGVyIiwidGlsZUhhbmRsZXIiLCJpc0J1YmJsZU1lc3NhZ2UiLCJpc0luZm9NZXNzYWdlIiwiaXNMZWZ0QWxpZ25lZEJ1YmJsZU1lc3NhZ2UiLCJsb2dnZXIiLCJ3YXJuIiwiRXZlbnRUaWxlVHlwZSIsInNkayIsImdldENvbXBvbmVudCIsImlzUHJvYmFibHlNZWRpYSIsIk1lZGlhRXZlbnRIZWxwZXIiLCJpc0VsaWdpYmxlIiwibGluZUNsYXNzZXMiLCJteF9FdmVudFRpbGVfbGluZSIsIm14X0V2ZW50VGlsZV9tZWRpYUxpbmUiLCJpc1NlbmRpbmciLCJpbmRleE9mIiwiaXNSZWRhY3RlZCIsImlzTWVzc2FnZUV2ZW50IiwiaXNFbmNyeXB0aW9uRmFpbHVyZSIsImlzRGVjcnlwdGlvbkZhaWx1cmUiLCJpc0VkaXRpbmciLCJlZGl0U3RhdGUiLCJjbGFzc2VzIiwibXhfRXZlbnRUaWxlX2J1YmJsZUNvbnRhaW5lciIsIm14X0V2ZW50VGlsZV9sZWZ0QWxpZ25lZEJ1YmJsZSIsIm14X0V2ZW50VGlsZSIsIm14X0V2ZW50VGlsZV9pc0VkaXRpbmciLCJteF9FdmVudFRpbGVfaW5mbyIsIm14X0V2ZW50VGlsZV8xMmhyIiwibXhfRXZlbnRUaWxlX3NlbmRpbmciLCJteF9FdmVudFRpbGVfaGlnaGxpZ2h0IiwidGlsZVNoYXBlIiwiTm90aWYiLCJteF9FdmVudFRpbGVfc2VsZWN0ZWQiLCJpc1NlbGVjdGVkRXZlbnQiLCJteF9FdmVudFRpbGVfY29udGludWF0aW9uIiwiY29udGludWF0aW9uIiwibXhfRXZlbnRUaWxlX2xhc3QiLCJsYXN0IiwibXhfRXZlbnRUaWxlX2xhc3RJblNlY3Rpb24iLCJsYXN0SW5TZWN0aW9uIiwibXhfRXZlbnRUaWxlX2NvbnRleHR1YWwiLCJjb250ZXh0dWFsIiwibXhfRXZlbnRUaWxlX2FjdGlvbkJhckZvY3VzZWQiLCJteF9FdmVudFRpbGVfdmVyaWZpZWQiLCJteF9FdmVudFRpbGVfdW52ZXJpZmllZCIsIm14X0V2ZW50VGlsZV91bmtub3duIiwibXhfRXZlbnRUaWxlX2JhZCIsIm14X0V2ZW50VGlsZV9lbW90ZSIsIm14X0V2ZW50VGlsZV9ub1NlbmRlciIsImhpZGVTZW5kZXIiLCJteF9FdmVudFRpbGVfY2xhbXAiLCJUaHJlYWRQYW5lbCIsImFyaWFMaXZlIiwicGVybWFsaW5rIiwicGVybWFsaW5rQ3JlYXRvciIsImZvckV2ZW50Iiwic2Nyb2xsVG9rZW4iLCJhdmF0YXIiLCJhdmF0YXJTaXplIiwibmVlZHNTZW5kZXJQcm9maWxlIiwiSVJDIiwiRmlsZUdyaWQiLCJtZW1iZXIiLCJ0aGlyZF9wYXJ0eV9pbnZpdGUiLCJ0YXJnZXQiLCJUaHJlYWQiLCJvblNlbmRlclByb2ZpbGVDbGljayIsImVuYWJsZUZsYWlyIiwic2hvd01lc3NhZ2VBY3Rpb25CYXIiLCJhY3Rpb25CYXIiLCJnZXRUaWxlIiwiZ2V0UmVwbHlDaGFpbiIsIm9uQWN0aW9uQmFyRm9jdXNDaGFuZ2UiLCJzZXRRdW90ZUV4cGFuZGVkIiwic2hvd1RpbWVzdGFtcCIsImdldFRzIiwiYWx3YXlzU2hvd1RpbWVzdGFtcHMiLCJmaW5kVGhyZWFkRm9yRXZlbnQiLCJsYXN0UmVwbHkiLCJ0aW1lc3RhbXAiLCJrZXlSZXF1ZXN0SGVscFRleHQiLCJrZXlSZXF1ZXN0SW5mb0NvbnRlbnQiLCJzdWIiLCJvblJlcXVlc3RLZXlzQ2xpY2siLCJrZXlSZXF1ZXN0SW5mbyIsInJlYWN0aW9uc1JvdyIsImxpbmtlZFRpbWVzdGFtcCIsIm9uUGVybWFsaW5rQ2xpY2tlZCIsIkRhdGUiLCJ1c2VJUkNMYXlvdXQiLCJncm91cFRpbWVzdGFtcCIsImlyY1RpbWVzdGFtcCIsImdyb3VwUGFkbG9jayIsImlyY1BhZGxvY2siLCJtc2dPcHRpb24iLCJzaG93UmVhZFJlY2VpcHRzIiwicmVhZEF2YXRhcnMiLCJoYXZlVGlsZUZvckV2ZW50IiwiUmVwbHlDaGFpbiIsImhhc1JlcGx5IiwiY3JlYXRlRWxlbWVudCIsImFzIiwiaGlnaGxpZ2h0cyIsImhpZ2hsaWdodExpbmsiLCJzaG93VXJsUHJldmlldyIsInJlcGxhY2luZ0V2ZW50SWQiLCJpc093bkV2ZW50IiwicmVmIiwiY2FsbEV2ZW50R3JvdXBlciIsIkdyb3VwIiwiTWF0cml4Q2xpZW50Q29udGV4dCIsIm1lc3NhZ2VUeXBlcyIsInNob3dIaWRkZW5FdmVudHMiLCJpc1JlbGF0aW9uIiwiaGFuZGxlciIsIkJvb2xlYW4iLCJFMmVQYWRsb2NrVW5kZWNyeXB0YWJsZSIsIkUyZVBhZGxvY2tJY29uIiwiRTJlUGFkbG9ja1VudmVyaWZpZWQiLCJFMmVQYWRsb2NrVW5lbmNyeXB0ZWQiLCJFMmVQYWRsb2NrVW5rbm93biIsIkUyZVBhZGxvY2tVbmF1dGhlbnRpY2F0ZWQiLCJFMmVQYWRsb2NrIiwidG9vbHRpcCIsInRpdGxlIiwiaWNvbiIsIm9uSG92ZXJTdGFydCIsIm9uSG92ZXJFbmQiLCJTZW50UmVjZWlwdCIsIlB1cmVDb21wb25lbnQiLCJpc1NlbnQiLCJtZXNzYWdlU3RhdGUiLCJpc0ZhaWxlZCIsInJlY2VpcHRDbGFzc2VzIiwibm9uQ3NzQmFkZ2UiLCJTdGF0aWNOb3RpZmljYXRpb25TdGF0ZSIsIlJFRF9FWENMQU1BVElPTiIsImxhYmVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0E7O0FBQ0E7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUEsTUFBTUEsY0FBYyxHQUFHO0FBQ25CLEdBQUNDLGlCQUFVQyxXQUFYLEdBQXlCLHVCQUROO0FBRW5CLEdBQUNELGlCQUFVRSxPQUFYLEdBQXFCLHVCQUZGO0FBR25CLEdBQUNDLDhCQUFzQkMsSUFBdkIsR0FBOEIsdUJBSFg7QUFJbkIsR0FBQ0osaUJBQVVLLHFCQUFYLEdBQW1DLHFDQUpoQjtBQUtuQixHQUFDTCxpQkFBVU0sbUJBQVgsR0FBaUMscUNBTGQ7QUFNbkIsR0FBQ04saUJBQVVPLFVBQVgsR0FBd0I7QUFOTCxDQUF2QjtBQVNBLE1BQU1DLG1CQUFtQixHQUFHO0FBQ3hCLEdBQUNSLGlCQUFVUyxjQUFYLEdBQTRCLDBCQURKO0FBRXhCLEdBQUNULGlCQUFVVSxrQkFBWCxHQUFnQyx1QkFGUjtBQUd4QixHQUFDVixpQkFBVVcsVUFBWCxHQUF3QixxQkFIQTtBQUl4QixHQUFDWCxpQkFBVVksVUFBWCxHQUF3Qix1QkFKQTtBQUt4QixHQUFDWixpQkFBVWEsUUFBWCxHQUFzQix1QkFMRTtBQU14QixHQUFDYixpQkFBVWMsVUFBWCxHQUF3QiwwQkFOQTtBQU94QixHQUFDZCxpQkFBVWUsb0JBQVgsR0FBa0MsdUJBUFY7QUFReEIsR0FBQ2YsaUJBQVVnQixxQkFBWCxHQUFtQyx1QkFSWDtBQVN4QixHQUFDaEIsaUJBQVVpQixTQUFYLEdBQXVCLHVCQVRDO0FBVXhCLEdBQUNqQixpQkFBVWtCLGVBQVgsR0FBNkIsdUJBVkw7QUFXeEIsR0FBQ2xCLGlCQUFVbUIsZ0JBQVgsR0FBOEIsdUJBWE47QUFZeEIsR0FBQ25CLGlCQUFVb0IsYUFBWCxHQUEyQix1QkFaSDtBQWF4QjtBQUNBLCtCQUE2Qix1QkFkTDtBQWV4QixHQUFDQywyQ0FBRCxHQUE0Qix1QkFmSjtBQWdCeEIsR0FBQ3JCLGlCQUFVc0IsYUFBWCxHQUEyQix1QkFoQkg7QUFpQnhCLEdBQUN0QixpQkFBVXVCLGFBQVgsR0FBMkIsdUJBakJIO0FBa0J4QixHQUFDdkIsaUJBQVV3QixlQUFYLEdBQTZCLHVCQWxCTDtBQW1CeEIsMkJBQXlCLHVCQW5CRCxDQW1CMEI7O0FBbkIxQixDQUE1QjtBQXNCQSxNQUFNQyxrQkFBa0IsR0FBRyxJQUFJQyxHQUFKLENBQVEsQ0FDL0IxQixpQkFBVVMsY0FEcUIsRUFFL0JULGlCQUFVVSxrQkFGcUIsRUFHL0JWLGlCQUFVVyxVQUhxQixFQUkvQlgsaUJBQVVhLFFBSnFCLEVBSy9CYixpQkFBVWMsVUFMcUIsRUFNL0JkLGlCQUFVZ0IscUJBTnFCLEVBTy9CaEIsaUJBQVVpQixTQVBxQixFQVEvQmpCLGlCQUFVa0IsZUFScUIsRUFTL0JsQixpQkFBVW1CLGdCQVRxQixFQVUvQm5CLGlCQUFVb0IsYUFWcUIsRUFXL0JDLDJDQVgrQixFQVkvQnJCLGlCQUFVc0IsYUFacUIsRUFhL0J0QixpQkFBVXVCLGFBYnFCLEVBYy9CdkIsaUJBQVV3QixlQWRxQixFQWUvQix1QkFmK0IsQ0FBUixDQUEzQixDLENBa0JBOztBQUNBLEtBQUssTUFBTUcsTUFBWCxJQUFxQkMsdUJBQXJCLEVBQXFDO0FBQ2pDcEIsRUFBQUEsbUJBQW1CLENBQUNtQixNQUFELENBQW5CLEdBQThCLHVCQUE5QjtBQUNIOztBQUVNLFNBQVNFLGNBQVQsQ0FBd0JDLEVBQXhCLEVBQTRCO0FBQy9CLFFBQU1DLElBQUksR0FBR0QsRUFBRSxDQUFDRSxPQUFILEVBQWIsQ0FEK0IsQ0FHL0I7QUFDQTs7QUFDQSxNQUFJRCxJQUFJLEtBQUssZ0JBQWIsRUFBK0I7QUFDM0IsVUFBTUUsT0FBTyxHQUFHSCxFQUFFLENBQUNJLFVBQUgsRUFBaEI7O0FBQ0EsUUFBSUQsT0FBTyxJQUFJQSxPQUFPLENBQUNFLE9BQVIsS0FBb0JDLGVBQVFDLHNCQUEzQyxFQUFtRTtBQUMvRCxZQUFNQyxNQUFNLEdBQUdDLGlDQUFnQkMsR0FBaEIsRUFBZjs7QUFDQSxZQUFNQyxFQUFFLEdBQUdILE1BQU0sSUFBSUEsTUFBTSxDQUFDSSxTQUFQLEVBQXJCOztBQUNBLFVBQUlaLEVBQUUsQ0FBQ2EsU0FBSCxPQUFtQkYsRUFBbkIsSUFBeUJSLE9BQU8sQ0FBQ1csRUFBUixLQUFlSCxFQUE1QyxFQUFnRDtBQUM1QyxlQUFPSSxTQUFQO0FBQ0gsT0FGRCxNQUVPO0FBQ0gsZUFBTyxrQ0FBUDtBQUNIO0FBQ0o7QUFDSixHQWhCOEIsQ0FpQi9CO0FBQ0E7OztBQUNBLE1BQUlkLElBQUksS0FBSyx5QkFBYixFQUF3QztBQUNwQyxVQUFNTyxNQUFNLEdBQUdDLGlDQUFnQkMsR0FBaEIsRUFBZjs7QUFDQSxVQUFNQyxFQUFFLEdBQUdILE1BQU0sSUFBSUEsTUFBTSxDQUFDSSxTQUFQLEVBQXJCOztBQUNBLFFBQUlaLEVBQUUsQ0FBQ2EsU0FBSCxPQUFtQkYsRUFBdkIsRUFBMkI7QUFDdkIsYUFBT0ksU0FBUDtBQUNIO0FBQ0osR0F6QjhCLENBMkIvQjtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0EsTUFBSWQsSUFBSSxLQUFLLDJCQUFULElBQXdDQSxJQUFJLEtBQUsseUJBQXJELEVBQWdGO0FBQzVFLFFBQUksQ0FBQ2Usb0NBQTJCQyxZQUEzQixDQUF3Q2pCLEVBQXhDLEVBQTRDQSxFQUFFLENBQUNrQixPQUEvQyxDQUFMLEVBQThEO0FBQzFEO0FBQ0g7QUFDSixHQW5DOEIsQ0FxQy9COzs7QUFDQSxNQUFJakIsSUFBSSxLQUFLLDJCQUFiLEVBQTBDO0FBQ3RDLFFBQUlBLElBQUksR0FBR0QsRUFBRSxDQUFDSSxVQUFILEdBQWdCLE1BQWhCLENBQVg7O0FBQ0EsUUFBSSxDQUFDSCxJQUFMLEVBQVc7QUFDUDtBQUNBQSxNQUFBQSxJQUFJLEdBQUdELEVBQUUsQ0FBQ21CLGNBQUgsR0FBb0IsTUFBcEIsQ0FBUDtBQUNIOztBQUVELFFBQUlDLHVCQUFXQyxLQUFYLENBQWlCQyxPQUFqQixDQUF5QnJCLElBQXpCLENBQUosRUFBb0M7QUFDaEMsYUFBTyw0QkFBUDtBQUNIO0FBQ0o7O0FBRUQsTUFBSUQsRUFBRSxDQUFDdUIsT0FBSCxFQUFKLEVBQWtCO0FBQ2QsUUFBSTVCLGtCQUFrQixDQUFDNkIsR0FBbkIsQ0FBdUJ2QixJQUF2QixLQUFnQ0QsRUFBRSxDQUFDeUIsV0FBSCxPQUFxQixFQUF6RCxFQUE2RCxPQUFPVixTQUFQO0FBQzdELFdBQU9yQyxtQkFBbUIsQ0FBQ3VCLElBQUQsQ0FBMUI7QUFDSDs7QUFFRCxTQUFPaEMsY0FBYyxDQUFDZ0MsSUFBRCxDQUFyQjtBQUNILEMsQ0FFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0lBUVl5QixTOzs7V0FBQUEsUztBQUFBQSxFQUFBQSxTO0FBQUFBLEVBQUFBLFM7QUFBQUEsRUFBQUEsUztBQUFBQSxFQUFBQSxTO0FBQUFBLEVBQUFBLFM7R0FBQUEsUyx5QkFBQUEsUzs7SUFpSlNDLFMsV0FEcEIsZ0RBQXFCLHVCQUFyQixDLG1DQUFELE1BQ3FCQSxTQURyQixTQUN1Q0MsZUFBTUMsU0FEN0MsQ0FDdUU7QUFHbkU7QUFlQUMsRUFBQUEsV0FBVyxDQUFDQyxLQUFELEVBQVFDLE9BQVIsRUFBaUI7QUFBQTs7QUFDeEIsVUFBTUQsS0FBTixFQUFhQyxPQUFiO0FBRHdCO0FBQUE7QUFBQSw2REFkYkosZUFBTUssU0FBTixFQWNhO0FBQUEsbUVBYlBMLGVBQU1LLFNBQU4sRUFhTztBQUFBLDREQVhOLHVCQVdNO0FBQUEsd0RBbUlKQyxNQUFELElBQVk7QUFDL0IsV0FBS0MsUUFBTCxDQUFjO0FBQ1ZELFFBQUFBO0FBRFUsT0FBZDtBQUdBLFdBQUtFLFdBQUw7QUFDSCxLQXhJMkI7QUFBQSx1REF1TExGLE1BQUQsSUFBb0I7QUFDdEMsVUFBSUEsTUFBTSxDQUFDRyxFQUFQLEtBQWMsS0FBS04sS0FBTCxDQUFXTyxPQUFYLENBQW1CQyxLQUFuQixFQUFsQixFQUE4QztBQUMxQyxhQUFLQyxZQUFMLENBQWtCTixNQUFsQjtBQUNBLGNBQU1PLElBQUksR0FBRyxLQUFLVCxPQUFMLENBQWFVLE9BQWIsQ0FBcUIsS0FBS1gsS0FBTCxDQUFXTyxPQUFYLENBQW1CSyxTQUFuQixFQUFyQixDQUFiO0FBQ0FGLFFBQUFBLElBQUksQ0FBQ0csR0FBTCxDQUFTQyxvQkFBWUMsR0FBckIsRUFBMEIsS0FBS0MsV0FBL0I7QUFDSDtBQUNKLEtBN0wyQjtBQUFBLHlEQWlSSixDQUFDL0MsRUFBRCxFQUFLeUMsSUFBTCxLQUFjO0FBQ2xDO0FBQ0EsWUFBTU8sUUFBUSxHQUFHdkMsaUNBQWdCQyxHQUFoQixHQUFzQmdDLE9BQXRCLENBQThCLEtBQUtYLEtBQUwsQ0FBV08sT0FBWCxDQUFtQkssU0FBbkIsRUFBOUIsQ0FBakI7O0FBQ0EsVUFBSUYsSUFBSSxLQUFLTyxRQUFiLEVBQXVCOztBQUV2QixVQUFJLENBQUMsS0FBS0MscUJBQU4sSUFBK0IsQ0FBQyxLQUFLQyx3QkFBckMsSUFBaUUsQ0FBQyxLQUFLQyxzQkFBM0UsRUFBbUc7QUFDL0Y7QUFDSCxPQVBpQyxDQVNsQztBQUNBOzs7QUFDQSxXQUFLZixXQUFMLENBQWlCLE1BQU07QUFDbkI7QUFDQSxZQUFJLENBQUMsS0FBS2EscUJBQU4sSUFBK0IsQ0FBQyxLQUFLQyx3QkFBekMsRUFBbUU7QUFDL0QsZUFBS2xCLE9BQUwsQ0FBYW9CLGNBQWIsQ0FBNEIsY0FBNUIsRUFBNEMsS0FBS0MsYUFBakQ7QUFDQSxlQUFLRixzQkFBTCxHQUE4QixLQUE5QjtBQUNIO0FBQ0osT0FORDtBQU9ILEtBblMyQjtBQUFBLHVEQXVTTixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLFdBQUtHLFdBQUwsQ0FBaUIsS0FBS3ZCLEtBQUwsQ0FBV08sT0FBNUI7QUFDQSxXQUFLRixXQUFMO0FBQ0gsS0E3UzJCO0FBQUEsdUVBK1NVLENBQUNtQixNQUFELEVBQVNDLE1BQVQsS0FBb0I7QUFDdEQsVUFBSUQsTUFBTSxLQUFLLEtBQUt4QixLQUFMLENBQVdPLE9BQVgsQ0FBbUJ6QixTQUFuQixFQUFmLEVBQStDO0FBQzNDLGFBQUt5QyxXQUFMLENBQWlCLEtBQUt2QixLQUFMLENBQVdPLE9BQTVCO0FBQ0g7QUFDSixLQW5UMkI7QUFBQSxxRUFxVFEsQ0FBQ2lCLE1BQUQsRUFBU0UsWUFBVCxLQUEwQjtBQUMxRCxVQUFJRixNQUFNLEtBQUssS0FBS3hCLEtBQUwsQ0FBV08sT0FBWCxDQUFtQnpCLFNBQW5CLEVBQWYsRUFBK0M7QUFDM0MsYUFBS3lDLFdBQUwsQ0FBaUIsS0FBS3ZCLEtBQUwsQ0FBV08sT0FBNUI7QUFDSDtBQUNKLEtBelQyQjtBQUFBLGdFQThhTCxNQUFNO0FBQ3pCLFdBQUtILFFBQUwsQ0FBYztBQUNWdUIsUUFBQUEsY0FBYyxFQUFFLENBQUMsS0FBS0MsS0FBTCxDQUFXRDtBQURsQixPQUFkO0FBR0gsS0FsYjJCO0FBQUEsZ0VBbWhCTCxNQUFNO0FBQ3pCLFVBQUksQ0FBQyxLQUFLM0IsS0FBTCxDQUFXNkIscUJBQWhCLEVBQXVDOztBQUN2Q0MsMEJBQUlDLFFBQUosQ0FBb0M7QUFDaENDLFFBQUFBLE1BQU0sRUFBRUMsZ0JBQU9DLGNBRGlCO0FBRWhDVixRQUFBQSxNQUFNLEVBQUUsS0FBS3hCLEtBQUwsQ0FBV08sT0FBWCxDQUFtQnpCLFNBQW5CLEVBRndCO0FBR2hDK0MsUUFBQUEscUJBQXFCLEVBQUUsS0FBSzdCLEtBQUwsQ0FBVzZCO0FBSEYsT0FBcEM7QUFLSCxLQTFoQjJCO0FBQUEsOERBNGhCUCxNQUFNO0FBQ3ZCLFdBQUt6QixRQUFMLENBQWM7QUFDVjtBQUNBO0FBQ0ErQixRQUFBQSx1QkFBdUIsRUFBRTtBQUhmLE9BQWQsRUFEdUIsQ0FPdkI7QUFDQTtBQUNBOztBQUNBLFdBQUtsQyxPQUFMLENBQWFtQyxrQ0FBYixDQUFnRCxLQUFLcEMsS0FBTCxDQUFXTyxPQUEzRDtBQUNILEtBdmlCMkI7QUFBQSw4REF5aUJQOEIsQ0FBQyxJQUFJO0FBQ3RCO0FBQ0E7QUFDQUEsTUFBQUEsQ0FBQyxDQUFDQyxjQUFGOztBQUNBUiwwQkFBSUMsUUFBSixDQUFhO0FBQ1RDLFFBQUFBLE1BQU0sRUFBRUMsZ0JBQU9NLFFBRE47QUFFVEMsUUFBQUEsUUFBUSxFQUFFLEtBQUt4QyxLQUFMLENBQVdPLE9BQVgsQ0FBbUJDLEtBQW5CLEVBRkQ7QUFHVGlDLFFBQUFBLFdBQVcsRUFBRSxJQUhKO0FBSVRDLFFBQUFBLE9BQU8sRUFBRSxLQUFLMUMsS0FBTCxDQUFXTyxPQUFYLENBQW1CSyxTQUFuQjtBQUpBLE9BQWI7QUFNSCxLQW5qQjJCO0FBQUEsa0VBZ21CSCtCLE9BQU8sSUFBSTtBQUNoQyxXQUFLdkMsUUFBTCxDQUFjO0FBQ1Z3QyxRQUFBQSxnQkFBZ0IsRUFBRUQ7QUFEUixPQUFkO0FBR0gsS0FwbUIyQjtBQUFBLG1EQXNtQkEsTUFBTSxLQUFLRSxJQUFMLENBQVVDLE9BdG1CaEI7QUFBQSx5REF3bUJaLE1BQU0sS0FBS0MsVUFBTCxDQUFnQkQsT0F4bUJWO0FBQUEsd0RBMG1CYixNQUFNO0FBQ2pCLFVBQ0ksQ0FBQyxLQUFLOUMsS0FBTCxDQUFXZ0QsYUFBWixJQUNBLENBQUMsS0FBS2hELEtBQUwsQ0FBV2lELG9CQUZoQixFQUdFO0FBQ0UsZUFBTyxJQUFQO0FBQ0g7O0FBQ0QsWUFBTUMsT0FBTyxHQUFHLEtBQUtsRCxLQUFMLENBQVdPLE9BQVgsQ0FBbUJDLEtBQW5CLEVBQWhCO0FBQ0EsYUFBTyxLQUFLUixLQUFMLENBQVdpRCxvQkFBWCxDQUFnQ0MsT0FBaEMsRUFBeUMsY0FBekMsRUFBeUQsWUFBekQsQ0FBUDtBQUNILEtBbm5CMkI7QUFBQSw4REFxbkJDLENBQUNDLFlBQUQsRUFBdUJDLFNBQXZCLEtBQTZDO0FBQ3RFLFVBQUlELFlBQVksS0FBSyxjQUFqQixJQUFtQ0MsU0FBUyxLQUFLLFlBQXJELEVBQW1FO0FBQy9EO0FBQ0g7O0FBQ0QsV0FBS3BELEtBQUwsQ0FBV08sT0FBWCxDQUFtQmMsY0FBbkIsQ0FBa0Msd0JBQWxDLEVBQTRELEtBQUtnQyxrQkFBakU7QUFDQSxXQUFLakQsUUFBTCxDQUFjO0FBQ1ZrRCxRQUFBQSxTQUFTLEVBQUUsS0FBS0MsWUFBTDtBQURELE9BQWQ7QUFHSCxLQTduQjJCO0FBQUEsNERBK25CQUMsUUFBRCxJQUF1QjtBQUM5QyxXQUFLcEQsUUFBTCxDQUFjO0FBQ1ZxRCxRQUFBQSxlQUFlLEVBQUVEO0FBRFAsT0FBZDtBQUdILEtBbm9CMkI7QUFHeEIsU0FBSzVCLEtBQUwsR0FBYTtBQUNUO0FBQ0FnQixNQUFBQSxnQkFBZ0IsRUFBRSxLQUZUO0FBR1Q7QUFDQTtBQUNBakIsTUFBQUEsY0FBYyxFQUFFLEtBTFA7QUFNVDtBQUNBK0IsTUFBQUEsUUFBUSxFQUFFLElBUEQ7QUFRVDtBQUNBdkIsTUFBQUEsdUJBQXVCLEVBQUUsS0FUaEI7QUFVVDtBQUNBbUIsTUFBQUEsU0FBUyxFQUFFLEtBQUtDLFlBQUwsRUFYRjtBQWFUSSxNQUFBQSxLQUFLLEVBQUUsS0FiRTtBQWVUeEQsTUFBQUEsTUFBTSx5QkFBRSxLQUFLSCxLQUFMLENBQVdPLE9BQWIsd0RBQUUsb0JBQW9CcUQsU0FBcEI7QUFmQyxLQUFiLENBSHdCLENBcUJ4Qjs7QUFDQSxTQUFLQyw0QkFBTCxHQUFvQyxJQUFwQyxDQXRCd0IsQ0F3QnhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsU0FBS3pDLHNCQUFMLEdBQThCLEtBQTlCO0FBQ0g7QUFFRDtBQUNKO0FBQ0E7QUFDQTtBQUNBOzs7QUFDMkMsTUFBM0IwQywyQkFBMkIsR0FBWTtBQUMvQztBQUNBLFFBQUksS0FBSzlELEtBQUwsQ0FBVytELFlBQVgsSUFBMkIsS0FBSy9ELEtBQUwsQ0FBVytELFlBQVgsQ0FBd0JDLE1BQXhCLEdBQWlDLENBQWhFLEVBQW1FLE9BQU8sS0FBUDtBQUNuRSxRQUFJLENBQUMsS0FBS2hFLEtBQUwsQ0FBV08sT0FBaEIsRUFBeUIsT0FBTyxLQUFQLENBSHNCLENBSy9DOztBQUNBLFVBQU1HLElBQUksR0FBRyxLQUFLVCxPQUFMLENBQWFVLE9BQWIsQ0FBcUIsS0FBS1gsS0FBTCxDQUFXTyxPQUFYLENBQW1CSyxTQUFuQixFQUFyQixDQUFiO0FBQ0EsUUFBSSxDQUFDRixJQUFMLEVBQVcsT0FBTyxLQUFQLENBUG9DLENBUy9DO0FBQ0E7O0FBQ0EsVUFBTXVELFFBQVEsR0FBR3ZGLGlDQUFnQkMsR0FBaEIsR0FBc0JFLFNBQXRCLEVBQWpCOztBQUNBLFFBQUksS0FBS21CLEtBQUwsQ0FBV08sT0FBWCxDQUFtQnpCLFNBQW5CLE9BQW1DbUYsUUFBdkMsRUFBaUQsT0FBTyxLQUFQLENBWkYsQ0FjL0M7QUFDQTtBQUNBO0FBQ0E7O0FBQ0EsVUFBTUMsb0JBQW9CLEdBQUcsQ0FDekIvSCxpQkFBVUUsT0FEZSxFQUV6QkYsaUJBQVVDLFdBRmUsRUFHekJELGlCQUFVZ0ksb0JBSGUsQ0FBN0I7QUFLQSxRQUFJLENBQUNELG9CQUFvQixDQUFDRSxRQUFyQixDQUE4QixLQUFLcEUsS0FBTCxDQUFXTyxPQUFYLENBQW1CcEMsT0FBbkIsRUFBOUIsQ0FBTCxFQUErRSxPQUFPLEtBQVAsQ0F2QmhDLENBeUIvQzs7QUFDQSxXQUFPLElBQVA7QUFDSDs7QUFFZ0MsTUFBckIrQyxxQkFBcUIsR0FBRztBQUNoQztBQUNBLFFBQUksQ0FBQyxLQUFLNEMsMkJBQVYsRUFBdUMsT0FBTyxLQUFQLENBRlAsQ0FJaEM7O0FBQ0EsUUFBSSxDQUFDLEtBQUs5RCxLQUFMLENBQVdxRSxjQUFoQixFQUFnQyxPQUFPLEtBQVAsQ0FMQSxDQU9oQztBQUNBOztBQUNBLFFBQUksS0FBS3JFLEtBQUwsQ0FBV3NFLGVBQVgsSUFBOEIsS0FBS3RFLEtBQUwsQ0FBV3NFLGVBQVgsS0FBK0IsTUFBakUsRUFBeUUsT0FBTyxLQUFQLENBVHpDLENBV2hDOztBQUNBLFVBQU1DLFFBQVEsR0FBRyxLQUFLdkUsS0FBTCxDQUFXK0QsWUFBWCxJQUEyQixFQUE1Qzs7QUFDQSxVQUFNRSxRQUFRLEdBQUd2RixpQ0FBZ0JDLEdBQWhCLEdBQXNCRSxTQUF0QixFQUFqQjs7QUFDQSxRQUFJMEYsUUFBUSxDQUFDQyxJQUFULENBQWNDLENBQUMsSUFBSUEsQ0FBQyxDQUFDakQsTUFBRixLQUFheUMsUUFBaEMsQ0FBSixFQUErQyxPQUFPLEtBQVAsQ0FkZixDQWdCaEM7O0FBQ0EsV0FBTyxJQUFQO0FBQ0g7O0FBRW1DLE1BQXhCOUMsd0JBQXdCLEdBQUc7QUFDbkM7QUFDQSxRQUFJLENBQUMsS0FBSzJDLDJCQUFWLEVBQXVDLE9BQU8sS0FBUCxDQUZKLENBSW5DO0FBQ0E7O0FBQ0EsUUFBSSxDQUFDLEtBQUs5RCxLQUFMLENBQVdzRSxlQUFaLElBQStCLEtBQUt0RSxLQUFMLENBQVdzRSxlQUFYLEtBQStCLE1BQWxFLEVBQTBFLE9BQU8sS0FBUCxDQU52QyxDQVFuQztBQUNBOztBQUNBLFdBQU8sSUFBUDtBQUNILEdBbkhrRSxDQXFIbkU7QUFDQTs7O0FBQ0FJLEVBQUFBLHlCQUF5QixHQUFHO0FBQ3hCLFNBQUtuRCxXQUFMLENBQWlCLEtBQUt2QixLQUFMLENBQVdPLE9BQTVCO0FBQ0g7O0FBRURvRSxFQUFBQSxpQkFBaUIsR0FBRztBQUNoQixTQUFLZCw0QkFBTCxHQUFvQyxLQUFwQztBQUNBLFVBQU1wRixNQUFNLEdBQUcsS0FBS3dCLE9BQXBCOztBQUNBLFFBQUksQ0FBQyxLQUFLRCxLQUFMLENBQVc0RSxTQUFoQixFQUEyQjtBQUN2Qm5HLE1BQUFBLE1BQU0sQ0FBQ29HLEVBQVAsQ0FBVSwyQkFBVixFQUF1QyxLQUFLQywyQkFBNUM7QUFDQXJHLE1BQUFBLE1BQU0sQ0FBQ29HLEVBQVAsQ0FBVSx3QkFBVixFQUFvQyxLQUFLRSx5QkFBekM7QUFDQSxXQUFLL0UsS0FBTCxDQUFXTyxPQUFYLENBQW1Cc0UsRUFBbkIsQ0FBc0IsaUJBQXRCLEVBQXlDLEtBQUtHLFdBQTlDOztBQUNBLFVBQUksS0FBS2hGLEtBQUwsQ0FBV2dELGFBQWYsRUFBOEI7QUFDMUIsYUFBS2hELEtBQUwsQ0FBV08sT0FBWCxDQUFtQnNFLEVBQW5CLENBQXNCLHdCQUF0QixFQUFnRCxLQUFLeEIsa0JBQXJEO0FBQ0g7O0FBRUQsVUFBSSxLQUFLbkMscUJBQUwsSUFBOEIsS0FBS0Msd0JBQXZDLEVBQWlFO0FBQzdEMUMsUUFBQUEsTUFBTSxDQUFDb0csRUFBUCxDQUFVLGNBQVYsRUFBMEIsS0FBS3ZELGFBQS9CO0FBQ0EsYUFBS0Ysc0JBQUwsR0FBOEIsSUFBOUI7QUFDSDtBQUNKOztBQUVELFFBQUk2RCx1QkFBY0MsUUFBZCxDQUF1QixnQkFBdkIsQ0FBSixFQUE4QztBQUMxQyxXQUFLbEYsS0FBTCxDQUFXTyxPQUFYLENBQW1CNEUsSUFBbkIsQ0FBd0JyRSxvQkFBWXNFLEtBQXBDLEVBQTJDLEtBQUszRSxZQUFoRDtBQUNBLFdBQUtULEtBQUwsQ0FBV08sT0FBWCxDQUFtQnNFLEVBQW5CLENBQXNCL0Qsb0JBQVl1RSxNQUFsQyxFQUEwQyxLQUFLNUUsWUFBL0M7QUFDSDs7QUFFRCxVQUFNQyxJQUFJLEdBQUcsS0FBS1QsT0FBTCxDQUFhVSxPQUFiLENBQXFCLEtBQUtYLEtBQUwsQ0FBV08sT0FBWCxDQUFtQkssU0FBbkIsRUFBckIsQ0FBYjtBQUNBRixJQUFBQSxJQUFJLFNBQUosSUFBQUEsSUFBSSxXQUFKLFlBQUFBLElBQUksQ0FBRW1FLEVBQU4sQ0FBUy9ELG9CQUFZQyxHQUFyQixFQUEwQixLQUFLQyxXQUEvQjtBQUNIOztBQVNEO0FBQ0E7QUFDQXNFLEVBQUFBLGdDQUFnQyxDQUFDQyxTQUFELEVBQVk7QUFDeEM7QUFDQTtBQUNBLFFBQUlBLFNBQVMsQ0FBQ2pCLGVBQVYsS0FBOEIsS0FBS3RFLEtBQUwsQ0FBV3NFLGVBQTdDLEVBQThEO0FBQzFELFdBQUsvQyxXQUFMLENBQWlCZ0UsU0FBUyxDQUFDaEYsT0FBM0I7QUFDSDtBQUNKOztBQUVEaUYsRUFBQUEscUJBQXFCLENBQUNELFNBQUQsRUFBWUUsU0FBWixFQUF1QkMsV0FBdkIsRUFBb0M7QUFDckQsUUFBSSw0QkFBYyxLQUFLOUQsS0FBbkIsRUFBMEI2RCxTQUExQixDQUFKLEVBQTBDO0FBQ3RDLGFBQU8sSUFBUDtBQUNIOztBQUVELFdBQU8sQ0FBQyxLQUFLRSxVQUFMLENBQWdCLEtBQUszRixLQUFyQixFQUE0QnVGLFNBQTVCLENBQVI7QUFDSDs7QUFFREssRUFBQUEsb0JBQW9CLEdBQUc7QUFDbkIsVUFBTW5ILE1BQU0sR0FBRyxLQUFLd0IsT0FBcEI7QUFDQXhCLElBQUFBLE1BQU0sQ0FBQzRDLGNBQVAsQ0FBc0IsMkJBQXRCLEVBQW1ELEtBQUt5RCwyQkFBeEQ7QUFDQXJHLElBQUFBLE1BQU0sQ0FBQzRDLGNBQVAsQ0FBc0Isd0JBQXRCLEVBQWdELEtBQUswRCx5QkFBckQ7QUFDQXRHLElBQUFBLE1BQU0sQ0FBQzRDLGNBQVAsQ0FBc0IsY0FBdEIsRUFBc0MsS0FBS0MsYUFBM0M7QUFDQSxTQUFLRixzQkFBTCxHQUE4QixLQUE5QjtBQUNBLFNBQUtwQixLQUFMLENBQVdPLE9BQVgsQ0FBbUJjLGNBQW5CLENBQWtDLGlCQUFsQyxFQUFxRCxLQUFLMkQsV0FBMUQ7O0FBQ0EsUUFBSSxLQUFLaEYsS0FBTCxDQUFXZ0QsYUFBZixFQUE4QjtBQUMxQixXQUFLaEQsS0FBTCxDQUFXTyxPQUFYLENBQW1CYyxjQUFuQixDQUFrQyx3QkFBbEMsRUFBNEQsS0FBS2dDLGtCQUFqRTtBQUNIOztBQUNELFFBQUk0Qix1QkFBY0MsUUFBZCxDQUF1QixnQkFBdkIsQ0FBSixFQUE4QztBQUMxQyxXQUFLbEYsS0FBTCxDQUFXTyxPQUFYLENBQW1CTSxHQUFuQixDQUF1QkMsb0JBQVlzRSxLQUFuQyxFQUEwQyxLQUFLM0UsWUFBL0M7QUFDQSxXQUFLVCxLQUFMLENBQVdPLE9BQVgsQ0FBbUJNLEdBQW5CLENBQXVCQyxvQkFBWXVFLE1BQW5DLEVBQTJDLEtBQUs1RSxZQUFoRDtBQUNIOztBQUVELFVBQU1DLElBQUksR0FBRyxLQUFLVCxPQUFMLENBQWFVLE9BQWIsQ0FBcUIsS0FBS1gsS0FBTCxDQUFXTyxPQUFYLENBQW1CSyxTQUFuQixFQUFyQixDQUFiO0FBQ0FGLElBQUFBLElBQUksU0FBSixJQUFBQSxJQUFJLFdBQUosWUFBQUEsSUFBSSxDQUFFRyxHQUFOLENBQVVDLG9CQUFZQyxHQUF0QixFQUEyQixLQUFLQyxXQUFoQztBQUNIOztBQUVENkUsRUFBQUEsa0JBQWtCLENBQUNDLFNBQUQsRUFBWUMsU0FBWixFQUF1QkMsUUFBdkIsRUFBaUM7QUFDL0M7QUFDQSxRQUFJLENBQUMsS0FBSzVFLHNCQUFOLEtBQWlDLEtBQUtGLHFCQUFMLElBQThCLEtBQUtDLHdCQUFwRSxDQUFKLEVBQW1HO0FBQy9GLFdBQUtsQixPQUFMLENBQWE0RSxFQUFiLENBQWdCLGNBQWhCLEVBQWdDLEtBQUt2RCxhQUFyQztBQUNBLFdBQUtGLHNCQUFMLEdBQThCLElBQTlCO0FBQ0g7QUFDSjs7QUFVaUIsTUFBTmpCLE1BQU0sR0FBa0I7QUFDaEMsUUFBSSxDQUFDOEUsdUJBQWNDLFFBQWQsQ0FBdUIsZ0JBQXZCLENBQUwsRUFBK0M7QUFDM0MsYUFBTyxJQUFQO0FBQ0g7QUFFRDtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNRLFVBQU14RSxJQUFJLEdBQUdoQyxpQ0FBZ0JDLEdBQWhCLEdBQXNCZ0MsT0FBdEIsQ0FBOEIsS0FBS1gsS0FBTCxDQUFXTyxPQUFYLENBQW1CSyxTQUFuQixFQUE5QixDQUFiOztBQUNBLFVBQU1ULE1BQU0sR0FBR08sSUFBSCxhQUFHQSxJQUFILHVCQUFHQSxJQUFJLENBQUV1RixPQUFOLENBQWN0SCxHQUFkLENBQWtCLEtBQUtxQixLQUFMLENBQVdPLE9BQVgsQ0FBbUJDLEtBQW5CLEVBQWxCLENBQWY7O0FBRUEsUUFBSSxDQUFDTCxNQUFELElBQVdBLE1BQU0sQ0FBQzZELE1BQVAsS0FBa0IsQ0FBakMsRUFBb0M7QUFDaEMsYUFBTyxJQUFQO0FBQ0g7O0FBRUQsV0FBTzdELE1BQVA7QUFDSDs7QUFFTytGLEVBQUFBLHdCQUF3QixHQUF1QjtBQUNuRCxRQUFJLENBQUMsS0FBSy9GLE1BQVYsRUFBa0I7QUFDZCxhQUFPLElBQVA7QUFDSDs7QUFFRCx3QkFBTztBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsb0JBQ0g7QUFBTSxNQUFBLFNBQVMsRUFBQztBQUFoQixPQUNNLEtBQUtBLE1BQUwsQ0FBWTZELE1BRGxCLENBREcsRUFJRCxLQUFLbUMsOEJBQUwsRUFKQyxDQUFQO0FBTUg7O0FBRU9BLEVBQUFBLDhCQUE4QixHQUF1QjtBQUN6RCxRQUFJLENBQUMsS0FBS2hHLE1BQVYsRUFBa0I7QUFDZCxhQUFPLElBQVA7QUFDSDs7QUFFRCxVQUFNLENBQUNpRyxTQUFELElBQWMsS0FBS2pHLE1BQUwsQ0FBWWtHLE1BQVosQ0FDZkMsTUFEZSxDQUNSQyxLQUFLLElBQUlBLEtBQUssQ0FBQ0MsZ0JBRFAsRUFFZkMsS0FGZSxDQUVULENBQUMsQ0FGUSxDQUFwQjs7QUFHQSxVQUFNQyxvQkFBb0IsR0FBR0MseUNBQW9CQyxRQUFwQixDQUE2QkMsdUJBQTdCLENBQXFEVCxTQUFyRCxDQUE3Qjs7QUFFQSxRQUFJLENBQUNNLG9CQUFELElBQXlCLENBQUNOLFNBQVMsQ0FBQ1UsTUFBeEMsRUFBZ0Q7QUFDNUMsYUFBTyxJQUFQO0FBQ0g7O0FBRUQsd0JBQU8seUVBQ0gsNkJBQUMscUJBQUQ7QUFBYyxNQUFBLE1BQU0sRUFBRVYsU0FBUyxDQUFDVSxNQUFoQztBQUF3QyxNQUFBLEtBQUssRUFBRSxFQUEvQztBQUFtRCxNQUFBLE1BQU0sRUFBRSxFQUEzRDtBQUErRCxNQUFBLFNBQVMsRUFBQztBQUF6RSxNQURHLGVBRUg7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLG9CQUNJO0FBQU0sTUFBQSxTQUFTLEVBQUM7QUFBaEIsT0FDTUosb0JBRE4sQ0FESixDQUZHLENBQVA7QUFRSDs7QUFFT0ssRUFBQUEsZ0JBQWdCLEdBQW9CO0FBQ3hDLFFBQUksQ0FBQyxLQUFLNUcsTUFBVixFQUFrQjtBQUNkLGFBQU8sSUFBUDtBQUNIOztBQUVELHdCQUNJO0FBQ0ksTUFBQSxTQUFTLEVBQUMsZUFEZDtBQUVJLE1BQUEsT0FBTyxFQUFFLE1BQU07QUFDWCw4Q0FDSSxLQUFLSCxLQUFMLENBQVdPLE9BRGY7QUFHSDtBQU5MLG9CQVFJO0FBQU0sTUFBQSxTQUFTLEVBQUM7QUFBaEIsT0FDTSx5QkFBRyxpQkFBSCxFQUFzQjtBQUNwQnlHLE1BQUFBLEtBQUssRUFBRSxLQUFLN0csTUFBTCxDQUFZNkQ7QUFEQyxLQUF0QixDQUROLENBUkosRUFhTSxLQUFLbUMsOEJBQUwsRUFiTixDQURKO0FBaUJIOztBQTRDd0IsUUFBWDVFLFdBQVcsQ0FBQ2hCLE9BQUQsRUFBVTtBQUMvQixRQUFJLENBQUNBLE9BQU8sQ0FBQzBHLFdBQVIsRUFBTCxFQUE0QjtBQUN4QjtBQUNIOztBQUVELFVBQU1DLGNBQWMsR0FBRyxLQUFLakgsT0FBTCxDQUFha0gsc0JBQWIsQ0FBb0M1RyxPQUFwQyxDQUF2QjtBQUNBLFVBQU02RyxRQUFRLEdBQUc3RyxPQUFPLENBQUN6QixTQUFSLEVBQWpCO0FBQ0EsVUFBTXVJLFNBQVMsR0FBRyxLQUFLcEgsT0FBTCxDQUFhcUgsY0FBYixDQUE0QkYsUUFBNUIsQ0FBbEI7O0FBRUEsUUFBSUYsY0FBYyxDQUFDSyxnQkFBbkIsRUFBcUM7QUFDakM7QUFDQSxXQUFLbkgsUUFBTCxDQUFjO0FBQ1ZzRCxRQUFBQSxRQUFRLEVBQUU4RCxrQkFBU0M7QUFEVCxPQUFkLEVBRUcsS0FBS3pILEtBQUwsQ0FBVzBILGVBRmQsRUFGaUMsQ0FJRDs7QUFDaEM7QUFDSDs7QUFFRCxRQUFJLENBQUNMLFNBQVMsQ0FBQ00sc0JBQVYsRUFBTCxFQUF5QztBQUNyQztBQUNBLFdBQUt2SCxRQUFMLENBQWM7QUFDVnNELFFBQUFBLFFBQVEsRUFBRThELGtCQUFTSTtBQURULE9BQWQsRUFFRyxLQUFLNUgsS0FBTCxDQUFXMEgsZUFGZCxFQUZxQyxDQUlMOztBQUNoQztBQUNIOztBQUVELFVBQU1HLGdCQUFnQixHQUFHWCxjQUFjLENBQUNKLE1BQWYsSUFBeUIsS0FBSzdHLE9BQUwsQ0FBYTZILGdCQUFiLENBQzlDVixRQUQ4QyxFQUNwQ0YsY0FBYyxDQUFDSixNQUFmLENBQXNCaUIsUUFEYyxDQUFsRDs7QUFHQSxRQUFJLENBQUNGLGdCQUFMLEVBQXVCO0FBQ25CLFdBQUt6SCxRQUFMLENBQWM7QUFDVnNELFFBQUFBLFFBQVEsRUFBRThELGtCQUFTUTtBQURULE9BQWQsRUFFRyxLQUFLaEksS0FBTCxDQUFXMEgsZUFGZCxFQURtQixDQUdhOztBQUNoQztBQUNIOztBQUVELFFBQUksQ0FBQ0csZ0JBQWdCLENBQUNJLFVBQWpCLEVBQUwsRUFBb0M7QUFDaEMsV0FBSzdILFFBQUwsQ0FBYztBQUNWc0QsUUFBQUEsUUFBUSxFQUFFOEQsa0JBQVNDO0FBRFQsT0FBZCxFQUVHLEtBQUt6SCxLQUFMLENBQVcwSCxlQUZkLEVBRGdDLENBR0E7O0FBQ2hDO0FBQ0g7O0FBRUQsUUFBSSxDQUFDUixjQUFjLENBQUNnQixhQUFwQixFQUFtQztBQUMvQixXQUFLOUgsUUFBTCxDQUFjO0FBQ1ZzRCxRQUFBQSxRQUFRLEVBQUU4RCxrQkFBU1c7QUFEVCxPQUFkLEVBRUcsS0FBS25JLEtBQUwsQ0FBVzBILGVBRmQsRUFEK0IsQ0FHQzs7QUFDaEM7QUFDSDs7QUFFRCxTQUFLdEgsUUFBTCxDQUFjO0FBQ1ZzRCxNQUFBQSxRQUFRLEVBQUU4RCxrQkFBU1k7QUFEVCxLQUFkLEVBRUcsS0FBS3BJLEtBQUwsQ0FBVzBILGVBRmQsRUFqRCtCLENBbURDO0FBQ25DOztBQUVPL0IsRUFBQUEsVUFBVSxDQUFDMEMsSUFBRCxFQUFPQyxJQUFQLEVBQWE7QUFDM0IsVUFBTUMsS0FBSyxHQUFHQyxNQUFNLENBQUNDLElBQVAsQ0FBWUosSUFBWixDQUFkO0FBQ0EsVUFBTUssS0FBSyxHQUFHRixNQUFNLENBQUNDLElBQVAsQ0FBWUgsSUFBWixDQUFkOztBQUVBLFFBQUlDLEtBQUssQ0FBQ3ZFLE1BQU4sS0FBaUIwRSxLQUFLLENBQUMxRSxNQUEzQixFQUFtQztBQUMvQixhQUFPLEtBQVA7QUFDSDs7QUFFRCxTQUFLLElBQUkyRSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSixLQUFLLENBQUN2RSxNQUExQixFQUFrQzJFLENBQUMsRUFBbkMsRUFBdUM7QUFDbkMsWUFBTUMsR0FBRyxHQUFHTCxLQUFLLENBQUNJLENBQUQsQ0FBakI7O0FBRUEsVUFBSSxDQUFDTCxJQUFJLENBQUNPLGNBQUwsQ0FBb0JELEdBQXBCLENBQUwsRUFBK0I7QUFDM0IsZUFBTyxLQUFQO0FBQ0gsT0FMa0MsQ0FPbkM7OztBQUNBLFVBQUlBLEdBQUcsS0FBSyxjQUFaLEVBQTRCO0FBQ3hCLGNBQU1FLEVBQUUsR0FBR1QsSUFBSSxDQUFDTyxHQUFELENBQWY7QUFDQSxjQUFNRyxFQUFFLEdBQUdULElBQUksQ0FBQ00sR0FBRCxDQUFmOztBQUNBLFlBQUlFLEVBQUUsS0FBS0MsRUFBWCxFQUFlO0FBQ1g7QUFDSDs7QUFFRCxZQUFJLENBQUNELEVBQUQsSUFBTyxDQUFDQyxFQUFaLEVBQWdCO0FBQ1osaUJBQU8sS0FBUDtBQUNIOztBQUVELFlBQUlELEVBQUUsQ0FBQzlFLE1BQUgsS0FBYytFLEVBQUUsQ0FBQy9FLE1BQXJCLEVBQTZCO0FBQ3pCLGlCQUFPLEtBQVA7QUFDSDs7QUFDRCxhQUFLLElBQUlnRixDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixFQUFFLENBQUM5RSxNQUF2QixFQUErQmdGLENBQUMsRUFBaEMsRUFBb0M7QUFDaEMsY0FBSUYsRUFBRSxDQUFDRSxDQUFELENBQUYsQ0FBTXhILE1BQU4sS0FBaUJ1SCxFQUFFLENBQUNDLENBQUQsQ0FBRixDQUFNeEgsTUFBM0IsRUFBbUM7QUFDL0IsbUJBQU8sS0FBUDtBQUNILFdBSCtCLENBSWhDOzs7QUFDQSxjQUFJc0gsRUFBRSxDQUFDRSxDQUFELENBQUYsQ0FBTUMsVUFBTixLQUFxQkYsRUFBRSxDQUFDQyxDQUFELENBQUYsQ0FBTUMsVUFBL0IsRUFBMkM7QUFDdkMsbUJBQU8sS0FBUDtBQUNIO0FBQ0o7QUFDSixPQXZCRCxNQXVCTztBQUNILFlBQUlaLElBQUksQ0FBQ08sR0FBRCxDQUFKLEtBQWNOLElBQUksQ0FBQ00sR0FBRCxDQUF0QixFQUE2QjtBQUN6QixpQkFBTyxLQUFQO0FBQ0g7QUFDSjtBQUNKOztBQUNELFdBQU8sSUFBUDtBQUNIOztBQUVETSxFQUFBQSxlQUFlLEdBQUc7QUFDZCxRQUFJLEtBQUtsSixLQUFMLENBQVc0RSxTQUFmLEVBQTBCLE9BQU8sS0FBUDtBQUMxQixVQUFNdUUsT0FBTyxHQUFHLEtBQUtsSixPQUFMLENBQWFtSixzQkFBYixDQUFvQyxLQUFLcEosS0FBTCxDQUFXTyxPQUFYLENBQW1COEksY0FBbkIsTUFBdUMsS0FBS3JKLEtBQUwsQ0FBV08sT0FBdEYsQ0FBaEI7O0FBQ0EsUUFBSSxDQUFDNEksT0FBRCxJQUFZLENBQUNBLE9BQU8sQ0FBQ0csTUFBekIsRUFBaUM7QUFBRSxhQUFPLEtBQVA7QUFBZSxLQUhwQyxDQUtkOzs7QUFDQSxRQUFJLEtBQUt0SixLQUFMLENBQVdPLE9BQVgsQ0FBbUJ6QixTQUFuQixPQUFtQyxLQUFLbUIsT0FBTCxDQUFhc0osV0FBYixDQUF5Qi9ILE1BQWhFLEVBQXdFO0FBQ3BFLGFBQU8sS0FBUDtBQUNIOztBQUVELFdBQU8ySCxPQUFPLENBQUNHLE1BQVIsQ0FBZUUsU0FBdEI7QUFDSDs7QUFRREMsRUFBQUEsY0FBYyxHQUFHO0FBQ2IsUUFBSSxLQUFLdkkscUJBQUwsSUFBOEIsS0FBS0Msd0JBQXZDLEVBQWlFO0FBQzdELDBCQUFPLDZCQUFDLFdBQUQ7QUFBYSxRQUFBLFlBQVksRUFBRSxLQUFLbkIsS0FBTCxDQUFXTyxPQUFYLENBQW1CbUosbUJBQW5CO0FBQTNCLFFBQVA7QUFDSDs7QUFFRCxVQUFNQyxnQkFBZ0IsR0FBRyxLQUFLM0osS0FBTCxDQUFXNEosTUFBWCxJQUFxQkMsZUFBT0MsTUFBNUIsR0FDbkIsQ0FEbUIsR0FFbkIsQ0FGTixDQUxhLENBU2I7O0FBQ0EsUUFBSSxDQUFDLEtBQUs5SixLQUFMLENBQVcrRCxZQUFaLElBQTRCLEtBQUsvRCxLQUFMLENBQVcrRCxZQUFYLENBQXdCQyxNQUF4QixLQUFtQyxDQUFuRSxFQUFzRTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUNJO0FBQUssUUFBQSxTQUFTLEVBQUM7QUFBZixzQkFDSTtBQUFNLFFBQUEsU0FBUyxFQUFDO0FBQWhCLFFBREosQ0FESjtBQUtIOztBQUVELFVBQU0rRixPQUFPLEdBQUcsRUFBaEI7QUFDQSxVQUFNQyxhQUFhLEdBQUcsRUFBdEI7QUFDQSxRQUFJQyxJQUFJLEdBQUcsQ0FBWDtBQUVBLFVBQU0xRixRQUFRLEdBQUcsS0FBS3ZFLEtBQUwsQ0FBVytELFlBQTVCOztBQUVBLFNBQUssSUFBSTRFLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdwRSxRQUFRLENBQUNQLE1BQTdCLEVBQXFDLEVBQUUyRSxDQUF2QyxFQUEwQztBQUN0QyxZQUFNdUIsT0FBTyxHQUFHM0YsUUFBUSxDQUFDb0UsQ0FBRCxDQUF4QjtBQUVBLFVBQUl3QixNQUFNLEdBQUcsSUFBYjs7QUFDQSxVQUFLeEIsQ0FBQyxHQUFHZ0IsZ0JBQUwsSUFBMEIsS0FBSy9ILEtBQUwsQ0FBV0QsY0FBekMsRUFBeUQ7QUFDckR3SSxRQUFBQSxNQUFNLEdBQUcsS0FBVDtBQUNILE9BTnFDLENBT3RDO0FBQ0E7QUFFQTtBQUNBOzs7QUFDQUYsTUFBQUEsSUFBSSxHQUFHLENBQUNFLE1BQU0sR0FBR1IsZ0JBQWdCLEdBQUcsQ0FBdEIsR0FBMEJoQixDQUFqQyxJQUFzQyxDQUFDcUIsYUFBOUM7QUFFQSxZQUFNeEksTUFBTSxHQUFHMEksT0FBTyxDQUFDMUksTUFBdkI7QUFDQSxVQUFJNEksZUFBSjs7QUFFQSxVQUFJLEtBQUtwSyxLQUFMLENBQVdxSyxjQUFmLEVBQStCO0FBQzNCRCxRQUFBQSxlQUFlLEdBQUcsS0FBS3BLLEtBQUwsQ0FBV3FLLGNBQVgsQ0FBMEI3SSxNQUExQixDQUFsQjs7QUFDQSxZQUFJLENBQUM0SSxlQUFMLEVBQXNCO0FBQ2xCQSxVQUFBQSxlQUFlLEdBQUcsRUFBbEI7QUFDQSxlQUFLcEssS0FBTCxDQUFXcUssY0FBWCxDQUEwQjdJLE1BQTFCLElBQW9DNEksZUFBcEM7QUFDSDtBQUNKLE9BdkJxQyxDQXlCdEM7OztBQUNBTCxNQUFBQSxPQUFPLENBQUNPLE9BQVIsZUFDSSw2QkFBQywwQkFBRDtBQUNJLFFBQUEsR0FBRyxFQUFFOUksTUFEVDtBQUVJLFFBQUEsTUFBTSxFQUFFMEksT0FBTyxDQUFDakIsVUFGcEI7QUFHSSxRQUFBLGNBQWMsRUFBRXpILE1BSHBCO0FBSUksUUFBQSxVQUFVLEVBQUV5SSxJQUpoQjtBQUtJLFFBQUEsTUFBTSxFQUFFRSxNQUxaO0FBTUksUUFBQSxlQUFlLEVBQUVDLGVBTnJCO0FBT0ksUUFBQSxlQUFlLEVBQUUsS0FBS3BLLEtBQUwsQ0FBV3VLLGVBUGhDO0FBUUksUUFBQSxpQkFBaUIsRUFBRSxLQUFLMUcsNEJBUjVCO0FBU0ksUUFBQSxPQUFPLEVBQUUsS0FBSzJHLG9CQVRsQjtBQVVJLFFBQUEsU0FBUyxFQUFFTixPQUFPLENBQUNPLEVBVnZCO0FBV0ksUUFBQSxjQUFjLEVBQUUsS0FBS3pLLEtBQUwsQ0FBVzBLO0FBWC9CLFFBREo7QUFlSDs7QUFDRCxRQUFJQyxPQUFKOztBQUNBLFFBQUksQ0FBQyxLQUFLL0ksS0FBTCxDQUFXRCxjQUFoQixFQUFnQztBQUM1QixZQUFNaUosU0FBUyxHQUFHckcsUUFBUSxDQUFDUCxNQUFULEdBQWtCMkYsZ0JBQXBDOztBQUNBLFVBQUlpQixTQUFTLEdBQUcsQ0FBaEIsRUFBbUI7QUFDZkQsUUFBQUEsT0FBTyxnQkFBRztBQUFNLFVBQUEsU0FBUyxFQUFDLGtDQUFoQjtBQUNOLFVBQUEsT0FBTyxFQUFFLEtBQUtILG9CQURSO0FBRU4sVUFBQSxLQUFLLEVBQUU7QUFBRUssWUFBQUEsS0FBSyxFQUFFLFVBQVUsa0JBQU0sQ0FBQ1osSUFBUCxDQUFWLEdBQXlCLEtBQXpCLEdBQWlDRCxhQUFqQyxHQUFpRDtBQUExRCxXQUZEO0FBR04sdUJBQVU7QUFISixXQUdZWSxTQUhaLE1BQVY7QUFLSDtBQUNKOztBQUVELHdCQUNJO0FBQUssTUFBQSxTQUFTLEVBQUM7QUFBZixvQkFDSTtBQUFNLE1BQUEsU0FBUyxFQUFDO0FBQWhCLE9BQ01ELE9BRE4sRUFFTVosT0FGTixDQURKLENBREo7QUFRSDs7QUFvQ09lLEVBQUFBLGdCQUFnQixHQUFHO0FBQ3ZCLFVBQU03TSxFQUFFLEdBQUcsS0FBSytCLEtBQUwsQ0FBV08sT0FBdEIsQ0FEdUIsQ0FHdkI7O0FBQ0EsUUFBSXRDLEVBQUUsQ0FBQ0ksVUFBSCxHQUFnQkMsT0FBaEIsS0FBNEIsaUJBQWhDLEVBQW1EO0FBQy9DLDBCQUFPLDZCQUFDLHVCQUFELE9BQVA7QUFDSCxLQU5zQixDQVF2Qjs7O0FBQ0EsUUFBSUwsRUFBRSxDQUFDZ0osV0FBSCxFQUFKLEVBQXNCO0FBQ2xCLFVBQUksS0FBS3JGLEtBQUwsQ0FBVzhCLFFBQVgsS0FBd0I4RCxrQkFBU0ksTUFBckMsRUFBNkM7QUFDekMsZUFEeUMsQ0FDakM7QUFDWCxPQUZELE1BRU8sSUFBSSxLQUFLaEcsS0FBTCxDQUFXOEIsUUFBWCxLQUF3QjhELGtCQUFTWSxRQUFyQyxFQUErQztBQUNsRCxlQURrRCxDQUMxQztBQUNYLE9BRk0sTUFFQSxJQUFJLEtBQUt4RyxLQUFMLENBQVc4QixRQUFYLEtBQXdCOEQsa0JBQVNXLGVBQXJDLEVBQXNEO0FBQ3pELDRCQUFRLDZCQUFDLHlCQUFELE9BQVI7QUFDSCxPQUZNLE1BRUEsSUFBSSxLQUFLdkcsS0FBTCxDQUFXOEIsUUFBWCxLQUF3QjhELGtCQUFTUSxPQUFyQyxFQUE4QztBQUNqRCw0QkFBUSw2QkFBQyxpQkFBRCxPQUFSO0FBQ0gsT0FGTSxNQUVBO0FBQ0gsNEJBQVEsNkJBQUMsb0JBQUQsT0FBUjtBQUNIO0FBQ0o7O0FBRUQsUUFBSSxLQUFLL0gsT0FBTCxDQUFhOEssZUFBYixDQUE2QjlNLEVBQUUsQ0FBQzJDLFNBQUgsRUFBN0IsQ0FBSixFQUFrRDtBQUM5QztBQUNBO0FBQ0EsVUFBSTNDLEVBQUUsQ0FBQytNLE1BQUgsS0FBY0Msb0JBQVlDLFVBQTlCLEVBQTBDO0FBQ3RDO0FBQ0g7O0FBQ0QsVUFBSWpOLEVBQUUsQ0FBQytNLE1BQUgsS0FBY0Msb0JBQVlFLFFBQTlCLEVBQXdDO0FBQ3BDO0FBQ0g7O0FBQ0QsVUFBSWxOLEVBQUUsQ0FBQ3VCLE9BQUgsRUFBSixFQUFrQjtBQUNkLGVBRGMsQ0FDTjtBQUNYLE9BWDZDLENBWTlDOzs7QUFDQSwwQkFBTyw2QkFBQyxxQkFBRCxPQUFQO0FBQ0gsS0FyQ3NCLENBdUN2Qjs7O0FBQ0EsV0FBTyxJQUFQO0FBQ0g7O0FBc0NENEwsRUFBQUEsTUFBTSxHQUFHO0FBQUE7O0FBQ0wsVUFBTTlNLE9BQU8sR0FBRyxLQUFLMEIsS0FBTCxDQUFXTyxPQUFYLENBQW1CbEMsVUFBbkIsR0FBZ0NDLE9BQWhEO0FBQ0EsVUFBTThFLFNBQVMsR0FBRyxLQUFLcEQsS0FBTCxDQUFXTyxPQUFYLENBQW1CcEMsT0FBbkIsRUFBbEI7QUFDQSxVQUFNO0FBQ0ZrTixNQUFBQSxXQURFO0FBRUZDLE1BQUFBLGVBRkU7QUFHRkMsTUFBQUEsYUFIRTtBQUlGQyxNQUFBQTtBQUpFLFFBS0YscUNBQW9CLEtBQUt4TCxLQUFMLENBQVdPLE9BQS9CLENBTEo7QUFNQSxVQUFNO0FBQUVrRCxNQUFBQTtBQUFGLFFBQXNCLEtBQUs3QixLQUFqQyxDQVRLLENBV0w7QUFDQTs7QUFDQSxRQUFJLENBQUN5SixXQUFMLEVBQWtCO0FBQ2QsWUFBTTtBQUFFOUssUUFBQUE7QUFBRixVQUFjLEtBQUtQLEtBQXpCOztBQUNBeUwscUJBQU9DLElBQVAsQ0FBYSxrQ0FBaUN0SSxTQUFVLFlBQVc3QyxPQUFPLENBQUNmLE9BQVIsRUFBa0IsRUFBckY7O0FBQ0EsMEJBQU87QUFBSyxRQUFBLFNBQVMsRUFBQztBQUFmLHNCQUNIO0FBQUssUUFBQSxTQUFTLEVBQUM7QUFBZixTQUNNLHlCQUFHLG1DQUFILENBRE4sQ0FERyxDQUFQO0FBS0g7O0FBRUQsVUFBTW1NLGFBQWEsR0FBR0MsR0FBRyxDQUFDQyxZQUFKLENBQWlCUixXQUFqQixDQUF0Qjs7QUFDQSxVQUFNUyxlQUFlLEdBQUdDLG1DQUFpQkMsVUFBakIsQ0FBNEIsS0FBS2hNLEtBQUwsQ0FBV08sT0FBdkMsQ0FBeEI7O0FBRUEsVUFBTTBMLFdBQVcsR0FBRyx5QkFBVztBQUMzQkMsTUFBQUEsaUJBQWlCLEVBQUUsSUFEUTtBQUUzQkMsTUFBQUEsc0JBQXNCLEVBQUVMO0FBRkcsS0FBWCxDQUFwQjtBQUtBLFVBQU1NLFNBQVMsR0FBSSxDQUFDLFNBQUQsRUFBWSxRQUFaLEVBQXNCLFlBQXRCLEVBQW9DQyxPQUFwQyxDQUE0QyxLQUFLck0sS0FBTCxDQUFXc0UsZUFBdkQsTUFBNEUsQ0FBQyxDQUFoRztBQUNBLFVBQU1nSSxVQUFVLEdBQUdDLGNBQWMsQ0FBQyxLQUFLdk0sS0FBTCxDQUFXTyxPQUFaLENBQWQsSUFBc0MsS0FBS1AsS0FBTCxDQUFXc00sVUFBcEU7QUFDQSxVQUFNRSxtQkFBbUIsR0FBRyxLQUFLeE0sS0FBTCxDQUFXTyxPQUFYLENBQW1Ca00sbUJBQW5CLEVBQTVCO0FBRUEsVUFBTUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxLQUFLMU0sS0FBTCxDQUFXMk0sU0FBL0I7QUFDQSxVQUFNQyxPQUFPLEdBQUcseUJBQVc7QUFDdkJDLE1BQUFBLDRCQUE0QixFQUFFdkIsZUFEUDtBQUV2QndCLE1BQUFBLDhCQUE4QixFQUFFdEIsMEJBRlQ7QUFHdkJ1QixNQUFBQSxZQUFZLEVBQUUsSUFIUztBQUl2QkMsTUFBQUEsc0JBQXNCLEVBQUVOLFNBSkQ7QUFLdkJPLE1BQUFBLGlCQUFpQixFQUFFMUIsYUFMSTtBQU12QjJCLE1BQUFBLGlCQUFpQixFQUFFLEtBQUtsTixLQUFMLENBQVcwSyxZQU5QO0FBT3ZCO0FBQ0F5QyxNQUFBQSxvQkFBb0IsRUFBRSxDQUFDVCxTQUFELElBQWNOLFNBUmI7QUFTdkJnQixNQUFBQSxzQkFBc0IsRUFBRSxLQUFLcE4sS0FBTCxDQUFXcU4sU0FBWCxLQUF5QjFOLFNBQVMsQ0FBQzJOLEtBQW5DLEdBQTJDLEtBQTNDLEdBQW1ELEtBQUtwRSxlQUFMLEVBVHBEO0FBVXZCcUUsTUFBQUEscUJBQXFCLEVBQUUsS0FBS3ZOLEtBQUwsQ0FBV3dOLGVBVlg7QUFXdkJDLE1BQUFBLHlCQUF5QixFQUNyQixDQUFDLEtBQUt6TixLQUFMLENBQVdxTixTQUFYLEdBQXVCLEVBQXZCLEdBQTRCLEtBQUtyTixLQUFMLENBQVcwTixZQUF4QyxLQUNBdEssU0FBUyxLQUFLakgsaUJBQVVPLFVBYkw7QUFldkJpUixNQUFBQSxpQkFBaUIsRUFBRSxLQUFLM04sS0FBTCxDQUFXNE4sSUFmUDtBQWdCdkJDLE1BQUFBLDBCQUEwQixFQUFFLEtBQUs3TixLQUFMLENBQVc4TixhQWhCaEI7QUFpQnZCQyxNQUFBQSx1QkFBdUIsRUFBRSxLQUFLL04sS0FBTCxDQUFXZ08sVUFqQmI7QUFrQnZCQyxNQUFBQSw2QkFBNkIsRUFBRSxLQUFLck0sS0FBTCxDQUFXZ0IsZ0JBbEJuQjtBQW1CdkJzTCxNQUFBQSxxQkFBcUIsRUFBRSxDQUFDNUMsZUFBRCxJQUFvQixLQUFLMUosS0FBTCxDQUFXOEIsUUFBWCxLQUF3QjhELGtCQUFTWSxRQW5CckQ7QUFvQnZCK0YsTUFBQUEsdUJBQXVCLEVBQUUsQ0FBQzdDLGVBQUQsSUFBb0IsS0FBSzFKLEtBQUwsQ0FBVzhCLFFBQVgsS0FBd0I4RCxrQkFBU0MsT0FwQnZEO0FBcUJ2QjJHLE1BQUFBLG9CQUFvQixFQUFFLENBQUM5QyxlQUFELElBQW9CLEtBQUsxSixLQUFMLENBQVc4QixRQUFYLEtBQXdCOEQsa0JBQVNRLE9BckJwRDtBQXNCdkJxRyxNQUFBQSxnQkFBZ0IsRUFBRTdCLG1CQXRCSztBQXVCdkI4QixNQUFBQSxrQkFBa0IsRUFBRWhRLE9BQU8sS0FBSyxTQXZCVDtBQXdCdkJpUSxNQUFBQSxxQkFBcUIsRUFBRSxLQUFLdk8sS0FBTCxDQUFXd08sVUF4Qlg7QUF5QnZCQyxNQUFBQSxrQkFBa0IsRUFBRSxLQUFLek8sS0FBTCxDQUFXcU4sU0FBWCxLQUF5QjFOLFNBQVMsQ0FBQytPO0FBekJoQyxLQUFYLENBQWhCLENBcENLLENBZ0VMOztBQUNBLFVBQU1DLFFBQVEsR0FBSSxLQUFLM08sS0FBTCxDQUFXc0UsZUFBWCxLQUErQixJQUFoQyxHQUF3QyxLQUF4QyxHQUFnRHRGLFNBQWpFO0FBRUEsUUFBSTRQLFNBQVMsR0FBRyxHQUFoQjs7QUFDQSxRQUFJLEtBQUs1TyxLQUFMLENBQVc2TyxnQkFBZixFQUFpQztBQUM3QkQsTUFBQUEsU0FBUyxHQUFHLEtBQUs1TyxLQUFMLENBQVc2TyxnQkFBWCxDQUE0QkMsUUFBNUIsQ0FBcUMsS0FBSzlPLEtBQUwsQ0FBV08sT0FBWCxDQUFtQkMsS0FBbkIsRUFBckMsQ0FBWjtBQUNILEtBdEVJLENBd0VMO0FBQ0E7OztBQUNBLFVBQU11TyxXQUFXLEdBQUcsS0FBSy9PLEtBQUwsQ0FBV08sT0FBWCxDQUFtQnlLLE1BQW5CLEdBQ2RoTSxTQURjLEdBRWQsS0FBS2dCLEtBQUwsQ0FBV08sT0FBWCxDQUFtQkMsS0FBbkIsRUFGTjtBQUlBLFFBQUl3TyxNQUFKO0FBQ0EsUUFBSWxJLE1BQUo7QUFDQSxRQUFJbUksVUFBSjtBQUNBLFFBQUlDLGtCQUFKOztBQUVBLFFBQUksS0FBS2xQLEtBQUwsQ0FBV3FOLFNBQVgsS0FBeUIxTixTQUFTLENBQUMyTixLQUF2QyxFQUE4QztBQUMxQzJCLE1BQUFBLFVBQVUsR0FBRyxFQUFiO0FBQ0FDLE1BQUFBLGtCQUFrQixHQUFHLElBQXJCO0FBQ0gsS0FIRCxNQUdPLElBQUk3RCxXQUFXLEtBQUsscUJBQWhCLElBQXlDQyxlQUE3QyxFQUE4RDtBQUNqRTJELE1BQUFBLFVBQVUsR0FBRyxDQUFiO0FBQ0FDLE1BQUFBLGtCQUFrQixHQUFHLEtBQXJCO0FBQ0gsS0FITSxNQUdBLElBQUkzRCxhQUFKLEVBQW1CO0FBQ3RCO0FBQ0E7QUFDQTBELE1BQUFBLFVBQVUsR0FBRyxFQUFiO0FBQ0FDLE1BQUFBLGtCQUFrQixHQUFHLEtBQXJCO0FBQ0gsS0FMTSxNQUtBLElBQUksS0FBS2xQLEtBQUwsQ0FBVzRKLE1BQVgsSUFBcUJDLGVBQU9zRixHQUFoQyxFQUFxQztBQUN4Q0YsTUFBQUEsVUFBVSxHQUFHLEVBQWI7QUFDQUMsTUFBQUEsa0JBQWtCLEdBQUcsSUFBckI7QUFDSCxLQUhNLE1BR0EsSUFDRixLQUFLbFAsS0FBTCxDQUFXME4sWUFBWCxJQUEyQixLQUFLMU4sS0FBTCxDQUFXcU4sU0FBWCxLQUF5QjFOLFNBQVMsQ0FBQ3lQLFFBQS9ELElBQ0FoTSxTQUFTLEtBQUtqSCxpQkFBVU8sVUFGckIsRUFHTDtBQUNFO0FBQ0F1UyxNQUFBQSxVQUFVLEdBQUcsQ0FBYjtBQUNBQyxNQUFBQSxrQkFBa0IsR0FBRyxLQUFyQjtBQUNILEtBUE0sTUFPQTtBQUNIRCxNQUFBQSxVQUFVLEdBQUcsRUFBYjtBQUNBQyxNQUFBQSxrQkFBa0IsR0FBRyxJQUFyQjtBQUNIOztBQUVELFFBQUksS0FBS2xQLEtBQUwsQ0FBV08sT0FBWCxDQUFtQnVHLE1BQW5CLElBQTZCbUksVUFBakMsRUFBNkM7QUFDekMsVUFBSUksTUFBSixDQUR5QyxDQUV6QztBQUNBO0FBQ0E7O0FBQ0EsVUFBSSxLQUFLclAsS0FBTCxDQUFXTyxPQUFYLENBQW1CbEMsVUFBbkIsR0FBZ0NpUixrQkFBcEMsRUFBd0Q7QUFDcERELFFBQUFBLE1BQU0sR0FBRyxLQUFLclAsS0FBTCxDQUFXTyxPQUFYLENBQW1CZ1AsTUFBNUI7QUFDSCxPQUZELE1BRU87QUFDSEYsUUFBQUEsTUFBTSxHQUFHLEtBQUtyUCxLQUFMLENBQVdPLE9BQVgsQ0FBbUJ1RyxNQUE1QjtBQUNIOztBQUNEa0ksTUFBQUEsTUFBTSxnQkFDRjtBQUFLLFFBQUEsU0FBUyxFQUFDO0FBQWYsc0JBQ0ksNkJBQUMscUJBQUQ7QUFDSSxRQUFBLE1BQU0sRUFBRUssTUFEWjtBQUVJLFFBQUEsS0FBSyxFQUFFSixVQUZYO0FBR0ksUUFBQSxNQUFNLEVBQUVBLFVBSFo7QUFJSSxRQUFBLGVBQWUsRUFBRTtBQUpyQixRQURKLENBREo7QUFVSDs7QUFFRCxRQUFJQyxrQkFBa0IsSUFBSSxLQUFLbFAsS0FBTCxDQUFXd08sVUFBWCxLQUEwQixJQUFwRCxFQUEwRDtBQUN0RCxVQUFJLENBQUMsS0FBS3hPLEtBQUwsQ0FBV3FOLFNBQVosSUFBeUIsS0FBS3JOLEtBQUwsQ0FBV3FOLFNBQVgsS0FBeUIxTixTQUFTLENBQUM2UCxNQUFoRSxFQUF3RTtBQUNwRTFJLFFBQUFBLE1BQU0sZ0JBQUcsNkJBQUMsc0JBQUQ7QUFBZSxVQUFBLE9BQU8sRUFBRSxLQUFLMkksb0JBQTdCO0FBQ0wsVUFBQSxPQUFPLEVBQUUsS0FBS3pQLEtBQUwsQ0FBV08sT0FEZjtBQUVMLFVBQUEsV0FBVyxFQUFFLEtBQUtQLEtBQUwsQ0FBVzBQO0FBRm5CLFVBQVQ7QUFJSCxPQUxELE1BS087QUFDSDVJLFFBQUFBLE1BQU0sZ0JBQUcsNkJBQUMsc0JBQUQ7QUFBZSxVQUFBLE9BQU8sRUFBRSxLQUFLOUcsS0FBTCxDQUFXTyxPQUFuQztBQUE0QyxVQUFBLFdBQVcsRUFBRSxLQUFLUCxLQUFMLENBQVcwUDtBQUFwRSxVQUFUO0FBQ0g7QUFDSjs7QUFFRCxVQUFNQyxvQkFBb0IsR0FBRyxDQUFDakQsU0FBRCxJQUFjLENBQUMsS0FBSzFNLEtBQUwsQ0FBVzRFLFNBQXZEO0FBQ0EsVUFBTWdMLFNBQVMsR0FBR0Qsb0JBQW9CLGdCQUFHLDZCQUFDLHlCQUFEO0FBQ3JDLE1BQUEsT0FBTyxFQUFFLEtBQUszUCxLQUFMLENBQVdPLE9BRGlCO0FBRXJDLE1BQUEsU0FBUyxFQUFFLEtBQUtxQixLQUFMLENBQVcwQixTQUZlO0FBR3JDLE1BQUEsZ0JBQWdCLEVBQUUsS0FBS3RELEtBQUwsQ0FBVzZPLGdCQUhRO0FBSXJDLE1BQUEsT0FBTyxFQUFFLEtBQUtnQixPQUp1QjtBQUtyQyxNQUFBLGFBQWEsRUFBRSxLQUFLQyxhQUxpQjtBQU1yQyxNQUFBLGFBQWEsRUFBRSxLQUFLQyxzQkFOaUI7QUFPckMsTUFBQSxlQUFlLEVBQUV0TSxlQVBvQjtBQVFyQyxNQUFBLG9CQUFvQixFQUFFLE1BQU0sS0FBS3VNLGdCQUFMLENBQXNCLENBQUN2TSxlQUF2QjtBQVJTLE1BQUgsR0FTakN6RSxTQVRMO0FBV0EsVUFBTWlSLGFBQWEsR0FBRyxLQUFLalEsS0FBTCxDQUFXTyxPQUFYLENBQW1CMlAsS0FBbkIsT0FDZCxLQUFLbFEsS0FBTCxDQUFXbVEsb0JBQVgsSUFDRCxLQUFLblEsS0FBTCxDQUFXNE4sSUFEVixJQUVELEtBQUtoTSxLQUFMLENBQVcrQixLQUZWLElBR0QsS0FBSy9CLEtBQUwsQ0FBV2dCLGdCQUpJLENBQXRCOztBQU1BLFVBQU1sQyxJQUFJLEdBQUdoQyxpQ0FBZ0JDLEdBQWhCLEdBQXNCZ0MsT0FBdEIsQ0FBOEIsS0FBS1gsS0FBTCxDQUFXTyxPQUFYLENBQW1CSyxTQUFuQixFQUE5QixDQUFiOztBQUNBLFVBQU1ULE1BQU0sR0FBR08sSUFBSCxhQUFHQSxJQUFILGdEQUFHQSxJQUFJLENBQUUwUCxrQkFBVCwwREFBRywyQkFBQTFQLElBQUksRUFBdUIsS0FBS1YsS0FBTCxDQUFXTyxPQUFsQyxDQUFuQixDQWpLSyxDQW1LTDs7QUFDQSxVQUFNa0ssRUFBRSxHQUFHLEtBQUt6SyxLQUFMLENBQVdxTixTQUFYLEtBQXlCMU4sU0FBUyxDQUFDK08sV0FBbkMsR0FDTCxLQUFLMU8sS0FBTCxDQUFXTyxPQUFYLENBQW1CMlAsS0FBbkIsRUFESyxHQUVML1AsTUFGSyxhQUVMQSxNQUZLLHVCQUVMQSxNQUFNLENBQUVrUSxTQUFSLENBQWtCSCxLQUFsQixFQUZOO0FBSUEsVUFBTUksU0FBUyxHQUFHTCxhQUFhLElBQUl4RixFQUFqQixnQkFDZCw2QkFBQyx5QkFBRDtBQUNJLE1BQUEsWUFBWSxFQUFFLEtBQUt6SyxLQUFMLENBQVdxTixTQUFYLEtBQXlCMU4sU0FBUyxDQUFDK08sV0FEckQ7QUFFSSxNQUFBLGNBQWMsRUFBRSxLQUFLMU8sS0FBTCxDQUFXMEssWUFGL0I7QUFHSSxNQUFBLEVBQUUsRUFBRUQ7QUFIUixNQURjLEdBS1QsSUFMVDs7QUFPQSxVQUFNOEYsa0JBQWtCLGdCQUNwQjtBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsb0JBQ0ksd0NBQ00sS0FBSzNPLEtBQUwsQ0FBV08sdUJBQVgsR0FDRSx5QkFBSSw2RUFDQSx5QkFESixDQURGLEdBR0UseUJBQUksOEVBQ0EsNEVBREEsR0FFQSxrREFGSixDQUpSLENBREosZUFVSSx3Q0FDTSx5QkFBSSw4RUFDRSwwQkFETixDQUROLENBVkosQ0FESjs7QUFpQkEsVUFBTXFPLHFCQUFxQixHQUFHLEtBQUs1TyxLQUFMLENBQVdPLHVCQUFYLEdBQzFCLHlCQUFHLG1CQUFILENBRDBCLEdBRTFCLHlCQUNJLGlGQURKLEVBRUksRUFGSixFQUdJO0FBQUUscUJBQWdCc08sR0FBRCxpQkFBUztBQUFHLFFBQUEsT0FBTyxFQUFFLEtBQUtDO0FBQWpCLFNBQXVDRCxHQUF2QztBQUExQixLQUhKLENBRko7QUFRQSxVQUFNRSxjQUFjLEdBQUduRSxtQkFBbUIsSUFBSSxDQUFDRixVQUF4QixnQkFDbkI7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLG9CQUNJO0FBQU0sTUFBQSxTQUFTLEVBQUM7QUFBaEIsT0FDTWtFLHFCQUROLENBREosZUFJSSw2QkFBQyxzQkFBRDtBQUFlLE1BQUEsUUFBUSxFQUFFRDtBQUF6QixNQUpKLENBRG1CLEdBTVYsSUFOYjtBQVFBLFFBQUlLLFlBQUo7O0FBQ0EsUUFBSSxDQUFDdEUsVUFBTCxFQUFpQjtBQUNic0UsTUFBQUEsWUFBWSxnQkFBRyw2QkFBQyxxQkFBRDtBQUNYLFFBQUEsT0FBTyxFQUFFLEtBQUs1USxLQUFMLENBQVdPLE9BRFQ7QUFFWCxRQUFBLFNBQVMsRUFBRSxLQUFLcUIsS0FBTCxDQUFXMEI7QUFGWCxRQUFmO0FBSUg7O0FBRUQsVUFBTXVOLGVBQWUsZ0JBQUc7QUFDcEIsTUFBQSxJQUFJLEVBQUVqQyxTQURjO0FBRXBCLE1BQUEsT0FBTyxFQUFFLEtBQUtrQyxrQkFGTTtBQUdwQixvQkFBWSwyQkFBVyxJQUFJQyxJQUFKLENBQVMsS0FBSy9RLEtBQUwsQ0FBV08sT0FBWCxDQUFtQjJQLEtBQW5CLEVBQVQsQ0FBWCxFQUFpRCxLQUFLbFEsS0FBTCxDQUFXMEssWUFBNUQ7QUFIUSxPQUtsQjRGLFNBTGtCLENBQXhCOztBQVFBLFVBQU1VLFlBQVksR0FBRyxLQUFLaFIsS0FBTCxDQUFXNEosTUFBWCxJQUFxQkMsZUFBT3NGLEdBQWpEO0FBQ0EsVUFBTThCLGNBQWMsR0FBRyxDQUFDRCxZQUFELEdBQWdCSCxlQUFoQixHQUFrQyxJQUF6RDtBQUNBLFVBQU1LLFlBQVksR0FBR0YsWUFBWSxHQUFHSCxlQUFILEdBQXFCLElBQXREO0FBQ0EsVUFBTU0sWUFBWSxHQUFHLENBQUNILFlBQUQsSUFBaUIsQ0FBQzFGLGVBQWxCLElBQXFDLEtBQUtSLGdCQUFMLEVBQTFEO0FBQ0EsVUFBTXNHLFVBQVUsR0FBR0osWUFBWSxJQUFJLENBQUMxRixlQUFqQixJQUFvQyxLQUFLUixnQkFBTCxFQUF2RDtBQUVBLFFBQUl1RyxTQUFKOztBQUNBLFFBQUksS0FBS3JSLEtBQUwsQ0FBV3NSLGdCQUFmLEVBQWlDO0FBQzdCLFlBQU1DLFdBQVcsR0FBRyxLQUFLOUgsY0FBTCxFQUFwQjtBQUNBNEgsTUFBQUEsU0FBUyxHQUFHRSxXQUFaO0FBQ0g7O0FBRUQsVUFBTXhPLFVBQVUsR0FBR3lPLGdCQUFnQixDQUFDLEtBQUt4UixLQUFMLENBQVdPLE9BQVosQ0FBaEIsSUFDUGtSLG9CQUFXQyxRQUFYLENBQW9CLEtBQUsxUixLQUFMLENBQVdPLE9BQS9CLENBRE8sZ0JBRVgsNkJBQUMsbUJBQUQ7QUFDSSxNQUFBLFFBQVEsRUFBRSxLQUFLUCxLQUFMLENBQVdPLE9BRHpCO0FBRUksTUFBQSxlQUFlLEVBQUUsS0FBS1AsS0FBTCxDQUFXMEgsZUFGaEM7QUFHSSxNQUFBLEdBQUcsRUFBRSxLQUFLM0UsVUFIZDtBQUlJLE1BQUEsU0FBUyxFQUFFLEtBQUsvQyxLQUFMLENBQVc0RSxTQUoxQjtBQUtJLE1BQUEsZ0JBQWdCLEVBQUUsS0FBSzVFLEtBQUwsQ0FBVzZPLGdCQUxqQztBQU1JLE1BQUEsTUFBTSxFQUFFLEtBQUs3TyxLQUFMLENBQVc0SixNQU52QjtBQU9JLE1BQUEsb0JBQW9CLEVBQUUsS0FBSzVKLEtBQUwsQ0FBV21RLG9CQUFYLElBQW1DLEtBQUt2TyxLQUFMLENBQVcrQixLQVB4RTtBQVFJLE1BQUEsZUFBZSxFQUFFRixlQVJyQjtBQVNJLE1BQUEsZ0JBQWdCLEVBQUUsS0FBS3VNO0FBVDNCLE1BRlcsR0FZTCxJQVpkOztBQWNBLFlBQVEsS0FBS2hRLEtBQUwsQ0FBV3FOLFNBQW5CO0FBQ0ksV0FBSzFOLFNBQVMsQ0FBQzJOLEtBQWY7QUFBc0I7QUFDbEIsZ0JBQU01TSxJQUFJLEdBQUcsS0FBS1QsT0FBTCxDQUFhVSxPQUFiLENBQXFCLEtBQUtYLEtBQUwsQ0FBV08sT0FBWCxDQUFtQkssU0FBbkIsRUFBckIsQ0FBYjtBQUNBLDhCQUFPZixlQUFNOFIsYUFBTixDQUFvQixLQUFLM1IsS0FBTCxDQUFXNFIsRUFBWCxJQUFpQixJQUFyQyxFQUEyQztBQUM5Qyx5QkFBYWhGLE9BRGlDO0FBRTlDLHlCQUFhK0IsUUFGaUM7QUFHOUMsMkJBQWUsSUFIK0I7QUFJOUMsa0NBQXNCSTtBQUp3QixXQUEzQyxFQUtKLGNBQ0M7QUFBSyxZQUFBLFNBQVMsRUFBQyx1QkFBZjtBQUF1QyxZQUFBLEdBQUcsRUFBQztBQUEzQywwQkFDSSw2QkFBQyxtQkFBRDtBQUFZLFlBQUEsSUFBSSxFQUFFck8sSUFBbEI7QUFBd0IsWUFBQSxLQUFLLEVBQUUsRUFBL0I7QUFBbUMsWUFBQSxNQUFNLEVBQUU7QUFBM0MsWUFESixlQUVJO0FBQUcsWUFBQSxJQUFJLEVBQUVrTyxTQUFUO0FBQW9CLFlBQUEsT0FBTyxFQUFFLEtBQUtrQztBQUFsQyxhQUNNcFEsSUFBSSxHQUFHQSxJQUFJLENBQUNuRSxJQUFSLEdBQWUsRUFEekIsQ0FGSixDQURELGVBT0M7QUFBSyxZQUFBLFNBQVMsRUFBQyw0QkFBZjtBQUE0QyxZQUFBLEdBQUcsRUFBQztBQUFoRCxhQUNNeVMsTUFETixlQUVJO0FBQUcsWUFBQSxJQUFJLEVBQUVKLFNBQVQ7QUFBb0IsWUFBQSxPQUFPLEVBQUUsS0FBS2tDO0FBQWxDLGFBQ01oSyxNQUROLEVBRU13SixTQUZOLENBRkosQ0FQRCxlQWNDO0FBQUssWUFBQSxTQUFTLEVBQUVyRSxXQUFoQjtBQUE2QixZQUFBLEdBQUcsRUFBQztBQUFqQywwQkFDSSw2QkFBQyxhQUFEO0FBQWUsWUFBQSxHQUFHLEVBQUUsS0FBS3BKLElBQXpCO0FBQ0ksWUFBQSxPQUFPLEVBQUUsS0FBSzdDLEtBQUwsQ0FBV08sT0FEeEI7QUFFSSxZQUFBLFVBQVUsRUFBRSxLQUFLUCxLQUFMLENBQVc2UixVQUYzQjtBQUdJLFlBQUEsYUFBYSxFQUFFLEtBQUs3UixLQUFMLENBQVc4UixhQUg5QjtBQUlJLFlBQUEsY0FBYyxFQUFFLEtBQUs5UixLQUFMLENBQVcrUixjQUovQjtBQUtJLFlBQUEsZUFBZSxFQUFFLEtBQUsvUixLQUFMLENBQVcwSCxlQUxoQztBQU1JLFlBQUEsU0FBUyxFQUFFLEtBQUsxSCxLQUFMLENBQVdxTixTQU4xQjtBQU9JLFlBQUEsU0FBUyxFQUFFLEtBQUtyTixLQUFMLENBQVcyTSxTQVAxQjtBQVFJLFlBQUEsb0JBQW9CLEVBQUUsS0FBSzNNLEtBQUwsQ0FBV2lEO0FBUnJDLFlBREosQ0FkRCxDQUxJLENBQVA7QUFnQ0g7O0FBQ0QsV0FBS3RELFNBQVMsQ0FBQzZQLE1BQWY7QUFBdUI7QUFDbkIsZ0JBQU05TyxJQUFJLEdBQUcsS0FBS1QsT0FBTCxDQUFhVSxPQUFiLENBQXFCLEtBQUtYLEtBQUwsQ0FBV08sT0FBWCxDQUFtQkssU0FBbkIsRUFBckIsQ0FBYjtBQUNBLDhCQUFPZixlQUFNOFIsYUFBTixDQUFvQixLQUFLM1IsS0FBTCxDQUFXNFIsRUFBWCxJQUFpQixJQUFyQyxFQUEyQztBQUM5Qyx5QkFBYWhGLE9BRGlDO0FBRTlDLHlCQUFhK0IsUUFGaUM7QUFHOUMsMkJBQWUsSUFIK0I7QUFJOUMsa0NBQXNCSSxXQUp3QjtBQUs5Qyw4QkFBa0IsQ0FBQyxDQUFDaE0sVUFMMEI7QUFNOUMsNEJBQWdCLE1BQU0sS0FBSzNDLFFBQUwsQ0FBYztBQUFFdUQsY0FBQUEsS0FBSyxFQUFFO0FBQVQsYUFBZCxDQU53QjtBQU85Qyw0QkFBZ0IsTUFBTSxLQUFLdkQsUUFBTCxDQUFjO0FBQUV1RCxjQUFBQSxLQUFLLEVBQUU7QUFBVCxhQUFkO0FBUHdCLFdBQTNDLEVBUUosY0FDQztBQUFLLFlBQUEsU0FBUyxFQUFDLHVCQUFmO0FBQXVDLFlBQUEsR0FBRyxFQUFDO0FBQTNDLDBCQUNJLDZCQUFDLG1CQUFEO0FBQVksWUFBQSxJQUFJLEVBQUVqRCxJQUFsQjtBQUF3QixZQUFBLEtBQUssRUFBRSxFQUEvQjtBQUFtQyxZQUFBLE1BQU0sRUFBRTtBQUEzQyxZQURKLGVBRUk7QUFBRyxZQUFBLElBQUksRUFBRWtPLFNBQVQ7QUFBb0IsWUFBQSxPQUFPLEVBQUUsS0FBS2tDO0FBQWxDLGFBQ01wUSxJQUFJLEdBQUdBLElBQUksQ0FBQ25FLElBQVIsR0FBZSxFQUR6QixDQUZKLENBREQsZUFPQztBQUFLLFlBQUEsU0FBUyxFQUFDLDRCQUFmO0FBQTRDLFlBQUEsR0FBRyxFQUFDO0FBQWhELGFBQ015UyxNQUROLGVBRUk7QUFBRyxZQUFBLElBQUksRUFBRUosU0FBVDtBQUFvQixZQUFBLE9BQU8sRUFBRSxLQUFLa0M7QUFBbEMsYUFDTWhLLE1BRE4sQ0FGSixDQVBELGVBYUM7QUFBSyxZQUFBLFNBQVMsRUFBRW1GLFdBQWhCO0FBQTZCLFlBQUEsR0FBRyxFQUFDO0FBQWpDLGFBQ01sSixVQUROLGVBRUksNkJBQUMsYUFBRDtBQUFlLFlBQUEsR0FBRyxFQUFFLEtBQUtGLElBQXpCO0FBQ0ksWUFBQSxPQUFPLEVBQUUsS0FBSzdDLEtBQUwsQ0FBV08sT0FEeEI7QUFFSSxZQUFBLFVBQVUsRUFBRSxLQUFLUCxLQUFMLENBQVc2UixVQUYzQjtBQUdJLFlBQUEsYUFBYSxFQUFFLEtBQUs3UixLQUFMLENBQVc4UixhQUg5QjtBQUlJLFlBQUEsY0FBYyxFQUFFLEtBQUs5UixLQUFMLENBQVcrUixjQUovQjtBQUtJLFlBQUEsZUFBZSxFQUFFLEtBQUsvUixLQUFMLENBQVcwSCxlQUxoQztBQU1JLFlBQUEsU0FBUyxFQUFFLEtBQUsxSCxLQUFMLENBQVdxTixTQU4xQjtBQU9JLFlBQUEsU0FBUyxFQUFFLEtBQUtyTixLQUFMLENBQVcyTSxTQVAxQjtBQVFJLFlBQUEsZ0JBQWdCLEVBQUUsS0FBSzNNLEtBQUwsQ0FBV2dTLGdCQVJqQztBQVNJLFlBQUEsb0JBQW9CLEVBQUUsS0FBS2hTLEtBQUwsQ0FBV2lEO0FBVHJDLFlBRkosRUFhTTJNLFNBYk4sRUFjTVUsU0FkTixDQWJELEVBNkJDTSxZQTdCRCxDQVJJLENBQVA7QUF1Q0g7O0FBQ0QsV0FBS2pSLFNBQVMsQ0FBQytPLFdBQWY7QUFBNEI7QUFBQTs7QUFDeEIsZ0JBQU11RCxVQUFVLEdBQUcsOEJBQUtqUyxLQUFMLENBQVdPLE9BQVgsdUdBQW9CdUcsTUFBcEIsZ0ZBQTRCdEYsTUFBNUIsTUFBdUM5QyxpQ0FBZ0JDLEdBQWhCLEdBQXNCRSxTQUF0QixFQUExRCxDQUR3QixDQUd4Qjs7O0FBQ0EsOEJBQ0lnQixlQUFNOFIsYUFBTixDQUFvQixLQUFLM1IsS0FBTCxDQUFXNFIsRUFBWCxJQUFpQixJQUFyQyxFQUEyQztBQUN2QyxtQkFBTyxLQUFLTSxHQUQyQjtBQUV2Qyx5QkFBYXRGLE9BRjBCO0FBR3ZDLHdCQUFZLENBQUMsQ0FIMEI7QUFJdkMseUJBQWErQixRQUowQjtBQUt2QywyQkFBZSxNQUx3QjtBQU12QyxrQ0FBc0JJLFdBTmlCO0FBT3ZDLDJCQUFlLEtBQUsvTyxLQUFMLENBQVc0SixNQVBhO0FBUXZDLDBCQUFjLEtBQUs1SixLQUFMLENBQVdxTixTQVJjO0FBU3ZDLHlCQUFhNEUsVUFUMEI7QUFVdkMsOEJBQWtCLENBQUMsQ0FBQ2xQLFVBVm1CO0FBV3ZDLDRCQUFnQixNQUFNLEtBQUszQyxRQUFMLENBQWM7QUFBRXVELGNBQUFBLEtBQUssRUFBRTtBQUFULGFBQWQsQ0FYaUI7QUFZdkMsNEJBQWdCLE1BQU0sS0FBS3ZELFFBQUwsQ0FBYztBQUFFdUQsY0FBQUEsS0FBSyxFQUFFO0FBQVQsYUFBZDtBQVppQixXQUEzQyxlQWNHLDREQUNHbUQsTUFESCxFQUVHa0ksTUFGSCxlQUdDO0FBQ0ksWUFBQSxTQUFTLEVBQUUvQyxXQURmO0FBRUksWUFBQSxPQUFPLEVBQUUsTUFBTSxzQ0FBd0IsS0FBS2pNLEtBQUwsQ0FBV08sT0FBbkMsQ0FGbkI7QUFHSSxZQUFBLEdBQUcsRUFBQztBQUhSLGFBS01zUSxlQUxOLEVBTU0sS0FBSy9GLGdCQUFMLEVBTk4sZUFPSTtBQUFLLFlBQUEsU0FBUyxFQUFDO0FBQWYsYUFDTW5FLHlDQUFvQkMsUUFBcEIsQ0FBNkJDLHVCQUE3QixDQUFxRCxLQUFLN0csS0FBTCxDQUFXTyxPQUFoRSxDQUROLENBUEosRUFVTSxLQUFLMkYsd0JBQUwsRUFWTixDQUhELGVBZUMsNkJBQUMsZ0JBQUQ7QUFBUyxZQUFBLFNBQVMsRUFBQyxxQkFBbkI7QUFBeUMsMEJBQVkseUJBQUcsaUJBQUgsQ0FBckQ7QUFBNEUseUJBQVU7QUFBdEYsMEJBQ0ksNkJBQUMsNERBQUQ7QUFDSSxZQUFBLFNBQVMsRUFBQyxpRUFEZDtBQUVJLFlBQUEsS0FBSyxFQUFFLHlCQUFHLGlCQUFILENBRlg7QUFHSSxZQUFBLE9BQU8sRUFBRSxNQUFNLHNDQUF3QixLQUFLbEcsS0FBTCxDQUFXTyxPQUFuQyxDQUhuQjtBQUlJLFlBQUEsR0FBRyxFQUFDO0FBSlIsWUFESixlQU9JLDZCQUFDLDhCQUFEO0FBQ0ksWUFBQSxPQUFPLEVBQUUsS0FBS1AsS0FBTCxDQUFXTyxPQUR4QjtBQUVJLFlBQUEsZ0JBQWdCLEVBQUUsS0FBS1AsS0FBTCxDQUFXNk8sZ0JBRmpDO0FBR0ksWUFBQSxZQUFZLEVBQUUsS0FBS2tCO0FBSHZCLFlBUEosQ0FmRCxFQTRCR3NCLFNBNUJILENBZEgsQ0FESjtBQThDSDs7QUFDRCxXQUFLMVIsU0FBUyxDQUFDeVAsUUFBZjtBQUF5QjtBQUNyQiw4QkFBT3ZQLGVBQU04UixhQUFOLENBQW9CLEtBQUszUixLQUFMLENBQVc0UixFQUFYLElBQWlCLElBQXJDLEVBQTJDO0FBQzlDLHlCQUFhaEYsT0FEaUM7QUFFOUMseUJBQWErQixRQUZpQztBQUc5QywyQkFBZSxJQUgrQjtBQUk5QyxrQ0FBc0JJO0FBSndCLFdBQTNDLEVBS0osY0FDQztBQUFLLFlBQUEsU0FBUyxFQUFFOUMsV0FBaEI7QUFBNkIsWUFBQSxHQUFHLEVBQUM7QUFBakMsMEJBQ0ksNkJBQUMsYUFBRDtBQUFlLFlBQUEsR0FBRyxFQUFFLEtBQUtwSixJQUF6QjtBQUNJLFlBQUEsT0FBTyxFQUFFLEtBQUs3QyxLQUFMLENBQVdPLE9BRHhCO0FBRUksWUFBQSxVQUFVLEVBQUUsS0FBS1AsS0FBTCxDQUFXNlIsVUFGM0I7QUFHSSxZQUFBLGFBQWEsRUFBRSxLQUFLN1IsS0FBTCxDQUFXOFIsYUFIOUI7QUFJSSxZQUFBLGNBQWMsRUFBRSxLQUFLOVIsS0FBTCxDQUFXK1IsY0FKL0I7QUFLSSxZQUFBLFNBQVMsRUFBRSxLQUFLL1IsS0FBTCxDQUFXcU4sU0FMMUI7QUFNSSxZQUFBLGVBQWUsRUFBRSxLQUFLck4sS0FBTCxDQUFXMEgsZUFOaEM7QUFPSSxZQUFBLFNBQVMsRUFBRSxLQUFLMUgsS0FBTCxDQUFXMk0sU0FQMUI7QUFRSSxZQUFBLG9CQUFvQixFQUFFLEtBQUszTSxLQUFMLENBQVdpRDtBQVJyQyxZQURKLENBREQsZUFhQztBQUNJLFlBQUEsU0FBUyxFQUFDLGdDQURkO0FBRUksWUFBQSxHQUFHLEVBQUMsZ0NBRlI7QUFHSSxZQUFBLElBQUksRUFBRTJMLFNBSFY7QUFJSSxZQUFBLE9BQU8sRUFBRSxLQUFLa0M7QUFKbEIsMEJBTUk7QUFBSyxZQUFBLFNBQVMsRUFBQztBQUFmLGFBQ01oSyxNQUROLEVBRU13SixTQUZOLENBTkosQ0FiRCxDQUxJLENBQVA7QUE4Qkg7O0FBRUQ7QUFBUztBQUFBOztBQUNMLGdCQUFNMkIsVUFBVSxHQUFHLDhCQUFLalMsS0FBTCxDQUFXTyxPQUFYLHVHQUFvQnVHLE1BQXBCLGdGQUE0QnRGLE1BQTVCLE1BQXVDOUMsaUNBQWdCQyxHQUFoQixHQUFzQkUsU0FBdEIsRUFBMUQsQ0FESyxDQUdMOzs7QUFDQSw4QkFDSWdCLGVBQU04UixhQUFOLENBQW9CLEtBQUszUixLQUFMLENBQVc0UixFQUFYLElBQWlCLElBQXJDLEVBQTJDO0FBQ3ZDLG1CQUFPLEtBQUtNLEdBRDJCO0FBRXZDLHlCQUFhdEYsT0FGMEI7QUFHdkMsd0JBQVksQ0FBQyxDQUgwQjtBQUl2Qyx5QkFBYStCLFFBSjBCO0FBS3ZDLDJCQUFlLE1BTHdCO0FBTXZDLGtDQUFzQkksV0FOaUI7QUFPdkMsMkJBQWUsS0FBSy9PLEtBQUwsQ0FBVzRKLE1BUGE7QUFRdkMseUJBQWFxSSxVQVIwQjtBQVN2Qyw4QkFBa0IsQ0FBQyxDQUFDbFAsVUFUbUI7QUFVdkMsNEJBQWdCLE1BQU0sS0FBSzNDLFFBQUwsQ0FBYztBQUFFdUQsY0FBQUEsS0FBSyxFQUFFO0FBQVQsYUFBZCxDQVZpQjtBQVd2Qyw0QkFBZ0IsTUFBTSxLQUFLdkQsUUFBTCxDQUFjO0FBQUV1RCxjQUFBQSxLQUFLLEVBQUU7QUFBVCxhQUFkO0FBWGlCLFdBQTNDLGVBWUcsNERBQ0d1TixZQURILEVBRUdwSyxNQUZILEVBR0dzSyxVQUhILEVBSUdwQyxNQUpILGVBS0M7QUFBSyxZQUFBLFNBQVMsRUFBRS9DLFdBQWhCO0FBQTZCLFlBQUEsR0FBRyxFQUFDO0FBQWpDLGFBQ01nRixjQUROLEVBRU1FLFlBRk4sRUFHTXBPLFVBSE4sZUFJSSw2QkFBQyxhQUFEO0FBQWUsWUFBQSxHQUFHLEVBQUUsS0FBS0YsSUFBekI7QUFDSSxZQUFBLE9BQU8sRUFBRSxLQUFLN0MsS0FBTCxDQUFXTyxPQUR4QjtBQUVJLFlBQUEsU0FBUyxFQUFFLEtBQUtQLEtBQUwsQ0FBVzRFLFNBRjFCO0FBR0ksWUFBQSxnQkFBZ0IsRUFBRSxLQUFLNUUsS0FBTCxDQUFXZ1MsZ0JBSGpDO0FBSUksWUFBQSxTQUFTLEVBQUUsS0FBS2hTLEtBQUwsQ0FBVzJNLFNBSjFCO0FBS0ksWUFBQSxVQUFVLEVBQUUsS0FBSzNNLEtBQUwsQ0FBVzZSLFVBTDNCO0FBTUksWUFBQSxhQUFhLEVBQUUsS0FBSzdSLEtBQUwsQ0FBVzhSLGFBTjlCO0FBT0ksWUFBQSxjQUFjLEVBQUUsS0FBSzlSLEtBQUwsQ0FBVytSLGNBUC9CO0FBUUksWUFBQSxnQkFBZ0IsRUFBRSxLQUFLL1IsS0FBTCxDQUFXNk8sZ0JBUmpDO0FBU0ksWUFBQSxlQUFlLEVBQUUsS0FBSzdPLEtBQUwsQ0FBVzBILGVBVGhDO0FBVUksWUFBQSxnQkFBZ0IsRUFBRSxLQUFLMUgsS0FBTCxDQUFXbVMsZ0JBVmpDO0FBV0ksWUFBQSxvQkFBb0IsRUFBRSxLQUFLblMsS0FBTCxDQUFXaUQ7QUFYckMsWUFKSixFQWlCTTBOLGNBakJOLEVBa0JNZixTQWxCTixFQW1CTSxLQUFLNVAsS0FBTCxDQUFXNEosTUFBWCxLQUFzQkMsZUFBT3NGLEdBQTdCLGlCQUFvQyw0REFDaEN5QixZQURnQyxFQUVoQyxLQUFLN0osZ0JBQUwsRUFGZ0MsQ0FuQjFDLENBTEQsRUE2QkcsS0FBSy9HLEtBQUwsQ0FBVzRKLE1BQVgsS0FBc0JDLGVBQU9zRixHQUE3QixpQkFBb0MsNERBQ2hDeUIsWUFEZ0MsRUFFaEMsS0FBSzdKLGdCQUFMLEVBRmdDLENBN0J2QyxFQWlDR3NLLFNBakNILENBWkgsQ0FESjtBQWlESDtBQXZOTDtBQXlOSDs7QUF6bUNrRSxDLHlEQVM3QztBQUNsQjtBQUNBM0osRUFBQUEsZUFBZSxFQUFFLFlBQVcsQ0FBRSxDQUZaO0FBR2xCOUMsRUFBQUEsU0FBUyxFQUFFLEtBSE87QUFJbEJnRixFQUFBQSxNQUFNLEVBQUVDLGVBQU91STtBQUpHLEMseURBT0RDLDRCOztBQTRsQ3pCO0FBQ0EsTUFBTUMsWUFBWSxHQUFHLENBQUMsZ0JBQUQsRUFBbUIsV0FBbkIsQ0FBckI7O0FBQ0EsU0FBUy9GLGNBQVQsQ0FBd0J0TyxFQUF4QixFQUFrRDtBQUM5QyxTQUFRcVUsWUFBWSxDQUFDbE8sUUFBYixDQUFzQm5HLEVBQUUsQ0FBQ0UsT0FBSCxFQUF0QixDQUFSO0FBQ0g7O0FBRU0sU0FBU3FULGdCQUFULENBQTBCblAsQ0FBMUIsRUFBMENrUSxnQkFBMUMsRUFBc0U7QUFDekU7QUFDQSxNQUFJbFEsQ0FBQyxDQUFDaUssVUFBRixNQUFrQixDQUFDQyxjQUFjLENBQUNsSyxDQUFELENBQXJDLEVBQTBDLE9BQU8sS0FBUCxDQUYrQixDQUl6RTs7QUFDQSxNQUFJQSxDQUFDLENBQUNtUSxVQUFGLENBQWEsV0FBYixDQUFKLEVBQStCLE9BQU8sS0FBUDtBQUUvQixRQUFNQyxPQUFPLEdBQUd6VSxjQUFjLENBQUNxRSxDQUFELENBQTlCO0FBQ0EsTUFBSW9RLE9BQU8sS0FBS3pULFNBQWhCLEVBQTJCLE9BQU8sS0FBUDs7QUFDM0IsTUFBSXlULE9BQU8sS0FBSyx1QkFBaEIsRUFBeUM7QUFDckMsV0FBTywyQkFBUXBRLENBQVIsRUFBV2tRLGdCQUFYLENBQVA7QUFDSCxHQUZELE1BRU8sSUFBSUUsT0FBTyxLQUFLLHFCQUFoQixFQUF1QztBQUMxQyxXQUFPQyxPQUFPLENBQUNyUSxDQUFDLENBQUNoRSxVQUFGLEdBQWUsYUFBZixDQUFELENBQWQ7QUFDSCxHQUZNLE1BRUE7QUFDSCxXQUFPLElBQVA7QUFDSDtBQUNKOztBQUVELFNBQVNzVSx1QkFBVCxDQUFpQzNTLEtBQWpDLEVBQXdDO0FBQ3BDLHNCQUNJLDZCQUFDLFVBQUQ7QUFBWSxJQUFBLEtBQUssRUFBRSx5QkFBRyxrQ0FBSCxDQUFuQjtBQUEyRCxJQUFBLElBQUksRUFBRTRTLGNBQWMsQ0FBQ25MO0FBQWhGLEtBQTZGekgsS0FBN0YsRUFESjtBQUdIOztBQUVELFNBQVM2UyxvQkFBVCxDQUE4QjdTLEtBQTlCLEVBQXFDO0FBQ2pDLHNCQUNJLDZCQUFDLFVBQUQ7QUFBWSxJQUFBLEtBQUssRUFBRSx5QkFBRyxvQ0FBSCxDQUFuQjtBQUE2RCxJQUFBLElBQUksRUFBRTRTLGNBQWMsQ0FBQ25MO0FBQWxGLEtBQStGekgsS0FBL0YsRUFESjtBQUdIOztBQUVELFNBQVM4UyxxQkFBVCxDQUErQjlTLEtBQS9CLEVBQXNDO0FBQ2xDLHNCQUNJLDZCQUFDLFVBQUQ7QUFBWSxJQUFBLEtBQUssRUFBRSx5QkFBRyxhQUFILENBQW5CO0FBQXNDLElBQUEsSUFBSSxFQUFFNFMsY0FBYyxDQUFDbkw7QUFBM0QsS0FBd0V6SCxLQUF4RSxFQURKO0FBR0g7O0FBRUQsU0FBUytTLGlCQUFULENBQTJCL1MsS0FBM0IsRUFBa0M7QUFDOUIsc0JBQ0ksNkJBQUMsVUFBRDtBQUFZLElBQUEsS0FBSyxFQUFFLHlCQUFHLGdDQUFILENBQW5CO0FBQXlELElBQUEsSUFBSSxFQUFFNFMsY0FBYyxDQUFDaEw7QUFBOUUsS0FBMEY1SCxLQUExRixFQURKO0FBR0g7O0FBRUQsU0FBU2dULHlCQUFULENBQW1DaFQsS0FBbkMsRUFBMEM7QUFDdEMsc0JBQ0ksNkJBQUMsVUFBRDtBQUNJLElBQUEsS0FBSyxFQUFFLHlCQUFHLGdGQUFILENBRFg7QUFFSSxJQUFBLElBQUksRUFBRTRTLGNBQWMsQ0FBQ2hMO0FBRnpCLEtBR1E1SCxLQUhSLEVBREo7QUFPSDs7SUFFSTRTLGM7O1dBQUFBLGM7QUFBQUEsRUFBQUEsYztBQUFBQSxFQUFBQSxjO0dBQUFBLGMsS0FBQUEsYzs7QUFjTCxNQUFNSyxVQUFOLFNBQXlCcFQsZUFBTUMsU0FBL0IsQ0FBNkU7QUFDekVDLEVBQUFBLFdBQVcsQ0FBQ0MsS0FBRCxFQUEwQjtBQUNqQyxVQUFNQSxLQUFOO0FBRGlDLHdEQVFkLE1BQVk7QUFDL0IsV0FBS0ksUUFBTCxDQUFjO0FBQUV1RCxRQUFBQSxLQUFLLEVBQUU7QUFBVCxPQUFkO0FBQ0gsS0FWb0M7QUFBQSxzREFZaEIsTUFBWTtBQUM3QixXQUFLdkQsUUFBTCxDQUFjO0FBQUV1RCxRQUFBQSxLQUFLLEVBQUU7QUFBVCxPQUFkO0FBQ0gsS0Fkb0M7QUFHakMsU0FBSy9CLEtBQUwsR0FBYTtBQUNUK0IsTUFBQUEsS0FBSyxFQUFFO0FBREUsS0FBYjtBQUdIOztBQVVNeUgsRUFBQUEsTUFBTSxHQUFnQjtBQUN6QixRQUFJOEgsT0FBTyxHQUFHLElBQWQ7O0FBQ0EsUUFBSSxLQUFLdFIsS0FBTCxDQUFXK0IsS0FBZixFQUFzQjtBQUNsQnVQLE1BQUFBLE9BQU8sZ0JBQUcsNkJBQUMsZ0JBQUQ7QUFBUyxRQUFBLFNBQVMsRUFBQyw4QkFBbkI7QUFBa0QsUUFBQSxLQUFLLEVBQUUsS0FBS2xULEtBQUwsQ0FBV21UO0FBQXBFLFFBQVY7QUFDSDs7QUFFRCxVQUFNdkcsT0FBTyxHQUFJLDZDQUE0QyxLQUFLNU0sS0FBTCxDQUFXb1QsSUFBSyxFQUE3RTtBQUNBLHdCQUNJO0FBQ0ksTUFBQSxTQUFTLEVBQUV4RyxPQURmO0FBRUksTUFBQSxZQUFZLEVBQUUsS0FBS3lHLFlBRnZCO0FBR0ksTUFBQSxZQUFZLEVBQUUsS0FBS0M7QUFIdkIsT0FJR0osT0FKSCxDQURKO0FBT0g7O0FBL0J3RTs7QUEwQzdFLE1BQU1LLFdBQU4sU0FBMEIxVCxlQUFNMlQsYUFBaEMsQ0FBb0Y7QUFDaEZ6VCxFQUFBQSxXQUFXLENBQUNDLEtBQUQsRUFBUTtBQUNmLFVBQU1BLEtBQU47QUFEZSx3REFRSixNQUFNO0FBQ2pCLFdBQUtJLFFBQUwsQ0FBYztBQUFFdUQsUUFBQUEsS0FBSyxFQUFFO0FBQVQsT0FBZDtBQUNILEtBVmtCO0FBQUEsc0RBWU4sTUFBTTtBQUNmLFdBQUt2RCxRQUFMLENBQWM7QUFBRXVELFFBQUFBLEtBQUssRUFBRTtBQUFULE9BQWQ7QUFDSCxLQWRrQjtBQUdmLFNBQUsvQixLQUFMLEdBQWE7QUFDVCtCLE1BQUFBLEtBQUssRUFBRTtBQURFLEtBQWI7QUFHSDs7QUFVRHlILEVBQUFBLE1BQU0sR0FBRztBQUNMLFVBQU1xSSxNQUFNLEdBQUcsQ0FBQyxLQUFLelQsS0FBTCxDQUFXMFQsWUFBWixJQUE0QixLQUFLMVQsS0FBTCxDQUFXMFQsWUFBWCxLQUE0QixNQUF2RTtBQUNBLFVBQU1DLFFBQVEsR0FBRyxLQUFLM1QsS0FBTCxDQUFXMFQsWUFBWCxLQUE0QixVQUE3QztBQUNBLFVBQU1FLGNBQWMsR0FBRyx5QkFBVztBQUM5QixrQ0FBNEJILE1BREU7QUFFOUIscUNBQStCLENBQUNBLE1BQUQsSUFBVyxDQUFDRTtBQUZiLEtBQVgsQ0FBdkI7QUFLQSxRQUFJRSxXQUFXLEdBQUcsSUFBbEI7O0FBQ0EsUUFBSUYsUUFBSixFQUFjO0FBQ1ZFLE1BQUFBLFdBQVcsZ0JBQUcsNkJBQUMsMEJBQUQ7QUFDVixRQUFBLFlBQVksRUFBRUMsaURBQXdCQztBQUQ1QixRQUFkO0FBR0g7O0FBRUQsUUFBSWIsT0FBTyxHQUFHLElBQWQ7O0FBQ0EsUUFBSSxLQUFLdFIsS0FBTCxDQUFXK0IsS0FBZixFQUFzQjtBQUNsQixVQUFJcVEsS0FBSyxHQUFHLHlCQUFHLHlCQUFILENBQVo7O0FBQ0EsVUFBSSxLQUFLaFUsS0FBTCxDQUFXMFQsWUFBWCxLQUE0QixZQUFoQyxFQUE4QztBQUMxQ00sUUFBQUEsS0FBSyxHQUFHLHlCQUFHLDRCQUFILENBQVI7QUFDSCxPQUZELE1BRU8sSUFBSVAsTUFBSixFQUFZO0FBQ2ZPLFFBQUFBLEtBQUssR0FBRyx5QkFBRyx1QkFBSCxDQUFSO0FBQ0gsT0FGTSxNQUVBLElBQUlMLFFBQUosRUFBYztBQUNqQkssUUFBQUEsS0FBSyxHQUFHLHlCQUFHLGdCQUFILENBQVI7QUFDSCxPQVJpQixDQVNsQjtBQUNBOzs7QUFDQWQsTUFBQUEsT0FBTyxnQkFBRyw2QkFBQyxnQkFBRDtBQUFTLFFBQUEsU0FBUyxFQUFDLHlDQUFuQjtBQUE2RCxRQUFBLEtBQUssRUFBRWMsS0FBcEU7QUFBMkUsUUFBQSxPQUFPLEVBQUU7QUFBcEYsUUFBVjtBQUNIOztBQUVELHdCQUNJO0FBQUssTUFBQSxTQUFTLEVBQUM7QUFBZixvQkFDSTtBQUFNLE1BQUEsU0FBUyxFQUFDO0FBQWhCLG9CQUNJO0FBQU0sTUFBQSxTQUFTLEVBQUVKLGNBQWpCO0FBQWlDLE1BQUEsWUFBWSxFQUFFLEtBQUtQLFlBQXBEO0FBQWtFLE1BQUEsWUFBWSxFQUFFLEtBQUtDO0FBQXJGLE9BQ01PLFdBRE4sRUFFTVgsT0FGTixDQURKLENBREosQ0FESjtBQVVIOztBQXpEK0UiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMTUtMjAyMSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuQ29weXJpZ2h0IDIwMTkgTWljaGFlbCBUZWxhdHluc2tpIDw3dDNjaGd1eUBnbWFpbC5jb20+XG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQgeyBFdmVudFR5cGUsIE1zZ1R5cGUgfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvQHR5cGVzL2V2ZW50XCI7XG5pbXBvcnQgeyBFdmVudFN0YXR1cywgTWF0cml4RXZlbnQgfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvbW9kZWxzL2V2ZW50XCI7XG5pbXBvcnQgeyBSZWxhdGlvbnMgfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvbW9kZWxzL3JlbGF0aW9uc1wiO1xuaW1wb3J0IHsgUm9vbU1lbWJlciB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvcm9vbS1tZW1iZXJcIjtcbmltcG9ydCB7IFRocmVhZCwgVGhyZWFkRXZlbnQgfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvdGhyZWFkJztcblxuaW1wb3J0IFJlcGx5Q2hhaW4gZnJvbSBcIi4uL2VsZW1lbnRzL1JlcGx5Q2hhaW5cIjtcbmltcG9ydCB7IF90IH0gZnJvbSAnLi4vLi4vLi4vbGFuZ3VhZ2VIYW5kbGVyJztcbmltcG9ydCB7IGhhc1RleHQgfSBmcm9tIFwiLi4vLi4vLi4vVGV4dEZvckV2ZW50XCI7XG5pbXBvcnQgKiBhcyBzZGsgZnJvbSBcIi4uLy4uLy4uL2luZGV4XCI7XG5pbXBvcnQgZGlzIGZyb20gJy4uLy4uLy4uL2Rpc3BhdGNoZXIvZGlzcGF0Y2hlcic7XG5pbXBvcnQgeyBMYXlvdXQgfSBmcm9tIFwiLi4vLi4vLi4vc2V0dGluZ3MvZW51bXMvTGF5b3V0XCI7XG5pbXBvcnQgeyBmb3JtYXRUaW1lIH0gZnJvbSBcIi4uLy4uLy4uL0RhdGVVdGlsc1wiO1xuaW1wb3J0IHsgTWF0cml4Q2xpZW50UGVnIH0gZnJvbSAnLi4vLi4vLi4vTWF0cml4Q2xpZW50UGVnJztcbmltcG9ydCB7IEFMTF9SVUxFX1RZUEVTIH0gZnJvbSBcIi4uLy4uLy4uL21qb2xuaXIvQmFuTGlzdFwiO1xuaW1wb3J0IE1hdHJpeENsaWVudENvbnRleHQgZnJvbSBcIi4uLy4uLy4uL2NvbnRleHRzL01hdHJpeENsaWVudENvbnRleHRcIjtcbmltcG9ydCB7IEUyRVN0YXRlIH0gZnJvbSBcIi4vRTJFSWNvblwiO1xuaW1wb3J0IHsgdG9SZW0gfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdW5pdHNcIjtcbmltcG9ydCB7IFdpZGdldFR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vd2lkZ2V0cy9XaWRnZXRUeXBlXCI7XG5pbXBvcnQgUm9vbUF2YXRhciBmcm9tIFwiLi4vYXZhdGFycy9Sb29tQXZhdGFyXCI7XG5pbXBvcnQgeyBXSURHRVRfTEFZT1VUX0VWRU5UX1RZUEUgfSBmcm9tIFwiLi4vLi4vLi4vc3RvcmVzL3dpZGdldHMvV2lkZ2V0TGF5b3V0U3RvcmVcIjtcbmltcG9ydCB7IG9iamVjdEhhc0RpZmYgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvb2JqZWN0c1wiO1xuaW1wb3J0IHsgcmVwbGFjZWFibGVDb21wb25lbnQgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvcmVwbGFjZWFibGVDb21wb25lbnRcIjtcbmltcG9ydCBUb29sdGlwIGZyb20gXCIuLi9lbGVtZW50cy9Ub29sdGlwXCI7XG5pbXBvcnQgRWRpdG9yU3RhdGVUcmFuc2ZlciBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvRWRpdG9yU3RhdGVUcmFuc2ZlclwiO1xuaW1wb3J0IHsgUm9vbVBlcm1hbGlua0NyZWF0b3IgfSBmcm9tICcuLi8uLi8uLi91dGlscy9wZXJtYWxpbmtzL1Blcm1hbGlua3MnO1xuaW1wb3J0IHsgU3RhdGljTm90aWZpY2F0aW9uU3RhdGUgfSBmcm9tIFwiLi4vLi4vLi4vc3RvcmVzL25vdGlmaWNhdGlvbnMvU3RhdGljTm90aWZpY2F0aW9uU3RhdGVcIjtcbmltcG9ydCBOb3RpZmljYXRpb25CYWRnZSBmcm9tIFwiLi9Ob3RpZmljYXRpb25CYWRnZVwiO1xuaW1wb3J0IENhbGxFdmVudEdyb3VwZXIgZnJvbSBcIi4uLy4uL3N0cnVjdHVyZXMvQ2FsbEV2ZW50R3JvdXBlclwiO1xuaW1wb3J0IHsgQ29tcG9zZXJJbnNlcnRQYXlsb2FkIH0gZnJvbSBcIi4uLy4uLy4uL2Rpc3BhdGNoZXIvcGF5bG9hZHMvQ29tcG9zZXJJbnNlcnRQYXlsb2FkXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuLi8uLi8uLi9kaXNwYXRjaGVyL2FjdGlvbnMnO1xuaW1wb3J0IE1lbWJlckF2YXRhciBmcm9tICcuLi9hdmF0YXJzL01lbWJlckF2YXRhcic7XG5pbXBvcnQgU2VuZGVyUHJvZmlsZSBmcm9tICcuLi9tZXNzYWdlcy9TZW5kZXJQcm9maWxlJztcbmltcG9ydCBNZXNzYWdlVGltZXN0YW1wIGZyb20gJy4uL21lc3NhZ2VzL01lc3NhZ2VUaW1lc3RhbXAnO1xuaW1wb3J0IFRvb2x0aXBCdXR0b24gZnJvbSAnLi4vZWxlbWVudHMvVG9vbHRpcEJ1dHRvbic7XG5pbXBvcnQgUmVhZFJlY2VpcHRNYXJrZXIgZnJvbSBcIi4vUmVhZFJlY2VpcHRNYXJrZXJcIjtcbmltcG9ydCBNZXNzYWdlQWN0aW9uQmFyIGZyb20gXCIuLi9tZXNzYWdlcy9NZXNzYWdlQWN0aW9uQmFyXCI7XG5pbXBvcnQgUmVhY3Rpb25zUm93IGZyb20gJy4uL21lc3NhZ2VzL1JlYWN0aW9uc1Jvdyc7XG5pbXBvcnQgeyBnZXRFdmVudERpc3BsYXlJbmZvIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvRXZlbnRVdGlscyc7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwiLi4vLi4vLi4vc2V0dGluZ3MvU2V0dGluZ3NTdG9yZVwiO1xuaW1wb3J0IE1LZXlWZXJpZmljYXRpb25Db25jbHVzaW9uIGZyb20gXCIuLi9tZXNzYWdlcy9NS2V5VmVyaWZpY2F0aW9uQ29uY2x1c2lvblwiO1xuaW1wb3J0IHsgZGlzcGF0Y2hTaG93VGhyZWFkRXZlbnQgfSBmcm9tICcuLi8uLi8uLi9kaXNwYXRjaGVyL2Rpc3BhdGNoLWFjdGlvbnMvdGhyZWFkcyc7XG5pbXBvcnQgeyBNZXNzYWdlUHJldmlld1N0b3JlIH0gZnJvbSAnLi4vLi4vLi4vc3RvcmVzL3Jvb20tbGlzdC9NZXNzYWdlUHJldmlld1N0b3JlJztcblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL2xvZ2dlclwiO1xuaW1wb3J0IHsgVGltZWxpbmVSZW5kZXJpbmdUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbnRleHRzL1Jvb21Db250ZXh0XCI7XG5pbXBvcnQgeyBNZWRpYUV2ZW50SGVscGVyIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL01lZGlhRXZlbnRIZWxwZXJcIjtcbmltcG9ydCBUb29sYmFyIGZyb20gJy4uLy4uLy4uL2FjY2Vzc2liaWxpdHkvVG9vbGJhcic7XG5pbXBvcnQgeyBQT0xMX1NUQVJUX0VWRU5UX1RZUEUgfSBmcm9tICcuLi8uLi8uLi9wb2xscy9jb25zdHMnO1xuaW1wb3J0IHsgUm92aW5nQWNjZXNzaWJsZVRvb2x0aXBCdXR0b24gfSBmcm9tICcuLi8uLi8uLi9hY2Nlc3NpYmlsaXR5L3JvdmluZy9Sb3ZpbmdBY2Nlc3NpYmxlVG9vbHRpcEJ1dHRvbic7XG5pbXBvcnQgVGhyZWFkTGlzdENvbnRleHRNZW51IGZyb20gJy4uL2NvbnRleHRfbWVudXMvVGhyZWFkTGlzdENvbnRleHRNZW51JztcblxuY29uc3QgZXZlbnRUaWxlVHlwZXMgPSB7XG4gICAgW0V2ZW50VHlwZS5Sb29tTWVzc2FnZV06ICdtZXNzYWdlcy5NZXNzYWdlRXZlbnQnLFxuICAgIFtFdmVudFR5cGUuU3RpY2tlcl06ICdtZXNzYWdlcy5NZXNzYWdlRXZlbnQnLFxuICAgIFtQT0xMX1NUQVJUX0VWRU5UX1RZUEUubmFtZV06ICdtZXNzYWdlcy5NZXNzYWdlRXZlbnQnLFxuICAgIFtFdmVudFR5cGUuS2V5VmVyaWZpY2F0aW9uQ2FuY2VsXTogJ21lc3NhZ2VzLk1LZXlWZXJpZmljYXRpb25Db25jbHVzaW9uJyxcbiAgICBbRXZlbnRUeXBlLktleVZlcmlmaWNhdGlvbkRvbmVdOiAnbWVzc2FnZXMuTUtleVZlcmlmaWNhdGlvbkNvbmNsdXNpb24nLFxuICAgIFtFdmVudFR5cGUuQ2FsbEludml0ZV06ICdtZXNzYWdlcy5DYWxsRXZlbnQnLFxufTtcblxuY29uc3Qgc3RhdGVFdmVudFRpbGVUeXBlcyA9IHtcbiAgICBbRXZlbnRUeXBlLlJvb21FbmNyeXB0aW9uXTogJ21lc3NhZ2VzLkVuY3J5cHRpb25FdmVudCcsXG4gICAgW0V2ZW50VHlwZS5Sb29tQ2Fub25pY2FsQWxpYXNdOiAnbWVzc2FnZXMuVGV4dHVhbEV2ZW50JyxcbiAgICBbRXZlbnRUeXBlLlJvb21DcmVhdGVdOiAnbWVzc2FnZXMuUm9vbUNyZWF0ZScsXG4gICAgW0V2ZW50VHlwZS5Sb29tTWVtYmVyXTogJ21lc3NhZ2VzLlRleHR1YWxFdmVudCcsXG4gICAgW0V2ZW50VHlwZS5Sb29tTmFtZV06ICdtZXNzYWdlcy5UZXh0dWFsRXZlbnQnLFxuICAgIFtFdmVudFR5cGUuUm9vbUF2YXRhcl06ICdtZXNzYWdlcy5Sb29tQXZhdGFyRXZlbnQnLFxuICAgIFtFdmVudFR5cGUuUm9vbVRoaXJkUGFydHlJbnZpdGVdOiAnbWVzc2FnZXMuVGV4dHVhbEV2ZW50JyxcbiAgICBbRXZlbnRUeXBlLlJvb21IaXN0b3J5VmlzaWJpbGl0eV06ICdtZXNzYWdlcy5UZXh0dWFsRXZlbnQnLFxuICAgIFtFdmVudFR5cGUuUm9vbVRvcGljXTogJ21lc3NhZ2VzLlRleHR1YWxFdmVudCcsXG4gICAgW0V2ZW50VHlwZS5Sb29tUG93ZXJMZXZlbHNdOiAnbWVzc2FnZXMuVGV4dHVhbEV2ZW50JyxcbiAgICBbRXZlbnRUeXBlLlJvb21QaW5uZWRFdmVudHNdOiAnbWVzc2FnZXMuVGV4dHVhbEV2ZW50JyxcbiAgICBbRXZlbnRUeXBlLlJvb21TZXJ2ZXJBY2xdOiAnbWVzc2FnZXMuVGV4dHVhbEV2ZW50JyxcbiAgICAvLyBUT0RPOiBFbmFibGUgc3VwcG9ydCBmb3IgbS53aWRnZXQgZXZlbnQgdHlwZSAoaHR0cHM6Ly9naXRodWIuY29tL3ZlY3Rvci1pbS9lbGVtZW50LXdlYi9pc3N1ZXMvMTMxMTEpXG4gICAgJ2ltLnZlY3Rvci5tb2R1bGFyLndpZGdldHMnOiAnbWVzc2FnZXMuVGV4dHVhbEV2ZW50JyxcbiAgICBbV0lER0VUX0xBWU9VVF9FVkVOVF9UWVBFXTogJ21lc3NhZ2VzLlRleHR1YWxFdmVudCcsXG4gICAgW0V2ZW50VHlwZS5Sb29tVG9tYnN0b25lXTogJ21lc3NhZ2VzLlRleHR1YWxFdmVudCcsXG4gICAgW0V2ZW50VHlwZS5Sb29tSm9pblJ1bGVzXTogJ21lc3NhZ2VzLlRleHR1YWxFdmVudCcsXG4gICAgW0V2ZW50VHlwZS5Sb29tR3Vlc3RBY2Nlc3NdOiAnbWVzc2FnZXMuVGV4dHVhbEV2ZW50JyxcbiAgICAnbS5yb29tLnJlbGF0ZWRfZ3JvdXBzJzogJ21lc3NhZ2VzLlRleHR1YWxFdmVudCcsIC8vIGxlZ2FjeSBjb21tdW5pdGllcyBmbGFpclxufTtcblxuY29uc3Qgc3RhdGVFdmVudFNpbmd1bGFyID0gbmV3IFNldChbXG4gICAgRXZlbnRUeXBlLlJvb21FbmNyeXB0aW9uLFxuICAgIEV2ZW50VHlwZS5Sb29tQ2Fub25pY2FsQWxpYXMsXG4gICAgRXZlbnRUeXBlLlJvb21DcmVhdGUsXG4gICAgRXZlbnRUeXBlLlJvb21OYW1lLFxuICAgIEV2ZW50VHlwZS5Sb29tQXZhdGFyLFxuICAgIEV2ZW50VHlwZS5Sb29tSGlzdG9yeVZpc2liaWxpdHksXG4gICAgRXZlbnRUeXBlLlJvb21Ub3BpYyxcbiAgICBFdmVudFR5cGUuUm9vbVBvd2VyTGV2ZWxzLFxuICAgIEV2ZW50VHlwZS5Sb29tUGlubmVkRXZlbnRzLFxuICAgIEV2ZW50VHlwZS5Sb29tU2VydmVyQWNsLFxuICAgIFdJREdFVF9MQVlPVVRfRVZFTlRfVFlQRSxcbiAgICBFdmVudFR5cGUuUm9vbVRvbWJzdG9uZSxcbiAgICBFdmVudFR5cGUuUm9vbUpvaW5SdWxlcyxcbiAgICBFdmVudFR5cGUuUm9vbUd1ZXN0QWNjZXNzLFxuICAgICdtLnJvb20ucmVsYXRlZF9ncm91cHMnLFxuXSk7XG5cbi8vIEFkZCBhbGwgdGhlIE1qb2xuaXIgc3R1ZmYgdG8gdGhlIHJlbmRlcmVyXG5mb3IgKGNvbnN0IGV2VHlwZSBvZiBBTExfUlVMRV9UWVBFUykge1xuICAgIHN0YXRlRXZlbnRUaWxlVHlwZXNbZXZUeXBlXSA9ICdtZXNzYWdlcy5UZXh0dWFsRXZlbnQnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGFuZGxlclRpbGUoZXYpIHtcbiAgICBjb25zdCB0eXBlID0gZXYuZ2V0VHlwZSgpO1xuXG4gICAgLy8gZG9uJ3Qgc2hvdyB2ZXJpZmljYXRpb24gcmVxdWVzdHMgd2UncmUgbm90IGludm9sdmVkIGluLFxuICAgIC8vIG5vdCBldmVuIHdoZW4gc2hvd2luZyBoaWRkZW4gZXZlbnRzXG4gICAgaWYgKHR5cGUgPT09IFwibS5yb29tLm1lc3NhZ2VcIikge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZXYuZ2V0Q29udGVudCgpO1xuICAgICAgICBpZiAoY29udGVudCAmJiBjb250ZW50Lm1zZ3R5cGUgPT09IE1zZ1R5cGUuS2V5VmVyaWZpY2F0aW9uUmVxdWVzdCkge1xuICAgICAgICAgICAgY29uc3QgY2xpZW50ID0gTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuICAgICAgICAgICAgY29uc3QgbWUgPSBjbGllbnQgJiYgY2xpZW50LmdldFVzZXJJZCgpO1xuICAgICAgICAgICAgaWYgKGV2LmdldFNlbmRlcigpICE9PSBtZSAmJiBjb250ZW50LnRvICE9PSBtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm1lc3NhZ2VzLk1LZXlWZXJpZmljYXRpb25SZXF1ZXN0XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gdGhlc2UgZXZlbnRzIGFyZSBzZW50IGJ5IGJvdGggcGFydGllcyBkdXJpbmcgdmVyaWZpY2F0aW9uLCBidXQgd2Ugb25seSB3YW50IHRvIHJlbmRlciBvbmVcbiAgICAvLyB0aWxlIG9uY2UgdGhlIHZlcmlmaWNhdGlvbiBjb25jbHVkZXMsIHNvIGZpbHRlciBvdXQgdGhlIG9uZSBmcm9tIHRoZSBvdGhlciBwYXJ0eS5cbiAgICBpZiAodHlwZSA9PT0gXCJtLmtleS52ZXJpZmljYXRpb24uZG9uZVwiKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IE1hdHJpeENsaWVudFBlZy5nZXQoKTtcbiAgICAgICAgY29uc3QgbWUgPSBjbGllbnQgJiYgY2xpZW50LmdldFVzZXJJZCgpO1xuICAgICAgICBpZiAoZXYuZ2V0U2VuZGVyKCkgIT09IG1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gc29tZXRpbWVzIE1LZXlWZXJpZmljYXRpb25Db25jbHVzaW9uIGRlY2xpbmVzIHRvIHJlbmRlci4gIEphbmtpbHkgZGVjbGluZSB0byByZW5kZXIgYW5kXG4gICAgLy8gZmFsbCBiYWNrIHRvIHNob3dpbmcgaGlkZGVuIGV2ZW50cywgaWYgd2UncmUgdmlld2luZyBoaWRkZW4gZXZlbnRzXG4gICAgLy8gWFhYOiBUaGlzIGlzIGV4dHJlbWVseSBhIGhhY2suIFBvc3NpYmx5IHRoZXNlIGNvbXBvbmVudHMgc2hvdWxkIGhhdmUgYW4gaW50ZXJmYWNlIGZvclxuICAgIC8vIGRlY2xpbmluZyB0byByZW5kZXI/XG4gICAgaWYgKHR5cGUgPT09IFwibS5rZXkudmVyaWZpY2F0aW9uLmNhbmNlbFwiIHx8IHR5cGUgPT09IFwibS5rZXkudmVyaWZpY2F0aW9uLmRvbmVcIikge1xuICAgICAgICBpZiAoIU1LZXlWZXJpZmljYXRpb25Db25jbHVzaW9uLnNob3VsZFJlbmRlcihldiwgZXYucmVxdWVzdCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRPRE86IEVuYWJsZSBzdXBwb3J0IGZvciBtLndpZGdldCBldmVudCB0eXBlIChodHRwczovL2dpdGh1Yi5jb20vdmVjdG9yLWltL2VsZW1lbnQtd2ViL2lzc3Vlcy8xMzExMSlcbiAgICBpZiAodHlwZSA9PT0gXCJpbS52ZWN0b3IubW9kdWxhci53aWRnZXRzXCIpIHtcbiAgICAgICAgbGV0IHR5cGUgPSBldi5nZXRDb250ZW50KClbJ3R5cGUnXTtcbiAgICAgICAgaWYgKCF0eXBlKSB7XG4gICAgICAgICAgICAvLyBkZWxldGVkL2ludmFsaWQgd2lkZ2V0IC0gdHJ5IHRoZSBwYXN0IHdpZGdldCB0eXBlXG4gICAgICAgICAgICB0eXBlID0gZXYuZ2V0UHJldkNvbnRlbnQoKVsndHlwZSddO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFdpZGdldFR5cGUuSklUU0kubWF0Y2hlcyh0eXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIFwibWVzc2FnZXMuTUppdHNpV2lkZ2V0RXZlbnRcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChldi5pc1N0YXRlKCkpIHtcbiAgICAgICAgaWYgKHN0YXRlRXZlbnRTaW5ndWxhci5oYXModHlwZSkgJiYgZXYuZ2V0U3RhdGVLZXkoKSAhPT0gXCJcIikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHN0YXRlRXZlbnRUaWxlVHlwZXNbdHlwZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50VGlsZVR5cGVzW3R5cGVdO1xufVxuXG4vLyBPdXIgY29tcG9uZW50IHN0cnVjdHVyZSBmb3IgRXZlbnRUaWxlcyBvbiB0aGUgdGltZWxpbmUgaXM6XG4vL1xuLy8gLi1FdmVudFRpbGUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0uXG4vLyB8IE1lbWJlckF2YXRhciAoU2VuZGVyUHJvZmlsZSkgICAgICAgICAgICAgICAgICAgVGltZVN0YW1wIHxcbi8vIHwgICAgLi17TWVzc2FnZSxUZXh0dWFsfUV2ZW50LS0tLS0tLS0tLS0tLS0tLiBSZWFkIEF2YXRhcnMgfFxuLy8gfCAgICB8ICAgLi1NRm9vQm9keS0tLS0tLS0tLS0tLS0tLS0tLS0uICAgICB8ICAgICAgICAgICAgICB8XG4vLyB8ICAgIHwgICB8ICAob25seSBpZiBNZXNzYWdlRXZlbnQpICAgIHwgICAgIHwgICAgICAgICAgICAgIHxcbi8vIHwgICAgfCAgICctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyAgICAgfCAgICAgICAgICAgICAgfFxuLy8gfCAgICAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nICAgICAgICAgICAgICB8XG4vLyAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSdcblxuZXhwb3J0IGludGVyZmFjZSBJUmVhZFJlY2VpcHRQcm9wcyB7XG4gICAgdXNlcklkOiBzdHJpbmc7XG4gICAgcm9vbU1lbWJlcjogUm9vbU1lbWJlcjtcbiAgICB0czogbnVtYmVyO1xufVxuXG5leHBvcnQgZW51bSBUaWxlU2hhcGUge1xuICAgIE5vdGlmID0gXCJub3RpZlwiLFxuICAgIEZpbGVHcmlkID0gXCJmaWxlX2dyaWRcIixcbiAgICBQaW5uZWQgPSBcInBpbm5lZFwiLFxuICAgIFRocmVhZCA9IFwidGhyZWFkXCIsXG4gICAgVGhyZWFkUGFuZWwgPSBcInRocmVhZF9saXN0XCJcbn1cblxuaW50ZXJmYWNlIElQcm9wcyB7XG4gICAgLy8gdGhlIE1hdHJpeEV2ZW50IHRvIHNob3dcbiAgICBteEV2ZW50OiBNYXRyaXhFdmVudDtcblxuICAgIC8vIHRydWUgaWYgbXhFdmVudCBpcyByZWRhY3RlZC4gVGhpcyBpcyBhIHByb3AgYmVjYXVzZSB1c2luZyBteEV2ZW50LmlzUmVkYWN0ZWQoKVxuICAgIC8vIG1pZ2h0IG5vdCBiZSBlbm91Z2ggd2hlbiBkZWNpZGluZyBzaG91bGRDb21wb25lbnRVcGRhdGUgLSBwcmV2UHJvcHMubXhFdmVudFxuICAgIC8vIHJlZmVyZW5jZXMgdGhlIHNhbWUgdGhpcy5wcm9wcy5teEV2ZW50LlxuICAgIGlzUmVkYWN0ZWQ/OiBib29sZWFuO1xuXG4gICAgLy8gdHJ1ZSBpZiB0aGlzIGlzIGEgY29udGludWF0aW9uIG9mIHRoZSBwcmV2aW91cyBldmVudCAod2hpY2ggaGFzIHRoZVxuICAgIC8vIGVmZmVjdCBvZiBub3Qgc2hvd2luZyBhbm90aGVyIGF2YXRhci9kaXNwbGF5bmFtZVxuICAgIGNvbnRpbnVhdGlvbj86IGJvb2xlYW47XG5cbiAgICAvLyB0cnVlIGlmIHRoaXMgaXMgdGhlIGxhc3QgZXZlbnQgaW4gdGhlIHRpbWVsaW5lICh3aGljaCBoYXMgdGhlIGVmZmVjdFxuICAgIC8vIG9mIGFsd2F5cyBzaG93aW5nIHRoZSB0aW1lc3RhbXApXG4gICAgbGFzdD86IGJvb2xlYW47XG5cbiAgICAvLyB0cnVlIGlmIHRoZSBldmVudCBpcyB0aGUgbGFzdCBldmVudCBpbiBhIHNlY3Rpb24gKGFkZHMgYSBjc3MgY2xhc3MgZm9yXG4gICAgLy8gdGFyZ2V0aW5nKVxuICAgIGxhc3RJblNlY3Rpb24/OiBib29sZWFuO1xuXG4gICAgLy8gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgdGhlIGxhc3Qgc3VjY2Vzc2Z1bCAoc2VudCkgZXZlbnQuXG4gICAgbGFzdFN1Y2Nlc3NmdWw/OiBib29sZWFuO1xuXG4gICAgLy8gdHJ1ZSBpZiB0aGlzIGlzIHNlYXJjaCBjb250ZXh0ICh3aGljaCBoYXMgdGhlIGVmZmVjdCBvZiBncmV5aW5nIG91dFxuICAgIC8vIHRoZSB0ZXh0XG4gICAgY29udGV4dHVhbD86IGJvb2xlYW47XG5cbiAgICAvLyBhIGxpc3Qgb2Ygd29yZHMgdG8gaGlnaGxpZ2h0LCBvcmRlcmVkIGJ5IGxvbmdlc3QgZmlyc3RcbiAgICBoaWdobGlnaHRzPzogc3RyaW5nW107XG5cbiAgICAvLyBsaW5rIFVSTCBmb3IgdGhlIGhpZ2hsaWdodHNcbiAgICBoaWdobGlnaHRMaW5rPzogc3RyaW5nO1xuXG4gICAgLy8gc2hvdWxkIHNob3cgVVJMIHByZXZpZXdzIGZvciB0aGlzIGV2ZW50XG4gICAgc2hvd1VybFByZXZpZXc/OiBib29sZWFuO1xuXG4gICAgLy8gaXMgdGhpcyB0aGUgZm9jdXNlZCBldmVudFxuICAgIGlzU2VsZWN0ZWRFdmVudD86IGJvb2xlYW47XG5cbiAgICAvLyBjYWxsYmFjayBjYWxsZWQgd2hlbiBkeW5hbWljIGNvbnRlbnQgaW4gZXZlbnRzIGFyZSBsb2FkZWRcbiAgICBvbkhlaWdodENoYW5nZWQ/OiAoKSA9PiB2b2lkO1xuXG4gICAgLy8gYSBsaXN0IG9mIHJlYWQtcmVjZWlwdHMgd2Ugc2hvdWxkIHNob3cuIEVhY2ggb2JqZWN0IGhhcyBhICdyb29tTWVtYmVyJyBhbmQgJ3RzJy5cbiAgICByZWFkUmVjZWlwdHM/OiBJUmVhZFJlY2VpcHRQcm9wc1tdO1xuXG4gICAgLy8gb3BhcXVlIHJlYWRyZWNlaXB0IGluZm8gZm9yIGVhY2ggdXNlcklkOyB1c2VkIGJ5IFJlYWRSZWNlaXB0TWFya2VyXG4gICAgLy8gdG8gbWFuYWdlIGl0cyBhbmltYXRpb25zLiBTaG91bGQgYmUgYW4gZW1wdHkgb2JqZWN0IHdoZW4gdGhlIHJvb21cbiAgICAvLyBmaXJzdCBsb2Fkc1xuICAgIC8vIFRPRE86IFByb3BlciB0eXBpbmcgZm9yIFJSIGluZm9cbiAgICByZWFkUmVjZWlwdE1hcD86IGFueTtcblxuICAgIC8vIEEgZnVuY3Rpb24gd2hpY2ggaXMgdXNlZCB0byBjaGVjayBpZiB0aGUgcGFyZW50IHBhbmVsIGlzIGJlaW5nXG4gICAgLy8gdW5tb3VudGVkLCB0byBhdm9pZCB1bm5lY2Vzc2FyeSB3b3JrLiBTaG91bGQgcmV0dXJuIHRydWUgaWYgd2VcbiAgICAvLyBhcmUgYmVpbmcgdW5tb3VudGVkLlxuICAgIGNoZWNrVW5tb3VudGluZz86ICgpID0+IGJvb2xlYW47XG5cbiAgICAvLyB0aGUgc3RhdHVzIG9mIHRoaXMgZXZlbnQgLSBpZSwgbXhFdmVudC5zdGF0dXMuIERlbm9ybWFsaXNlZCB0byBoZXJlIHNvXG4gICAgLy8gdGhhdCB3ZSBjYW4gdGVsbCB3aGVuIGl0IGNoYW5nZXMuXG4gICAgZXZlbnRTZW5kU3RhdHVzPzogc3RyaW5nO1xuXG4gICAgLy8gdGhlIHNoYXBlIG9mIHRoZSB0aWxlLiBieSBkZWZhdWx0LCB0aGUgbGF5b3V0IGlzIGludGVuZGVkIGZvciB0aGVcbiAgICAvLyBub3JtYWwgcm9vbSB0aW1lbGluZS4gIGFsdGVybmF0aXZlIHZhbHVlcyBhcmU6IFwiZmlsZV9saXN0XCIsIFwiZmlsZV9ncmlkXCJcbiAgICAvLyBhbmQgXCJub3RpZlwiLiAgVGhpcyBjb3VsZCBiZSBkb25lIGJ5IENTUywgYnV0IGl0J2QgYmUgaG9ycmlibHkgaW5lZmZpY2llbnQuXG4gICAgLy8gSXQgY291bGQgYWxzbyBiZSBkb25lIGJ5IHN1YmNsYXNzaW5nIEV2ZW50VGlsZSwgYnV0IHRoYXQnZCBiZSBxdWl0ZVxuICAgIC8vIGJvaWlsZXJwbGF0ZXkuICBTbyBqdXN0IG1ha2UgdGhlIG5lY2Vzc2FyeSByZW5kZXIgZGVjaXNpb25zIGNvbmRpdGlvbmFsXG4gICAgLy8gZm9yIG5vdy5cbiAgICB0aWxlU2hhcGU/OiBUaWxlU2hhcGU7XG5cbiAgICBmb3JFeHBvcnQ/OiBib29sZWFuO1xuXG4gICAgLy8gc2hvdyB0d2VsdmUgaG91ciB0aW1lc3RhbXBzXG4gICAgaXNUd2VsdmVIb3VyPzogYm9vbGVhbjtcblxuICAgIC8vIGhlbHBlciBmdW5jdGlvbiB0byBhY2Nlc3MgcmVsYXRpb25zIGZvciB0aGlzIGV2ZW50XG4gICAgZ2V0UmVsYXRpb25zRm9yRXZlbnQ/OiAoZXZlbnRJZDogc3RyaW5nLCByZWxhdGlvblR5cGU6IHN0cmluZywgZXZlbnRUeXBlOiBzdHJpbmcpID0+IFJlbGF0aW9ucztcblxuICAgIC8vIHdoZXRoZXIgdG8gc2hvdyByZWFjdGlvbnMgZm9yIHRoaXMgZXZlbnRcbiAgICBzaG93UmVhY3Rpb25zPzogYm9vbGVhbjtcblxuICAgIC8vIHdoaWNoIGxheW91dCB0byB1c2VcbiAgICBsYXlvdXQ/OiBMYXlvdXQ7XG5cbiAgICAvLyB3aGV0aGVyIG9yIG5vdCB0byBzaG93IGZsYWlyIGF0IGFsbFxuICAgIGVuYWJsZUZsYWlyPzogYm9vbGVhbjtcblxuICAgIC8vIHdoZXRoZXIgb3Igbm90IHRvIHNob3cgcmVhZCByZWNlaXB0c1xuICAgIHNob3dSZWFkUmVjZWlwdHM/OiBib29sZWFuO1xuXG4gICAgLy8gVXNlZCB3aGlsZSBlZGl0aW5nLCB0byBwYXNzIHRoZSBldmVudCwgYW5kIHRvIHByZXNlcnZlIGVkaXRvciBzdGF0ZVxuICAgIC8vIGZyb20gb25lIGVkaXRvciBpbnN0YW5jZSB0byBhbm90aGVyIHdoZW4gcmVtb3VudGluZyB0aGUgZWRpdG9yXG4gICAgLy8gdXBvbiByZWNlaXZpbmcgdGhlIHJlbW90ZSBlY2hvIGZvciBhbiB1bnNlbnQgZXZlbnQuXG4gICAgZWRpdFN0YXRlPzogRWRpdG9yU3RhdGVUcmFuc2ZlcjtcblxuICAgIC8vIEV2ZW50IElEIG9mIHRoZSBldmVudCByZXBsYWNpbmcgdGhlIGNvbnRlbnQgb2YgdGhpcyBldmVudCwgaWYgYW55XG4gICAgcmVwbGFjaW5nRXZlbnRJZD86IHN0cmluZztcblxuICAgIC8vIEhlbHBlciB0byBidWlsZCBwZXJtYWxpbmtzIGZvciB0aGUgcm9vbVxuICAgIHBlcm1hbGlua0NyZWF0b3I/OiBSb29tUGVybWFsaW5rQ3JlYXRvcjtcblxuICAgIC8vIENhbGxFdmVudEdyb3VwZXIgZm9yIHRoaXMgZXZlbnRcbiAgICBjYWxsRXZlbnRHcm91cGVyPzogQ2FsbEV2ZW50R3JvdXBlcjtcblxuICAgIC8vIFN5bWJvbCBvZiB0aGUgcm9vdCBub2RlXG4gICAgYXM/OiBzdHJpbmc7XG5cbiAgICAvLyB3aGV0aGVyIG9yIG5vdCB0byBhbHdheXMgc2hvdyB0aW1lc3RhbXBzXG4gICAgYWx3YXlzU2hvd1RpbWVzdGFtcHM/OiBib29sZWFuO1xuXG4gICAgLy8gd2hldGhlciBvciBub3QgdG8gZGlzcGxheSB0aGUgc2VuZGVyXG4gICAgaGlkZVNlbmRlcj86IGJvb2xlYW47XG5cbiAgICAvLyB3aGV0aGVyIG9yIG5vdCB0byBkaXNwbGF5IHRocmVhZCBpbmZvXG4gICAgc2hvd1RocmVhZEluZm8/OiBib29sZWFuO1xuXG4gICAgdGltZWxpbmVSZW5kZXJpbmdUeXBlPzogVGltZWxpbmVSZW5kZXJpbmdUeXBlO1xufVxuXG5pbnRlcmZhY2UgSVN0YXRlIHtcbiAgICAvLyBXaGV0aGVyIHRoZSBhY3Rpb24gYmFyIGlzIGZvY3VzZWQuXG4gICAgYWN0aW9uQmFyRm9jdXNlZDogYm9vbGVhbjtcbiAgICAvLyBXaGV0aGVyIGFsbCByZWFkIHJlY2VpcHRzIGFyZSBiZWluZyBkaXNwbGF5ZWQuIElmIG5vdCwgb25seSBkaXNwbGF5XG4gICAgLy8gYSB0cnVuY2F0aW9uIG9mIHRoZW0uXG4gICAgYWxsUmVhZEF2YXRhcnM6IGJvb2xlYW47XG4gICAgLy8gV2hldGhlciB0aGUgZXZlbnQncyBzZW5kZXIgaGFzIGJlZW4gdmVyaWZpZWQuXG4gICAgdmVyaWZpZWQ6IHN0cmluZztcbiAgICAvLyBXaGV0aGVyIG9uUmVxdWVzdEtleXNDbGljayBoYXMgYmVlbiBjYWxsZWQgc2luY2UgbW91bnRpbmcuXG4gICAgcHJldmlvdXNseVJlcXVlc3RlZEtleXM6IGJvb2xlYW47XG4gICAgLy8gVGhlIFJlbGF0aW9ucyBtb2RlbCBmcm9tIHRoZSBKUyBTREsgZm9yIHJlYWN0aW9ucyB0byBgbXhFdmVudGBcbiAgICByZWFjdGlvbnM6IFJlbGF0aW9ucztcblxuICAgIGhvdmVyOiBib29sZWFuO1xuICAgIGlzUXVvdGVFeHBhbmRlZD86IGJvb2xlYW47XG4gICAgdGhyZWFkPzogVGhyZWFkO1xufVxuXG5AcmVwbGFjZWFibGVDb21wb25lbnQoXCJ2aWV3cy5yb29tcy5FdmVudFRpbGVcIilcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50VGlsZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuICAgIHByaXZhdGUgc3VwcHJlc3NSZWFkUmVjZWlwdEFuaW1hdGlvbjogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlzTGlzdGVuaW5nRm9yUmVjZWlwdHM6IGJvb2xlYW47XG4gICAgLy8gVE9ETzogVHlwZXNcbiAgICBwcml2YXRlIHRpbGUgPSBSZWFjdC5jcmVhdGVSZWY8dW5rbm93bj4oKTtcbiAgICBwcml2YXRlIHJlcGx5Q2hhaW4gPSBSZWFjdC5jcmVhdGVSZWY8UmVwbHlDaGFpbj4oKTtcblxuICAgIHB1YmxpYyByZWFkb25seSByZWYgPSBjcmVhdGVSZWY8SFRNTEVsZW1lbnQ+KCk7XG5cbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICAvLyBuby1vcCBmdW5jdGlvbiBiZWNhdXNlIG9uSGVpZ2h0Q2hhbmdlZCBpcyBvcHRpb25hbCB5ZXQgc29tZSBzdWItY29tcG9uZW50cyBhc3N1bWUgaXRzIGV4aXN0ZW5jZVxuICAgICAgICBvbkhlaWdodENoYW5nZWQ6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgIGZvckV4cG9ydDogZmFsc2UsXG4gICAgICAgIGxheW91dDogTGF5b3V0Lkdyb3VwLFxuICAgIH07XG5cbiAgICBzdGF0aWMgY29udGV4dFR5cGUgPSBNYXRyaXhDbGllbnRDb250ZXh0O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRoZSBhY3Rpb24gYmFyIGlzIGZvY3VzZWQuXG4gICAgICAgICAgICBhY3Rpb25CYXJGb2N1c2VkOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgYWxsIHJlYWQgcmVjZWlwdHMgYXJlIGJlaW5nIGRpc3BsYXllZC4gSWYgbm90LCBvbmx5IGRpc3BsYXlcbiAgICAgICAgICAgIC8vIGEgdHJ1bmNhdGlvbiBvZiB0aGVtLlxuICAgICAgICAgICAgYWxsUmVhZEF2YXRhcnM6IGZhbHNlLFxuICAgICAgICAgICAgLy8gV2hldGhlciB0aGUgZXZlbnQncyBzZW5kZXIgaGFzIGJlZW4gdmVyaWZpZWQuXG4gICAgICAgICAgICB2ZXJpZmllZDogbnVsbCxcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgb25SZXF1ZXN0S2V5c0NsaWNrIGhhcyBiZWVuIGNhbGxlZCBzaW5jZSBtb3VudGluZy5cbiAgICAgICAgICAgIHByZXZpb3VzbHlSZXF1ZXN0ZWRLZXlzOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIFRoZSBSZWxhdGlvbnMgbW9kZWwgZnJvbSB0aGUgSlMgU0RLIGZvciByZWFjdGlvbnMgdG8gYG14RXZlbnRgXG4gICAgICAgICAgICByZWFjdGlvbnM6IHRoaXMuZ2V0UmVhY3Rpb25zKCksXG5cbiAgICAgICAgICAgIGhvdmVyOiBmYWxzZSxcblxuICAgICAgICAgICAgdGhyZWFkOiB0aGlzLnByb3BzLm14RXZlbnQ/LmdldFRocmVhZCgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGRvbid0IGRvIFJSIGFuaW1hdGlvbnMgdW50aWwgd2UgYXJlIG1vdW50ZWRcbiAgICAgICAgdGhpcy5zdXBwcmVzc1JlYWRSZWNlaXB0QW5pbWF0aW9uID0gdHJ1ZTtcblxuICAgICAgICAvLyBUaHJvdWdob3V0IHRoZSBjb21wb25lbnQgd2UgbWFuYWdlIGEgcmVhZCByZWNlaXB0IGxpc3RlbmVyIHRvIHNlZSBpZiBvdXIgdGlsZSBzdGlsbFxuICAgICAgICAvLyBxdWFsaWZpZXMgZm9yIGEgXCJzZW50XCIgb3IgXCJzZW5kaW5nXCIgc3RhdGUgKGJhc2VkIG9uIHRoZWlyIHJlbGV2YW50IGNvbmRpdGlvbnMpLiBXZVxuICAgICAgICAvLyBkb24ndCB3YW50IHRvIG92ZXItc3Vic2NyaWJlIHRvIHRoZSByZWFkIHJlY2VpcHQgZXZlbnRzIGJlaW5nIGZpcmVkLCBzbyB3ZSB1c2UgYSBmbGFnXG4gICAgICAgIC8vIHRvIGRldGVybWluZSBpZiB3ZSd2ZSBhbHJlYWR5IHN1YnNjcmliZWQgYW5kIHVzZSBhIGNvbWJpbmF0aW9uIG9mIG90aGVyIGZsYWdzIHRvIGZpbmRcbiAgICAgICAgLy8gb3V0IGlmIHdlIHNob3VsZCBldmVuIGJlIHN1YnNjcmliZWQgYXQgYWxsLlxuICAgICAgICB0aGlzLmlzTGlzdGVuaW5nRm9yUmVjZWlwdHMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIHRydWUsIHRoZSB0aWxlIHF1YWxpZmllcyBmb3Igc29tZSBzb3J0IG9mIHNwZWNpYWwgcmVhZCByZWNlaXB0LiBUaGlzIGNvdWxkIGJlIGEgJ3NlbmRpbmcnXG4gICAgICogb3IgJ3NlbnQnIHJlY2VpcHQsIGZvciBleGFtcGxlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0IGlzRWxpZ2libGVGb3JTcGVjaWFsUmVjZWlwdCgpOiBib29sZWFuIHtcbiAgICAgICAgLy8gRmlyc3QsIGlmIHRoZXJlIGFyZSBvdGhlciByZWFkIHJlY2VpcHRzIHRoZW4ganVzdCBzaG9ydC1jaXJjdWl0IHRoaXMuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnJlYWRSZWNlaXB0cyAmJiB0aGlzLnByb3BzLnJlYWRSZWNlaXB0cy5sZW5ndGggPiAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5teEV2ZW50KSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgLy8gU2FuaXR5IGNoZWNrIChzaG91bGQgbmV2ZXIgaGFwcGVuLCBidXQgd2Ugc2hvdWxkbid0IGV4cGxvZGUgaWYgaXQgZG9lcylcbiAgICAgICAgY29uc3Qgcm9vbSA9IHRoaXMuY29udGV4dC5nZXRSb29tKHRoaXMucHJvcHMubXhFdmVudC5nZXRSb29tSWQoKSk7XG4gICAgICAgIGlmICghcm9vbSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIFF1aWNrbHkgY2hlY2sgdG8gc2VlIGlmIHRoZSBldmVudCB3YXMgc2VudCBieSB1cy4gSWYgaXQgd2Fzbid0LCBpdCB3b24ndCBxdWFsaWZ5IGZvclxuICAgICAgICAvLyBzcGVjaWFsIHJlYWQgcmVjZWlwdHMuXG4gICAgICAgIGNvbnN0IG15VXNlcklkID0gTWF0cml4Q2xpZW50UGVnLmdldCgpLmdldFVzZXJJZCgpO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5teEV2ZW50LmdldFNlbmRlcigpICE9PSBteVVzZXJJZCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIEZpbmFsbHksIGRldGVybWluZSBpZiB0aGUgdHlwZSBpcyByZWxldmFudCB0byB0aGUgdXNlci4gVGhpcyBub3RhYmx5IGV4Y2x1ZGVzIHN0YXRlXG4gICAgICAgIC8vIGV2ZW50cyBhbmQgcHJldHR5IG11Y2ggYW55dGhpbmcgdGhhdCBjYW4ndCBiZSBzZW50IGJ5IHRoZSBjb21wb3NlciBhcyBhIG1lc3NhZ2UuIEZvclxuICAgICAgICAvLyB0aG9zZSB3ZSByZWx5IG9uIGxvY2FsIGVjaG8gZ2l2aW5nIHRoZSBpbXByZXNzaW9uIG9mIHRoaW5ncyBjaGFuZ2luZywgYW5kIGV4cGVjdCB0aGVtXG4gICAgICAgIC8vIHRvIGJlIHF1aWNrLlxuICAgICAgICBjb25zdCBzaW1wbGVTZW5kYWJsZUV2ZW50cyA9IFtcbiAgICAgICAgICAgIEV2ZW50VHlwZS5TdGlja2VyLFxuICAgICAgICAgICAgRXZlbnRUeXBlLlJvb21NZXNzYWdlLFxuICAgICAgICAgICAgRXZlbnRUeXBlLlJvb21NZXNzYWdlRW5jcnlwdGVkLFxuICAgICAgICBdO1xuICAgICAgICBpZiAoIXNpbXBsZVNlbmRhYmxlRXZlbnRzLmluY2x1ZGVzKHRoaXMucHJvcHMubXhFdmVudC5nZXRUeXBlKCkgYXMgRXZlbnRUeXBlKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIERlZmF1bHQgY2FzZVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBzaG91bGRTaG93U2VudFJlY2VpcHQoKSB7XG4gICAgICAgIC8vIElmIHdlJ3JlIG5vdCBldmVuIGVsaWdpYmxlLCBkb24ndCBzaG93IHRoZSByZWNlaXB0LlxuICAgICAgICBpZiAoIXRoaXMuaXNFbGlnaWJsZUZvclNwZWNpYWxSZWNlaXB0KSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgLy8gV2Ugb25seSBzaG93IHRoZSAnc2VudCcgcmVjZWlwdCBvbiB0aGUgbGFzdCBzdWNjZXNzZnVsIGV2ZW50LlxuICAgICAgICBpZiAoIXRoaXMucHJvcHMubGFzdFN1Y2Nlc3NmdWwpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAvLyBDaGVjayB0byBtYWtlIHN1cmUgdGhlIHNlbmRpbmcgc3RhdGUgaXMgYXBwcm9wcmlhdGUuIEEgbnVsbC91bmRlZmluZWQgc2VuZCBzdGF0dXMgbWVhbnNcbiAgICAgICAgLy8gdGhhdCB0aGUgbWVzc2FnZSBpcyAnc2VudCcsIHNvIHdlJ3JlIGp1c3QgZG91YmxlIGNoZWNraW5nIHRoYXQgaXQncyBleHBsaWNpdGx5IG5vdCBzZW50LlxuICAgICAgICBpZiAodGhpcy5wcm9wcy5ldmVudFNlbmRTdGF0dXMgJiYgdGhpcy5wcm9wcy5ldmVudFNlbmRTdGF0dXMgIT09ICdzZW50JykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIElmIGFueW9uZSBoYXMgcmVhZCB0aGUgZXZlbnQgYmVzaWRlcyB1cywgd2UgZG9uJ3Qgd2FudCB0byBzaG93IGEgc2VudCByZWNlaXB0LlxuICAgICAgICBjb25zdCByZWNlaXB0cyA9IHRoaXMucHJvcHMucmVhZFJlY2VpcHRzIHx8IFtdO1xuICAgICAgICBjb25zdCBteVVzZXJJZCA9IE1hdHJpeENsaWVudFBlZy5nZXQoKS5nZXRVc2VySWQoKTtcbiAgICAgICAgaWYgKHJlY2VpcHRzLnNvbWUociA9PiByLnVzZXJJZCAhPT0gbXlVc2VySWQpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgLy8gRmluYWxseSwgd2Ugc2hvdWxkIHNob3cgYSByZWNlaXB0LlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBzaG91bGRTaG93U2VuZGluZ1JlY2VpcHQoKSB7XG4gICAgICAgIC8vIElmIHdlJ3JlIG5vdCBldmVuIGVsaWdpYmxlLCBkb24ndCBzaG93IHRoZSByZWNlaXB0LlxuICAgICAgICBpZiAoIXRoaXMuaXNFbGlnaWJsZUZvclNwZWNpYWxSZWNlaXB0KSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgLy8gQ2hlY2sgdGhlIGV2ZW50IHNlbmQgc3RhdHVzIHRvIHNlZSBpZiB3ZSBhcmUgcGVuZGluZy4gTnVsbC91bmRlZmluZWQgc3RhdHVzIG1lYW5zIHRoZVxuICAgICAgICAvLyBtZXNzYWdlIHdhcyBzZW50LCBzbyBjaGVjayBmb3IgdGhhdCBhbmQgJ3NlbnQnIGV4cGxpY2l0bHkuXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5ldmVudFNlbmRTdGF0dXMgfHwgdGhpcy5wcm9wcy5ldmVudFNlbmRTdGF0dXMgPT09ICdzZW50JykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIERlZmF1bHQgdG8gc2hvd2luZyAtIHRoZXJlJ3Mgbm8gb3RoZXIgZXZlbnQgcHJvcGVydGllcy9iZWhhdmlvdXJzIHdlIGNhcmUgYWJvdXQgYXRcbiAgICAgICAgLy8gdGhpcyBwb2ludC5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogW1JFQUNULVdBUk5JTkddIE1vdmUgaW50byBjb25zdHJ1Y3RvclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIFVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMudmVyaWZ5RXZlbnQodGhpcy5wcm9wcy5teEV2ZW50KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5zdXBwcmVzc1JlYWRSZWNlaXB0QW5pbWF0aW9uID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLmZvckV4cG9ydCkge1xuICAgICAgICAgICAgY2xpZW50Lm9uKFwiZGV2aWNlVmVyaWZpY2F0aW9uQ2hhbmdlZFwiLCB0aGlzLm9uRGV2aWNlVmVyaWZpY2F0aW9uQ2hhbmdlZCk7XG4gICAgICAgICAgICBjbGllbnQub24oXCJ1c2VyVHJ1c3RTdGF0dXNDaGFuZ2VkXCIsIHRoaXMub25Vc2VyVmVyaWZpY2F0aW9uQ2hhbmdlZCk7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm14RXZlbnQub24oXCJFdmVudC5kZWNyeXB0ZWRcIiwgdGhpcy5vbkRlY3J5cHRlZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5zaG93UmVhY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5teEV2ZW50Lm9uKFwiRXZlbnQucmVsYXRpb25zQ3JlYXRlZFwiLCB0aGlzLm9uUmVhY3Rpb25zQ3JlYXRlZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNob3VsZFNob3dTZW50UmVjZWlwdCB8fCB0aGlzLnNob3VsZFNob3dTZW5kaW5nUmVjZWlwdCkge1xuICAgICAgICAgICAgICAgIGNsaWVudC5vbihcIlJvb20ucmVjZWlwdFwiLCB0aGlzLm9uUm9vbVJlY2VpcHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNMaXN0ZW5pbmdGb3JSZWNlaXB0cyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoU2V0dGluZ3NTdG9yZS5nZXRWYWx1ZShcImZlYXR1cmVfdGhyZWFkXCIpKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm14RXZlbnQub25jZShUaHJlYWRFdmVudC5SZWFkeSwgdGhpcy51cGRhdGVUaHJlYWQpO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5teEV2ZW50Lm9uKFRocmVhZEV2ZW50LlVwZGF0ZSwgdGhpcy51cGRhdGVUaHJlYWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgcm9vbSA9IHRoaXMuY29udGV4dC5nZXRSb29tKHRoaXMucHJvcHMubXhFdmVudC5nZXRSb29tSWQoKSk7XG4gICAgICAgIHJvb20/Lm9uKFRocmVhZEV2ZW50Lk5ldywgdGhpcy5vbk5ld1RocmVhZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVUaHJlYWQgPSAodGhyZWFkKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgdGhyZWFkLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgIH07XG5cbiAgICAvLyBUT0RPOiBbUkVBQ1QtV0FSTklOR10gUmVwbGFjZSB3aXRoIGFwcHJvcHJpYXRlIGxpZmVjeWNsZSBldmVudFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICAvLyByZS1jaGVjayB0aGUgc2VuZGVyIHZlcmlmaWNhdGlvbiBhcyBvdXRnb2luZyBldmVudHMgcHJvZ3Jlc3MgdGhyb3VnaFxuICAgICAgICAvLyB0aGUgc2VuZCBwcm9jZXNzLlxuICAgICAgICBpZiAobmV4dFByb3BzLmV2ZW50U2VuZFN0YXR1cyAhPT0gdGhpcy5wcm9wcy5ldmVudFNlbmRTdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMudmVyaWZ5RXZlbnQobmV4dFByb3BzLm14RXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCkge1xuICAgICAgICBpZiAob2JqZWN0SGFzRGlmZih0aGlzLnN0YXRlLCBuZXh0U3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhdGhpcy5wcm9wc0VxdWFsKHRoaXMucHJvcHMsIG5leHRQcm9wcyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgY2xpZW50LnJlbW92ZUxpc3RlbmVyKFwiZGV2aWNlVmVyaWZpY2F0aW9uQ2hhbmdlZFwiLCB0aGlzLm9uRGV2aWNlVmVyaWZpY2F0aW9uQ2hhbmdlZCk7XG4gICAgICAgIGNsaWVudC5yZW1vdmVMaXN0ZW5lcihcInVzZXJUcnVzdFN0YXR1c0NoYW5nZWRcIiwgdGhpcy5vblVzZXJWZXJpZmljYXRpb25DaGFuZ2VkKTtcbiAgICAgICAgY2xpZW50LnJlbW92ZUxpc3RlbmVyKFwiUm9vbS5yZWNlaXB0XCIsIHRoaXMub25Sb29tUmVjZWlwdCk7XG4gICAgICAgIHRoaXMuaXNMaXN0ZW5pbmdGb3JSZWNlaXB0cyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb3BzLm14RXZlbnQucmVtb3ZlTGlzdGVuZXIoXCJFdmVudC5kZWNyeXB0ZWRcIiwgdGhpcy5vbkRlY3J5cHRlZCk7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNob3dSZWFjdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubXhFdmVudC5yZW1vdmVMaXN0ZW5lcihcIkV2ZW50LnJlbGF0aW9uc0NyZWF0ZWRcIiwgdGhpcy5vblJlYWN0aW9uc0NyZWF0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChTZXR0aW5nc1N0b3JlLmdldFZhbHVlKFwiZmVhdHVyZV90aHJlYWRcIikpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubXhFdmVudC5vZmYoVGhyZWFkRXZlbnQuUmVhZHksIHRoaXMudXBkYXRlVGhyZWFkKTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubXhFdmVudC5vZmYoVGhyZWFkRXZlbnQuVXBkYXRlLCB0aGlzLnVwZGF0ZVRocmVhZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb29tID0gdGhpcy5jb250ZXh0LmdldFJvb20odGhpcy5wcm9wcy5teEV2ZW50LmdldFJvb21JZCgpKTtcbiAgICAgICAgcm9vbT8ub2ZmKFRocmVhZEV2ZW50Lk5ldywgdGhpcy5vbk5ld1RocmVhZCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlLCBzbmFwc2hvdCkge1xuICAgICAgICAvLyBJZiB3ZSdyZSBub3QgbGlzdGVuaW5nIGZvciByZWNlaXB0cyBhbmQgZXhwZWN0IHRvIGJlLCByZWdpc3RlciBhIGxpc3RlbmVyLlxuICAgICAgICBpZiAoIXRoaXMuaXNMaXN0ZW5pbmdGb3JSZWNlaXB0cyAmJiAodGhpcy5zaG91bGRTaG93U2VudFJlY2VpcHQgfHwgdGhpcy5zaG91bGRTaG93U2VuZGluZ1JlY2VpcHQpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQub24oXCJSb29tLnJlY2VpcHRcIiwgdGhpcy5vblJvb21SZWNlaXB0KTtcbiAgICAgICAgICAgIHRoaXMuaXNMaXN0ZW5pbmdGb3JSZWNlaXB0cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIG9uTmV3VGhyZWFkID0gKHRocmVhZDogVGhyZWFkKSA9PiB7XG4gICAgICAgIGlmICh0aHJlYWQuaWQgPT09IHRoaXMucHJvcHMubXhFdmVudC5nZXRJZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRocmVhZCh0aHJlYWQpO1xuICAgICAgICAgICAgY29uc3Qgcm9vbSA9IHRoaXMuY29udGV4dC5nZXRSb29tKHRoaXMucHJvcHMubXhFdmVudC5nZXRSb29tSWQoKSk7XG4gICAgICAgICAgICByb29tLm9mZihUaHJlYWRFdmVudC5OZXcsIHRoaXMub25OZXdUaHJlYWQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByaXZhdGUgZ2V0IHRocmVhZCgpOiBUaHJlYWQgfCBudWxsIHtcbiAgICAgICAgaWYgKCFTZXR0aW5nc1N0b3JlLmdldFZhbHVlKFwiZmVhdHVyZV90aHJlYWRcIikpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFjY2Vzc2luZyB0aGUgdGhyZWFkcyB2YWx1ZSB0aHJvdWdoIHRoZSByb29tIGR1ZSB0byBhIHJhY2UgY29uZGl0aW9uXG4gICAgICAgICAqIHRoYXQgd2lsbCBiZSBzb2x2ZWQgd2hlbiB0aGVyZSBhcmUgcHJvcGVyIGJhY2tlbmQgc3VwcG9ydCBmb3IgdGhyZWFkc1xuICAgICAgICAgKiBXZSBjdXJyZW50bHkgaGF2ZSBubyByZWxpYWJsZSB3YXkgdG8gZGlzY292ZXIgdGhhbiBhbiBldmVudCBpcyBhIHRocmVhZFxuICAgICAgICAgKiB3aGVuIHdlIGFyZSBhdCB0aGUgc3luYyBzdGFnZVxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3Qgcm9vbSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKS5nZXRSb29tKHRoaXMucHJvcHMubXhFdmVudC5nZXRSb29tSWQoKSk7XG4gICAgICAgIGNvbnN0IHRocmVhZCA9IHJvb20/LnRocmVhZHMuZ2V0KHRoaXMucHJvcHMubXhFdmVudC5nZXRJZCgpKTtcblxuICAgICAgICBpZiAoIXRocmVhZCB8fCB0aHJlYWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aHJlYWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJUaHJlYWRQYW5lbFN1bW1hcnkoKTogSlNYLkVsZW1lbnQgfCBudWxsIHtcbiAgICAgICAgaWYgKCF0aGlzLnRocmVhZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJteF9UaHJlYWRQYW5lbF9yZXBsaWVzXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9UaHJlYWRQYW5lbF9yZXBsaWVzU3VtbWFyeVwiPlxuICAgICAgICAgICAgICAgIHsgdGhpcy50aHJlYWQubGVuZ3RoIH1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIHsgdGhpcy5yZW5kZXJUaHJlYWRMYXN0TWVzc2FnZVByZXZpZXcoKSB9XG4gICAgICAgIDwvZGl2PjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclRocmVhZExhc3RNZXNzYWdlUHJldmlldygpOiBKU1guRWxlbWVudCB8IG51bGwge1xuICAgICAgICBpZiAoIXRoaXMudGhyZWFkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IFtsYXN0RXZlbnRdID0gdGhpcy50aHJlYWQuZXZlbnRzXG4gICAgICAgICAgICAuZmlsdGVyKGV2ZW50ID0+IGV2ZW50LmlzVGhyZWFkUmVsYXRpb24pXG4gICAgICAgICAgICAuc2xpY2UoLTEpO1xuICAgICAgICBjb25zdCB0aHJlYWRNZXNzYWdlUHJldmlldyA9IE1lc3NhZ2VQcmV2aWV3U3RvcmUuaW5zdGFuY2UuZ2VuZXJhdGVQcmV2aWV3Rm9yRXZlbnQobGFzdEV2ZW50KTtcblxuICAgICAgICBpZiAoIXRocmVhZE1lc3NhZ2VQcmV2aWV3IHx8ICFsYXN0RXZlbnQuc2VuZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiA8PlxuICAgICAgICAgICAgPE1lbWJlckF2YXRhciBtZW1iZXI9e2xhc3RFdmVudC5zZW5kZXJ9IHdpZHRoPXsyNH0gaGVpZ2h0PXsyNH0gY2xhc3NOYW1lPVwibXhfVGhyZWFkSW5mb19hdmF0YXJcIiAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9UaHJlYWRJbmZvX2NvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9UaHJlYWRJbmZvX21lc3NhZ2UtcHJldmlld1wiPlxuICAgICAgICAgICAgICAgICAgICB7IHRocmVhZE1lc3NhZ2VQcmV2aWV3IH1cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC8+O1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyVGhyZWFkSW5mbygpOiBSZWFjdC5SZWFjdE5vZGUge1xuICAgICAgICBpZiAoIXRoaXMudGhyZWFkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfVGhyZWFkSW5mb1wiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaFNob3dUaHJlYWRFdmVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubXhFdmVudCxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm14X1RocmVhZEluZm9fdGhyZWFkcy1hbW91bnRcIj5cbiAgICAgICAgICAgICAgICAgICAgeyBfdChcIiUoY291bnQpcyByZXBseVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogdGhpcy50aHJlYWQubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB9KSB9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIHsgdGhpcy5yZW5kZXJUaHJlYWRMYXN0TWVzc2FnZVByZXZpZXcoKSB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uUm9vbVJlY2VpcHQgPSAoZXYsIHJvb20pID0+IHtcbiAgICAgICAgLy8gaWdub3JlIGV2ZW50cyBmb3Igb3RoZXIgcm9vbXNcbiAgICAgICAgY29uc3QgdGlsZVJvb20gPSBNYXRyaXhDbGllbnRQZWcuZ2V0KCkuZ2V0Um9vbSh0aGlzLnByb3BzLm14RXZlbnQuZ2V0Um9vbUlkKCkpO1xuICAgICAgICBpZiAocm9vbSAhPT0gdGlsZVJvb20pIHJldHVybjtcblxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkU2hvd1NlbnRSZWNlaXB0ICYmICF0aGlzLnNob3VsZFNob3dTZW5kaW5nUmVjZWlwdCAmJiAhdGhpcy5pc0xpc3RlbmluZ0ZvclJlY2VpcHRzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBmb3JjZSB1cGRhdGUgYmVjYXVzZSB3ZSBoYXZlIG5vIHN0YXRlIG9yIHByb3AgY2hhbmdlcyB0byBxdWV1ZSB1cCwgaW5zdGVhZCByZWx5aW5nIG9uXG4gICAgICAgIC8vIHRoZSBnZXR0ZXJzIHdlIHVzZSBoZXJlIHRvIGRldGVybWluZSB3aGF0IG5lZWRzIHJlbmRlcmluZy5cbiAgICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAvLyBQZXIgZWxzZXdoZXJlIGluIHRoaXMgZmlsZSwgd2UgY2FuIHJlbW92ZSB0aGUgbGlzdGVuZXIgb25jZSB3ZSB3aWxsIGhhdmUgbm8gZnVydGhlciBwdXJwb3NlIGZvciBpdC5cbiAgICAgICAgICAgIGlmICghdGhpcy5zaG91bGRTaG93U2VudFJlY2VpcHQgJiYgIXRoaXMuc2hvdWxkU2hvd1NlbmRpbmdSZWNlaXB0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnJlbW92ZUxpc3RlbmVyKFwiUm9vbS5yZWNlaXB0XCIsIHRoaXMub25Sb29tUmVjZWlwdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0xpc3RlbmluZ0ZvclJlY2VpcHRzID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKiogY2FsbGVkIHdoZW4gdGhlIGV2ZW50IGlzIGRlY3J5cHRlZCBhZnRlciB3ZSBzaG93IGl0LlxuICAgICAqL1xuICAgIHByaXZhdGUgb25EZWNyeXB0ZWQgPSAoKSA9PiB7XG4gICAgICAgIC8vIHdlIG5lZWQgdG8gcmUtdmVyaWZ5IHRoZSBzZW5kaW5nIGRldmljZS5cbiAgICAgICAgLy8gKHdlIGNhbGwgb25IZWlnaHRDaGFuZ2VkIGluIHZlcmlmeUV2ZW50IHRvIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSBkZWNyeXB0aW9uXG4gICAgICAgIC8vIGhhcyBjYXVzZWQgYSBjaGFuZ2UgaW4gc2l6ZSBvZiB0aGUgZXZlbnQgdGlsZSlcbiAgICAgICAgdGhpcy52ZXJpZnlFdmVudCh0aGlzLnByb3BzLm14RXZlbnQpO1xuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25EZXZpY2VWZXJpZmljYXRpb25DaGFuZ2VkID0gKHVzZXJJZCwgZGV2aWNlKSA9PiB7XG4gICAgICAgIGlmICh1c2VySWQgPT09IHRoaXMucHJvcHMubXhFdmVudC5nZXRTZW5kZXIoKSkge1xuICAgICAgICAgICAgdGhpcy52ZXJpZnlFdmVudCh0aGlzLnByb3BzLm14RXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25Vc2VyVmVyaWZpY2F0aW9uQ2hhbmdlZCA9ICh1c2VySWQsIF90cnVzdFN0YXR1cykgPT4ge1xuICAgICAgICBpZiAodXNlcklkID09PSB0aGlzLnByb3BzLm14RXZlbnQuZ2V0U2VuZGVyKCkpIHtcbiAgICAgICAgICAgIHRoaXMudmVyaWZ5RXZlbnQodGhpcy5wcm9wcy5teEV2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcml2YXRlIGFzeW5jIHZlcmlmeUV2ZW50KG14RXZlbnQpIHtcbiAgICAgICAgaWYgKCFteEV2ZW50LmlzRW5jcnlwdGVkKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVuY3J5cHRpb25JbmZvID0gdGhpcy5jb250ZXh0LmdldEV2ZW50RW5jcnlwdGlvbkluZm8obXhFdmVudCk7XG4gICAgICAgIGNvbnN0IHNlbmRlcklkID0gbXhFdmVudC5nZXRTZW5kZXIoKTtcbiAgICAgICAgY29uc3QgdXNlclRydXN0ID0gdGhpcy5jb250ZXh0LmNoZWNrVXNlclRydXN0KHNlbmRlcklkKTtcblxuICAgICAgICBpZiAoZW5jcnlwdGlvbkluZm8ubWlzbWF0Y2hlZFNlbmRlcikge1xuICAgICAgICAgICAgLy8gc29tZXRoaW5nIGRlZmluaXRlbHkgd3JvbmcgaXMgZ29pbmcgb24gaGVyZVxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgdmVyaWZpZWQ6IEUyRVN0YXRlLldhcm5pbmcsXG4gICAgICAgICAgICB9LCB0aGlzLnByb3BzLm9uSGVpZ2h0Q2hhbmdlZCk7IC8vIERlY3J5cHRpb24gbWF5IGhhdmUgY2F1c2VkIGEgY2hhbmdlIGluIHNpemVcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdXNlclRydXN0LmlzQ3Jvc3NTaWduaW5nVmVyaWZpZWQoKSkge1xuICAgICAgICAgICAgLy8gdXNlciBpcyBub3QgdmVyaWZpZWQsIHNvIGRlZmF1bHQgdG8gZXZlcnl0aGluZyBpcyBub3JtYWxcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHZlcmlmaWVkOiBFMkVTdGF0ZS5Ob3JtYWwsXG4gICAgICAgICAgICB9LCB0aGlzLnByb3BzLm9uSGVpZ2h0Q2hhbmdlZCk7IC8vIERlY3J5cHRpb24gbWF5IGhhdmUgY2F1c2VkIGEgY2hhbmdlIGluIHNpemVcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGV2ZW50U2VuZGVyVHJ1c3QgPSBlbmNyeXB0aW9uSW5mby5zZW5kZXIgJiYgdGhpcy5jb250ZXh0LmNoZWNrRGV2aWNlVHJ1c3QoXG4gICAgICAgICAgICBzZW5kZXJJZCwgZW5jcnlwdGlvbkluZm8uc2VuZGVyLmRldmljZUlkLFxuICAgICAgICApO1xuICAgICAgICBpZiAoIWV2ZW50U2VuZGVyVHJ1c3QpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHZlcmlmaWVkOiBFMkVTdGF0ZS5Vbmtub3duLFxuICAgICAgICAgICAgfSwgdGhpcy5wcm9wcy5vbkhlaWdodENoYW5nZWQpOyAvLyBEZWNyeXB0aW9uIG1heSBoYXZlIGNhdXNlZCBhIGNoYW5nZSBpbiBzaXplXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWV2ZW50U2VuZGVyVHJ1c3QuaXNWZXJpZmllZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB2ZXJpZmllZDogRTJFU3RhdGUuV2FybmluZyxcbiAgICAgICAgICAgIH0sIHRoaXMucHJvcHMub25IZWlnaHRDaGFuZ2VkKTsgLy8gRGVjcnlwdGlvbiBtYXkgaGF2ZSBjYXVzZWQgYSBjaGFuZ2UgaW4gc2l6ZVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFlbmNyeXB0aW9uSW5mby5hdXRoZW50aWNhdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB2ZXJpZmllZDogRTJFU3RhdGUuVW5hdXRoZW50aWNhdGVkLFxuICAgICAgICAgICAgfSwgdGhpcy5wcm9wcy5vbkhlaWdodENoYW5nZWQpOyAvLyBEZWNyeXB0aW9uIG1heSBoYXZlIGNhdXNlZCBhIGNoYW5nZSBpbiBzaXplXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHZlcmlmaWVkOiBFMkVTdGF0ZS5WZXJpZmllZCxcbiAgICAgICAgfSwgdGhpcy5wcm9wcy5vbkhlaWdodENoYW5nZWQpOyAvLyBEZWNyeXB0aW9uIG1heSBoYXZlIGNhdXNlZCBhIGNoYW5nZSBpbiBzaXplXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcm9wc0VxdWFsKG9iakEsIG9iakIpIHtcbiAgICAgICAgY29uc3Qga2V5c0EgPSBPYmplY3Qua2V5cyhvYmpBKTtcbiAgICAgICAgY29uc3Qga2V5c0IgPSBPYmplY3Qua2V5cyhvYmpCKTtcblxuICAgICAgICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5c0EubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleXNBW2ldO1xuXG4gICAgICAgICAgICBpZiAoIW9iakIuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbmVlZCB0byBkZWVwLWNvbXBhcmUgcmVhZFJlY2VpcHRzXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAncmVhZFJlY2VpcHRzJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJBID0gb2JqQVtrZXldO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJCID0gb2JqQltrZXldO1xuICAgICAgICAgICAgICAgIGlmIChyQSA9PT0gckIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFyQSB8fCAhckIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyQS5sZW5ndGggIT09IHJCLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgckEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJBW2pdLnVzZXJJZCAhPT0gckJbal0udXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gb25lIGhhcyBhIG1lbWJlciBzZXQgYW5kIHRoZSBvdGhlciBkb2Vzbid0P1xuICAgICAgICAgICAgICAgICAgICBpZiAockFbal0ucm9vbU1lbWJlciAhPT0gckJbal0ucm9vbU1lbWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqQVtrZXldICE9PSBvYmpCW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBzaG91bGRIaWdobGlnaHQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmZvckV4cG9ydCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjb25zdCBhY3Rpb25zID0gdGhpcy5jb250ZXh0LmdldFB1c2hBY3Rpb25zRm9yRXZlbnQodGhpcy5wcm9wcy5teEV2ZW50LnJlcGxhY2luZ0V2ZW50KCkgfHwgdGhpcy5wcm9wcy5teEV2ZW50KTtcbiAgICAgICAgaWYgKCFhY3Rpb25zIHx8ICFhY3Rpb25zLnR3ZWFrcykgeyByZXR1cm4gZmFsc2U7IH1cblxuICAgICAgICAvLyBkb24ndCBzaG93IHNlbGYtaGlnaGxpZ2h0cyBmcm9tIGFub3RoZXIgb2Ygb3VyIGNsaWVudHNcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubXhFdmVudC5nZXRTZW5kZXIoKSA9PT0gdGhpcy5jb250ZXh0LmNyZWRlbnRpYWxzLnVzZXJJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFjdGlvbnMudHdlYWtzLmhpZ2hsaWdodDtcbiAgICB9XG5cbiAgICB0b2dnbGVBbGxSZWFkQXZhdGFycyA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBhbGxSZWFkQXZhdGFyczogIXRoaXMuc3RhdGUuYWxsUmVhZEF2YXRhcnMsXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBnZXRSZWFkQXZhdGFycygpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkU2hvd1NlbnRSZWNlaXB0IHx8IHRoaXMuc2hvdWxkU2hvd1NlbmRpbmdSZWNlaXB0KSB7XG4gICAgICAgICAgICByZXR1cm4gPFNlbnRSZWNlaXB0IG1lc3NhZ2VTdGF0ZT17dGhpcy5wcm9wcy5teEV2ZW50LmdldEFzc29jaWF0ZWRTdGF0dXMoKX0gLz47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBNQVhfUkVBRF9BVkFUQVJTID0gdGhpcy5wcm9wcy5sYXlvdXQgPT0gTGF5b3V0LkJ1YmJsZVxuICAgICAgICAgICAgPyAyXG4gICAgICAgICAgICA6IDU7XG5cbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IGlmIHRoZXJlIGFyZSBubyByZWFkIHJlY2VpcHRzXG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5yZWFkUmVjZWlwdHMgfHwgdGhpcy5wcm9wcy5yZWFkUmVjZWlwdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBXZSBjdXJyZW50bHkgbXVzdCBpbmNsdWRlIGBteF9FdmVudFRpbGVfcmVhZEF2YXRhcnNgIGluIHRoZSBET01cbiAgICAgICAgICAgIC8vIG9mIGFsbCBldmVudHMsIGFzIGl0IGlzIHRoZSBwb3NpdGlvbmVkIHBhcmVudCBvZiB0aGUgYW5pbWF0ZWRcbiAgICAgICAgICAgIC8vIHJlYWQgcmVjZWlwdHMuIFdlIGNhbid0IGxldCBpdCB1bm1vdW50IHdoZW4gYSByZWNlaXB0IG1vdmVzXG4gICAgICAgICAgICAvLyBldmVudHMsIHNvIGZvciBub3cgd2UgbW91bnQgaXQgZm9yIGFsbCBldmVudHMuIFdpdGhvdXQgaXQsIHRoZVxuICAgICAgICAgICAgLy8gYW5pbWF0aW9uIHdpbGwgc3RhcnQgZnJvbSB0aGUgdG9wIG9mIHRoZSB0aW1lbGluZSAoYmVjYXVzZSBpdFxuICAgICAgICAgICAgLy8gbG9zdCBpdHMgY29udGFpbmVyKS5cbiAgICAgICAgICAgIC8vIFNlZSBhbHNvIGh0dHBzOi8vZ2l0aHViLmNvbS92ZWN0b3ItaW0vZWxlbWVudC13ZWIvaXNzdWVzLzE3NTYxXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfRXZlbnRUaWxlX21zZ09wdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfcmVhZEF2YXRhcnNcIiAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGF2YXRhcnMgPSBbXTtcbiAgICAgICAgY29uc3QgcmVjZWlwdE9mZnNldCA9IDE1O1xuICAgICAgICBsZXQgbGVmdCA9IDA7XG5cbiAgICAgICAgY29uc3QgcmVjZWlwdHMgPSB0aGlzLnByb3BzLnJlYWRSZWNlaXB0cztcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlY2VpcHRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCByZWNlaXB0ID0gcmVjZWlwdHNbaV07XG5cbiAgICAgICAgICAgIGxldCBoaWRkZW4gPSB0cnVlO1xuICAgICAgICAgICAgaWYgKChpIDwgTUFYX1JFQURfQVZBVEFSUykgfHwgdGhpcy5zdGF0ZS5hbGxSZWFkQXZhdGFycykge1xuICAgICAgICAgICAgICAgIGhpZGRlbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETzogd2Uga2VlcCB0aGUgZXh0cmEgcmVhZCBhdmF0YXJzIGluIHRoZSBkb20gdG8gbWFrZSBhbmltYXRpb24gc2ltcGxlclxuICAgICAgICAgICAgLy8gd2UgY291bGQgb3B0aW1pc2UgdGhpcyB0byByZWR1Y2UgdGhlIGRvbSBzaXplLlxuXG4gICAgICAgICAgICAvLyBJZiBoaWRkZW4sIHNldCBvZmZzZXQgZXF1YWwgdG8gdGhlIG9mZnNldCBvZiB0aGUgZmluYWwgdmlzaWJsZSBhdmF0YXIgb3JcbiAgICAgICAgICAgIC8vIGVsc2Ugc2V0IGl0IHByb3BvcnRpb25hbCB0byBpbmRleFxuICAgICAgICAgICAgbGVmdCA9IChoaWRkZW4gPyBNQVhfUkVBRF9BVkFUQVJTIC0gMSA6IGkpICogLXJlY2VpcHRPZmZzZXQ7XG5cbiAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IHJlY2VpcHQudXNlcklkO1xuICAgICAgICAgICAgbGV0IHJlYWRSZWNlaXB0SW5mbztcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMucmVhZFJlY2VpcHRNYXApIHtcbiAgICAgICAgICAgICAgICByZWFkUmVjZWlwdEluZm8gPSB0aGlzLnByb3BzLnJlYWRSZWNlaXB0TWFwW3VzZXJJZF07XG4gICAgICAgICAgICAgICAgaWYgKCFyZWFkUmVjZWlwdEluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZFJlY2VpcHRJbmZvID0ge307XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucmVhZFJlY2VpcHRNYXBbdXNlcklkXSA9IHJlYWRSZWNlaXB0SW5mbztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGFkZCB0byB0aGUgc3RhcnQgc28gdGhlIG1vc3QgcmVjZW50IGlzIG9uIHRoZSBlbmQgKGllLiBlbmRzIHVwIHJpZ2h0bW9zdClcbiAgICAgICAgICAgIGF2YXRhcnMudW5zaGlmdChcbiAgICAgICAgICAgICAgICA8UmVhZFJlY2VpcHRNYXJrZXJcbiAgICAgICAgICAgICAgICAgICAga2V5PXt1c2VySWR9XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcj17cmVjZWlwdC5yb29tTWVtYmVyfVxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja1VzZXJJZD17dXNlcklkfVxuICAgICAgICAgICAgICAgICAgICBsZWZ0T2Zmc2V0PXtsZWZ0fVxuICAgICAgICAgICAgICAgICAgICBoaWRkZW49e2hpZGRlbn1cbiAgICAgICAgICAgICAgICAgICAgcmVhZFJlY2VpcHRJbmZvPXtyZWFkUmVjZWlwdEluZm99XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrVW5tb3VudGluZz17dGhpcy5wcm9wcy5jaGVja1VubW91bnRpbmd9XG4gICAgICAgICAgICAgICAgICAgIHN1cHByZXNzQW5pbWF0aW9uPXt0aGlzLnN1cHByZXNzUmVhZFJlY2VpcHRBbmltYXRpb259XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlQWxsUmVhZEF2YXRhcnN9XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcD17cmVjZWlwdC50c31cbiAgICAgICAgICAgICAgICAgICAgc2hvd1R3ZWx2ZUhvdXI9e3RoaXMucHJvcHMuaXNUd2VsdmVIb3VyfVxuICAgICAgICAgICAgICAgIC8+LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVtVGV4dDtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmFsbFJlYWRBdmF0YXJzKSB7XG4gICAgICAgICAgICBjb25zdCByZW1haW5kZXIgPSByZWNlaXB0cy5sZW5ndGggLSBNQVhfUkVBRF9BVkFUQVJTO1xuICAgICAgICAgICAgaWYgKHJlbWFpbmRlciA+IDApIHtcbiAgICAgICAgICAgICAgICByZW1UZXh0ID0gPHNwYW4gY2xhc3NOYW1lPVwibXhfRXZlbnRUaWxlX3JlYWRBdmF0YXJSZW1haW5kZXJcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZUFsbFJlYWRBdmF0YXJzfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyByaWdodDogXCJjYWxjKFwiICsgdG9SZW0oLWxlZnQpICsgXCIgKyBcIiArIHJlY2VpcHRPZmZzZXQgKyBcInB4KVwiIH19XG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGl2ZT1cIm9mZlwiPnsgcmVtYWluZGVyIH0rXG4gICAgICAgICAgICAgICAgPC9zcGFuPjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0V2ZW50VGlsZV9tc2dPcHRpb25cIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfcmVhZEF2YXRhcnNcIj5cbiAgICAgICAgICAgICAgICAgICAgeyByZW1UZXh0IH1cbiAgICAgICAgICAgICAgICAgICAgeyBhdmF0YXJzIH1cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBvblNlbmRlclByb2ZpbGVDbGljayA9ICgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLnRpbWVsaW5lUmVuZGVyaW5nVHlwZSkgcmV0dXJuO1xuICAgICAgICBkaXMuZGlzcGF0Y2g8Q29tcG9zZXJJbnNlcnRQYXlsb2FkPih7XG4gICAgICAgICAgICBhY3Rpb246IEFjdGlvbi5Db21wb3Nlckluc2VydCxcbiAgICAgICAgICAgIHVzZXJJZDogdGhpcy5wcm9wcy5teEV2ZW50LmdldFNlbmRlcigpLFxuICAgICAgICAgICAgdGltZWxpbmVSZW5kZXJpbmdUeXBlOiB0aGlzLnByb3BzLnRpbWVsaW5lUmVuZGVyaW5nVHlwZSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIG9uUmVxdWVzdEtleXNDbGljayA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAvLyBJbmRpY2F0ZSBpbiB0aGUgVUkgdGhhdCB0aGUga2V5cyBoYXZlIGJlZW4gcmVxdWVzdGVkICh0aGlzIGlzIGV4cGVjdGVkIHRvXG4gICAgICAgICAgICAvLyBiZSByZXNldCBpZiB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQgaW4gdGhlIGZ1dHVyZSkuXG4gICAgICAgICAgICBwcmV2aW91c2x5UmVxdWVzdGVkS2V5czogdHJ1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2FuY2VsIGFueSBvdXRnb2luZyBrZXkgcmVxdWVzdCBmb3IgdGhpcyBldmVudCBhbmQgcmVzZW5kIGl0LiBJZiBhIHJlc3BvbnNlXG4gICAgICAgIC8vIGlzIHJlY2VpdmVkIGZvciB0aGUgcmVxdWVzdCB3aXRoIHRoZSByZXF1aXJlZCBrZXlzLCB0aGUgZXZlbnQgY291bGQgYmVcbiAgICAgICAgLy8gZGVjcnlwdGVkIHN1Y2Nlc3NmdWxseS5cbiAgICAgICAgdGhpcy5jb250ZXh0LmNhbmNlbEFuZFJlc2VuZEV2ZW50Um9vbUtleVJlcXVlc3QodGhpcy5wcm9wcy5teEV2ZW50KTtcbiAgICB9O1xuXG4gICAgb25QZXJtYWxpbmtDbGlja2VkID0gZSA9PiB7XG4gICAgICAgIC8vIFRoaXMgYWxsb3dzIHRoZSBwZXJtYWxpbmsgdG8gYmUgb3BlbmVkIGluIGEgbmV3IHRhYi93aW5kb3cgb3IgY29waWVkIGFzXG4gICAgICAgIC8vIG1hdHJpeC50bywgYnV0IGFsc28gZm9yIGl0IHRvIGVuYWJsZSByb3V0aW5nIHdpdGhpbiBFbGVtZW50IHdoZW4gY2xpY2tlZC5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uVmlld1Jvb20sXG4gICAgICAgICAgICBldmVudF9pZDogdGhpcy5wcm9wcy5teEV2ZW50LmdldElkKCksXG4gICAgICAgICAgICBoaWdobGlnaHRlZDogdHJ1ZSxcbiAgICAgICAgICAgIHJvb21faWQ6IHRoaXMucHJvcHMubXhFdmVudC5nZXRSb29tSWQoKSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgcmVuZGVyRTJFUGFkbG9jaygpIHtcbiAgICAgICAgY29uc3QgZXYgPSB0aGlzLnByb3BzLm14RXZlbnQ7XG5cbiAgICAgICAgLy8gZXZlbnQgY291bGQgbm90IGJlIGRlY3J5cHRlZFxuICAgICAgICBpZiAoZXYuZ2V0Q29udGVudCgpLm1zZ3R5cGUgPT09ICdtLmJhZC5lbmNyeXB0ZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gPEUyZVBhZGxvY2tVbmRlY3J5cHRhYmxlIC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXZlbnQgaXMgZW5jcnlwdGVkLCBkaXNwbGF5IHBhZGxvY2sgY29ycmVzcG9uZGluZyB0byB3aGV0aGVyIG9yIG5vdCBpdCBpcyB2ZXJpZmllZFxuICAgICAgICBpZiAoZXYuaXNFbmNyeXB0ZWQoKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUudmVyaWZpZWQgPT09IEUyRVN0YXRlLk5vcm1hbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gbm8gaWNvbiBpZiB3ZSd2ZSBub3QgZXZlbiBjcm9zcy1zaWduZWQgdGhlIHVzZXJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS52ZXJpZmllZCA9PT0gRTJFU3RhdGUuVmVyaWZpZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIG5vIGljb24gZm9yIHZlcmlmaWVkXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUudmVyaWZpZWQgPT09IEUyRVN0YXRlLlVuYXV0aGVudGljYXRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoPEUyZVBhZGxvY2tVbmF1dGhlbnRpY2F0ZWQgLz4pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnZlcmlmaWVkID09PSBFMkVTdGF0ZS5Vbmtub3duKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICg8RTJlUGFkbG9ja1Vua25vd24gLz4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKDxFMmVQYWRsb2NrVW52ZXJpZmllZCAvPik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jb250ZXh0LmlzUm9vbUVuY3J5cHRlZChldi5nZXRSb29tSWQoKSkpIHtcbiAgICAgICAgICAgIC8vIGVsc2UgaWYgcm9vbSBpcyBlbmNyeXB0ZWRcbiAgICAgICAgICAgIC8vIGFuZCBldmVudCBpcyBiZWluZyBlbmNyeXB0ZWQgb3IgaXMgbm90X3NlbnQgKFVua25vd24gRGV2aWNlcy9OZXR3b3JrIEVycm9yKVxuICAgICAgICAgICAgaWYgKGV2LnN0YXR1cyA9PT0gRXZlbnRTdGF0dXMuRU5DUllQVElORykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChldi5zdGF0dXMgPT09IEV2ZW50U3RhdHVzLk5PVF9TRU5UKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2LmlzU3RhdGUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gd2UgZXhwZWN0IHRoaXMgdG8gYmUgdW5lbmNyeXB0ZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIHRoZSBldmVudCBpcyBub3QgZW5jcnlwdGVkLCBidXQgaXQncyBhbiBlMmUgcm9vbSwgc2hvdyB0aGUgb3BlbiBwYWRsb2NrXG4gICAgICAgICAgICByZXR1cm4gPEUyZVBhZGxvY2tVbmVuY3J5cHRlZCAvPjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vIHBhZGxvY2sgbmVlZGVkXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIG9uQWN0aW9uQmFyRm9jdXNDaGFuZ2UgPSBmb2N1c2VkID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBhY3Rpb25CYXJGb2N1c2VkOiBmb2N1c2VkLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vIFRPRE86IFR5cGVzXG4gICAgZ2V0VGlsZTogKCkgPT4gYW55IHwgbnVsbCA9ICgpID0+IHRoaXMudGlsZS5jdXJyZW50O1xuXG4gICAgZ2V0UmVwbHlDaGFpbiA9ICgpID0+IHRoaXMucmVwbHlDaGFpbi5jdXJyZW50O1xuXG4gICAgZ2V0UmVhY3Rpb25zID0gKCkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy5wcm9wcy5zaG93UmVhY3Rpb25zIHx8XG4gICAgICAgICAgICAhdGhpcy5wcm9wcy5nZXRSZWxhdGlvbnNGb3JFdmVudFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGV2ZW50SWQgPSB0aGlzLnByb3BzLm14RXZlbnQuZ2V0SWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZ2V0UmVsYXRpb25zRm9yRXZlbnQoZXZlbnRJZCwgXCJtLmFubm90YXRpb25cIiwgXCJtLnJlYWN0aW9uXCIpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIG9uUmVhY3Rpb25zQ3JlYXRlZCA9IChyZWxhdGlvblR5cGU6IHN0cmluZywgZXZlbnRUeXBlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKHJlbGF0aW9uVHlwZSAhPT0gXCJtLmFubm90YXRpb25cIiB8fCBldmVudFR5cGUgIT09IFwibS5yZWFjdGlvblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9wcy5teEV2ZW50LnJlbW92ZUxpc3RlbmVyKFwiRXZlbnQucmVsYXRpb25zQ3JlYXRlZFwiLCB0aGlzLm9uUmVhY3Rpb25zQ3JlYXRlZCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgcmVhY3Rpb25zOiB0aGlzLmdldFJlYWN0aW9ucygpLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBzZXRRdW90ZUV4cGFuZGVkID0gKGV4cGFuZGVkOiBib29sZWFuKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNRdW90ZUV4cGFuZGVkOiBleHBhbmRlZCxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IG1zZ3R5cGUgPSB0aGlzLnByb3BzLm14RXZlbnQuZ2V0Q29udGVudCgpLm1zZ3R5cGU7XG4gICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IHRoaXMucHJvcHMubXhFdmVudC5nZXRUeXBlKCkgYXMgRXZlbnRUeXBlO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB0aWxlSGFuZGxlcixcbiAgICAgICAgICAgIGlzQnViYmxlTWVzc2FnZSxcbiAgICAgICAgICAgIGlzSW5mb01lc3NhZ2UsXG4gICAgICAgICAgICBpc0xlZnRBbGlnbmVkQnViYmxlTWVzc2FnZSxcbiAgICAgICAgfSA9IGdldEV2ZW50RGlzcGxheUluZm8odGhpcy5wcm9wcy5teEV2ZW50KTtcbiAgICAgICAgY29uc3QgeyBpc1F1b3RlRXhwYW5kZWQgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgLy8gVGhpcyBzaG91bGRuJ3QgaGFwcGVuOiB0aGUgY2FsbGVyIHNob3VsZCBjaGVjayB3ZSBzdXBwb3J0IHRoaXMgdHlwZVxuICAgICAgICAvLyBiZWZvcmUgdHJ5aW5nIHRvIGluc3RhbnRpYXRlIHVzXG4gICAgICAgIGlmICghdGlsZUhhbmRsZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbXhFdmVudCB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGBFdmVudCB0eXBlIG5vdCBzdXBwb3J0ZWQ6IHR5cGU6JHtldmVudFR5cGV9IGlzU3RhdGU6JHtteEV2ZW50LmlzU3RhdGUoKX1gKTtcbiAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cIm14X0V2ZW50VGlsZSBteF9FdmVudFRpbGVfaW5mbyBteF9NTm90aWNlQm9keVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfRXZlbnRUaWxlX2xpbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgeyBfdCgnVGhpcyBldmVudCBjb3VsZCBub3QgYmUgZGlzcGxheWVkJykgfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgRXZlbnRUaWxlVHlwZSA9IHNkay5nZXRDb21wb25lbnQodGlsZUhhbmRsZXIpO1xuICAgICAgICBjb25zdCBpc1Byb2JhYmx5TWVkaWEgPSBNZWRpYUV2ZW50SGVscGVyLmlzRWxpZ2libGUodGhpcy5wcm9wcy5teEV2ZW50KTtcblxuICAgICAgICBjb25zdCBsaW5lQ2xhc3NlcyA9IGNsYXNzTmFtZXMoe1xuICAgICAgICAgICAgbXhfRXZlbnRUaWxlX2xpbmU6IHRydWUsXG4gICAgICAgICAgICBteF9FdmVudFRpbGVfbWVkaWFMaW5lOiBpc1Byb2JhYmx5TWVkaWEsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGlzU2VuZGluZyA9IChbJ3NlbmRpbmcnLCAncXVldWVkJywgJ2VuY3J5cHRpbmcnXS5pbmRleE9mKHRoaXMucHJvcHMuZXZlbnRTZW5kU3RhdHVzKSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBpc1JlZGFjdGVkID0gaXNNZXNzYWdlRXZlbnQodGhpcy5wcm9wcy5teEV2ZW50KSAmJiB0aGlzLnByb3BzLmlzUmVkYWN0ZWQ7XG4gICAgICAgIGNvbnN0IGlzRW5jcnlwdGlvbkZhaWx1cmUgPSB0aGlzLnByb3BzLm14RXZlbnQuaXNEZWNyeXB0aW9uRmFpbHVyZSgpO1xuXG4gICAgICAgIGNvbnN0IGlzRWRpdGluZyA9ICEhdGhpcy5wcm9wcy5lZGl0U3RhdGU7XG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKHtcbiAgICAgICAgICAgIG14X0V2ZW50VGlsZV9idWJibGVDb250YWluZXI6IGlzQnViYmxlTWVzc2FnZSxcbiAgICAgICAgICAgIG14X0V2ZW50VGlsZV9sZWZ0QWxpZ25lZEJ1YmJsZTogaXNMZWZ0QWxpZ25lZEJ1YmJsZU1lc3NhZ2UsXG4gICAgICAgICAgICBteF9FdmVudFRpbGU6IHRydWUsXG4gICAgICAgICAgICBteF9FdmVudFRpbGVfaXNFZGl0aW5nOiBpc0VkaXRpbmcsXG4gICAgICAgICAgICBteF9FdmVudFRpbGVfaW5mbzogaXNJbmZvTWVzc2FnZSxcbiAgICAgICAgICAgIG14X0V2ZW50VGlsZV8xMmhyOiB0aGlzLnByb3BzLmlzVHdlbHZlSG91cixcbiAgICAgICAgICAgIC8vIE5vdGU6IHdlIGtlZXAgdGhlIGBzZW5kaW5nYCBzdGF0ZSBjbGFzcyBmb3IgdGVzdHMsIG5vdCBmb3Igb3VyIHN0eWxlc1xuICAgICAgICAgICAgbXhfRXZlbnRUaWxlX3NlbmRpbmc6ICFpc0VkaXRpbmcgJiYgaXNTZW5kaW5nLFxuICAgICAgICAgICAgbXhfRXZlbnRUaWxlX2hpZ2hsaWdodDogdGhpcy5wcm9wcy50aWxlU2hhcGUgPT09IFRpbGVTaGFwZS5Ob3RpZiA/IGZhbHNlIDogdGhpcy5zaG91bGRIaWdobGlnaHQoKSxcbiAgICAgICAgICAgIG14X0V2ZW50VGlsZV9zZWxlY3RlZDogdGhpcy5wcm9wcy5pc1NlbGVjdGVkRXZlbnQsXG4gICAgICAgICAgICBteF9FdmVudFRpbGVfY29udGludWF0aW9uOiAoXG4gICAgICAgICAgICAgICAgKHRoaXMucHJvcHMudGlsZVNoYXBlID8gJycgOiB0aGlzLnByb3BzLmNvbnRpbnVhdGlvbikgfHxcbiAgICAgICAgICAgICAgICBldmVudFR5cGUgPT09IEV2ZW50VHlwZS5DYWxsSW52aXRlXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgbXhfRXZlbnRUaWxlX2xhc3Q6IHRoaXMucHJvcHMubGFzdCxcbiAgICAgICAgICAgIG14X0V2ZW50VGlsZV9sYXN0SW5TZWN0aW9uOiB0aGlzLnByb3BzLmxhc3RJblNlY3Rpb24sXG4gICAgICAgICAgICBteF9FdmVudFRpbGVfY29udGV4dHVhbDogdGhpcy5wcm9wcy5jb250ZXh0dWFsLFxuICAgICAgICAgICAgbXhfRXZlbnRUaWxlX2FjdGlvbkJhckZvY3VzZWQ6IHRoaXMuc3RhdGUuYWN0aW9uQmFyRm9jdXNlZCxcbiAgICAgICAgICAgIG14X0V2ZW50VGlsZV92ZXJpZmllZDogIWlzQnViYmxlTWVzc2FnZSAmJiB0aGlzLnN0YXRlLnZlcmlmaWVkID09PSBFMkVTdGF0ZS5WZXJpZmllZCxcbiAgICAgICAgICAgIG14X0V2ZW50VGlsZV91bnZlcmlmaWVkOiAhaXNCdWJibGVNZXNzYWdlICYmIHRoaXMuc3RhdGUudmVyaWZpZWQgPT09IEUyRVN0YXRlLldhcm5pbmcsXG4gICAgICAgICAgICBteF9FdmVudFRpbGVfdW5rbm93bjogIWlzQnViYmxlTWVzc2FnZSAmJiB0aGlzLnN0YXRlLnZlcmlmaWVkID09PSBFMkVTdGF0ZS5Vbmtub3duLFxuICAgICAgICAgICAgbXhfRXZlbnRUaWxlX2JhZDogaXNFbmNyeXB0aW9uRmFpbHVyZSxcbiAgICAgICAgICAgIG14X0V2ZW50VGlsZV9lbW90ZTogbXNndHlwZSA9PT0gJ20uZW1vdGUnLFxuICAgICAgICAgICAgbXhfRXZlbnRUaWxlX25vU2VuZGVyOiB0aGlzLnByb3BzLmhpZGVTZW5kZXIsXG4gICAgICAgICAgICBteF9FdmVudFRpbGVfY2xhbXA6IHRoaXMucHJvcHMudGlsZVNoYXBlID09PSBUaWxlU2hhcGUuVGhyZWFkUGFuZWwsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIElmIHRoZSB0aWxlIGlzIGluIHRoZSBTZW5kaW5nIHN0YXRlLCBkb24ndCBzcGVhayB0aGUgbWVzc2FnZS5cbiAgICAgICAgY29uc3QgYXJpYUxpdmUgPSAodGhpcy5wcm9wcy5ldmVudFNlbmRTdGF0dXMgIT09IG51bGwpID8gJ29mZicgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgbGV0IHBlcm1hbGluayA9IFwiI1wiO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5wZXJtYWxpbmtDcmVhdG9yKSB7XG4gICAgICAgICAgICBwZXJtYWxpbmsgPSB0aGlzLnByb3BzLnBlcm1hbGlua0NyZWF0b3IuZm9yRXZlbnQodGhpcy5wcm9wcy5teEV2ZW50LmdldElkKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2UgY2FuJ3QgdXNlIGxvY2FsIGVjaG9lcyBhcyBzY3JvbGwgdG9rZW5zLCBiZWNhdXNlIHRoZWlyIGV2ZW50IElEcyBjaGFuZ2UuXG4gICAgICAgIC8vIExvY2FsIGVjaG9zIGhhdmUgYSBzZW5kIFwic3RhdHVzXCIuXG4gICAgICAgIGNvbnN0IHNjcm9sbFRva2VuID0gdGhpcy5wcm9wcy5teEV2ZW50LnN0YXR1c1xuICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgIDogdGhpcy5wcm9wcy5teEV2ZW50LmdldElkKCk7XG5cbiAgICAgICAgbGV0IGF2YXRhcjtcbiAgICAgICAgbGV0IHNlbmRlcjtcbiAgICAgICAgbGV0IGF2YXRhclNpemU7XG4gICAgICAgIGxldCBuZWVkc1NlbmRlclByb2ZpbGU7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMudGlsZVNoYXBlID09PSBUaWxlU2hhcGUuTm90aWYpIHtcbiAgICAgICAgICAgIGF2YXRhclNpemUgPSAyNDtcbiAgICAgICAgICAgIG5lZWRzU2VuZGVyUHJvZmlsZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodGlsZUhhbmRsZXIgPT09ICdtZXNzYWdlcy5Sb29tQ3JlYXRlJyB8fCBpc0J1YmJsZU1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGF2YXRhclNpemUgPSAwO1xuICAgICAgICAgICAgbmVlZHNTZW5kZXJQcm9maWxlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNJbmZvTWVzc2FnZSkge1xuICAgICAgICAgICAgLy8gYSBzbWFsbCBhdmF0YXIsIHdpdGggbm8gc2VuZGVyIHByb2ZpbGUsIGZvclxuICAgICAgICAgICAgLy8gam9pbnMvcGFydHMvZXRjXG4gICAgICAgICAgICBhdmF0YXJTaXplID0gMTQ7XG4gICAgICAgICAgICBuZWVkc1NlbmRlclByb2ZpbGUgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmxheW91dCA9PSBMYXlvdXQuSVJDKSB7XG4gICAgICAgICAgICBhdmF0YXJTaXplID0gMTQ7XG4gICAgICAgICAgICBuZWVkc1NlbmRlclByb2ZpbGUgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgKHRoaXMucHJvcHMuY29udGludWF0aW9uICYmIHRoaXMucHJvcHMudGlsZVNoYXBlICE9PSBUaWxlU2hhcGUuRmlsZUdyaWQpIHx8XG4gICAgICAgICAgICBldmVudFR5cGUgPT09IEV2ZW50VHlwZS5DYWxsSW52aXRlXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gbm8gYXZhdGFyIG9yIHNlbmRlciBwcm9maWxlIGZvciBjb250aW51YXRpb24gbWVzc2FnZXMgYW5kIGNhbGwgdGlsZXNcbiAgICAgICAgICAgIGF2YXRhclNpemUgPSAwO1xuICAgICAgICAgICAgbmVlZHNTZW5kZXJQcm9maWxlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhdmF0YXJTaXplID0gMzA7XG4gICAgICAgICAgICBuZWVkc1NlbmRlclByb2ZpbGUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMubXhFdmVudC5zZW5kZXIgJiYgYXZhdGFyU2l6ZSkge1xuICAgICAgICAgICAgbGV0IG1lbWJlcjtcbiAgICAgICAgICAgIC8vIHNldCBtZW1iZXIgdG8gcmVjZWl2ZXIgKHRhcmdldCkgaWYgaXQgaXMgYSAzUElEIGludml0ZVxuICAgICAgICAgICAgLy8gc28gdGhhdCB0aGUgY29ycmVjdCBhdmF0YXIgaXMgc2hvd24gYXMgdGhlIHRleHQgaXNcbiAgICAgICAgICAgIC8vIGAkdGFyZ2V0IGFjY2VwdGVkIHRoZSBpbnZpdGF0aW9uIGZvciAkZW1haWxgXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5teEV2ZW50LmdldENvbnRlbnQoKS50aGlyZF9wYXJ0eV9pbnZpdGUpIHtcbiAgICAgICAgICAgICAgICBtZW1iZXIgPSB0aGlzLnByb3BzLm14RXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZW1iZXIgPSB0aGlzLnByb3BzLm14RXZlbnQuc2VuZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXZhdGFyID0gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfRXZlbnRUaWxlX2F2YXRhclwiPlxuICAgICAgICAgICAgICAgICAgICA8TWVtYmVyQXZhdGFyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXI9e21lbWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXthdmF0YXJTaXplfVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PXthdmF0YXJTaXplfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld1VzZXJPbkNsaWNrPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZWVkc1NlbmRlclByb2ZpbGUgJiYgdGhpcy5wcm9wcy5oaWRlU2VuZGVyICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMudGlsZVNoYXBlIHx8IHRoaXMucHJvcHMudGlsZVNoYXBlID09PSBUaWxlU2hhcGUuVGhyZWFkKSB7XG4gICAgICAgICAgICAgICAgc2VuZGVyID0gPFNlbmRlclByb2ZpbGUgb25DbGljaz17dGhpcy5vblNlbmRlclByb2ZpbGVDbGlja31cbiAgICAgICAgICAgICAgICAgICAgbXhFdmVudD17dGhpcy5wcm9wcy5teEV2ZW50fVxuICAgICAgICAgICAgICAgICAgICBlbmFibGVGbGFpcj17dGhpcy5wcm9wcy5lbmFibGVGbGFpcn1cbiAgICAgICAgICAgICAgICAvPjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VuZGVyID0gPFNlbmRlclByb2ZpbGUgbXhFdmVudD17dGhpcy5wcm9wcy5teEV2ZW50fSBlbmFibGVGbGFpcj17dGhpcy5wcm9wcy5lbmFibGVGbGFpcn0gLz47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaG93TWVzc2FnZUFjdGlvbkJhciA9ICFpc0VkaXRpbmcgJiYgIXRoaXMucHJvcHMuZm9yRXhwb3J0O1xuICAgICAgICBjb25zdCBhY3Rpb25CYXIgPSBzaG93TWVzc2FnZUFjdGlvbkJhciA/IDxNZXNzYWdlQWN0aW9uQmFyXG4gICAgICAgICAgICBteEV2ZW50PXt0aGlzLnByb3BzLm14RXZlbnR9XG4gICAgICAgICAgICByZWFjdGlvbnM9e3RoaXMuc3RhdGUucmVhY3Rpb25zfVxuICAgICAgICAgICAgcGVybWFsaW5rQ3JlYXRvcj17dGhpcy5wcm9wcy5wZXJtYWxpbmtDcmVhdG9yfVxuICAgICAgICAgICAgZ2V0VGlsZT17dGhpcy5nZXRUaWxlfVxuICAgICAgICAgICAgZ2V0UmVwbHlDaGFpbj17dGhpcy5nZXRSZXBseUNoYWlufVxuICAgICAgICAgICAgb25Gb2N1c0NoYW5nZT17dGhpcy5vbkFjdGlvbkJhckZvY3VzQ2hhbmdlfVxuICAgICAgICAgICAgaXNRdW90ZUV4cGFuZGVkPXtpc1F1b3RlRXhwYW5kZWR9XG4gICAgICAgICAgICB0b2dnbGVUaHJlYWRFeHBhbmRlZD17KCkgPT4gdGhpcy5zZXRRdW90ZUV4cGFuZGVkKCFpc1F1b3RlRXhwYW5kZWQpfVxuICAgICAgICAvPiA6IHVuZGVmaW5lZDtcblxuICAgICAgICBjb25zdCBzaG93VGltZXN0YW1wID0gdGhpcy5wcm9wcy5teEV2ZW50LmdldFRzKClcbiAgICAgICAgICAgICYmICh0aGlzLnByb3BzLmFsd2F5c1Nob3dUaW1lc3RhbXBzXG4gICAgICAgICAgICB8fCB0aGlzLnByb3BzLmxhc3RcbiAgICAgICAgICAgIHx8IHRoaXMuc3RhdGUuaG92ZXJcbiAgICAgICAgICAgIHx8IHRoaXMuc3RhdGUuYWN0aW9uQmFyRm9jdXNlZCk7XG5cbiAgICAgICAgY29uc3Qgcm9vbSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKS5nZXRSb29tKHRoaXMucHJvcHMubXhFdmVudC5nZXRSb29tSWQoKSk7XG4gICAgICAgIGNvbnN0IHRocmVhZCA9IHJvb20/LmZpbmRUaHJlYWRGb3JFdmVudD8uKHRoaXMucHJvcHMubXhFdmVudCk7XG5cbiAgICAgICAgLy8gVGhyZWFkIHBhbmVsIHNob3dzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIGxhc3QgcmVwbHkgaW4gdGhhdCB0aHJlYWRcbiAgICAgICAgY29uc3QgdHMgPSB0aGlzLnByb3BzLnRpbGVTaGFwZSAhPT0gVGlsZVNoYXBlLlRocmVhZFBhbmVsXG4gICAgICAgICAgICA/IHRoaXMucHJvcHMubXhFdmVudC5nZXRUcygpXG4gICAgICAgICAgICA6IHRocmVhZD8ubGFzdFJlcGx5LmdldFRzKCk7XG5cbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gc2hvd1RpbWVzdGFtcCAmJiB0cyA/XG4gICAgICAgICAgICA8TWVzc2FnZVRpbWVzdGFtcFxuICAgICAgICAgICAgICAgIHNob3dSZWxhdGl2ZT17dGhpcy5wcm9wcy50aWxlU2hhcGUgPT09IFRpbGVTaGFwZS5UaHJlYWRQYW5lbH1cbiAgICAgICAgICAgICAgICBzaG93VHdlbHZlSG91cj17dGhpcy5wcm9wcy5pc1R3ZWx2ZUhvdXJ9XG4gICAgICAgICAgICAgICAgdHM9e3RzfVxuICAgICAgICAgICAgLz4gOiBudWxsO1xuXG4gICAgICAgIGNvbnN0IGtleVJlcXVlc3RIZWxwVGV4dCA9XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0V2ZW50VGlsZV9rZXlSZXF1ZXN0SW5mb190b29sdGlwX2NvbnRlbnRzXCI+XG4gICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgIHsgdGhpcy5zdGF0ZS5wcmV2aW91c2x5UmVxdWVzdGVkS2V5cyA/XG4gICAgICAgICAgICAgICAgICAgICAgICBfdCggJ1lvdXIga2V5IHNoYXJlIHJlcXVlc3QgaGFzIGJlZW4gc2VudCAtIHBsZWFzZSBjaGVjayB5b3VyIG90aGVyIHNlc3Npb25zICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3Iga2V5IHNoYXJlIHJlcXVlc3RzLicpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90KCAnS2V5IHNoYXJlIHJlcXVlc3RzIGFyZSBzZW50IHRvIHlvdXIgb3RoZXIgc2Vzc2lvbnMgYXV0b21hdGljYWxseS4gSWYgeW91ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZWplY3RlZCBvciBkaXNtaXNzZWQgdGhlIGtleSBzaGFyZSByZXF1ZXN0IG9uIHlvdXIgb3RoZXIgc2Vzc2lvbnMsIGNsaWNrICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZXJlIHRvIHJlcXVlc3QgdGhlIGtleXMgZm9yIHRoaXMgc2Vzc2lvbiBhZ2Fpbi4nKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICB7IF90KCAnSWYgeW91ciBvdGhlciBzZXNzaW9ucyBkbyBub3QgaGF2ZSB0aGUga2V5IGZvciB0aGlzIG1lc3NhZ2UgeW91IHdpbGwgbm90ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiZSBhYmxlIHRvIGRlY3J5cHQgdGhlbS4nKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+O1xuICAgICAgICBjb25zdCBrZXlSZXF1ZXN0SW5mb0NvbnRlbnQgPSB0aGlzLnN0YXRlLnByZXZpb3VzbHlSZXF1ZXN0ZWRLZXlzID9cbiAgICAgICAgICAgIF90KCdLZXkgcmVxdWVzdCBzZW50LicpIDpcbiAgICAgICAgICAgIF90KFxuICAgICAgICAgICAgICAgICc8cmVxdWVzdExpbms+UmUtcmVxdWVzdCBlbmNyeXB0aW9uIGtleXM8L3JlcXVlc3RMaW5rPiBmcm9tIHlvdXIgb3RoZXIgc2Vzc2lvbnMuJyxcbiAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICB7ICdyZXF1ZXN0TGluayc6IChzdWIpID0+IDxhIG9uQ2xpY2s9e3RoaXMub25SZXF1ZXN0S2V5c0NsaWNrfT57IHN1YiB9PC9hPiB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBrZXlSZXF1ZXN0SW5mbyA9IGlzRW5jcnlwdGlvbkZhaWx1cmUgJiYgIWlzUmVkYWN0ZWQgP1xuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfa2V5UmVxdWVzdEluZm9cIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfa2V5UmVxdWVzdEluZm9fdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICB7IGtleVJlcXVlc3RJbmZvQ29udGVudCB9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxUb29sdGlwQnV0dG9uIGhlbHBUZXh0PXtrZXlSZXF1ZXN0SGVscFRleHR9IC8+XG4gICAgICAgICAgICA8L2Rpdj4gOiBudWxsO1xuXG4gICAgICAgIGxldCByZWFjdGlvbnNSb3c7XG4gICAgICAgIGlmICghaXNSZWRhY3RlZCkge1xuICAgICAgICAgICAgcmVhY3Rpb25zUm93ID0gPFJlYWN0aW9uc1Jvd1xuICAgICAgICAgICAgICAgIG14RXZlbnQ9e3RoaXMucHJvcHMubXhFdmVudH1cbiAgICAgICAgICAgICAgICByZWFjdGlvbnM9e3RoaXMuc3RhdGUucmVhY3Rpb25zfVxuICAgICAgICAgICAgLz47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsaW5rZWRUaW1lc3RhbXAgPSA8YVxuICAgICAgICAgICAgaHJlZj17cGVybWFsaW5rfVxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5vblBlcm1hbGlua0NsaWNrZWR9XG4gICAgICAgICAgICBhcmlhLWxhYmVsPXtmb3JtYXRUaW1lKG5ldyBEYXRlKHRoaXMucHJvcHMubXhFdmVudC5nZXRUcygpKSwgdGhpcy5wcm9wcy5pc1R3ZWx2ZUhvdXIpfVxuICAgICAgICA+XG4gICAgICAgICAgICB7IHRpbWVzdGFtcCB9XG4gICAgICAgIDwvYT47XG5cbiAgICAgICAgY29uc3QgdXNlSVJDTGF5b3V0ID0gdGhpcy5wcm9wcy5sYXlvdXQgPT0gTGF5b3V0LklSQztcbiAgICAgICAgY29uc3QgZ3JvdXBUaW1lc3RhbXAgPSAhdXNlSVJDTGF5b3V0ID8gbGlua2VkVGltZXN0YW1wIDogbnVsbDtcbiAgICAgICAgY29uc3QgaXJjVGltZXN0YW1wID0gdXNlSVJDTGF5b3V0ID8gbGlua2VkVGltZXN0YW1wIDogbnVsbDtcbiAgICAgICAgY29uc3QgZ3JvdXBQYWRsb2NrID0gIXVzZUlSQ0xheW91dCAmJiAhaXNCdWJibGVNZXNzYWdlICYmIHRoaXMucmVuZGVyRTJFUGFkbG9jaygpO1xuICAgICAgICBjb25zdCBpcmNQYWRsb2NrID0gdXNlSVJDTGF5b3V0ICYmICFpc0J1YmJsZU1lc3NhZ2UgJiYgdGhpcy5yZW5kZXJFMkVQYWRsb2NrKCk7XG5cbiAgICAgICAgbGV0IG1zZ09wdGlvbjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2hvd1JlYWRSZWNlaXB0cykge1xuICAgICAgICAgICAgY29uc3QgcmVhZEF2YXRhcnMgPSB0aGlzLmdldFJlYWRBdmF0YXJzKCk7XG4gICAgICAgICAgICBtc2dPcHRpb24gPSByZWFkQXZhdGFycztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlcGx5Q2hhaW4gPSBoYXZlVGlsZUZvckV2ZW50KHRoaXMucHJvcHMubXhFdmVudCkgJiZcbiAgICAgICAgICAgICAgICAgICAgUmVwbHlDaGFpbi5oYXNSZXBseSh0aGlzLnByb3BzLm14RXZlbnQpID8gKFxuICAgICAgICAgICAgICAgIDxSZXBseUNoYWluXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEV2PXt0aGlzLnByb3BzLm14RXZlbnR9XG4gICAgICAgICAgICAgICAgICAgIG9uSGVpZ2h0Q2hhbmdlZD17dGhpcy5wcm9wcy5vbkhlaWdodENoYW5nZWR9XG4gICAgICAgICAgICAgICAgICAgIHJlZj17dGhpcy5yZXBseUNoYWlufVxuICAgICAgICAgICAgICAgICAgICBmb3JFeHBvcnQ9e3RoaXMucHJvcHMuZm9yRXhwb3J0fVxuICAgICAgICAgICAgICAgICAgICBwZXJtYWxpbmtDcmVhdG9yPXt0aGlzLnByb3BzLnBlcm1hbGlua0NyZWF0b3J9XG4gICAgICAgICAgICAgICAgICAgIGxheW91dD17dGhpcy5wcm9wcy5sYXlvdXR9XG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1Nob3dUaW1lc3RhbXBzPXt0aGlzLnByb3BzLmFsd2F5c1Nob3dUaW1lc3RhbXBzIHx8IHRoaXMuc3RhdGUuaG92ZXJ9XG4gICAgICAgICAgICAgICAgICAgIGlzUXVvdGVFeHBhbmRlZD17aXNRdW90ZUV4cGFuZGVkfVxuICAgICAgICAgICAgICAgICAgICBzZXRRdW90ZUV4cGFuZGVkPXt0aGlzLnNldFF1b3RlRXhwYW5kZWR9XG4gICAgICAgICAgICAgICAgLz4pIDogbnVsbDtcblxuICAgICAgICBzd2l0Y2ggKHRoaXMucHJvcHMudGlsZVNoYXBlKSB7XG4gICAgICAgICAgICBjYXNlIFRpbGVTaGFwZS5Ob3RpZjoge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb20gPSB0aGlzLmNvbnRleHQuZ2V0Um9vbSh0aGlzLnByb3BzLm14RXZlbnQuZ2V0Um9vbUlkKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KHRoaXMucHJvcHMuYXMgfHwgXCJsaVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIFwiY2xhc3NOYW1lXCI6IGNsYXNzZXMsXG4gICAgICAgICAgICAgICAgICAgIFwiYXJpYS1saXZlXCI6IGFyaWFMaXZlLFxuICAgICAgICAgICAgICAgICAgICBcImFyaWEtYXRvbWljXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIFwiZGF0YS1zY3JvbGwtdG9rZW5zXCI6IHNjcm9sbFRva2VuLFxuICAgICAgICAgICAgICAgIH0sIFtcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfcm9vbU5hbWVcIiBrZXk9XCJteF9FdmVudFRpbGVfcm9vbU5hbWVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxSb29tQXZhdGFyIHJvb209e3Jvb219IHdpZHRoPXsyOH0gaGVpZ2h0PXsyOH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e3Blcm1hbGlua30gb25DbGljaz17dGhpcy5vblBlcm1hbGlua0NsaWNrZWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcm9vbSA/IHJvb20ubmFtZSA6ICcnIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+LFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0V2ZW50VGlsZV9zZW5kZXJEZXRhaWxzXCIga2V5PVwibXhfRXZlbnRUaWxlX3NlbmRlckRldGFpbHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgYXZhdGFyIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e3Blcm1hbGlua30gb25DbGljaz17dGhpcy5vblBlcm1hbGlua0NsaWNrZWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc2VuZGVyIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRpbWVzdGFtcCB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PixcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2xpbmVDbGFzc2VzfSBrZXk9XCJteF9FdmVudFRpbGVfbGluZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEV2ZW50VGlsZVR5cGUgcmVmPXt0aGlzLnRpbGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXhFdmVudD17dGhpcy5wcm9wcy5teEV2ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodHM9e3RoaXMucHJvcHMuaGlnaGxpZ2h0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRMaW5rPXt0aGlzLnByb3BzLmhpZ2hsaWdodExpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1VybFByZXZpZXc9e3RoaXMucHJvcHMuc2hvd1VybFByZXZpZXd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25IZWlnaHRDaGFuZ2VkPXt0aGlzLnByb3BzLm9uSGVpZ2h0Q2hhbmdlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlU2hhcGU9e3RoaXMucHJvcHMudGlsZVNoYXBlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRTdGF0ZT17dGhpcy5wcm9wcy5lZGl0U3RhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0UmVsYXRpb25zRm9yRXZlbnQ9e3RoaXMucHJvcHMuZ2V0UmVsYXRpb25zRm9yRXZlbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj4sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFRpbGVTaGFwZS5UaHJlYWQ6IHtcbiAgICAgICAgICAgICAgICBjb25zdCByb29tID0gdGhpcy5jb250ZXh0LmdldFJvb20odGhpcy5wcm9wcy5teEV2ZW50LmdldFJvb21JZCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCh0aGlzLnByb3BzLmFzIHx8IFwibGlcIiwge1xuICAgICAgICAgICAgICAgICAgICBcImNsYXNzTmFtZVwiOiBjbGFzc2VzLFxuICAgICAgICAgICAgICAgICAgICBcImFyaWEtbGl2ZVwiOiBhcmlhTGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJhcmlhLWF0b21pY1wiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBcImRhdGEtc2Nyb2xsLXRva2Vuc1wiOiBzY3JvbGxUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgXCJkYXRhLWhhcy1yZXBseVwiOiAhIXJlcGx5Q2hhaW4sXG4gICAgICAgICAgICAgICAgICAgIFwib25Nb3VzZUVudGVyXCI6ICgpID0+IHRoaXMuc2V0U3RhdGUoeyBob3ZlcjogdHJ1ZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgXCJvbk1vdXNlTGVhdmVcIjogKCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGhvdmVyOiBmYWxzZSB9KSxcbiAgICAgICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfRXZlbnRUaWxlX3Jvb21OYW1lXCIga2V5PVwibXhfRXZlbnRUaWxlX3Jvb21OYW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Um9vbUF2YXRhciByb29tPXtyb29tfSB3aWR0aD17Mjh9IGhlaWdodD17Mjh9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtwZXJtYWxpbmt9IG9uQ2xpY2s9e3RoaXMub25QZXJtYWxpbmtDbGlja2VkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHJvb20gPyByb29tLm5hbWUgOiAnJyB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PixcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfc2VuZGVyRGV0YWlsc1wiIGtleT1cIm14X0V2ZW50VGlsZV9zZW5kZXJEZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IGF2YXRhciB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtwZXJtYWxpbmt9IG9uQ2xpY2s9e3RoaXMub25QZXJtYWxpbmtDbGlja2VkfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHNlbmRlciB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PixcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2xpbmVDbGFzc2VzfSBrZXk9XCJteF9FdmVudFRpbGVfbGluZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyByZXBseUNoYWluIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxFdmVudFRpbGVUeXBlIHJlZj17dGhpcy50aWxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG14RXZlbnQ9e3RoaXMucHJvcHMubXhFdmVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRzPXt0aGlzLnByb3BzLmhpZ2hsaWdodHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TGluaz17dGhpcy5wcm9wcy5oaWdobGlnaHRMaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dVcmxQcmV2aWV3PXt0aGlzLnByb3BzLnNob3dVcmxQcmV2aWV3fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uSGVpZ2h0Q2hhbmdlZD17dGhpcy5wcm9wcy5vbkhlaWdodENoYW5nZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNoYXBlPXt0aGlzLnByb3BzLnRpbGVTaGFwZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0U3RhdGU9e3RoaXMucHJvcHMuZWRpdFN0YXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2luZ0V2ZW50SWQ9e3RoaXMucHJvcHMucmVwbGFjaW5nRXZlbnRJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRSZWxhdGlvbnNGb3JFdmVudD17dGhpcy5wcm9wcy5nZXRSZWxhdGlvbnNGb3JFdmVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbkJhciB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7IHRpbWVzdGFtcCB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PixcbiAgICAgICAgICAgICAgICAgICAgcmVhY3Rpb25zUm93LFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBUaWxlU2hhcGUuVGhyZWFkUGFuZWw6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc093bkV2ZW50ID0gdGhpcy5wcm9wcy5teEV2ZW50Py5zZW5kZXI/LnVzZXJJZCA9PT0gTWF0cml4Q2xpZW50UGVnLmdldCgpLmdldFVzZXJJZCgpO1xuXG4gICAgICAgICAgICAgICAgLy8gdGFiLWluZGV4PS0xIHRvIGFsbG93IGl0IHRvIGJlIGZvY3VzYWJsZSBidXQgZG8gbm90IGFkZCB0YWIgc3RvcCBmb3IgaXQsIHByaW1hcmlseSBmb3Igc2NyZWVuIHJlYWRlcnNcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KHRoaXMucHJvcHMuYXMgfHwgXCJsaVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInJlZlwiOiB0aGlzLnJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NOYW1lXCI6IGNsYXNzZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRhYkluZGV4XCI6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJhcmlhLWxpdmVcIjogYXJpYUxpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFyaWEtYXRvbWljXCI6IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXNjcm9sbC10b2tlbnNcIjogc2Nyb2xsVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtbGF5b3V0XCI6IHRoaXMucHJvcHMubGF5b3V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXNoYXBlXCI6IHRoaXMucHJvcHMudGlsZVNoYXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLXNlbGZcIjogaXNPd25FdmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS1oYXMtcmVwbHlcIjogISFyZXBseUNoYWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvbk1vdXNlRW50ZXJcIjogKCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGhvdmVyOiB0cnVlIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJvbk1vdXNlTGVhdmVcIjogKCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGhvdmVyOiBmYWxzZSB9KSxcblxuICAgICAgICAgICAgICAgICAgICB9LCA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzZW5kZXIgfVxuICAgICAgICAgICAgICAgICAgICAgICAgeyBhdmF0YXIgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17bGluZUNsYXNzZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZGlzcGF0Y2hTaG93VGhyZWFkRXZlbnQodGhpcy5wcm9wcy5teEV2ZW50KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9XCJteF9FdmVudFRpbGVfbGluZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBsaW5rZWRUaW1lc3RhbXAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGhpcy5yZW5kZXJFMkVQYWRsb2NrKCkgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfRXZlbnRUaWxlX2JvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBNZXNzYWdlUHJldmlld1N0b3JlLmluc3RhbmNlLmdlbmVyYXRlUHJldmlld0ZvckV2ZW50KHRoaXMucHJvcHMubXhFdmVudCkgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGhpcy5yZW5kZXJUaHJlYWRQYW5lbFN1bW1hcnkoKSB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb29sYmFyIGNsYXNzTmFtZT1cIm14X01lc3NhZ2VBY3Rpb25CYXJcIiBhcmlhLWxhYmVsPXtfdChcIk1lc3NhZ2UgQWN0aW9uc1wiKX0gYXJpYS1saXZlPVwib2ZmXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJvdmluZ0FjY2Vzc2libGVUb29sdGlwQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X01lc3NhZ2VBY3Rpb25CYXJfbWFza0J1dHRvbiBteF9NZXNzYWdlQWN0aW9uQmFyX3RocmVhZEJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcIlJlcGx5IGluIHRocmVhZFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gZGlzcGF0Y2hTaG93VGhyZWFkRXZlbnQodGhpcy5wcm9wcy5teEV2ZW50KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PVwidGhyZWFkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUaHJlYWRMaXN0Q29udGV4dE1lbnVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXhFdmVudD17dGhpcy5wcm9wcy5teEV2ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJtYWxpbmtDcmVhdG9yPXt0aGlzLnByb3BzLnBlcm1hbGlua0NyZWF0b3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVudVRvZ2dsZT17dGhpcy5vbkFjdGlvbkJhckZvY3VzQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1Rvb2xiYXI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IG1zZ09wdGlvbiB9XG4gICAgICAgICAgICAgICAgICAgIDwvPilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBUaWxlU2hhcGUuRmlsZUdyaWQ6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCh0aGlzLnByb3BzLmFzIHx8IFwibGlcIiwge1xuICAgICAgICAgICAgICAgICAgICBcImNsYXNzTmFtZVwiOiBjbGFzc2VzLFxuICAgICAgICAgICAgICAgICAgICBcImFyaWEtbGl2ZVwiOiBhcmlhTGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJhcmlhLWF0b21pY1wiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBcImRhdGEtc2Nyb2xsLXRva2Vuc1wiOiBzY3JvbGxUb2tlbixcbiAgICAgICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtsaW5lQ2xhc3Nlc30ga2V5PVwibXhfRXZlbnRUaWxlX2xpbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxFdmVudFRpbGVUeXBlIHJlZj17dGhpcy50aWxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG14RXZlbnQ9e3RoaXMucHJvcHMubXhFdmVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRzPXt0aGlzLnByb3BzLmhpZ2hsaWdodHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TGluaz17dGhpcy5wcm9wcy5oaWdobGlnaHRMaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dVcmxQcmV2aWV3PXt0aGlzLnByb3BzLnNob3dVcmxQcmV2aWV3fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTaGFwZT17dGhpcy5wcm9wcy50aWxlU2hhcGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25IZWlnaHRDaGFuZ2VkPXt0aGlzLnByb3BzLm9uSGVpZ2h0Q2hhbmdlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0U3RhdGU9e3RoaXMucHJvcHMuZWRpdFN0YXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJlbGF0aW9uc0ZvckV2ZW50PXt0aGlzLnByb3BzLmdldFJlbGF0aW9uc0ZvckV2ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+LFxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfRXZlbnRUaWxlX3NlbmRlckRldGFpbHNMaW5rXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT1cIm14X0V2ZW50VGlsZV9zZW5kZXJEZXRhaWxzTGlua1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPXtwZXJtYWxpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUGVybWFsaW5rQ2xpY2tlZH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfc2VuZGVyRGV0YWlsc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc2VuZGVyIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRpbWVzdGFtcCB9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9hPixcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzT3duRXZlbnQgPSB0aGlzLnByb3BzLm14RXZlbnQ/LnNlbmRlcj8udXNlcklkID09PSBNYXRyaXhDbGllbnRQZWcuZ2V0KCkuZ2V0VXNlcklkKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB0YWItaW5kZXg9LTEgdG8gYWxsb3cgaXQgdG8gYmUgZm9jdXNhYmxlIGJ1dCBkbyBub3QgYWRkIHRhYiBzdG9wIGZvciBpdCwgcHJpbWFyaWx5IGZvciBzY3JlZW4gcmVhZGVyc1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQodGhpcy5wcm9wcy5hcyB8fCBcImxpXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicmVmXCI6IHRoaXMucmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc05hbWVcIjogY2xhc3NlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidGFiSW5kZXhcIjogLTEsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImFyaWEtbGl2ZVwiOiBhcmlhTGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYXJpYS1hdG9taWNcIjogXCJ0cnVlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtc2Nyb2xsLXRva2Vuc1wiOiBzY3JvbGxUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS1sYXlvdXRcIjogdGhpcy5wcm9wcy5sYXlvdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRhdGEtc2VsZlwiOiBpc093bkV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhLWhhcy1yZXBseVwiOiAhIXJlcGx5Q2hhaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9uTW91c2VFbnRlclwiOiAoKSA9PiB0aGlzLnNldFN0YXRlKHsgaG92ZXI6IHRydWUgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9uTW91c2VMZWF2ZVwiOiAoKSA9PiB0aGlzLnNldFN0YXRlKHsgaG92ZXI6IGZhbHNlIH0pLFxuICAgICAgICAgICAgICAgICAgICB9LCA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBpcmNUaW1lc3RhbXAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgeyBzZW5kZXIgfVxuICAgICAgICAgICAgICAgICAgICAgICAgeyBpcmNQYWRsb2NrIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgYXZhdGFyIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtsaW5lQ2xhc3Nlc30ga2V5PVwibXhfRXZlbnRUaWxlX2xpbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGdyb3VwVGltZXN0YW1wIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGdyb3VwUGFkbG9jayB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyByZXBseUNoYWluIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RXZlbnRUaWxlVHlwZSByZWY9e3RoaXMudGlsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbXhFdmVudD17dGhpcy5wcm9wcy5teEV2ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JFeHBvcnQ9e3RoaXMucHJvcHMuZm9yRXhwb3J0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNpbmdFdmVudElkPXt0aGlzLnByb3BzLnJlcGxhY2luZ0V2ZW50SWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRTdGF0ZT17dGhpcy5wcm9wcy5lZGl0U3RhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodHM9e3RoaXMucHJvcHMuaGlnaGxpZ2h0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0TGluaz17dGhpcy5wcm9wcy5oaWdobGlnaHRMaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93VXJsUHJldmlldz17dGhpcy5wcm9wcy5zaG93VXJsUHJldmlld31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWFsaW5rQ3JlYXRvcj17dGhpcy5wcm9wcy5wZXJtYWxpbmtDcmVhdG9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkhlaWdodENoYW5nZWQ9e3RoaXMucHJvcHMub25IZWlnaHRDaGFuZ2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsRXZlbnRHcm91cGVyPXt0aGlzLnByb3BzLmNhbGxFdmVudEdyb3VwZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFJlbGF0aW9uc0ZvckV2ZW50PXt0aGlzLnByb3BzLmdldFJlbGF0aW9uc0ZvckV2ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBrZXlSZXF1ZXN0SW5mbyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb25CYXIgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGhpcy5wcm9wcy5sYXlvdXQgPT09IExheW91dC5JUkMgJiYgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyByZWFjdGlvbnNSb3cgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRoaXMucmVuZGVyVGhyZWFkSW5mbygpIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz4gfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IHRoaXMucHJvcHMubGF5b3V0ICE9PSBMYXlvdXQuSVJDICYmIDw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyByZWFjdGlvbnNSb3cgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGhpcy5yZW5kZXJUaHJlYWRJbmZvKCkgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC8+IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbXNnT3B0aW9uIH1cbiAgICAgICAgICAgICAgICAgICAgPC8+KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIFhYWCB0aGlzJ2xsIGV2ZW50dWFsbHkgYmUgZHluYW1pYyBiYXNlZCBvbiB0aGUgZmllbGRzIG9uY2Ugd2UgaGF2ZSBleHRlbnNpYmxlIGV2ZW50IHR5cGVzXG5jb25zdCBtZXNzYWdlVHlwZXMgPSBbJ20ucm9vbS5tZXNzYWdlJywgJ20uc3RpY2tlciddO1xuZnVuY3Rpb24gaXNNZXNzYWdlRXZlbnQoZXY6IE1hdHJpeEV2ZW50KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChtZXNzYWdlVHlwZXMuaW5jbHVkZXMoZXYuZ2V0VHlwZSgpKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXZlVGlsZUZvckV2ZW50KGU6IE1hdHJpeEV2ZW50LCBzaG93SGlkZGVuRXZlbnRzPzogYm9vbGVhbikge1xuICAgIC8vIE9ubHkgbWVzc2FnZXMgaGF2ZSBhIHRpbGUgKGJsYWNrLXJlY3RhbmdsZSkgaWYgcmVkYWN0ZWRcbiAgICBpZiAoZS5pc1JlZGFjdGVkKCkgJiYgIWlzTWVzc2FnZUV2ZW50KGUpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBObyB0aWxlIGZvciByZXBsYWNlbWVudCBldmVudHMgc2luY2UgdGhleSB1cGRhdGUgdGhlIG9yaWdpbmFsIHRpbGVcbiAgICBpZiAoZS5pc1JlbGF0aW9uKFwibS5yZXBsYWNlXCIpKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBoYW5kbGVyID0gZ2V0SGFuZGxlclRpbGUoZSk7XG4gICAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChoYW5kbGVyID09PSAnbWVzc2FnZXMuVGV4dHVhbEV2ZW50Jykge1xuICAgICAgICByZXR1cm4gaGFzVGV4dChlLCBzaG93SGlkZGVuRXZlbnRzKTtcbiAgICB9IGVsc2UgaWYgKGhhbmRsZXIgPT09ICdtZXNzYWdlcy5Sb29tQ3JlYXRlJykge1xuICAgICAgICByZXR1cm4gQm9vbGVhbihlLmdldENvbnRlbnQoKVsncHJlZGVjZXNzb3InXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBFMmVQYWRsb2NrVW5kZWNyeXB0YWJsZShwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxFMmVQYWRsb2NrIHRpdGxlPXtfdChcIlRoaXMgbWVzc2FnZSBjYW5ub3QgYmUgZGVjcnlwdGVkXCIpfSBpY29uPXtFMmVQYWRsb2NrSWNvbi5XYXJuaW5nfSB7Li4ucHJvcHN9IC8+XG4gICAgKTtcbn1cblxuZnVuY3Rpb24gRTJlUGFkbG9ja1VudmVyaWZpZWQocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8RTJlUGFkbG9jayB0aXRsZT17X3QoXCJFbmNyeXB0ZWQgYnkgYW4gdW52ZXJpZmllZCBzZXNzaW9uXCIpfSBpY29uPXtFMmVQYWRsb2NrSWNvbi5XYXJuaW5nfSB7Li4ucHJvcHN9IC8+XG4gICAgKTtcbn1cblxuZnVuY3Rpb24gRTJlUGFkbG9ja1VuZW5jcnlwdGVkKHByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPEUyZVBhZGxvY2sgdGl0bGU9e190KFwiVW5lbmNyeXB0ZWRcIil9IGljb249e0UyZVBhZGxvY2tJY29uLldhcm5pbmd9IHsuLi5wcm9wc30gLz5cbiAgICApO1xufVxuXG5mdW5jdGlvbiBFMmVQYWRsb2NrVW5rbm93bihwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxFMmVQYWRsb2NrIHRpdGxlPXtfdChcIkVuY3J5cHRlZCBieSBhIGRlbGV0ZWQgc2Vzc2lvblwiKX0gaWNvbj17RTJlUGFkbG9ja0ljb24uTm9ybWFsfSB7Li4ucHJvcHN9IC8+XG4gICAgKTtcbn1cblxuZnVuY3Rpb24gRTJlUGFkbG9ja1VuYXV0aGVudGljYXRlZChwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxFMmVQYWRsb2NrXG4gICAgICAgICAgICB0aXRsZT17X3QoXCJUaGUgYXV0aGVudGljaXR5IG9mIHRoaXMgZW5jcnlwdGVkIG1lc3NhZ2UgY2FuJ3QgYmUgZ3VhcmFudGVlZCBvbiB0aGlzIGRldmljZS5cIil9XG4gICAgICAgICAgICBpY29uPXtFMmVQYWRsb2NrSWNvbi5Ob3JtYWx9XG4gICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIC8+XG4gICAgKTtcbn1cblxuZW51bSBFMmVQYWRsb2NrSWNvbiB7XG4gICAgTm9ybWFsID0gXCJub3JtYWxcIixcbiAgICBXYXJuaW5nID0gXCJ3YXJuaW5nXCIsXG59XG5cbmludGVyZmFjZSBJRTJlUGFkbG9ja1Byb3BzIHtcbiAgICBpY29uOiBFMmVQYWRsb2NrSWNvbjtcbiAgICB0aXRsZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgSUUyZVBhZGxvY2tTdGF0ZSB7XG4gICAgaG92ZXI6IGJvb2xlYW47XG59XG5cbmNsYXNzIEUyZVBhZGxvY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SUUyZVBhZGxvY2tQcm9wcywgSUUyZVBhZGxvY2tTdGF0ZT4ge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBJRTJlUGFkbG9ja1Byb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaG92ZXI6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Ib3ZlclN0YXJ0ID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaG92ZXI6IHRydWUgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25Ib3ZlckVuZCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyOiBmYWxzZSB9KTtcbiAgICB9O1xuXG4gICAgcHVibGljIHJlbmRlcigpOiBKU1guRWxlbWVudCB7XG4gICAgICAgIGxldCB0b29sdGlwID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaG92ZXIpIHtcbiAgICAgICAgICAgIHRvb2x0aXAgPSA8VG9vbHRpcCBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfZTJlSWNvbl90b29sdGlwXCIgbGFiZWw9e3RoaXMucHJvcHMudGl0bGV9IC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xhc3NlcyA9IGBteF9FdmVudFRpbGVfZTJlSWNvbiBteF9FdmVudFRpbGVfZTJlSWNvbl8ke3RoaXMucHJvcHMuaWNvbn1gO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlc31cbiAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9e3RoaXMub25Ib3ZlclN0YXJ0fVxuICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17dGhpcy5vbkhvdmVyRW5kfVxuICAgICAgICAgICAgPnsgdG9vbHRpcCB9PC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5pbnRlcmZhY2UgSVNlbnRSZWNlaXB0UHJvcHMge1xuICAgIG1lc3NhZ2VTdGF0ZTogc3RyaW5nOyAvLyBUT0RPOiBUeXBlcyBmb3IgbWVzc2FnZSBzZW5kaW5nIHN0YXRlXG59XG5cbmludGVyZmFjZSBJU2VudFJlY2VpcHRTdGF0ZSB7XG4gICAgaG92ZXI6IGJvb2xlYW47XG59XG5cbmNsYXNzIFNlbnRSZWNlaXB0IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJU2VudFJlY2VpcHRQcm9wcywgSVNlbnRSZWNlaXB0U3RhdGU+IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGhvdmVyOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvbkhvdmVyU3RhcnQgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBob3ZlcjogdHJ1ZSB9KTtcbiAgICB9O1xuXG4gICAgb25Ib3ZlckVuZCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyOiBmYWxzZSB9KTtcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBpc1NlbnQgPSAhdGhpcy5wcm9wcy5tZXNzYWdlU3RhdGUgfHwgdGhpcy5wcm9wcy5tZXNzYWdlU3RhdGUgPT09ICdzZW50JztcbiAgICAgICAgY29uc3QgaXNGYWlsZWQgPSB0aGlzLnByb3BzLm1lc3NhZ2VTdGF0ZSA9PT0gJ25vdF9zZW50JztcbiAgICAgICAgY29uc3QgcmVjZWlwdENsYXNzZXMgPSBjbGFzc05hbWVzKHtcbiAgICAgICAgICAgICdteF9FdmVudFRpbGVfcmVjZWlwdFNlbnQnOiBpc1NlbnQsXG4gICAgICAgICAgICAnbXhfRXZlbnRUaWxlX3JlY2VpcHRTZW5kaW5nJzogIWlzU2VudCAmJiAhaXNGYWlsZWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBub25Dc3NCYWRnZSA9IG51bGw7XG4gICAgICAgIGlmIChpc0ZhaWxlZCkge1xuICAgICAgICAgICAgbm9uQ3NzQmFkZ2UgPSA8Tm90aWZpY2F0aW9uQmFkZ2VcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb249e1N0YXRpY05vdGlmaWNhdGlvblN0YXRlLlJFRF9FWENMQU1BVElPTn1cbiAgICAgICAgICAgIC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRvb2x0aXAgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5ob3Zlcikge1xuICAgICAgICAgICAgbGV0IGxhYmVsID0gX3QoXCJTZW5kaW5nIHlvdXIgbWVzc2FnZS4uLlwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1lc3NhZ2VTdGF0ZSA9PT0gJ2VuY3J5cHRpbmcnKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSBfdChcIkVuY3J5cHRpbmcgeW91ciBtZXNzYWdlLi4uXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1NlbnQpIHtcbiAgICAgICAgICAgICAgICBsYWJlbCA9IF90KFwiWW91ciBtZXNzYWdlIHdhcyBzZW50XCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0ZhaWxlZCkge1xuICAgICAgICAgICAgICAgIGxhYmVsID0gX3QoXCJGYWlsZWQgdG8gc2VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoZSB5T2Zmc2V0IGlzIHNvbWV3aGF0IGFyYml0cmFyeSAtIGl0IGp1c3QgYnJpbmdzIHRoZSB0b29sdGlwIGRvd24gdG8gYmUgbW9yZSBhc3NvY2lhdGVkXG4gICAgICAgICAgICAvLyB3aXRoIHRoZSByZWFkIHJlY2VpcHQuXG4gICAgICAgICAgICB0b29sdGlwID0gPFRvb2x0aXAgY2xhc3NOYW1lPVwibXhfRXZlbnRUaWxlX3JlYWRBdmF0YXJzX3JlY2VpcHRUb29sdGlwXCIgbGFiZWw9e2xhYmVsfSB5T2Zmc2V0PXsyMH0gLz47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfbXNnT3B0aW9uXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXhfRXZlbnRUaWxlX3JlYWRBdmF0YXJzXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17cmVjZWlwdENsYXNzZXN9IG9uTW91c2VFbnRlcj17dGhpcy5vbkhvdmVyU3RhcnR9IG9uTW91c2VMZWF2ZT17dGhpcy5vbkhvdmVyRW5kfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbm9uQ3NzQmFkZ2UgfVxuICAgICAgICAgICAgICAgICAgICAgICAgeyB0b29sdGlwIH1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiJdfQ==