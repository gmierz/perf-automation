"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _MatrixClientPeg = require("../../../MatrixClientPeg");

var _languageHandler = require("../../../languageHandler");

var _Modal = _interopRequireDefault(require("../../../Modal"));

var _replaceableComponent = require("../../../utils/replaceableComponent");

var _AccessibleButton = _interopRequireDefault(require("../elements/AccessibleButton"));

var FormattingUtils = _interopRequireWildcard(require("../../../utils/FormattingUtils"));

var _SettingsStore = _interopRequireDefault(require("../../../settings/SettingsStore"));

var _SettingsFlag = _interopRequireDefault(require("../elements/SettingsFlag"));

var _SettingLevel = require("../../../settings/SettingLevel");

var _dec, _class;

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

let CryptographyPanel = (_dec = (0, _replaceableComponent.replaceableComponent)("views.settings.CryptographyPanel"), _dec(_class = class CryptographyPanel extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onExportE2eKeysClicked", () => {
      _Modal.default.createTrackedDialogAsync('Export E2E Keys', '', Promise.resolve().then(() => _interopRequireWildcard(require('../../../async-components/views/dialogs/security/ExportE2eKeysDialog'))), {
        matrixClient: _MatrixClientPeg.MatrixClientPeg.get()
      });
    });
    (0, _defineProperty2.default)(this, "onImportE2eKeysClicked", () => {
      _Modal.default.createTrackedDialogAsync('Import E2E Keys', '', Promise.resolve().then(() => _interopRequireWildcard(require('../../../async-components/views/dialogs/security/ImportE2eKeysDialog'))), {
        matrixClient: _MatrixClientPeg.MatrixClientPeg.get()
      });
    });
    (0, _defineProperty2.default)(this, "updateBlacklistDevicesFlag", checked => {
      _MatrixClientPeg.MatrixClientPeg.get().setGlobalBlacklistUnverifiedDevices(checked);
    });
  }

  render() {
    const client = _MatrixClientPeg.MatrixClientPeg.get();

    const deviceId = client.deviceId;
    let identityKey = client.getDeviceEd25519Key();

    if (!identityKey) {
      identityKey = (0, _languageHandler._t)("<not supported>");
    } else {
      identityKey = FormattingUtils.formatCryptoKey(identityKey);
    }

    let importExportButtons = null;

    if (client.isCryptoEnabled()) {
      importExportButtons = /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_CryptographyPanel_importExportButtons"
      }, /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        kind: "primary",
        onClick: this.onExportE2eKeysClicked
      }, (0, _languageHandler._t)("Export E2E room keys")), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        kind: "primary",
        onClick: this.onImportE2eKeysClicked
      }, (0, _languageHandler._t)("Import E2E room keys")));
    }

    let noSendUnverifiedSetting;

    if (_SettingsStore.default.isEnabled("blacklistUnverifiedDevices")) {
      noSendUnverifiedSetting = /*#__PURE__*/_react.default.createElement(_SettingsFlag.default, {
        name: "blacklistUnverifiedDevices",
        level: _SettingLevel.SettingLevel.DEVICE,
        onChange: this.updateBlacklistDevicesFlag
      });
    }

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section mx_CryptographyPanel"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Cryptography")), /*#__PURE__*/_react.default.createElement("table", {
      className: "mx_SettingsTab_subsectionText mx_CryptographyPanel_sessionInfo"
    }, /*#__PURE__*/_react.default.createElement("tr", null, /*#__PURE__*/_react.default.createElement("td", null, (0, _languageHandler._t)("Session ID:")), /*#__PURE__*/_react.default.createElement("td", null, /*#__PURE__*/_react.default.createElement("code", null, deviceId))), /*#__PURE__*/_react.default.createElement("tr", null, /*#__PURE__*/_react.default.createElement("td", null, (0, _languageHandler._t)("Session key:")), /*#__PURE__*/_react.default.createElement("td", null, /*#__PURE__*/_react.default.createElement("code", null, /*#__PURE__*/_react.default.createElement("b", null, identityKey))))), importExportButtons, noSendUnverifiedSetting);
  }

}) || _class);
exports.default = CryptographyPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3NldHRpbmdzL0NyeXB0b2dyYXBoeVBhbmVsLnRzeCJdLCJuYW1lcyI6WyJDcnlwdG9ncmFwaHlQYW5lbCIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsIk1vZGFsIiwiY3JlYXRlVHJhY2tlZERpYWxvZ0FzeW5jIiwibWF0cml4Q2xpZW50IiwiTWF0cml4Q2xpZW50UGVnIiwiZ2V0IiwiY2hlY2tlZCIsInNldEdsb2JhbEJsYWNrbGlzdFVudmVyaWZpZWREZXZpY2VzIiwicmVuZGVyIiwiY2xpZW50IiwiZGV2aWNlSWQiLCJpZGVudGl0eUtleSIsImdldERldmljZUVkMjU1MTlLZXkiLCJGb3JtYXR0aW5nVXRpbHMiLCJmb3JtYXRDcnlwdG9LZXkiLCJpbXBvcnRFeHBvcnRCdXR0b25zIiwiaXNDcnlwdG9FbmFibGVkIiwib25FeHBvcnRFMmVLZXlzQ2xpY2tlZCIsIm9uSW1wb3J0RTJlS2V5c0NsaWNrZWQiLCJub1NlbmRVbnZlcmlmaWVkU2V0dGluZyIsIlNldHRpbmdzU3RvcmUiLCJpc0VuYWJsZWQiLCJTZXR0aW5nTGV2ZWwiLCJERVZJQ0UiLCJ1cGRhdGVCbGFja2xpc3REZXZpY2VzRmxhZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFnQkE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0lBU3FCQSxpQixXQURwQixnREFBcUIsa0NBQXJCLEMsZ0JBQUQsTUFDcUJBLGlCQURyQixTQUMrQ0MsZUFBTUMsU0FEckQsQ0FDK0U7QUFDM0VDLEVBQUFBLFdBQVcsQ0FBQ0MsS0FBRCxFQUFnQjtBQUN2QixVQUFNQSxLQUFOO0FBRHVCLGtFQXdETSxNQUFZO0FBQ3pDQyxxQkFBTUMsd0JBQU4sQ0FBK0IsaUJBQS9CLEVBQWtELEVBQWxELCtEQUVRLHNFQUZSLEtBSUk7QUFBRUMsUUFBQUEsWUFBWSxFQUFFQyxpQ0FBZ0JDLEdBQWhCO0FBQWhCLE9BSko7QUFNSCxLQS9EMEI7QUFBQSxrRUFpRU0sTUFBWTtBQUN6Q0oscUJBQU1DLHdCQUFOLENBQStCLGlCQUEvQixFQUFrRCxFQUFsRCwrREFFUSxzRUFGUixLQUlJO0FBQUVDLFFBQUFBLFlBQVksRUFBRUMsaUNBQWdCQyxHQUFoQjtBQUFoQixPQUpKO0FBTUgsS0F4RTBCO0FBQUEsc0VBMEVXQyxPQUFELElBQW1CO0FBQ3BERix1Q0FBZ0JDLEdBQWhCLEdBQXNCRSxtQ0FBdEIsQ0FBMERELE9BQTFEO0FBQ0gsS0E1RTBCO0FBRTFCOztBQUVNRSxFQUFBQSxNQUFNLEdBQWdCO0FBQ3pCLFVBQU1DLE1BQU0sR0FBR0wsaUNBQWdCQyxHQUFoQixFQUFmOztBQUNBLFVBQU1LLFFBQVEsR0FBR0QsTUFBTSxDQUFDQyxRQUF4QjtBQUNBLFFBQUlDLFdBQVcsR0FBR0YsTUFBTSxDQUFDRyxtQkFBUCxFQUFsQjs7QUFDQSxRQUFJLENBQUNELFdBQUwsRUFBa0I7QUFDZEEsTUFBQUEsV0FBVyxHQUFHLHlCQUFHLGlCQUFILENBQWQ7QUFDSCxLQUZELE1BRU87QUFDSEEsTUFBQUEsV0FBVyxHQUFHRSxlQUFlLENBQUNDLGVBQWhCLENBQWdDSCxXQUFoQyxDQUFkO0FBQ0g7O0FBRUQsUUFBSUksbUJBQW1CLEdBQUcsSUFBMUI7O0FBQ0EsUUFBSU4sTUFBTSxDQUFDTyxlQUFQLEVBQUosRUFBOEI7QUFDMUJELE1BQUFBLG1CQUFtQixnQkFDZjtBQUFLLFFBQUEsU0FBUyxFQUFDO0FBQWYsc0JBQ0ksNkJBQUMseUJBQUQ7QUFBa0IsUUFBQSxJQUFJLEVBQUMsU0FBdkI7QUFBaUMsUUFBQSxPQUFPLEVBQUUsS0FBS0U7QUFBL0MsU0FDTSx5QkFBRyxzQkFBSCxDQUROLENBREosZUFJSSw2QkFBQyx5QkFBRDtBQUFrQixRQUFBLElBQUksRUFBQyxTQUF2QjtBQUFpQyxRQUFBLE9BQU8sRUFBRSxLQUFLQztBQUEvQyxTQUNNLHlCQUFHLHNCQUFILENBRE4sQ0FKSixDQURKO0FBVUg7O0FBRUQsUUFBSUMsdUJBQUo7O0FBQ0EsUUFBSUMsdUJBQWNDLFNBQWQsQ0FBd0IsNEJBQXhCLENBQUosRUFBMkQ7QUFDdkRGLE1BQUFBLHVCQUF1QixnQkFBRyw2QkFBQyxxQkFBRDtBQUN0QixRQUFBLElBQUksRUFBQyw0QkFEaUI7QUFFdEIsUUFBQSxLQUFLLEVBQUVHLDJCQUFhQyxNQUZFO0FBR3RCLFFBQUEsUUFBUSxFQUFFLEtBQUtDO0FBSE8sUUFBMUI7QUFLSDs7QUFFRCx3QkFDSTtBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsb0JBQ0k7QUFBTSxNQUFBLFNBQVMsRUFBQztBQUFoQixPQUE4Qyx5QkFBRyxjQUFILENBQTlDLENBREosZUFFSTtBQUFPLE1BQUEsU0FBUyxFQUFDO0FBQWpCLG9CQUNJLHNEQUNJLHlDQUFNLHlCQUFHLGFBQUgsQ0FBTixDQURKLGVBRUksc0RBQUksMkNBQVFkLFFBQVIsQ0FBSixDQUZKLENBREosZUFLSSxzREFDSSx5Q0FBTSx5QkFBRyxjQUFILENBQU4sQ0FESixlQUVJLHNEQUFJLHdEQUFNLHdDQUFLQyxXQUFMLENBQU4sQ0FBSixDQUZKLENBTEosQ0FGSixFQVlNSSxtQkFaTixFQWFNSSx1QkFiTixDQURKO0FBaUJIOztBQXZEMEUsQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAyMSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnRUeXBlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBNYXRyaXhDbGllbnRQZWcgfSBmcm9tICcuLi8uLi8uLi9NYXRyaXhDbGllbnRQZWcnO1xuaW1wb3J0IHsgX3QgfSBmcm9tICcuLi8uLi8uLi9sYW5ndWFnZUhhbmRsZXInO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4uLy4uLy4uL01vZGFsJztcbmltcG9ydCB7IHJlcGxhY2VhYmxlQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3JlcGxhY2VhYmxlQ29tcG9uZW50XCI7XG5pbXBvcnQgQWNjZXNzaWJsZUJ1dHRvbiBmcm9tIFwiLi4vZWxlbWVudHMvQWNjZXNzaWJsZUJ1dHRvblwiO1xuaW1wb3J0ICogYXMgRm9ybWF0dGluZ1V0aWxzIGZyb20gXCIuLi8uLi8uLi91dGlscy9Gb3JtYXR0aW5nVXRpbHNcIjtcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCIuLi8uLi8uLi9zZXR0aW5ncy9TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgU2V0dGluZ3NGbGFnIGZyb20gXCIuLi9lbGVtZW50cy9TZXR0aW5nc0ZsYWdcIjtcbmltcG9ydCB7IFNldHRpbmdMZXZlbCB9IGZyb20gXCIuLi8uLi8uLi9zZXR0aW5ncy9TZXR0aW5nTGV2ZWxcIjtcblxuaW50ZXJmYWNlIElQcm9wcyB7XG59XG5cbmludGVyZmFjZSBJU3RhdGUge1xufVxuXG5AcmVwbGFjZWFibGVDb21wb25lbnQoXCJ2aWV3cy5zZXR0aW5ncy5DcnlwdG9ncmFwaHlQYW5lbFwiKVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3J5cHRvZ3JhcGh5UGFuZWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogSVByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCk6IEpTWC5FbGVtZW50IHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuICAgICAgICBjb25zdCBkZXZpY2VJZCA9IGNsaWVudC5kZXZpY2VJZDtcbiAgICAgICAgbGV0IGlkZW50aXR5S2V5ID0gY2xpZW50LmdldERldmljZUVkMjU1MTlLZXkoKTtcbiAgICAgICAgaWYgKCFpZGVudGl0eUtleSkge1xuICAgICAgICAgICAgaWRlbnRpdHlLZXkgPSBfdChcIjxub3Qgc3VwcG9ydGVkPlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlkZW50aXR5S2V5ID0gRm9ybWF0dGluZ1V0aWxzLmZvcm1hdENyeXB0b0tleShpZGVudGl0eUtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW1wb3J0RXhwb3J0QnV0dG9ucyA9IG51bGw7XG4gICAgICAgIGlmIChjbGllbnQuaXNDcnlwdG9FbmFibGVkKCkpIHtcbiAgICAgICAgICAgIGltcG9ydEV4cG9ydEJ1dHRvbnMgPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J214X0NyeXB0b2dyYXBoeVBhbmVsX2ltcG9ydEV4cG9ydEJ1dHRvbnMnPlxuICAgICAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBraW5kPSdwcmltYXJ5JyBvbkNsaWNrPXt0aGlzLm9uRXhwb3J0RTJlS2V5c0NsaWNrZWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBfdChcIkV4cG9ydCBFMkUgcm9vbSBrZXlzXCIpIH1cbiAgICAgICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBraW5kPSdwcmltYXJ5JyBvbkNsaWNrPXt0aGlzLm9uSW1wb3J0RTJlS2V5c0NsaWNrZWR9PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBfdChcIkltcG9ydCBFMkUgcm9vbSBrZXlzXCIpIH1cbiAgICAgICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBub1NlbmRVbnZlcmlmaWVkU2V0dGluZztcbiAgICAgICAgaWYgKFNldHRpbmdzU3RvcmUuaXNFbmFibGVkKFwiYmxhY2tsaXN0VW52ZXJpZmllZERldmljZXNcIikpIHtcbiAgICAgICAgICAgIG5vU2VuZFVudmVyaWZpZWRTZXR0aW5nID0gPFNldHRpbmdzRmxhZ1xuICAgICAgICAgICAgICAgIG5hbWU9J2JsYWNrbGlzdFVudmVyaWZpZWREZXZpY2VzJ1xuICAgICAgICAgICAgICAgIGxldmVsPXtTZXR0aW5nTGV2ZWwuREVWSUNFfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZUJsYWNrbGlzdERldmljZXNGbGFnfVxuICAgICAgICAgICAgLz47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J214X1NldHRpbmdzVGFiX3NlY3Rpb24gbXhfQ3J5cHRvZ3JhcGh5UGFuZWwnPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbXhfU2V0dGluZ3NUYWJfc3ViaGVhZGluZyc+eyBfdChcIkNyeXB0b2dyYXBoeVwiKSB9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9J214X1NldHRpbmdzVGFiX3N1YnNlY3Rpb25UZXh0IG14X0NyeXB0b2dyYXBoeVBhbmVsX3Nlc3Npb25JbmZvJz5cbiAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnsgX3QoXCJTZXNzaW9uIElEOlwiKSB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48Y29kZT57IGRldmljZUlkIH08L2NvZGU+PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnsgX3QoXCJTZXNzaW9uIGtleTpcIikgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGNvZGU+PGI+eyBpZGVudGl0eUtleSB9PC9iPjwvY29kZT48L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgeyBpbXBvcnRFeHBvcnRCdXR0b25zIH1cbiAgICAgICAgICAgICAgICB7IG5vU2VuZFVudmVyaWZpZWRTZXR0aW5nIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25FeHBvcnRFMmVLZXlzQ2xpY2tlZCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZ0FzeW5jKCdFeHBvcnQgRTJFIEtleXMnLCAnJyxcbiAgICAgICAgICAgIGltcG9ydChcbiAgICAgICAgICAgICAgICAnLi4vLi4vLi4vYXN5bmMtY29tcG9uZW50cy92aWV3cy9kaWFsb2dzL3NlY3VyaXR5L0V4cG9ydEUyZUtleXNEaWFsb2cnXG4gICAgICAgICAgICApIGFzIHVua25vd24gYXMgUHJvbWlzZTxDb21wb25lbnRUeXBlPHt9Pj4sXG4gICAgICAgICAgICB7IG1hdHJpeENsaWVudDogTWF0cml4Q2xpZW50UGVnLmdldCgpIH0sXG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25JbXBvcnRFMmVLZXlzQ2xpY2tlZCA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZ0FzeW5jKCdJbXBvcnQgRTJFIEtleXMnLCAnJyxcbiAgICAgICAgICAgIGltcG9ydChcbiAgICAgICAgICAgICAgICAnLi4vLi4vLi4vYXN5bmMtY29tcG9uZW50cy92aWV3cy9kaWFsb2dzL3NlY3VyaXR5L0ltcG9ydEUyZUtleXNEaWFsb2cnXG4gICAgICAgICAgICApIGFzIHVua25vd24gYXMgUHJvbWlzZTxDb21wb25lbnRUeXBlPHt9Pj4sXG4gICAgICAgICAgICB7IG1hdHJpeENsaWVudDogTWF0cml4Q2xpZW50UGVnLmdldCgpIH0sXG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgdXBkYXRlQmxhY2tsaXN0RGV2aWNlc0ZsYWcgPSAoY2hlY2tlZCk6IHZvaWQgPT4ge1xuICAgICAgICBNYXRyaXhDbGllbnRQZWcuZ2V0KCkuc2V0R2xvYmFsQmxhY2tsaXN0VW52ZXJpZmllZERldmljZXMoY2hlY2tlZCk7XG4gICAgfTtcbn1cbiJdfQ==