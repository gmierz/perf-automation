"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.onMetaSpaceChangeFactory = exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _languageHandler = require("../../../../../languageHandler");

var _SettingsStore = _interopRequireDefault(require("../../../../../settings/SettingsStore"));

var _SettingLevel = require("../../../../../settings/SettingLevel");

var _StyledCheckbox = _interopRequireDefault(require("../../../elements/StyledCheckbox"));

var _useSettings = require("../../../../../hooks/useSettings");

var _spaces = require("../../../../../stores/spaces");

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

const onMetaSpaceChangeFactory = metaSpace => e => {
  const currentValue = _SettingsStore.default.getValue("Spaces.enabledMetaSpaces");

  _SettingsStore.default.setValue("Spaces.enabledMetaSpaces", null, _SettingLevel.SettingLevel.ACCOUNT, _objectSpread(_objectSpread({}, currentValue), {}, {
    [metaSpace]: e.target.checked
  }));
};

exports.onMetaSpaceChangeFactory = onMetaSpaceChangeFactory;

const SidebarUserSettingsTab = () => {
  const {
    [_spaces.MetaSpace.Home]: homeEnabled,
    [_spaces.MetaSpace.Favourites]: favouritesEnabled,
    [_spaces.MetaSpace.People]: peopleEnabled,
    [_spaces.MetaSpace.Orphans]: orphansEnabled
  } = (0, _useSettings.useSettingValue)("Spaces.enabledMetaSpaces");
  const allRoomsInHome = (0, _useSettings.useSettingValue)("Spaces.allRoomsInHome");
  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SettingsTab mx_SidebarUserSettingsTab"
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SettingsTab_heading"
  }, (0, _languageHandler._t)("Sidebar")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SettingsTab_section"
  }, /*#__PURE__*/_react.default.createElement("span", {
    className: "mx_SettingsTab_subheading"
  }, (0, _languageHandler._t)("Spaces")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SettingsTab_subsectionText"
  }, (0, _languageHandler._t)("Spaces are ways to group rooms and people.")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SidebarUserSettingsTab_subheading"
  }, (0, _languageHandler._t)("Spaces to show")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SettingsTab_subsectionText"
  }, (0, _languageHandler._t)("Along with the spaces you're in, you can use some pre-built ones too.")), /*#__PURE__*/_react.default.createElement(_StyledCheckbox.default, {
    checked: !!homeEnabled,
    onChange: onMetaSpaceChangeFactory(_spaces.MetaSpace.Home),
    className: "mx_SidebarUserSettingsTab_homeCheckbox"
  }, (0, _languageHandler._t)("Home")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SidebarUserSettingsTab_checkboxMicrocopy"
  }, (0, _languageHandler._t)("Home is useful for getting an overview of everything.")), /*#__PURE__*/_react.default.createElement(_StyledCheckbox.default, {
    checked: allRoomsInHome,
    disabled: !homeEnabled,
    onChange: e => {
      _SettingsStore.default.setValue("Spaces.allRoomsInHome", null, _SettingLevel.SettingLevel.ACCOUNT, e.target.checked);
    },
    className: "mx_SidebarUserSettingsTab_homeAllRoomsCheckbox"
  }, (0, _languageHandler._t)("Show all rooms")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SidebarUserSettingsTab_checkboxMicrocopy"
  }, (0, _languageHandler._t)("Show all your rooms in Home, even if they're in a space.")), /*#__PURE__*/_react.default.createElement(_StyledCheckbox.default, {
    checked: !!favouritesEnabled,
    onChange: onMetaSpaceChangeFactory(_spaces.MetaSpace.Favourites),
    className: "mx_SidebarUserSettingsTab_favouritesCheckbox"
  }, (0, _languageHandler._t)("Favourites")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SidebarUserSettingsTab_checkboxMicrocopy"
  }, (0, _languageHandler._t)("Automatically group all your favourite rooms and people together in one place.")), /*#__PURE__*/_react.default.createElement(_StyledCheckbox.default, {
    checked: !!peopleEnabled,
    onChange: onMetaSpaceChangeFactory(_spaces.MetaSpace.People),
    className: "mx_SidebarUserSettingsTab_peopleCheckbox"
  }, (0, _languageHandler._t)("People")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SidebarUserSettingsTab_checkboxMicrocopy"
  }, (0, _languageHandler._t)("Automatically group all your people together in one place.")), /*#__PURE__*/_react.default.createElement(_StyledCheckbox.default, {
    checked: !!orphansEnabled,
    onChange: onMetaSpaceChangeFactory(_spaces.MetaSpace.Orphans),
    className: "mx_SidebarUserSettingsTab_orphansCheckbox"
  }, (0, _languageHandler._t)("Rooms outside of a space")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SidebarUserSettingsTab_checkboxMicrocopy"
  }, (0, _languageHandler._t)("Automatically group all your rooms that aren't part of a space in one place."))));
};

var _default = SidebarUserSettingsTab;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3NldHRpbmdzL3RhYnMvdXNlci9TaWRlYmFyVXNlclNldHRpbmdzVGFiLnRzeCJdLCJuYW1lcyI6WyJvbk1ldGFTcGFjZUNoYW5nZUZhY3RvcnkiLCJtZXRhU3BhY2UiLCJlIiwiY3VycmVudFZhbHVlIiwiU2V0dGluZ3NTdG9yZSIsImdldFZhbHVlIiwic2V0VmFsdWUiLCJTZXR0aW5nTGV2ZWwiLCJBQ0NPVU5UIiwidGFyZ2V0IiwiY2hlY2tlZCIsIlNpZGViYXJVc2VyU2V0dGluZ3NUYWIiLCJNZXRhU3BhY2UiLCJIb21lIiwiaG9tZUVuYWJsZWQiLCJGYXZvdXJpdGVzIiwiZmF2b3VyaXRlc0VuYWJsZWQiLCJQZW9wbGUiLCJwZW9wbGVFbmFibGVkIiwiT3JwaGFucyIsIm9ycGhhbnNFbmFibGVkIiwiYWxsUm9vbXNJbkhvbWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBZ0JBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7QUFFTyxNQUFNQSx3QkFBd0IsR0FBSUMsU0FBRCxJQUEyQkMsQ0FBRCxJQUFzQztBQUNwRyxRQUFNQyxZQUFZLEdBQUdDLHVCQUFjQyxRQUFkLENBQXVCLDBCQUF2QixDQUFyQjs7QUFDQUQseUJBQWNFLFFBQWQsQ0FBdUIsMEJBQXZCLEVBQW1ELElBQW5ELEVBQXlEQywyQkFBYUMsT0FBdEUsa0NBQ09MLFlBRFA7QUFFSSxLQUFDRixTQUFELEdBQWFDLENBQUMsQ0FBQ08sTUFBRixDQUFTQztBQUYxQjtBQUlILENBTk07Ozs7QUFRUCxNQUFNQyxzQkFBc0IsR0FBRyxNQUFNO0FBQ2pDLFFBQU07QUFDRixLQUFDQyxrQkFBVUMsSUFBWCxHQUFrQkMsV0FEaEI7QUFFRixLQUFDRixrQkFBVUcsVUFBWCxHQUF3QkMsaUJBRnRCO0FBR0YsS0FBQ0osa0JBQVVLLE1BQVgsR0FBb0JDLGFBSGxCO0FBSUYsS0FBQ04sa0JBQVVPLE9BQVgsR0FBcUJDO0FBSm5CLE1BS0Ysa0NBQTRDLDBCQUE1QyxDQUxKO0FBTUEsUUFBTUMsY0FBYyxHQUFHLGtDQUF5Qix1QkFBekIsQ0FBdkI7QUFFQSxzQkFDSTtBQUFLLElBQUEsU0FBUyxFQUFDO0FBQWYsa0JBQ0k7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLEtBQTBDLHlCQUFHLFNBQUgsQ0FBMUMsQ0FESixlQUdJO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixrQkFDSTtBQUFNLElBQUEsU0FBUyxFQUFDO0FBQWhCLEtBQThDLHlCQUFHLFFBQUgsQ0FBOUMsQ0FESixlQUVJO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixLQUFpRCx5QkFBRyw0Q0FBSCxDQUFqRCxDQUZKLGVBSUk7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLEtBQXdELHlCQUFHLGdCQUFILENBQXhELENBSkosZUFLSTtBQUFLLElBQUEsU0FBUyxFQUFDO0FBQWYsS0FDTSx5QkFBRyx1RUFBSCxDQUROLENBTEosZUFTSSw2QkFBQyx1QkFBRDtBQUNJLElBQUEsT0FBTyxFQUFFLENBQUMsQ0FBQ1AsV0FEZjtBQUVJLElBQUEsUUFBUSxFQUFFZCx3QkFBd0IsQ0FBQ1ksa0JBQVVDLElBQVgsQ0FGdEM7QUFHSSxJQUFBLFNBQVMsRUFBQztBQUhkLEtBS00seUJBQUcsTUFBSCxDQUxOLENBVEosZUFnQkk7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLEtBQ00seUJBQUcsdURBQUgsQ0FETixDQWhCSixlQW9CSSw2QkFBQyx1QkFBRDtBQUNJLElBQUEsT0FBTyxFQUFFUSxjQURiO0FBRUksSUFBQSxRQUFRLEVBQUUsQ0FBQ1AsV0FGZjtBQUdJLElBQUEsUUFBUSxFQUFFWixDQUFDLElBQUk7QUFDWEUsNkJBQWNFLFFBQWQsQ0FDSSx1QkFESixFQUVJLElBRkosRUFHSUMsMkJBQWFDLE9BSGpCLEVBSUlOLENBQUMsQ0FBQ08sTUFBRixDQUFTQyxPQUpiO0FBTUgsS0FWTDtBQVdJLElBQUEsU0FBUyxFQUFDO0FBWGQsS0FhTSx5QkFBRyxnQkFBSCxDQWJOLENBcEJKLGVBbUNJO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixLQUNNLHlCQUFHLDBEQUFILENBRE4sQ0FuQ0osZUF1Q0ksNkJBQUMsdUJBQUQ7QUFDSSxJQUFBLE9BQU8sRUFBRSxDQUFDLENBQUNNLGlCQURmO0FBRUksSUFBQSxRQUFRLEVBQUVoQix3QkFBd0IsQ0FBQ1ksa0JBQVVHLFVBQVgsQ0FGdEM7QUFHSSxJQUFBLFNBQVMsRUFBQztBQUhkLEtBS00seUJBQUcsWUFBSCxDQUxOLENBdkNKLGVBOENJO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixLQUNNLHlCQUFHLGdGQUFILENBRE4sQ0E5Q0osZUFrREksNkJBQUMsdUJBQUQ7QUFDSSxJQUFBLE9BQU8sRUFBRSxDQUFDLENBQUNHLGFBRGY7QUFFSSxJQUFBLFFBQVEsRUFBRWxCLHdCQUF3QixDQUFDWSxrQkFBVUssTUFBWCxDQUZ0QztBQUdJLElBQUEsU0FBUyxFQUFDO0FBSGQsS0FLTSx5QkFBRyxRQUFILENBTE4sQ0FsREosZUF5REk7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLEtBQ00seUJBQUcsNERBQUgsQ0FETixDQXpESixlQTZESSw2QkFBQyx1QkFBRDtBQUNJLElBQUEsT0FBTyxFQUFFLENBQUMsQ0FBQ0csY0FEZjtBQUVJLElBQUEsUUFBUSxFQUFFcEIsd0JBQXdCLENBQUNZLGtCQUFVTyxPQUFYLENBRnRDO0FBR0ksSUFBQSxTQUFTLEVBQUM7QUFIZCxLQUtNLHlCQUFHLDBCQUFILENBTE4sQ0E3REosZUFvRUk7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLEtBQ00seUJBQUcsOEVBQUgsQ0FETixDQXBFSixDQUhKLENBREo7QUE4RUgsQ0F2RkQ7O2VBeUZlUixzQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAyMSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCwgeyBDaGFuZ2VFdmVudCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgX3QgfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vbGFuZ3VhZ2VIYW5kbGVyXCI7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vc2V0dGluZ3MvU2V0dGluZ3NTdG9yZVwiO1xuaW1wb3J0IHsgU2V0dGluZ0xldmVsIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3NldHRpbmdzL1NldHRpbmdMZXZlbFwiO1xuaW1wb3J0IFN0eWxlZENoZWNrYm94IGZyb20gXCIuLi8uLi8uLi9lbGVtZW50cy9TdHlsZWRDaGVja2JveFwiO1xuaW1wb3J0IHsgdXNlU2V0dGluZ1ZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL2hvb2tzL3VzZVNldHRpbmdzXCI7XG5pbXBvcnQgeyBNZXRhU3BhY2UgfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vc3RvcmVzL3NwYWNlc1wiO1xuXG5leHBvcnQgY29uc3Qgb25NZXRhU3BhY2VDaGFuZ2VGYWN0b3J5ID0gKG1ldGFTcGFjZTogTWV0YVNwYWNlKSA9PiAoZTogQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBTZXR0aW5nc1N0b3JlLmdldFZhbHVlKFwiU3BhY2VzLmVuYWJsZWRNZXRhU3BhY2VzXCIpO1xuICAgIFNldHRpbmdzU3RvcmUuc2V0VmFsdWUoXCJTcGFjZXMuZW5hYmxlZE1ldGFTcGFjZXNcIiwgbnVsbCwgU2V0dGluZ0xldmVsLkFDQ09VTlQsIHtcbiAgICAgICAgLi4uY3VycmVudFZhbHVlLFxuICAgICAgICBbbWV0YVNwYWNlXTogZS50YXJnZXQuY2hlY2tlZCxcbiAgICB9KTtcbn07XG5cbmNvbnN0IFNpZGViYXJVc2VyU2V0dGluZ3NUYWIgPSAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgICBbTWV0YVNwYWNlLkhvbWVdOiBob21lRW5hYmxlZCxcbiAgICAgICAgW01ldGFTcGFjZS5GYXZvdXJpdGVzXTogZmF2b3VyaXRlc0VuYWJsZWQsXG4gICAgICAgIFtNZXRhU3BhY2UuUGVvcGxlXTogcGVvcGxlRW5hYmxlZCxcbiAgICAgICAgW01ldGFTcGFjZS5PcnBoYW5zXTogb3JwaGFuc0VuYWJsZWQsXG4gICAgfSA9IHVzZVNldHRpbmdWYWx1ZTxSZWNvcmQ8TWV0YVNwYWNlLCBib29sZWFuPj4oXCJTcGFjZXMuZW5hYmxlZE1ldGFTcGFjZXNcIik7XG4gICAgY29uc3QgYWxsUm9vbXNJbkhvbWUgPSB1c2VTZXR0aW5nVmFsdWU8Ym9vbGVhbj4oXCJTcGFjZXMuYWxsUm9vbXNJbkhvbWVcIik7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiIG14X1NpZGViYXJVc2VyU2V0dGluZ3NUYWJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWJfaGVhZGluZ1wiPnsgX3QoXCJTaWRlYmFyXCIpIH08L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TZXR0aW5nc1RhYl9zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWJfc3ViaGVhZGluZ1wiPnsgX3QoXCJTcGFjZXNcIikgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX3N1YnNlY3Rpb25UZXh0XCI+eyBfdChcIlNwYWNlcyBhcmUgd2F5cyB0byBncm91cCByb29tcyBhbmQgcGVvcGxlLlwiKSB9PC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NpZGViYXJVc2VyU2V0dGluZ3NUYWJfc3ViaGVhZGluZ1wiPnsgX3QoXCJTcGFjZXMgdG8gc2hvd1wiKSB9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TZXR0aW5nc1RhYl9zdWJzZWN0aW9uVGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICB7IF90KFwiQWxvbmcgd2l0aCB0aGUgc3BhY2VzIHlvdSdyZSBpbiwgeW91IGNhbiB1c2Ugc29tZSBwcmUtYnVpbHQgb25lcyB0b28uXCIpIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxTdHlsZWRDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXshIWhvbWVFbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25NZXRhU3BhY2VDaGFuZ2VGYWN0b3J5KE1ldGFTcGFjZS5Ib21lKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfU2lkZWJhclVzZXJTZXR0aW5nc1RhYl9ob21lQ2hlY2tib3hcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeyBfdChcIkhvbWVcIikgfVxuICAgICAgICAgICAgICAgIDwvU3R5bGVkQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TaWRlYmFyVXNlclNldHRpbmdzVGFiX2NoZWNrYm94TWljcm9jb3B5XCI+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJIb21lIGlzIHVzZWZ1bCBmb3IgZ2V0dGluZyBhbiBvdmVydmlldyBvZiBldmVyeXRoaW5nLlwiKSB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8U3R5bGVkQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17YWxsUm9vbXNJbkhvbWV9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshaG9tZUVuYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdzU3RvcmUuc2V0VmFsdWUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJTcGFjZXMuYWxsUm9vbXNJbkhvbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldHRpbmdMZXZlbC5BQ0NPVU5ULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJteF9TaWRlYmFyVXNlclNldHRpbmdzVGFiX2hvbWVBbGxSb29tc0NoZWNrYm94XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJTaG93IGFsbCByb29tc1wiKSB9XG4gICAgICAgICAgICAgICAgPC9TdHlsZWRDaGVja2JveD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NpZGViYXJVc2VyU2V0dGluZ3NUYWJfY2hlY2tib3hNaWNyb2NvcHlcIj5cbiAgICAgICAgICAgICAgICAgICAgeyBfdChcIlNob3cgYWxsIHlvdXIgcm9vbXMgaW4gSG9tZSwgZXZlbiBpZiB0aGV5J3JlIGluIGEgc3BhY2UuXCIpIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxTdHlsZWRDaGVja2JveFxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXshIWZhdm91cml0ZXNFbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25NZXRhU3BhY2VDaGFuZ2VGYWN0b3J5KE1ldGFTcGFjZS5GYXZvdXJpdGVzKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfU2lkZWJhclVzZXJTZXR0aW5nc1RhYl9mYXZvdXJpdGVzQ2hlY2tib3hcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeyBfdChcIkZhdm91cml0ZXNcIikgfVxuICAgICAgICAgICAgICAgIDwvU3R5bGVkQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TaWRlYmFyVXNlclNldHRpbmdzVGFiX2NoZWNrYm94TWljcm9jb3B5XCI+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJBdXRvbWF0aWNhbGx5IGdyb3VwIGFsbCB5b3VyIGZhdm91cml0ZSByb29tcyBhbmQgcGVvcGxlIHRvZ2V0aGVyIGluIG9uZSBwbGFjZS5cIikgfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPFN0eWxlZENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9eyEhcGVvcGxlRW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uTWV0YVNwYWNlQ2hhbmdlRmFjdG9yeShNZXRhU3BhY2UuUGVvcGxlKX1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfU2lkZWJhclVzZXJTZXR0aW5nc1RhYl9wZW9wbGVDaGVja2JveFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7IF90KFwiUGVvcGxlXCIpIH1cbiAgICAgICAgICAgICAgICA8L1N0eWxlZENoZWNrYm94PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfU2lkZWJhclVzZXJTZXR0aW5nc1RhYl9jaGVja2JveE1pY3JvY29weVwiPlxuICAgICAgICAgICAgICAgICAgICB7IF90KFwiQXV0b21hdGljYWxseSBncm91cCBhbGwgeW91ciBwZW9wbGUgdG9nZXRoZXIgaW4gb25lIHBsYWNlLlwiKSB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8U3R5bGVkQ2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17ISFvcnBoYW5zRW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uTWV0YVNwYWNlQ2hhbmdlRmFjdG9yeShNZXRhU3BhY2UuT3JwaGFucyl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X1NpZGViYXJVc2VyU2V0dGluZ3NUYWJfb3JwaGFuc0NoZWNrYm94XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJSb29tcyBvdXRzaWRlIG9mIGEgc3BhY2VcIikgfVxuICAgICAgICAgICAgICAgIDwvU3R5bGVkQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TaWRlYmFyVXNlclNldHRpbmdzVGFiX2NoZWNrYm94TWljcm9jb3B5XCI+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoXCJBdXRvbWF0aWNhbGx5IGdyb3VwIGFsbCB5b3VyIHJvb21zIHRoYXQgYXJlbid0IHBhcnQgb2YgYSBzcGFjZSBpbiBvbmUgcGxhY2UuXCIpIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2lkZWJhclVzZXJTZXR0aW5nc1RhYjtcbiJdfQ==