"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.BannedUser = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _languageHandler = require("../../../../../languageHandler");

var _MatrixClientPeg = require("../../../../../MatrixClientPeg");

var _AccessibleButton = _interopRequireDefault(require("../../../elements/AccessibleButton"));

var _Modal = _interopRequireDefault(require("../../../../../Modal"));

var _replaceableComponent = require("../../../../../utils/replaceableComponent");

var _event = require("matrix-js-sdk/src/@types/event");

var _strings = require("../../../../../utils/strings");

var _ErrorDialog = _interopRequireDefault(require("../../../dialogs/ErrorDialog"));

var _PowerSelector = _interopRequireDefault(require("../../../elements/PowerSelector"));

var _logger = require("matrix-js-sdk/src/logger");

var _dec, _class;

const plEventsToShow = {
  // If an event is listed here, it will be shown in the PL settings. Defaults will be calculated.
  [_event.EventType.RoomAvatar]: {
    isState: true
  },
  [_event.EventType.RoomName]: {
    isState: true
  },
  [_event.EventType.RoomCanonicalAlias]: {
    isState: true
  },
  [_event.EventType.SpaceChild]: {
    isState: true,
    hideForRoom: true
  },
  [_event.EventType.RoomHistoryVisibility]: {
    isState: true,
    hideForSpace: true
  },
  [_event.EventType.RoomPowerLevels]: {
    isState: true
  },
  [_event.EventType.RoomTopic]: {
    isState: true
  },
  [_event.EventType.RoomTombstone]: {
    isState: true,
    hideForSpace: true
  },
  [_event.EventType.RoomEncryption]: {
    isState: true,
    hideForSpace: true
  },
  [_event.EventType.RoomServerAcl]: {
    isState: true,
    hideForSpace: true
  },
  // TODO: Enable support for m.widget event type (https://github.com/vector-im/element-web/issues/13111)
  "im.vector.modular.widgets": {
    isState: true,
    hideForSpace: true
  }
}; // parse a string as an integer; if the input is undefined, or cannot be parsed
// as an integer, return a default.

function parseIntWithDefault(val, def) {
  const res = parseInt(val);
  return isNaN(res) ? def : res;
}

class BannedUser extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "onUnbanClick", e => {
      _MatrixClientPeg.MatrixClientPeg.get().unban(this.props.member.roomId, this.props.member.userId).catch(err => {
        _logger.logger.error("Failed to unban: " + err);

        _Modal.default.createTrackedDialog('Failed to unban', '', _ErrorDialog.default, {
          title: (0, _languageHandler._t)('Error'),
          description: (0, _languageHandler._t)('Failed to unban')
        });
      });
    });
  }

  render() {
    let unbanButton;

    if (this.props.canUnban) {
      unbanButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        className: "mx_RolesRoomSettingsTab_unbanBtn",
        kind: "danger_sm",
        onClick: this.onUnbanClick
      }, (0, _languageHandler._t)('Unban'));
    }

    const userId = this.props.member.name === this.props.member.userId ? null : this.props.member.userId;
    return /*#__PURE__*/_react.default.createElement("li", null, unbanButton, /*#__PURE__*/_react.default.createElement("span", {
      title: (0, _languageHandler._t)("Banned by %(displayName)s", {
        displayName: this.props.by
      })
    }, /*#__PURE__*/_react.default.createElement("strong", null, this.props.member.name), " ", userId, this.props.reason ? " " + (0, _languageHandler._t)('Reason') + ": " + this.props.reason : ""));
  }

}

exports.BannedUser = BannedUser;
let RolesRoomSettingsTab = (_dec = (0, _replaceableComponent.replaceableComponent)("views.settings.tabs.room.RolesRoomSettingsTab"), _dec(_class = class RolesRoomSettingsTab extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "onRoomMembership", (event, state, member) => {
      if (state.roomId !== this.props.roomId) return;
      this.forceUpdate();
    });
    (0, _defineProperty2.default)(this, "onPowerLevelsChanged", (value, powerLevelKey) => {
      const client = _MatrixClientPeg.MatrixClientPeg.get();

      const room = client.getRoom(this.props.roomId);
      const plEvent = room.currentState.getStateEvents(_event.EventType.RoomPowerLevels, '');
      let plContent = plEvent ? plEvent.getContent() || {} : {}; // Clone the power levels just in case

      plContent = Object.assign({}, plContent);
      const eventsLevelPrefix = "event_levels_";

      if (powerLevelKey.startsWith(eventsLevelPrefix)) {
        // deep copy "events" object, Object.assign itself won't deep copy
        plContent["events"] = Object.assign({}, plContent["events"] || {});
        plContent["events"][powerLevelKey.slice(eventsLevelPrefix.length)] = value;
      } else {
        const keyPath = powerLevelKey.split('.');
        let parentObj;
        let currentObj = plContent;

        for (const key of keyPath) {
          if (!currentObj[key]) {
            currentObj[key] = {};
          }

          parentObj = currentObj;
          currentObj = currentObj[key];
        }

        parentObj[keyPath[keyPath.length - 1]] = value;
      }

      client.sendStateEvent(this.props.roomId, _event.EventType.RoomPowerLevels, plContent).catch(e => {
        _logger.logger.error(e);

        _Modal.default.createTrackedDialog('Power level requirement change failed', '', _ErrorDialog.default, {
          title: (0, _languageHandler._t)('Error changing power level requirement'),
          description: (0, _languageHandler._t)("An error occurred changing the room's power level requirements. Ensure you have sufficient " + "permissions and try again.")
        });
      });
    });
    (0, _defineProperty2.default)(this, "onUserPowerLevelChanged", (value, powerLevelKey) => {
      const client = _MatrixClientPeg.MatrixClientPeg.get();

      const room = client.getRoom(this.props.roomId);
      const plEvent = room.currentState.getStateEvents(_event.EventType.RoomPowerLevels, '');
      let plContent = plEvent ? plEvent.getContent() || {} : {}; // Clone the power levels just in case

      plContent = Object.assign({}, plContent); // powerLevelKey should be a user ID

      if (!plContent['users']) plContent['users'] = {};
      plContent['users'][powerLevelKey] = value;
      client.sendStateEvent(this.props.roomId, _event.EventType.RoomPowerLevels, plContent).catch(e => {
        _logger.logger.error(e);

        _Modal.default.createTrackedDialog('Power level change failed', '', _ErrorDialog.default, {
          title: (0, _languageHandler._t)('Error changing power level'),
          description: (0, _languageHandler._t)("An error occurred changing the user's power level. Ensure you have sufficient " + "permissions and try again.")
        });
      });
    });
  }

  componentDidMount() {
    _MatrixClientPeg.MatrixClientPeg.get().on("RoomState.members", this.onRoomMembership);
  }

  componentWillUnmount() {
    const client = _MatrixClientPeg.MatrixClientPeg.get();

    if (client) {
      client.removeListener("RoomState.members", this.onRoomMembership);
    }
  }

  populateDefaultPlEvents(eventsSection, stateLevel, eventsLevel) {
    for (const desiredEvent of Object.keys(plEventsToShow)) {
      if (!(desiredEvent in eventsSection)) {
        eventsSection[desiredEvent] = plEventsToShow[desiredEvent].isState ? stateLevel : eventsLevel;
      }
    }
  }

  render() {
    const client = _MatrixClientPeg.MatrixClientPeg.get();

    const room = client.getRoom(this.props.roomId);
    const isSpaceRoom = room.isSpaceRoom();
    const plEvent = room.currentState.getStateEvents(_event.EventType.RoomPowerLevels, '');
    const plContent = plEvent ? plEvent.getContent() || {} : {};
    const canChangeLevels = room.currentState.mayClientSendStateEvent(_event.EventType.RoomPowerLevels, client);
    const plEventsToLabels = {
      // These will be translated for us later.
      [_event.EventType.RoomAvatar]: isSpaceRoom ? (0, _languageHandler._td)("Change space avatar") : (0, _languageHandler._td)("Change room avatar"),
      [_event.EventType.RoomName]: isSpaceRoom ? (0, _languageHandler._td)("Change space name") : (0, _languageHandler._td)("Change room name"),
      [_event.EventType.RoomCanonicalAlias]: isSpaceRoom ? (0, _languageHandler._td)("Change main address for the space") : (0, _languageHandler._td)("Change main address for the room"),
      [_event.EventType.SpaceChild]: (0, _languageHandler._td)("Manage rooms in this space"),
      [_event.EventType.RoomHistoryVisibility]: (0, _languageHandler._td)("Change history visibility"),
      [_event.EventType.RoomPowerLevels]: (0, _languageHandler._td)("Change permissions"),
      [_event.EventType.RoomTopic]: isSpaceRoom ? (0, _languageHandler._td)("Change description") : (0, _languageHandler._td)("Change topic"),
      [_event.EventType.RoomTombstone]: (0, _languageHandler._td)("Upgrade the room"),
      [_event.EventType.RoomEncryption]: (0, _languageHandler._td)("Enable room encryption"),
      [_event.EventType.RoomServerAcl]: (0, _languageHandler._td)("Change server ACLs"),
      // TODO: Enable support for m.widget event type (https://github.com/vector-im/element-web/issues/13111)
      "im.vector.modular.widgets": isSpaceRoom ? null : (0, _languageHandler._td)("Modify widgets")
    };
    const powerLevelDescriptors = {
      "users_default": {
        desc: (0, _languageHandler._t)('Default role'),
        defaultValue: 0
      },
      "events_default": {
        desc: (0, _languageHandler._t)('Send messages'),
        defaultValue: 0,
        hideForSpace: true
      },
      "invite": {
        desc: (0, _languageHandler._t)('Invite users'),
        defaultValue: 50
      },
      "state_default": {
        desc: (0, _languageHandler._t)('Change settings'),
        defaultValue: 50
      },
      "kick": {
        desc: (0, _languageHandler._t)('Kick users'),
        defaultValue: 50
      },
      "ban": {
        desc: (0, _languageHandler._t)('Ban users'),
        defaultValue: 50
      },
      "redact": {
        desc: (0, _languageHandler._t)('Remove messages sent by others'),
        defaultValue: 50,
        hideForSpace: true
      },
      "notifications.room": {
        desc: (0, _languageHandler._t)('Notify everyone'),
        defaultValue: 50,
        hideForSpace: true
      }
    };
    const eventsLevels = plContent.events || {};
    const userLevels = plContent.users || {};
    const banLevel = parseIntWithDefault(plContent.ban, powerLevelDescriptors.ban.defaultValue);
    const defaultUserLevel = parseIntWithDefault(plContent.users_default, powerLevelDescriptors.users_default.defaultValue);
    let currentUserLevel = userLevels[client.getUserId()];

    if (currentUserLevel === undefined) {
      currentUserLevel = defaultUserLevel;
    }

    this.populateDefaultPlEvents(eventsLevels, parseIntWithDefault(plContent.state_default, powerLevelDescriptors.state_default.defaultValue), parseIntWithDefault(plContent.events_default, powerLevelDescriptors.events_default.defaultValue));

    let privilegedUsersSection = /*#__PURE__*/_react.default.createElement("div", null, (0, _languageHandler._t)('No users have specific privileges in this room'));

    let mutedUsersSection;

    if (Object.keys(userLevels).length) {
      const privilegedUsers = [];
      const mutedUsers = [];
      Object.keys(userLevels).forEach(user => {
        if (!Number.isInteger(userLevels[user])) {
          return;
        }

        const canChange = userLevels[user] < currentUserLevel && canChangeLevels;

        if (userLevels[user] > defaultUserLevel) {
          // privileged
          privilegedUsers.push( /*#__PURE__*/_react.default.createElement(_PowerSelector.default, {
            value: userLevels[user],
            disabled: !canChange,
            label: user,
            key: user,
            powerLevelKey: user // Will be sent as the second parameter to `onChange`
            ,
            onChange: this.onUserPowerLevelChanged
          }));
        } else if (userLevels[user] < defaultUserLevel) {
          // muted
          mutedUsers.push( /*#__PURE__*/_react.default.createElement(_PowerSelector.default, {
            value: userLevels[user],
            disabled: !canChange,
            label: user,
            key: user,
            powerLevelKey: user // Will be sent as the second parameter to `onChange`
            ,
            onChange: this.onUserPowerLevelChanged
          }));
        }
      }); // comparator for sorting PL users lexicographically on PL descending, MXID ascending. (case-insensitive)

      const comparator = (a, b) => {
        const plDiff = userLevels[b.key] - userLevels[a.key];
        return plDiff !== 0 ? plDiff : (0, _strings.compare)(a.key.toLocaleLowerCase(), b.key.toLocaleLowerCase());
      };

      privilegedUsers.sort(comparator);
      mutedUsers.sort(comparator);

      if (privilegedUsers.length) {
        privilegedUsersSection = /*#__PURE__*/_react.default.createElement("div", {
          className: "mx_SettingsTab_section mx_SettingsTab_subsectionText"
        }, /*#__PURE__*/_react.default.createElement("div", {
          className: "mx_SettingsTab_subheading"
        }, (0, _languageHandler._t)('Privileged Users')), privilegedUsers);
      }

      if (mutedUsers.length) {
        mutedUsersSection = /*#__PURE__*/_react.default.createElement("div", {
          className: "mx_SettingsTab_section mx_SettingsTab_subsectionText"
        }, /*#__PURE__*/_react.default.createElement("div", {
          className: "mx_SettingsTab_subheading"
        }, (0, _languageHandler._t)('Muted Users')), mutedUsers);
      }
    }

    const banned = room.getMembersWithMembership("ban");
    let bannedUsersSection;

    if (banned.length) {
      const canBanUsers = currentUserLevel >= banLevel;
      bannedUsersSection = /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_SettingsTab_section mx_SettingsTab_subsectionText"
      }, /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_SettingsTab_subheading"
      }, (0, _languageHandler._t)('Banned users')), /*#__PURE__*/_react.default.createElement("ul", null, banned.map(member => {
        const banEvent = member.events.member.getContent();
        const sender = room.getMember(member.events.member.getSender());
        let bannedBy = member.events.member.getSender(); // start by falling back to mxid

        if (sender) bannedBy = sender.name;
        return /*#__PURE__*/_react.default.createElement(BannedUser, {
          key: member.userId,
          canUnban: canBanUsers,
          member: member,
          reason: banEvent.reason,
          by: bannedBy
        });
      })));
    }

    const powerSelectors = Object.keys(powerLevelDescriptors).map((key, index) => {
      const descriptor = powerLevelDescriptors[key];

      if (isSpaceRoom && descriptor.hideForSpace) {
        return null;
      }

      const keyPath = key.split('.');
      let currentObj = plContent;

      for (const prop of keyPath) {
        if (currentObj === undefined) {
          break;
        }

        currentObj = currentObj[prop];
      }

      const value = parseIntWithDefault(currentObj, descriptor.defaultValue);
      return /*#__PURE__*/_react.default.createElement("div", {
        key: index,
        className: ""
      }, /*#__PURE__*/_react.default.createElement(_PowerSelector.default, {
        label: descriptor.desc,
        value: value,
        usersDefault: defaultUserLevel,
        disabled: !canChangeLevels || currentUserLevel < value,
        powerLevelKey: key // Will be sent as the second parameter to `onChange`
        ,
        onChange: this.onPowerLevelsChanged
      }));
    }).filter(Boolean); // hide the power level selector for enabling E2EE if it the room is already encrypted

    if (client.isRoomEncrypted(this.props.roomId)) {
      delete eventsLevels[_event.EventType.RoomEncryption];
    }

    const eventPowerSelectors = Object.keys(eventsLevels).map((eventType, i) => {
      var _plEventsToShow$event, _plEventsToShow$event2;

      if (isSpaceRoom && (_plEventsToShow$event = plEventsToShow[eventType]) !== null && _plEventsToShow$event !== void 0 && _plEventsToShow$event.hideForSpace) {
        return null;
      } else if (!isSpaceRoom && (_plEventsToShow$event2 = plEventsToShow[eventType]) !== null && _plEventsToShow$event2 !== void 0 && _plEventsToShow$event2.hideForRoom) {
        return null;
      }

      let label = plEventsToLabels[eventType];

      if (label) {
        label = (0, _languageHandler._t)(label);
      } else {
        label = (0, _languageHandler._t)("Send %(eventType)s events", {
          eventType
        });
      }

      return /*#__PURE__*/_react.default.createElement("div", {
        className: "",
        key: eventType
      }, /*#__PURE__*/_react.default.createElement(_PowerSelector.default, {
        label: label,
        value: eventsLevels[eventType],
        usersDefault: defaultUserLevel,
        disabled: !canChangeLevels || currentUserLevel < eventsLevels[eventType],
        powerLevelKey: "event_levels_" + eventType,
        onChange: this.onPowerLevelsChanged
      }));
    }).filter(Boolean);
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab mx_RolesRoomSettingsTab"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_heading"
    }, (0, _languageHandler._t)("Roles & Permissions")), privilegedUsersSection, mutedUsersSection, bannedUsersSection, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section mx_SettingsTab_subsectionText"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Permissions")), /*#__PURE__*/_react.default.createElement("p", null, isSpaceRoom ? (0, _languageHandler._t)('Select the roles required to change various parts of the space') : (0, _languageHandler._t)('Select the roles required to change various parts of the room')), powerSelectors, eventPowerSelectors));
  }

}) || _class);
exports.default = RolesRoomSettingsTab;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3NldHRpbmdzL3RhYnMvcm9vbS9Sb2xlc1Jvb21TZXR0aW5nc1RhYi50c3giXSwibmFtZXMiOlsicGxFdmVudHNUb1Nob3ciLCJFdmVudFR5cGUiLCJSb29tQXZhdGFyIiwiaXNTdGF0ZSIsIlJvb21OYW1lIiwiUm9vbUNhbm9uaWNhbEFsaWFzIiwiU3BhY2VDaGlsZCIsImhpZGVGb3JSb29tIiwiUm9vbUhpc3RvcnlWaXNpYmlsaXR5IiwiaGlkZUZvclNwYWNlIiwiUm9vbVBvd2VyTGV2ZWxzIiwiUm9vbVRvcGljIiwiUm9vbVRvbWJzdG9uZSIsIlJvb21FbmNyeXB0aW9uIiwiUm9vbVNlcnZlckFjbCIsInBhcnNlSW50V2l0aERlZmF1bHQiLCJ2YWwiLCJkZWYiLCJyZXMiLCJwYXJzZUludCIsImlzTmFOIiwiQmFubmVkVXNlciIsIlJlYWN0IiwiQ29tcG9uZW50IiwiZSIsIk1hdHJpeENsaWVudFBlZyIsImdldCIsInVuYmFuIiwicHJvcHMiLCJtZW1iZXIiLCJyb29tSWQiLCJ1c2VySWQiLCJjYXRjaCIsImVyciIsImxvZ2dlciIsImVycm9yIiwiTW9kYWwiLCJjcmVhdGVUcmFja2VkRGlhbG9nIiwiRXJyb3JEaWFsb2ciLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicmVuZGVyIiwidW5iYW5CdXR0b24iLCJjYW5VbmJhbiIsIm9uVW5iYW5DbGljayIsIm5hbWUiLCJkaXNwbGF5TmFtZSIsImJ5IiwicmVhc29uIiwiUm9sZXNSb29tU2V0dGluZ3NUYWIiLCJldmVudCIsInN0YXRlIiwiZm9yY2VVcGRhdGUiLCJ2YWx1ZSIsInBvd2VyTGV2ZWxLZXkiLCJjbGllbnQiLCJyb29tIiwiZ2V0Um9vbSIsInBsRXZlbnQiLCJjdXJyZW50U3RhdGUiLCJnZXRTdGF0ZUV2ZW50cyIsInBsQ29udGVudCIsImdldENvbnRlbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJldmVudHNMZXZlbFByZWZpeCIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImxlbmd0aCIsImtleVBhdGgiLCJzcGxpdCIsInBhcmVudE9iaiIsImN1cnJlbnRPYmoiLCJrZXkiLCJzZW5kU3RhdGVFdmVudCIsImNvbXBvbmVudERpZE1vdW50Iiwib24iLCJvblJvb21NZW1iZXJzaGlwIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJyZW1vdmVMaXN0ZW5lciIsInBvcHVsYXRlRGVmYXVsdFBsRXZlbnRzIiwiZXZlbnRzU2VjdGlvbiIsInN0YXRlTGV2ZWwiLCJldmVudHNMZXZlbCIsImRlc2lyZWRFdmVudCIsImtleXMiLCJpc1NwYWNlUm9vbSIsImNhbkNoYW5nZUxldmVscyIsIm1heUNsaWVudFNlbmRTdGF0ZUV2ZW50IiwicGxFdmVudHNUb0xhYmVscyIsInBvd2VyTGV2ZWxEZXNjcmlwdG9ycyIsImRlc2MiLCJkZWZhdWx0VmFsdWUiLCJldmVudHNMZXZlbHMiLCJldmVudHMiLCJ1c2VyTGV2ZWxzIiwidXNlcnMiLCJiYW5MZXZlbCIsImJhbiIsImRlZmF1bHRVc2VyTGV2ZWwiLCJ1c2Vyc19kZWZhdWx0IiwiY3VycmVudFVzZXJMZXZlbCIsImdldFVzZXJJZCIsInVuZGVmaW5lZCIsInN0YXRlX2RlZmF1bHQiLCJldmVudHNfZGVmYXVsdCIsInByaXZpbGVnZWRVc2Vyc1NlY3Rpb24iLCJtdXRlZFVzZXJzU2VjdGlvbiIsInByaXZpbGVnZWRVc2VycyIsIm11dGVkVXNlcnMiLCJmb3JFYWNoIiwidXNlciIsIk51bWJlciIsImlzSW50ZWdlciIsImNhbkNoYW5nZSIsInB1c2giLCJvblVzZXJQb3dlckxldmVsQ2hhbmdlZCIsImNvbXBhcmF0b3IiLCJhIiwiYiIsInBsRGlmZiIsInRvTG9jYWxlTG93ZXJDYXNlIiwic29ydCIsImJhbm5lZCIsImdldE1lbWJlcnNXaXRoTWVtYmVyc2hpcCIsImJhbm5lZFVzZXJzU2VjdGlvbiIsImNhbkJhblVzZXJzIiwibWFwIiwiYmFuRXZlbnQiLCJzZW5kZXIiLCJnZXRNZW1iZXIiLCJnZXRTZW5kZXIiLCJiYW5uZWRCeSIsInBvd2VyU2VsZWN0b3JzIiwiaW5kZXgiLCJkZXNjcmlwdG9yIiwicHJvcCIsIm9uUG93ZXJMZXZlbHNDaGFuZ2VkIiwiZmlsdGVyIiwiQm9vbGVhbiIsImlzUm9vbUVuY3J5cHRlZCIsImV2ZW50UG93ZXJTZWxlY3RvcnMiLCJldmVudFR5cGUiLCJpIiwibGFiZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBZ0JBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUlBOztBQUNBOztBQUNBOztBQUVBOzs7O0FBY0EsTUFBTUEsY0FBOEMsR0FBRztBQUNuRDtBQUNBLEdBQUNDLGlCQUFVQyxVQUFYLEdBQXdCO0FBQUVDLElBQUFBLE9BQU8sRUFBRTtBQUFYLEdBRjJCO0FBR25ELEdBQUNGLGlCQUFVRyxRQUFYLEdBQXNCO0FBQUVELElBQUFBLE9BQU8sRUFBRTtBQUFYLEdBSDZCO0FBSW5ELEdBQUNGLGlCQUFVSSxrQkFBWCxHQUFnQztBQUFFRixJQUFBQSxPQUFPLEVBQUU7QUFBWCxHQUptQjtBQUtuRCxHQUFDRixpQkFBVUssVUFBWCxHQUF3QjtBQUFFSCxJQUFBQSxPQUFPLEVBQUUsSUFBWDtBQUFpQkksSUFBQUEsV0FBVyxFQUFFO0FBQTlCLEdBTDJCO0FBTW5ELEdBQUNOLGlCQUFVTyxxQkFBWCxHQUFtQztBQUFFTCxJQUFBQSxPQUFPLEVBQUUsSUFBWDtBQUFpQk0sSUFBQUEsWUFBWSxFQUFFO0FBQS9CLEdBTmdCO0FBT25ELEdBQUNSLGlCQUFVUyxlQUFYLEdBQTZCO0FBQUVQLElBQUFBLE9BQU8sRUFBRTtBQUFYLEdBUHNCO0FBUW5ELEdBQUNGLGlCQUFVVSxTQUFYLEdBQXVCO0FBQUVSLElBQUFBLE9BQU8sRUFBRTtBQUFYLEdBUjRCO0FBU25ELEdBQUNGLGlCQUFVVyxhQUFYLEdBQTJCO0FBQUVULElBQUFBLE9BQU8sRUFBRSxJQUFYO0FBQWlCTSxJQUFBQSxZQUFZLEVBQUU7QUFBL0IsR0FUd0I7QUFVbkQsR0FBQ1IsaUJBQVVZLGNB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Q1osZUFBRCxJQUFvQmMsZ0JBQWdCLEdBQUdSLFlBQVksQ0FBQ2lELFNBQUQsQ0FKakU7QUFLSSxRQUFBLGFBQWEsRUFBRSxrQkFBa0JBLFNBTHJDO0FBTUksUUFBQSxRQUFRLEVBQUUsS0FBS0w7QUFObkIsUUFESixDQURKO0FBWUgsS0F6QjJCLEVBeUJ6QkMsTUF6QnlCLENBeUJsQkMsT0F6QmtCLENBQTVCO0FBMkJBLHdCQUNJO0FBQUssTUFBQSxTQUFTLEVBQUM7QUFBZixvQkFDSTtBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsT0FBMEMseUJBQUcscUJBQUgsQ0FBMUMsQ0FESixFQUVNakMsc0JBRk4sRUFHTUMsaUJBSE4sRUFJTWtCLGtCQUpOLGVBS0k7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLG9CQUNJO0FBQU0sTUFBQSxTQUFTLEVBQUM7QUFBaEIsT0FBOEMseUJBQUcsYUFBSCxDQUE5QyxDQURKLGVBRUksd0NBQUt2QyxXQUFXLEdBQ1YseUJBQUcsZ0VBQUgsQ0FEVSxHQUVWLHlCQUFHLCtEQUFILENBRk4sQ0FGSixFQU1NK0MsY0FOTixFQU9NUSxtQkFQTixDQUxKLENBREo7QUFpQkg7O0FBclZxRSxDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDE5LTIwMjEgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgX3QsIF90ZCB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9sYW5ndWFnZUhhbmRsZXJcIjtcbmltcG9ydCB7IE1hdHJpeENsaWVudFBlZyB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9NYXRyaXhDbGllbnRQZWdcIjtcbmltcG9ydCBBY2Nlc3NpYmxlQnV0dG9uIGZyb20gXCIuLi8uLi8uLi9lbGVtZW50cy9BY2Nlc3NpYmxlQnV0dG9uXCI7XG5pbXBvcnQgTW9kYWwgZnJvbSBcIi4uLy4uLy4uLy4uLy4uL01vZGFsXCI7XG5pbXBvcnQgeyByZXBsYWNlYWJsZUNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlscy9yZXBsYWNlYWJsZUNvbXBvbmVudFwiO1xuaW1wb3J0IHsgRXZlbnRUeXBlIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL0B0eXBlcy9ldmVudFwiO1xuaW1wb3J0IHsgUm9vbU1lbWJlciB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvcm9vbS1tZW1iZXJcIjtcbmltcG9ydCB7IE1hdHJpeEV2ZW50IH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL21vZGVscy9ldmVudFwiO1xuaW1wb3J0IHsgUm9vbVN0YXRlIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL21vZGVscy9yb29tLXN0YXRlXCI7XG5pbXBvcnQgeyBjb21wYXJlIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL3V0aWxzL3N0cmluZ3NcIjtcbmltcG9ydCBFcnJvckRpYWxvZyBmcm9tICcuLi8uLi8uLi9kaWFsb2dzL0Vycm9yRGlhbG9nJztcbmltcG9ydCBQb3dlclNlbGVjdG9yIGZyb20gXCIuLi8uLi8uLi9lbGVtZW50cy9Qb3dlclNlbGVjdG9yXCI7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9sb2dnZXJcIjtcblxuaW50ZXJmYWNlIElFdmVudFNob3dPcHRzIHtcbiAgICBpc1N0YXRlPzogYm9vbGVhbjtcbiAgICBoaWRlRm9yU3BhY2U/OiBib29sZWFuO1xuICAgIGhpZGVGb3JSb29tPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIElQb3dlckxldmVsRGVzY3JpcHRvciB7XG4gICAgZGVzYzogc3RyaW5nO1xuICAgIGRlZmF1bHRWYWx1ZTogbnVtYmVyO1xuICAgIGhpZGVGb3JTcGFjZT86IGJvb2xlYW47XG59XG5cbmNvbnN0IHBsRXZlbnRzVG9TaG93OiBSZWNvcmQ8c3RyaW5nLCBJRXZlbnRTaG93T3B0cz4gPSB7XG4gICAgLy8gSWYgYW4gZXZlbnQgaXMgbGlzdGVkIGhlcmUsIGl0IHdpbGwgYmUgc2hvd24gaW4gdGhlIFBMIHNldHRpbmdzLiBEZWZhdWx0cyB3aWxsIGJlIGNhbGN1bGF0ZWQuXG4gICAgW0V2ZW50VHlwZS5Sb29tQXZhdGFyXTogeyBpc1N0YXRlOiB0cnVlIH0sXG4gICAgW0V2ZW50VHlwZS5Sb29tTmFtZV06IHsgaXNTdGF0ZTogdHJ1ZSB9LFxuICAgIFtFdmVudFR5cGUuUm9vbUNhbm9uaWNhbEFsaWFzXTogeyBpc1N0YXRlOiB0cnVlIH0sXG4gICAgW0V2ZW50VHlwZS5TcGFjZUNoaWxkXTogeyBpc1N0YXRlOiB0cnVlLCBoaWRlRm9yUm9vbTogdHJ1ZSB9LFxuICAgIFtFdmVudFR5cGUuUm9vbUhpc3RvcnlWaXNpYmlsaXR5XTogeyBpc1N0YXRlOiB0cnVlLCBoaWRlRm9yU3BhY2U6IHRydWUgfSxcbiAgICBbRXZlbnRUeXBlLlJvb21Qb3dlckxldmVsc106IHsgaXNTdGF0ZTogdHJ1ZSB9LFxuICAgIFtFdmVudFR5cGUuUm9vbVRvcGljXTogeyBpc1N0YXRlOiB0cnVlIH0sXG4gICAgW0V2ZW50VHlwZS5Sb29tVG9tYnN0b25lXTogeyBpc1N0YXRlOiB0cnVlLCBoaWRlRm9yU3BhY2U6IHRydWUgfSxcbiAgICBbRXZlbnRUeXBlLlJvb21FbmNyeXB0aW9uXTogeyBpc1N0YXRlOiB0cnVlLCBoaWRlRm9yU3BhY2U6IHRydWUgfSxcbiAgICBbRXZlbnRUeXBlLlJvb21TZXJ2ZXJBY2xdOiB7IGlzU3RhdGU6IHRydWUsIGhpZGVGb3JTcGFjZTogdHJ1ZSB9LFxuXG4gICAgLy8gVE9ETzogRW5hYmxlIHN1cHBvcnQgZm9yIG0ud2lkZ2V0IGV2ZW50IHR5cGUgKGh0dHBzOi8vZ2l0aHViLmNvbS92ZWN0b3ItaW0vZWxlbWVudC13ZWIvaXNzdWVzLzEzMTExKVxuICAgIFwiaW0udmVjdG9yLm1vZHVsYXIud2lkZ2V0c1wiOiB7IGlzU3RhdGU6IHRydWUsIGhpZGVGb3JTcGFjZTogdHJ1ZSB9LFxufTtcblxuLy8gcGFyc2UgYSBzdHJpbmcgYXMgYW4gaW50ZWdlcjsgaWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCwgb3IgY2Fubm90IGJlIHBhcnNlZFxuLy8gYXMgYW4gaW50ZWdlciwgcmV0dXJuIGEgZGVmYXVsdC5cbmZ1bmN0aW9uIHBhcnNlSW50V2l0aERlZmF1bHQodmFsLCBkZWYpIHtcbiAgICBjb25zdCByZXMgPSBwYXJzZUludCh2YWwpO1xuICAgIHJldHVybiBpc05hTihyZXMpID8gZGVmIDogcmVzO1xufVxuXG5pbnRlcmZhY2UgSUJhbm5lZFVzZXJQcm9wcyB7XG4gICAgY2FuVW5iYW4/OiBib29sZWFuO1xuICAgIG1lbWJlcjogUm9vbU1lbWJlcjtcbiAgICBieTogc3RyaW5nO1xuICAgIHJlYXNvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEJhbm5lZFVzZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SUJhbm5lZFVzZXJQcm9wcz4ge1xuICAgIHByaXZhdGUgb25VbmJhbkNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgTWF0cml4Q2xpZW50UGVnLmdldCgpLnVuYmFuKHRoaXMucHJvcHMubWVtYmVyLnJvb21JZCwgdGhpcy5wcm9wcy5tZW1iZXIudXNlcklkKS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gdW5iYW46IFwiICsgZXJyKTtcbiAgICAgICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ0ZhaWxlZCB0byB1bmJhbicsICcnLCBFcnJvckRpYWxvZywge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBfdCgnRXJyb3InKSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogX3QoJ0ZhaWxlZCB0byB1bmJhbicpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCB1bmJhbkJ1dHRvbjtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYW5VbmJhbikge1xuICAgICAgICAgICAgdW5iYW5CdXR0b24gPSAoXG4gICAgICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24gY2xhc3NOYW1lPSdteF9Sb2xlc1Jvb21TZXR0aW5nc1RhYl91bmJhbkJ0bidcbiAgICAgICAgICAgICAgICAgICAga2luZD0nZGFuZ2VyX3NtJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uVW5iYW5DbGlja31cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoJ1VuYmFuJykgfVxuICAgICAgICAgICAgICAgIDwvQWNjZXNzaWJsZUJ1dHRvbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VySWQgPSB0aGlzLnByb3BzLm1lbWJlci5uYW1lID09PSB0aGlzLnByb3BzLm1lbWJlci51c2VySWQgPyBudWxsIDogdGhpcy5wcm9wcy5tZW1iZXIudXNlcklkO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgIHsgdW5iYW5CdXR0b24gfVxuICAgICAgICAgICAgICAgIDxzcGFuIHRpdGxlPXtfdChcIkJhbm5lZCBieSAlKGRpc3BsYXlOYW1lKXNcIiwgeyBkaXNwbGF5TmFtZTogdGhpcy5wcm9wcy5ieSB9KX0+XG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+eyB0aGlzLnByb3BzLm1lbWJlci5uYW1lIH08L3N0cm9uZz4geyB1c2VySWQgfVxuICAgICAgICAgICAgICAgICAgICB7IHRoaXMucHJvcHMucmVhc29uID8gXCIgXCIgKyBfdCgnUmVhc29uJykgKyBcIjogXCIgKyB0aGlzLnByb3BzLnJlYXNvbiA6IFwiXCIgfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5pbnRlcmZhY2UgSVByb3BzIHtcbiAgICByb29tSWQ6IHN0cmluZztcbn1cblxuQHJlcGxhY2VhYmxlQ29tcG9uZW50KFwidmlld3Muc2V0dGluZ3MudGFicy5yb29tLlJvbGVzUm9vbVNldHRpbmdzVGFiXCIpXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb2xlc1Jvb21TZXR0aW5nc1RhYiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJUHJvcHM+IHtcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgTWF0cml4Q2xpZW50UGVnLmdldCgpLm9uKFwiUm9vbVN0YXRlLm1lbWJlcnNcIiwgdGhpcy5vblJvb21NZW1iZXJzaGlwKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuICAgICAgICBpZiAoY2xpZW50KSB7XG4gICAgICAgICAgICBjbGllbnQucmVtb3ZlTGlzdGVuZXIoXCJSb29tU3RhdGUubWVtYmVyc1wiLCB0aGlzLm9uUm9vbU1lbWJlcnNoaXApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvblJvb21NZW1iZXJzaGlwID0gKGV2ZW50OiBNYXRyaXhFdmVudCwgc3RhdGU6IFJvb21TdGF0ZSwgbWVtYmVyOiBSb29tTWVtYmVyKSA9PiB7XG4gICAgICAgIGlmIChzdGF0ZS5yb29tSWQgIT09IHRoaXMucHJvcHMucm9vbUlkKSByZXR1cm47XG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBwb3B1bGF0ZURlZmF1bHRQbEV2ZW50cyhldmVudHNTZWN0aW9uOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+LCBzdGF0ZUxldmVsOiBudW1iZXIsIGV2ZW50c0xldmVsOiBudW1iZXIpIHtcbiAgICAgICAgZm9yIChjb25zdCBkZXNpcmVkRXZlbnQgb2YgT2JqZWN0LmtleXMocGxFdmVudHNUb1Nob3cpKSB7XG4gICAgICAgICAgICBpZiAoIShkZXNpcmVkRXZlbnQgaW4gZXZlbnRzU2VjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBldmVudHNTZWN0aW9uW2Rlc2lyZWRFdmVudF0gPSAocGxFdmVudHNUb1Nob3dbZGVzaXJlZEV2ZW50XS5pc1N0YXRlID8gc3RhdGVMZXZlbCA6IGV2ZW50c0xldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgb25Qb3dlckxldmVsc0NoYW5nZWQgPSAodmFsdWU6IG51bWJlciwgcG93ZXJMZXZlbEtleTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IE1hdHJpeENsaWVudFBlZy5nZXQoKTtcbiAgICAgICAgY29uc3Qgcm9vbSA9IGNsaWVudC5nZXRSb29tKHRoaXMucHJvcHMucm9vbUlkKTtcbiAgICAgICAgY29uc3QgcGxFdmVudCA9IHJvb20uY3VycmVudFN0YXRlLmdldFN0YXRlRXZlbnRzKEV2ZW50VHlwZS5Sb29tUG93ZXJMZXZlbHMsICcnKTtcbiAgICAgICAgbGV0IHBsQ29udGVudCA9IHBsRXZlbnQgPyAocGxFdmVudC5nZXRDb250ZW50KCkgfHwge30pIDoge307XG5cbiAgICAgICAgLy8gQ2xvbmUgdGhlIHBvd2VyIGxldmVscyBqdXN0IGluIGNhc2VcbiAgICAgICAgcGxDb250ZW50ID0gT2JqZWN0LmFzc2lnbih7fSwgcGxDb250ZW50KTtcblxuICAgICAgICBjb25zdCBldmVudHNMZXZlbFByZWZpeCA9IFwiZXZlbnRfbGV2ZWxzX1wiO1xuXG4gICAgICAgIGlmIChwb3dlckxldmVsS2V5LnN0YXJ0c1dpdGgoZXZlbnRzTGV2ZWxQcmVmaXgpKSB7XG4gICAgICAgICAgICAvLyBkZWVwIGNvcHkgXCJldmVudHNcIiBvYmplY3QsIE9iamVjdC5hc3NpZ24gaXRzZWxmIHdvbid0IGRlZXAgY29weVxuICAgICAgICAgICAgcGxDb250ZW50W1wiZXZlbnRzXCJdID0gT2JqZWN0LmFzc2lnbih7fSwgcGxDb250ZW50W1wiZXZlbnRzXCJdIHx8IHt9KTtcbiAgICAgICAgICAgIHBsQ29udGVudFtcImV2ZW50c1wiXVtwb3dlckxldmVsS2V5LnNsaWNlKGV2ZW50c0xldmVsUHJlZml4Lmxlbmd0aCldID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBrZXlQYXRoID0gcG93ZXJMZXZlbEtleS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgbGV0IHBhcmVudE9iajtcbiAgICAgICAgICAgIGxldCBjdXJyZW50T2JqID0gcGxDb250ZW50O1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5UGF0aCkge1xuICAgICAgICAgICAgICAgIGlmICghY3VycmVudE9ialtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPYmpba2V5XSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnRPYmogPSBjdXJyZW50T2JqO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRPYmogPSBjdXJyZW50T2JqW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnRPYmpba2V5UGF0aFtrZXlQYXRoLmxlbmd0aCAtIDFdXSA9IHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xpZW50LnNlbmRTdGF0ZUV2ZW50KHRoaXMucHJvcHMucm9vbUlkLCBFdmVudFR5cGUuUm9vbVBvd2VyTGV2ZWxzLCBwbENvbnRlbnQpLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGUpO1xuXG4gICAgICAgICAgICBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdQb3dlciBsZXZlbCByZXF1aXJlbWVudCBjaGFuZ2UgZmFpbGVkJywgJycsIEVycm9yRGlhbG9nLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IF90KCdFcnJvciBjaGFuZ2luZyBwb3dlciBsZXZlbCByZXF1aXJlbWVudCcpLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdChcbiAgICAgICAgICAgICAgICAgICAgXCJBbiBlcnJvciBvY2N1cnJlZCBjaGFuZ2luZyB0aGUgcm9vbSdzIHBvd2VyIGxldmVsIHJlcXVpcmVtZW50cy4gRW5zdXJlIHlvdSBoYXZlIHN1ZmZpY2llbnQgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInBlcm1pc3Npb25zIGFuZCB0cnkgYWdhaW4uXCIsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvblVzZXJQb3dlckxldmVsQ2hhbmdlZCA9ICh2YWx1ZTogbnVtYmVyLCBwb3dlckxldmVsS2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuICAgICAgICBjb25zdCByb29tID0gY2xpZW50LmdldFJvb20odGhpcy5wcm9wcy5yb29tSWQpO1xuICAgICAgICBjb25zdCBwbEV2ZW50ID0gcm9vbS5jdXJyZW50U3RhdGUuZ2V0U3RhdGVFdmVudHMoRXZlbnRUeXBlLlJvb21Qb3dlckxldmVscywgJycpO1xuICAgICAgICBsZXQgcGxDb250ZW50ID0gcGxFdmVudCA/IChwbEV2ZW50LmdldENvbnRlbnQoKSB8fCB7fSkgOiB7fTtcblxuICAgICAgICAvLyBDbG9uZSB0aGUgcG93ZXIgbGV2ZWxzIGp1c3QgaW4gY2FzZVxuICAgICAgICBwbENvbnRlbnQgPSBPYmplY3QuYXNzaWduKHt9LCBwbENvbnRlbnQpO1xuXG4gICAgICAgIC8vIHBvd2VyTGV2ZWxLZXkgc2hvdWxkIGJlIGEgdXNlciBJRFxuICAgICAgICBpZiAoIXBsQ29udGVudFsndXNlcnMnXSkgcGxDb250ZW50Wyd1c2VycyddID0ge307XG4gICAgICAgIHBsQ29udGVudFsndXNlcnMnXVtwb3dlckxldmVsS2V5XSA9IHZhbHVlO1xuXG4gICAgICAgIGNsaWVudC5zZW5kU3RhdGVFdmVudCh0aGlzLnByb3BzLnJvb21JZCwgRXZlbnRUeXBlLlJvb21Qb3dlckxldmVscywgcGxDb250ZW50KS5jYXRjaChlID0+IHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihlKTtcblxuICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnUG93ZXIgbGV2ZWwgY2hhbmdlIGZhaWxlZCcsICcnLCBFcnJvckRpYWxvZywge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBfdCgnRXJyb3IgY2hhbmdpbmcgcG93ZXIgbGV2ZWwnKSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogX3QoXG4gICAgICAgICAgICAgICAgICAgIFwiQW4gZXJyb3Igb2NjdXJyZWQgY2hhbmdpbmcgdGhlIHVzZXIncyBwb3dlciBsZXZlbC4gRW5zdXJlIHlvdSBoYXZlIHN1ZmZpY2llbnQgXCIgK1xuICAgICAgICAgICAgICAgICAgICBcInBlcm1pc3Npb25zIGFuZCB0cnkgYWdhaW4uXCIsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBNYXRyaXhDbGllbnRQZWcuZ2V0KCk7XG4gICAgICAgIGNvbnN0IHJvb20gPSBjbGllbnQuZ2V0Um9vbSh0aGlzLnByb3BzLnJvb21JZCk7XG4gICAgICAgIGNvbnN0IGlzU3BhY2VSb29tID0gcm9vbS5pc1NwYWNlUm9vbSgpO1xuXG4gICAgICAgIGNvbnN0IHBsRXZlbnQgPSByb29tLmN1cnJlbnRTdGF0ZS5nZXRTdGF0ZUV2ZW50cyhFdmVudFR5cGUuUm9vbVBvd2VyTGV2ZWxzLCAnJyk7XG4gICAgICAgIGNvbnN0IHBsQ29udGVudCA9IHBsRXZlbnQgPyAocGxFdmVudC5nZXRDb250ZW50KCkgfHwge30pIDoge307XG4gICAgICAgIGNvbnN0IGNhbkNoYW5nZUxldmVscyA9IHJvb20uY3VycmVudFN0YXRlLm1heUNsaWVudFNlbmRTdGF0ZUV2ZW50KEV2ZW50VHlwZS5Sb29tUG93ZXJMZXZlbHMsIGNsaWVudCk7XG5cbiAgICAgICAgY29uc3QgcGxFdmVudHNUb0xhYmVscyA9IHtcbiAgICAgICAgICAgIC8vIFRoZXNlIHdpbGwgYmUgdHJhbnNsYXRlZCBmb3IgdXMgbGF0ZXIuXG4gICAgICAgICAgICBbRXZlbnRUeXBlLlJvb21BdmF0YXJdOiBpc1NwYWNlUm9vbSA/IF90ZChcIkNoYW5nZSBzcGFjZSBhdmF0YXJcIikgOiBfdGQoXCJDaGFuZ2Ugcm9vbSBhdmF0YXJcIiksXG4gICAgICAgICAgICBbRXZlbnRUeXBlLlJvb21OYW1lXTogaXNTcGFjZVJvb20gPyBfdGQoXCJDaGFuZ2Ugc3BhY2UgbmFtZVwiKSA6IF90ZChcIkNoYW5nZSByb29tIG5hbWVcIiksXG4gICAgICAgICAgICBbRXZlbnRUeXBlLlJvb21DYW5vbmljYWxBbGlhc106IGlzU3BhY2VSb29tXG4gICAgICAgICAgICAgICAgPyBfdGQoXCJDaGFuZ2UgbWFpbiBhZGRyZXNzIGZvciB0aGUgc3BhY2VcIilcbiAgICAgICAgICAgICAgICA6IF90ZChcIkNoYW5nZSBtYWluIGFkZHJlc3MgZm9yIHRoZSByb29tXCIpLFxuICAgICAgICAgICAgW0V2ZW50VHlwZS5TcGFjZUNoaWxkXTogX3RkKFwiTWFuYWdlIHJvb21zIGluIHRoaXMgc3BhY2VcIiksXG4gICAgICAgICAgICBbRXZlbnRUeXBlLlJvb21IaXN0b3J5VmlzaWJpbGl0eV06IF90ZChcIkNoYW5nZSBoaXN0b3J5IHZpc2liaWxpdHlcIiksXG4gICAgICAgICAgICBbRXZlbnRUeXBlLlJvb21Qb3dlckxldmVsc106IF90ZChcIkNoYW5nZSBwZXJtaXNzaW9uc1wiKSxcbiAgICAgICAgICAgIFtFdmVudFR5cGUuUm9vbVRvcGljXTogaXNTcGFjZVJvb20gPyBfdGQoXCJDaGFuZ2UgZGVzY3JpcHRpb25cIikgOiBfdGQoXCJDaGFuZ2UgdG9waWNcIiksXG4gICAgICAgICAgICBbRXZlbnRUeXBlLlJvb21Ub21ic3RvbmVdOiBfdGQoXCJVcGdyYWRlIHRoZSByb29tXCIpLFxuICAgICAgICAgICAgW0V2ZW50VHlwZS5Sb29tRW5jcnlwdGlvbl06IF90ZChcIkVuYWJsZSByb29tIGVuY3J5cHRpb25cIiksXG4gICAgICAgICAgICBbRXZlbnRUeXBlLlJvb21TZXJ2ZXJBY2xdOiBfdGQoXCJDaGFuZ2Ugc2VydmVyIEFDTHNcIiksXG5cbiAgICAgICAgICAgIC8vIFRPRE86IEVuYWJsZSBzdXBwb3J0IGZvciBtLndpZGdldCBldmVudCB0eXBlIChodHRwczovL2dpdGh1Yi5jb20vdmVjdG9yLWltL2VsZW1lbnQtd2ViL2lzc3Vlcy8xMzExMSlcbiAgICAgICAgICAgIFwiaW0udmVjdG9yLm1vZHVsYXIud2lkZ2V0c1wiOiBpc1NwYWNlUm9vbSA/IG51bGwgOiBfdGQoXCJNb2RpZnkgd2lkZ2V0c1wiKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwb3dlckxldmVsRGVzY3JpcHRvcnM6IFJlY29yZDxzdHJpbmcsIElQb3dlckxldmVsRGVzY3JpcHRvcj4gPSB7XG4gICAgICAgICAgICBcInVzZXJzX2RlZmF1bHRcIjoge1xuICAgICAgICAgICAgICAgIGRlc2M6IF90KCdEZWZhdWx0IHJvbGUnKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJldmVudHNfZGVmYXVsdFwiOiB7XG4gICAgICAgICAgICAgICAgZGVzYzogX3QoJ1NlbmQgbWVzc2FnZXMnKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAsXG4gICAgICAgICAgICAgICAgaGlkZUZvclNwYWNlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiaW52aXRlXCI6IHtcbiAgICAgICAgICAgICAgICBkZXNjOiBfdCgnSW52aXRlIHVzZXJzJyksXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiA1MCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInN0YXRlX2RlZmF1bHRcIjoge1xuICAgICAgICAgICAgICAgIGRlc2M6IF90KCdDaGFuZ2Ugc2V0dGluZ3MnKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDUwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwia2lja1wiOiB7XG4gICAgICAgICAgICAgICAgZGVzYzogX3QoJ0tpY2sgdXNlcnMnKSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDUwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiYmFuXCI6IHtcbiAgICAgICAgICAgICAgICBkZXNjOiBfdCgnQmFuIHVzZXJzJyksXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiA1MCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInJlZGFjdFwiOiB7XG4gICAgICAgICAgICAgICAgZGVzYzogX3QoJ1JlbW92ZSBtZXNzYWdlcyBzZW50IGJ5IG90aGVycycpLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogNTAsXG4gICAgICAgICAgICAgICAgaGlkZUZvclNwYWNlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibm90aWZpY2F0aW9ucy5yb29tXCI6IHtcbiAgICAgICAgICAgICAgICBkZXNjOiBfdCgnTm90aWZ5IGV2ZXJ5b25lJyksXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiA1MCxcbiAgICAgICAgICAgICAgICBoaWRlRm9yU3BhY2U6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGV2ZW50c0xldmVscyA9IHBsQ29udGVudC5ldmVudHMgfHwge307XG4gICAgICAgIGNvbnN0IHVzZXJMZXZlbHMgPSBwbENvbnRlbnQudXNlcnMgfHwge307XG4gICAgICAgIGNvbnN0IGJhbkxldmVsID0gcGFyc2VJbnRXaXRoRGVmYXVsdChwbENvbnRlbnQuYmFuLCBwb3dlckxldmVsRGVzY3JpcHRvcnMuYmFuLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRVc2VyTGV2ZWwgPSBwYXJzZUludFdpdGhEZWZhdWx0KFxuICAgICAgICAgICAgcGxDb250ZW50LnVzZXJzX2RlZmF1bHQsXG4gICAgICAgICAgICBwb3dlckxldmVsRGVzY3JpcHRvcnMudXNlcnNfZGVmYXVsdC5kZWZhdWx0VmFsdWUsXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGN1cnJlbnRVc2VyTGV2ZWwgPSB1c2VyTGV2ZWxzW2NsaWVudC5nZXRVc2VySWQoKV07XG4gICAgICAgIGlmIChjdXJyZW50VXNlckxldmVsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGN1cnJlbnRVc2VyTGV2ZWwgPSBkZWZhdWx0VXNlckxldmVsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wb3B1bGF0ZURlZmF1bHRQbEV2ZW50cyhcbiAgICAgICAgICAgIGV2ZW50c0xldmVscyxcbiAgICAgICAgICAgIHBhcnNlSW50V2l0aERlZmF1bHQocGxDb250ZW50LnN0YXRlX2RlZmF1bHQsIHBvd2VyTGV2ZWxEZXNjcmlwdG9ycy5zdGF0ZV9kZWZhdWx0LmRlZmF1bHRWYWx1ZSksXG4gICAgICAgICAgICBwYXJzZUludFdpdGhEZWZhdWx0KHBsQ29udGVudC5ldmVudHNfZGVmYXVsdCwgcG93ZXJMZXZlbERlc2NyaXB0b3JzLmV2ZW50c19kZWZhdWx0LmRlZmF1bHRWYWx1ZSksXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IHByaXZpbGVnZWRVc2Vyc1NlY3Rpb24gPSA8ZGl2PnsgX3QoJ05vIHVzZXJzIGhhdmUgc3BlY2lmaWMgcHJpdmlsZWdlcyBpbiB0aGlzIHJvb20nKSB9PC9kaXY+O1xuICAgICAgICBsZXQgbXV0ZWRVc2Vyc1NlY3Rpb247XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh1c2VyTGV2ZWxzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHByaXZpbGVnZWRVc2VycyA9IFtdO1xuICAgICAgICAgICAgY29uc3QgbXV0ZWRVc2VycyA9IFtdO1xuXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh1c2VyTGV2ZWxzKS5mb3JFYWNoKCh1c2VyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKHVzZXJMZXZlbHNbdXNlcl0pKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbkNoYW5nZSA9IHVzZXJMZXZlbHNbdXNlcl0gPCBjdXJyZW50VXNlckxldmVsICYmIGNhbkNoYW5nZUxldmVscztcbiAgICAgICAgICAgICAgICBpZiAodXNlckxldmVsc1t1c2VyXSA+IGRlZmF1bHRVc2VyTGV2ZWwpIHsgLy8gcHJpdmlsZWdlZFxuICAgICAgICAgICAgICAgICAgICBwcml2aWxlZ2VkVXNlcnMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3dlclNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3VzZXJMZXZlbHNbdXNlcl19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFjYW5DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3VzZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt1c2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvd2VyTGV2ZWxLZXk9e3VzZXJ9IC8vIFdpbGwgYmUgc2VudCBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlciB0byBgb25DaGFuZ2VgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25Vc2VyUG93ZXJMZXZlbENoYW5nZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPixcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXJMZXZlbHNbdXNlcl0gPCBkZWZhdWx0VXNlckxldmVsKSB7IC8vIG11dGVkXG4gICAgICAgICAgICAgICAgICAgIG11dGVkVXNlcnMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxQb3dlclNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3VzZXJMZXZlbHNbdXNlcl19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFjYW5DaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3VzZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt1c2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvd2VyTGV2ZWxLZXk9e3VzZXJ9IC8vIFdpbGwgYmUgc2VudCBhcyB0aGUgc2Vjb25kIHBhcmFtZXRlciB0byBgb25DaGFuZ2VgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25Vc2VyUG93ZXJMZXZlbENoYW5nZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPixcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gY29tcGFyYXRvciBmb3Igc29ydGluZyBQTCB1c2VycyBsZXhpY29ncmFwaGljYWxseSBvbiBQTCBkZXNjZW5kaW5nLCBNWElEIGFzY2VuZGluZy4gKGNhc2UtaW5zZW5zaXRpdmUpXG4gICAgICAgICAgICBjb25zdCBjb21wYXJhdG9yID0gKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwbERpZmYgPSB1c2VyTGV2ZWxzW2Iua2V5XSAtIHVzZXJMZXZlbHNbYS5rZXldO1xuICAgICAgICAgICAgICAgIHJldHVybiBwbERpZmYgIT09IDAgPyBwbERpZmYgOiBjb21wYXJlKGEua2V5LnRvTG9jYWxlTG93ZXJDYXNlKCksIGIua2V5LnRvTG9jYWxlTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcHJpdmlsZWdlZFVzZXJzLnNvcnQoY29tcGFyYXRvcik7XG4gICAgICAgICAgICBtdXRlZFVzZXJzLnNvcnQoY29tcGFyYXRvcik7XG5cbiAgICAgICAgICAgIGlmIChwcml2aWxlZ2VkVXNlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcHJpdmlsZWdlZFVzZXJzU2VjdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdteF9TZXR0aW5nc1RhYl9zZWN0aW9uIG14X1NldHRpbmdzVGFiX3N1YnNlY3Rpb25UZXh0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdteF9TZXR0aW5nc1RhYl9zdWJoZWFkaW5nJz57IF90KCdQcml2aWxlZ2VkIFVzZXJzJykgfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBwcml2aWxlZ2VkVXNlcnMgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobXV0ZWRVc2Vycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBtdXRlZFVzZXJzU2VjdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdteF9TZXR0aW5nc1RhYl9zZWN0aW9uIG14X1NldHRpbmdzVGFiX3N1YnNlY3Rpb25UZXh0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdteF9TZXR0aW5nc1RhYl9zdWJoZWFkaW5nJz57IF90KCdNdXRlZCBVc2VycycpIH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbXV0ZWRVc2VycyB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhbm5lZCA9IHJvb20uZ2V0TWVtYmVyc1dpdGhNZW1iZXJzaGlwKFwiYmFuXCIpO1xuICAgICAgICBsZXQgYmFubmVkVXNlcnNTZWN0aW9uO1xuICAgICAgICBpZiAoYmFubmVkLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgY2FuQmFuVXNlcnMgPSBjdXJyZW50VXNlckxldmVsID49IGJhbkxldmVsO1xuICAgICAgICAgICAgYmFubmVkVXNlcnNTZWN0aW9uID1cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbXhfU2V0dGluZ3NUYWJfc2VjdGlvbiBteF9TZXR0aW5nc1RhYl9zdWJzZWN0aW9uVGV4dCc+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdteF9TZXR0aW5nc1RhYl9zdWJoZWFkaW5nJz57IF90KCdCYW5uZWQgdXNlcnMnKSB9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgYmFubmVkLm1hcCgobWVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFuRXZlbnQgPSBtZW1iZXIuZXZlbnRzLm1lbWJlci5nZXRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VuZGVyID0gcm9vbS5nZXRNZW1iZXIobWVtYmVyLmV2ZW50cy5tZW1iZXIuZ2V0U2VuZGVyKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiYW5uZWRCeSA9IG1lbWJlci5ldmVudHMubWVtYmVyLmdldFNlbmRlcigpOyAvLyBzdGFydCBieSBmYWxsaW5nIGJhY2sgdG8gbXhpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZW5kZXIpIGJhbm5lZEJ5ID0gc2VuZGVyLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJhbm5lZFVzZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17bWVtYmVyLnVzZXJJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhblVuYmFuPXtjYW5CYW5Vc2Vyc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlcj17bWVtYmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uPXtiYW5FdmVudC5yZWFzb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieT17YmFubmVkQnl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pIH1cbiAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8L2Rpdj47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwb3dlclNlbGVjdG9ycyA9IE9iamVjdC5rZXlzKHBvd2VyTGV2ZWxEZXNjcmlwdG9ycykubWFwKChrZXksIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gcG93ZXJMZXZlbERlc2NyaXB0b3JzW2tleV07XG4gICAgICAgICAgICBpZiAoaXNTcGFjZVJvb20gJiYgZGVzY3JpcHRvci5oaWRlRm9yU3BhY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qga2V5UGF0aCA9IGtleS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRPYmogPSBwbENvbnRlbnQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHByb3Agb2Yga2V5UGF0aCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50T2JqID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRPYmogPSBjdXJyZW50T2JqW3Byb3BdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50V2l0aERlZmF1bHQoY3VycmVudE9iaiwgZGVzY3JpcHRvci5kZWZhdWx0VmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtpbmRleH0gY2xhc3NOYW1lPVwiXCI+XG4gICAgICAgICAgICAgICAgPFBvd2VyU2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2Rlc2NyaXB0b3IuZGVzY31cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgICAgICAgICB1c2Vyc0RlZmF1bHQ9e2RlZmF1bHRVc2VyTGV2ZWx9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshY2FuQ2hhbmdlTGV2ZWxzIHx8IGN1cnJlbnRVc2VyTGV2ZWwgPCB2YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgcG93ZXJMZXZlbEtleT17a2V5fSAvLyBXaWxsIGJlIHNlbnQgYXMgdGhlIHNlY29uZCBwYXJhbWV0ZXIgdG8gYG9uQ2hhbmdlYFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vblBvd2VyTGV2ZWxzQ2hhbmdlZH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+O1xuICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAgICAgLy8gaGlkZSB0aGUgcG93ZXIgbGV2ZWwgc2VsZWN0b3IgZm9yIGVuYWJsaW5nIEUyRUUgaWYgaXQgdGhlIHJvb20gaXMgYWxyZWFkeSBlbmNyeXB0ZWRcbiAgICAgICAgaWYgKGNsaWVudC5pc1Jvb21FbmNyeXB0ZWQodGhpcy5wcm9wcy5yb29tSWQpKSB7XG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzTGV2ZWxzW0V2ZW50VHlwZS5Sb29tRW5jcnlwdGlvbl07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBldmVudFBvd2VyU2VsZWN0b3JzID0gT2JqZWN0LmtleXMoZXZlbnRzTGV2ZWxzKS5tYXAoKGV2ZW50VHlwZSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzU3BhY2VSb29tICYmIHBsRXZlbnRzVG9TaG93W2V2ZW50VHlwZV0/LmhpZGVGb3JTcGFjZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNTcGFjZVJvb20gJiYgcGxFdmVudHNUb1Nob3dbZXZlbnRUeXBlXT8uaGlkZUZvclJvb20pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGxhYmVsID0gcGxFdmVudHNUb0xhYmVsc1tldmVudFR5cGVdO1xuICAgICAgICAgICAgaWYgKGxhYmVsKSB7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSBfdChsYWJlbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxhYmVsID0gX3QoXCJTZW5kICUoZXZlbnRUeXBlKXMgZXZlbnRzXCIsIHsgZXZlbnRUeXBlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIlwiIGtleT17ZXZlbnRUeXBlfT5cbiAgICAgICAgICAgICAgICAgICAgPFBvd2VyU2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtldmVudHNMZXZlbHNbZXZlbnRUeXBlXX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJzRGVmYXVsdD17ZGVmYXVsdFVzZXJMZXZlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshY2FuQ2hhbmdlTGV2ZWxzIHx8IGN1cnJlbnRVc2VyTGV2ZWwgPCBldmVudHNMZXZlbHNbZXZlbnRUeXBlXX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvd2VyTGV2ZWxLZXk9e1wiZXZlbnRfbGV2ZWxzX1wiICsgZXZlbnRUeXBlfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25Qb3dlckxldmVsc0NoYW5nZWR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWIgbXhfUm9sZXNSb29tU2V0dGluZ3NUYWJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX2hlYWRpbmdcIj57IF90KFwiUm9sZXMgJiBQZXJtaXNzaW9uc1wiKSB9PC9kaXY+XG4gICAgICAgICAgICAgICAgeyBwcml2aWxlZ2VkVXNlcnNTZWN0aW9uIH1cbiAgICAgICAgICAgICAgICB7IG11dGVkVXNlcnNTZWN0aW9uIH1cbiAgICAgICAgICAgICAgICB7IGJhbm5lZFVzZXJzU2VjdGlvbiB9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J214X1NldHRpbmdzVGFiX3NlY3Rpb24gbXhfU2V0dGluZ3NUYWJfc3Vic2VjdGlvblRleHQnPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J214X1NldHRpbmdzVGFiX3N1YmhlYWRpbmcnPnsgX3QoXCJQZXJtaXNzaW9uc1wiKSB9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8cD57IGlzU3BhY2VSb29tXG4gICAgICAgICAgICAgICAgICAgICAgICA/IF90KCdTZWxlY3QgdGhlIHJvbGVzIHJlcXVpcmVkIHRvIGNoYW5nZSB2YXJpb3VzIHBhcnRzIG9mIHRoZSBzcGFjZScpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IF90KCdTZWxlY3QgdGhlIHJvbGVzIHJlcXVpcmVkIHRvIGNoYW5nZSB2YXJpb3VzIHBhcnRzIG9mIHRoZSByb29tJylcbiAgICAgICAgICAgICAgICAgICAgfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgeyBwb3dlclNlbGVjdG9ycyB9XG4gICAgICAgICAgICAgICAgICAgIHsgZXZlbnRQb3dlclNlbGVjdG9ycyB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iXX0=