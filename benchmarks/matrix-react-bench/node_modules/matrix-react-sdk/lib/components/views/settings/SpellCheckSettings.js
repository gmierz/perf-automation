"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.ExistingSpellCheckLanguage = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _SpellCheckLanguagesDropdown = _interopRequireDefault(require("../../../components/views/elements/SpellCheckLanguagesDropdown"));

var _AccessibleButton = _interopRequireDefault(require("../../../components/views/elements/AccessibleButton"));

var _languageHandler = require("../../../languageHandler");

var _replaceableComponent = require("../../../utils/replaceableComponent");

var _dec, _class;

class ExistingSpellCheckLanguage extends _react.default.Component {
  constructor(...args) {
    super(...args);
    (0, _defineProperty2.default)(this, "onRemove", e => {
      e.stopPropagation();
      e.preventDefault();
      return this.props.onRemoved(this.props.language);
    });
  }

  render() {
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_ExistingSpellCheckLanguage"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_ExistingSpellCheckLanguage_language"
    }, this.props.language), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: this.onRemove,
      kind: "danger_sm"
    }, (0, _languageHandler._t)("Remove")));
  }

}

exports.ExistingSpellCheckLanguage = ExistingSpellCheckLanguage;
let SpellCheckLanguages = (_dec = (0, _replaceableComponent.replaceableComponent)("views.settings.SpellCheckLanguages"), _dec(_class = class SpellCheckLanguages extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onRemoved", language => {
      const languages = this.props.languages.filter(e => e !== language);
      this.props.onLanguagesChange(languages);
    });
    (0, _defineProperty2.default)(this, "onAddClick", e => {
      e.stopPropagation();
      e.preventDefault();
      const language = this.state.newLanguage;
      if (!language) return;
      if (this.props.languages.includes(language)) return;
      this.props.languages.push(language);
      this.props.onLanguagesChange(this.props.languages);
    });
    (0, _defineProperty2.default)(this, "onNewLanguageChange", language => {
      if (this.state.newLanguage === language) return;
      this.setState({
        newLanguage: language
      });
    });
    this.state = {
      newLanguage: ""
    };
  }

  render() {
    const existingSpellCheckLanguages = this.props.languages.map(e => {
      return /*#__PURE__*/_react.default.createElement(ExistingSpellCheckLanguage, {
        language: e,
        onRemoved: this.onRemoved,
        key: e
      });
    });

    const addButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: this.onAddClick,
      kind: "primary"
    }, (0, _languageHandler._t)("Add"));

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SpellCheckLanguages"
    }, existingSpellCheckLanguages, /*#__PURE__*/_react.default.createElement("form", {
      onSubmit: this.onAddClick,
      noValidate: true
    }, /*#__PURE__*/_react.default.createElement(_SpellCheckLanguagesDropdown.default, {
      className: "mx_GeneralUserSettingsTab_spellCheckLanguageInput",
      value: this.state.newLanguage,
      onOptionChange: this.onNewLanguageChange
    }), addButton));
  }

}) || _class);
exports.default = SpellCheckLanguages;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3NldHRpbmdzL1NwZWxsQ2hlY2tTZXR0aW5ncy50c3giXSwibmFtZXMiOlsiRXhpc3RpbmdTcGVsbENoZWNrTGFuZ3VhZ2UiLCJSZWFjdCIsIkNvbXBvbmVudCIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInByb3BzIiwib25SZW1vdmVkIiwibGFuZ3VhZ2UiLCJyZW5kZXIiLCJvblJlbW92ZSIsIlNwZWxsQ2hlY2tMYW5ndWFnZXMiLCJjb25zdHJ1Y3RvciIsImxhbmd1YWdlcyIsImZpbHRlciIsIm9uTGFuZ3VhZ2VzQ2hhbmdlIiwic3RhdGUiLCJuZXdMYW5ndWFnZSIsImluY2x1ZGVzIiwicHVzaCIsInNldFN0YXRlIiwiZXhpc3RpbmdTcGVsbENoZWNrTGFuZ3VhZ2VzIiwibWFwIiwiYWRkQnV0dG9uIiwib25BZGRDbGljayIsIm9uTmV3TGFuZ3VhZ2VDaGFuZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBZ0JBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBZ0JPLE1BQU1BLDBCQUFOLFNBQXlDQyxlQUFNQyxTQUEvQyxDQUEyRjtBQUFBO0FBQUE7QUFBQSxvREFDMUVDLENBQUQsSUFBTztBQUN0QkEsTUFBQUEsQ0FBQyxDQUFDQyxlQUFGO0FBQ0FELE1BQUFBLENBQUMsQ0FBQ0UsY0FBRjtBQUVBLGFBQU8sS0FBS0MsS0FBTCxDQUFXQyxTQUFYLENBQXFCLEtBQUtELEtBQUwsQ0FBV0UsUUFBaEMsQ0FBUDtBQUNILEtBTjZGO0FBQUE7O0FBUTlGQyxFQUFBQSxNQUFNLEdBQUc7QUFDTCx3QkFDSTtBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsb0JBQ0k7QUFBTSxNQUFBLFNBQVMsRUFBQztBQUFoQixPQUEyRCxLQUFLSCxLQUFMLENBQVdFLFFBQXRFLENBREosZUFFSSw2QkFBQyx5QkFBRDtBQUFrQixNQUFBLE9BQU8sRUFBRSxLQUFLRSxRQUFoQztBQUEwQyxNQUFBLElBQUksRUFBQztBQUEvQyxPQUNNLHlCQUFHLFFBQUgsQ0FETixDQUZKLENBREo7QUFRSDs7QUFqQjZGOzs7SUFxQjdFQyxtQixXQURwQixnREFBcUIsb0NBQXJCLEMsZ0JBQUQsTUFDcUJBLG1CQURyQixTQUNpRFYsZUFBTUMsU0FEdkQsQ0FDdUg7QUFDbkhVLEVBQUFBLFdBQVcsQ0FBQ04sS0FBRCxFQUFRO0FBQ2YsVUFBTUEsS0FBTjtBQURlLHFEQU9FRSxRQUFELElBQXNCO0FBQ3RDLFlBQU1LLFNBQVMsR0FBRyxLQUFLUCxLQUFMLENBQVdPLFNBQVgsQ0FBcUJDLE1BQXJCLENBQTZCWCxDQUFELElBQU9BLENBQUMsS0FBS0ssUUFBekMsQ0FBbEI7QUFDQSxXQUFLRixLQUFMLENBQVdTLGlCQUFYLENBQTZCRixTQUE3QjtBQUNILEtBVmtCO0FBQUEsc0RBWUdWLENBQUQsSUFBTztBQUN4QkEsTUFBQUEsQ0FBQyxDQUFDQyxlQUFGO0FBQ0FELE1BQUFBLENBQUMsQ0FBQ0UsY0FBRjtBQUVBLFlBQU1HLFFBQVEsR0FBRyxLQUFLUSxLQUFMLENBQVdDLFdBQTVCO0FBRUEsVUFBSSxDQUFDVCxRQUFMLEVBQWU7QUFDZixVQUFJLEtBQUtGLEtBQUwsQ0FBV08sU0FBWCxDQUFxQkssUUFBckIsQ0FBOEJWLFFBQTlCLENBQUosRUFBNkM7QUFFN0MsV0FBS0YsS0FBTCxDQUFXTyxTQUFYLENBQXFCTSxJQUFyQixDQUEwQlgsUUFBMUI7QUFDQSxXQUFLRixLQUFMLENBQVdTLGlCQUFYLENBQTZCLEtBQUtULEtBQUwsQ0FBV08sU0FBeEM7QUFDSCxLQXZCa0I7QUFBQSwrREF5QllMLFFBQUQsSUFBc0I7QUFDaEQsVUFBSSxLQUFLUSxLQUFMLENBQVdDLFdBQVgsS0FBMkJULFFBQS9CLEVBQXlDO0FBQ3pDLFdBQUtZLFFBQUwsQ0FBYztBQUFFSCxRQUFBQSxXQUFXLEVBQUVUO0FBQWYsT0FBZDtBQUNILEtBNUJrQjtBQUVmLFNBQUtRLEtBQUwsR0FBYTtBQUNUQyxNQUFBQSxXQUFXLEVBQUU7QUFESixLQUFiO0FBR0g7O0FBeUJEUixFQUFBQSxNQUFNLEdBQUc7QUFDTCxVQUFNWSwyQkFBMkIsR0FBRyxLQUFLZixLQUFMLENBQVdPLFNBQVgsQ0FBcUJTLEdBQXJCLENBQTBCbkIsQ0FBRCxJQUFPO0FBQ2hFLDBCQUFPLDZCQUFDLDBCQUFEO0FBQTRCLFFBQUEsUUFBUSxFQUFFQSxDQUF0QztBQUF5QyxRQUFBLFNBQVMsRUFBRSxLQUFLSSxTQUF6RDtBQUFvRSxRQUFBLEdBQUcsRUFBRUo7QUFBekUsUUFBUDtBQUNILEtBRm1DLENBQXBDOztBQUlBLFVBQU1vQixTQUFTLGdCQUNYLDZCQUFDLHlCQUFEO0FBQWtCLE1BQUEsT0FBTyxFQUFFLEtBQUtDLFVBQWhDO0FBQTRDLE1BQUEsSUFBSSxFQUFDO0FBQWpELE9BQ00seUJBQUcsS0FBSCxDQUROLENBREo7O0FBTUEsd0JBQ0k7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLE9BQ01ILDJCQUROLGVBRUk7QUFBTSxNQUFBLFFBQVEsRUFBRSxLQUFLRyxVQUFyQjtBQUFpQyxNQUFBLFVBQVUsRUFBRTtBQUE3QyxvQkFDSSw2QkFBQyxvQ0FBRDtBQUNJLE1BQUEsU0FBUyxFQUFDLG1EQURkO0FBRUksTUFBQSxLQUFLLEVBQUUsS0FBS1IsS0FBTCxDQUFXQyxXQUZ0QjtBQUdJLE1BQUEsY0FBYyxFQUFFLEtBQUtRO0FBSHpCLE1BREosRUFLTUYsU0FMTixDQUZKLENBREo7QUFZSDs7QUF0RGtILEMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMjEgxaBpbW9uIEJyYW5kbmVyIDxzaW1vbi5icmEuYWdAZ21haWwuY29tPlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgU3BlbGxDaGVja0xhbmd1YWdlc0Ryb3Bkb3duIGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzL3ZpZXdzL2VsZW1lbnRzL1NwZWxsQ2hlY2tMYW5ndWFnZXNEcm9wZG93blwiO1xuaW1wb3J0IEFjY2Vzc2libGVCdXR0b24gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvdmlld3MvZWxlbWVudHMvQWNjZXNzaWJsZUJ1dHRvblwiO1xuaW1wb3J0IHsgX3QgfSBmcm9tIFwiLi4vLi4vLi4vbGFuZ3VhZ2VIYW5kbGVyXCI7XG5pbXBvcnQgeyByZXBsYWNlYWJsZUNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy9yZXBsYWNlYWJsZUNvbXBvbmVudFwiO1xuXG5pbnRlcmZhY2UgRXhpc3RpbmdTcGVsbENoZWNrTGFuZ3VhZ2VJUHJvcHMge1xuICAgIGxhbmd1YWdlOiBzdHJpbmc7XG4gICAgb25SZW1vdmVkKGxhbmd1YWdlOiBzdHJpbmcpO1xufVxuXG5pbnRlcmZhY2UgU3BlbGxDaGVja0xhbmd1YWdlc0lQcm9wcyB7XG4gICAgbGFuZ3VhZ2VzOiBBcnJheTxzdHJpbmc+O1xuICAgIG9uTGFuZ3VhZ2VzQ2hhbmdlKGxhbmd1YWdlczogQXJyYXk8c3RyaW5nPik7XG59XG5cbmludGVyZmFjZSBTcGVsbENoZWNrTGFuZ3VhZ2VzSVN0YXRlIHtcbiAgICBuZXdMYW5ndWFnZTogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgRXhpc3RpbmdTcGVsbENoZWNrTGFuZ3VhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8RXhpc3RpbmdTcGVsbENoZWNrTGFuZ3VhZ2VJUHJvcHM+IHtcbiAgICBwcml2YXRlIG9uUmVtb3ZlID0gKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLm9uUmVtb3ZlZCh0aGlzLnByb3BzLmxhbmd1YWdlKTtcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9FeGlzdGluZ1NwZWxsQ2hlY2tMYW5ndWFnZVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm14X0V4aXN0aW5nU3BlbGxDaGVja0xhbmd1YWdlX2xhbmd1YWdlXCI+eyB0aGlzLnByb3BzLmxhbmd1YWdlIH08L3NwYW4+XG4gICAgICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24gb25DbGljaz17dGhpcy5vblJlbW92ZX0ga2luZD1cImRhbmdlcl9zbVwiPlxuICAgICAgICAgICAgICAgICAgICB7IF90KFwiUmVtb3ZlXCIpIH1cbiAgICAgICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbkByZXBsYWNlYWJsZUNvbXBvbmVudChcInZpZXdzLnNldHRpbmdzLlNwZWxsQ2hlY2tMYW5ndWFnZXNcIilcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwZWxsQ2hlY2tMYW5ndWFnZXMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8U3BlbGxDaGVja0xhbmd1YWdlc0lQcm9wcywgU3BlbGxDaGVja0xhbmd1YWdlc0lTdGF0ZT4ge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIG5ld0xhbmd1YWdlOiBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgb25SZW1vdmVkID0gKGxhbmd1YWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VzID0gdGhpcy5wcm9wcy5sYW5ndWFnZXMuZmlsdGVyKChlKSA9PiBlICE9PSBsYW5ndWFnZSk7XG4gICAgICAgIHRoaXMucHJvcHMub25MYW5ndWFnZXNDaGFuZ2UobGFuZ3VhZ2VzKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvbkFkZENsaWNrID0gKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IGxhbmd1YWdlID0gdGhpcy5zdGF0ZS5uZXdMYW5ndWFnZTtcblxuICAgICAgICBpZiAoIWxhbmd1YWdlKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxhbmd1YWdlcy5pbmNsdWRlcyhsYW5ndWFnZSkpIHJldHVybjtcblxuICAgICAgICB0aGlzLnByb3BzLmxhbmd1YWdlcy5wdXNoKGxhbmd1YWdlKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkxhbmd1YWdlc0NoYW5nZSh0aGlzLnByb3BzLmxhbmd1YWdlcyk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25OZXdMYW5ndWFnZUNoYW5nZSA9IChsYW5ndWFnZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm5ld0xhbmd1YWdlID09PSBsYW5ndWFnZSkgcmV0dXJuO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbmV3TGFuZ3VhZ2U6IGxhbmd1YWdlIH0pO1xuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3BlbGxDaGVja0xhbmd1YWdlcyA9IHRoaXMucHJvcHMubGFuZ3VhZ2VzLm1hcCgoZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIDxFeGlzdGluZ1NwZWxsQ2hlY2tMYW5ndWFnZSBsYW5ndWFnZT17ZX0gb25SZW1vdmVkPXt0aGlzLm9uUmVtb3ZlZH0ga2V5PXtlfSAvPjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gKFxuICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24gb25DbGljaz17dGhpcy5vbkFkZENsaWNrfSBraW5kPVwicHJpbWFyeVwiPlxuICAgICAgICAgICAgICAgIHsgX3QoXCJBZGRcIikgfVxuICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NwZWxsQ2hlY2tMYW5ndWFnZXNcIj5cbiAgICAgICAgICAgICAgICB7IGV4aXN0aW5nU3BlbGxDaGVja0xhbmd1YWdlcyB9XG4gICAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMub25BZGRDbGlja30gbm9WYWxpZGF0ZT17dHJ1ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxTcGVsbENoZWNrTGFuZ3VhZ2VzRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X0dlbmVyYWxVc2VyU2V0dGluZ3NUYWJfc3BlbGxDaGVja0xhbmd1YWdlSW5wdXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubmV3TGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbk9wdGlvbkNoYW5nZT17dGhpcy5vbk5ld0xhbmd1YWdlQ2hhbmdlfSAvPlxuICAgICAgICAgICAgICAgICAgICB7IGFkZEJ1dHRvbiB9XG4gICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIl19