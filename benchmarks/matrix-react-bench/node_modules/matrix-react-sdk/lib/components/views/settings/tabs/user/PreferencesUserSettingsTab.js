"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _event = require("matrix-js-sdk/src/@types/event");

var _languageHandler = require("../../../../../languageHandler");

var _LabelledToggleSwitch = _interopRequireDefault(require("../../../elements/LabelledToggleSwitch"));

var _SettingsStore = _interopRequireDefault(require("../../../../../settings/SettingsStore"));

var _Field = _interopRequireDefault(require("../../../elements/Field"));

var _PlatformPeg = _interopRequireDefault(require("../../../../../PlatformPeg"));

var _SettingLevel = require("../../../../../settings/SettingLevel");

var _replaceableComponent = require("../../../../../utils/replaceableComponent");

var _SettingsFlag = _interopRequireDefault(require("../../../elements/SettingsFlag"));

var KeyboardShortcuts = _interopRequireWildcard(require("../../../../../accessibility/KeyboardShortcuts"));

var _AccessibleButton = _interopRequireDefault(require("../../../elements/AccessibleButton"));

var _GroupAvatar = _interopRequireDefault(require("../../../avatars/GroupAvatar"));

var _dispatcher = _interopRequireDefault(require("../../../../../dispatcher/dispatcher"));

var _GroupActions = _interopRequireDefault(require("../../../../../actions/GroupActions"));

var _MatrixClientContext = _interopRequireDefault(require("../../../../../contexts/MatrixClientContext"));

var _useDispatcher = require("../../../../../hooks/useDispatcher");

var _CreateSpaceFromCommunityDialog = require("../../../dialogs/CreateSpaceFromCommunityDialog");

var _space = require("../../../../../utils/space");

var _Spinner = _interopRequireDefault(require("../../../elements/Spinner"));

var _dec, _class, _class2, _temp;

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

const CommunityMigrator = ({
  onFinished
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const [communities, setCommunities] = (0, _react.useState)(null);
  (0, _react.useEffect)(() => {
    _dispatcher.default.dispatch(_GroupActions.default.fetchJoinedGroups(cli));
  }, [cli]);
  (0, _useDispatcher.useDispatcher)(_dispatcher.default, async payload => {
    if (payload.action === "GroupActions.fetchJoinedGroups.success") {
      const communities = [];
      const migratedSpaceMap = new Map(cli.getRooms().map(room => {
        var _room$currentState$ge;

        const createContent = (_room$currentState$ge = room.currentState.getStateEvents(_event.EventType.RoomCreate, "")) === null || _room$currentState$ge === void 0 ? void 0 : _room$currentState$ge.getContent();

        if (createContent !== null && createContent !== void 0 && createContent[_CreateSpaceFromCommunityDialog.CreateEventField]) {
          return [createContent[_CreateSpaceFromCommunityDialog.CreateEventField], room.roomId];
        }
      }).filter(Boolean));

      for (const groupId of payload.result.groups) {
        const summary = await cli.getGroupSummary(groupId);

        if (summary.user.is_privileged) {
          communities.push(_objectSpread(_objectSpread({}, summary), {}, {
            groupId,
            spaceId: migratedSpaceMap.get(groupId)
          }));
        }
      }

      setCommunities(communities);
    }
  });

  if (!communities) {
    return /*#__PURE__*/_react.default.createElement(_Spinner.default, null);
  }

  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_PreferencesUserSettingsTab_CommunityMigrator"
  }, communities.map(community => /*#__PURE__*/_react.default.createElement("div", {
    key: community.groupId
  }, /*#__PURE__*/_react.default.createElement(_GroupAvatar.default, {
    groupId: community.groupId,
    groupAvatarUrl: community.profile.avatar_url,
    groupName: community.profile.name,
    width: 32,
    height: 32
  }), community.profile.name, /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    kind: "primary_outline",
    onClick: () => {
      if (community.spaceId) {
        _dispatcher.default.dispatch({
          action: "view_room",
          room_id: community.spaceId
        });

        onFinished();
      } else {
        (0, _space.createSpaceFromCommunity)(cli, community.groupId).then(([spaceId]) => {
          if (spaceId) {
            community.spaceId = spaceId;
            setCommunities([...communities]); // force component re-render
          }
        });
      }
    }
  }, community.spaceId ? (0, _languageHandler._t)("Open Space") : (0, _languageHandler._t)("Create Space")))));
};

let PreferencesUserSettingsTab = (_dec = (0, _replaceableComponent.replaceableComponent)("views.settings.tabs.user.PreferencesUserSettingsTab"), _dec(_class = (_temp = _class2 = class PreferencesUserSettingsTab extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onAutoLaunchChange", checked => {
      _PlatformPeg.default.get().setAutoLaunchEnabled(checked).then(() => this.setState({
        autoLaunch: checked
      }));
    });
    (0, _defineProperty2.default)(this, "onWarnBeforeExitChange", checked => {
      _PlatformPeg.default.get().setWarnBeforeExit(checked).then(() => this.setState({
        warnBeforeExit: checked
      }));
    });
    (0, _defineProperty2.default)(this, "onAlwaysShowMenuBarChange", checked => {
      _PlatformPeg.default.get().setAutoHideMenuBarEnabled(!checked).then(() => this.setState({
        alwaysShowMenuBar: checked
      }));
    });
    (0, _defineProperty2.default)(this, "onMinimizeToTrayChange", checked => {
      _PlatformPeg.default.get().setMinimizeToTrayEnabled(checked).then(() => this.setState({
        minimizeToTray: checked
      }));
    });
    (0, _defineProperty2.default)(this, "onAutocompleteDelayChange", e => {
      this.setState({
        autocompleteDelay: e.target.value
      });

      _SettingsStore.default.setValue("autocompleteDelay", null, _SettingLevel.SettingLevel.DEVICE, e.target.value);
    });
    (0, _defineProperty2.default)(this, "onReadMarkerInViewThresholdMs", e => {
      this.setState({
        readMarkerInViewThresholdMs: e.target.value
      });

      _SettingsStore.default.setValue("readMarkerInViewThresholdMs", null, _SettingLevel.SettingLevel.DEVICE, e.target.value);
    });
    (0, _defineProperty2.default)(this, "onReadMarkerOutOfViewThresholdMs", e => {
      this.setState({
        readMarkerOutOfViewThresholdMs: e.target.value
      });

      _SettingsStore.default.setValue("readMarkerOutOfViewThresholdMs", null, _SettingLevel.SettingLevel.DEVICE, e.target.value);
    });
    this.state = {
      autoLaunch: false,
      autoLaunchSupported: false,
      warnBeforeExit: true,
      warnBeforeExitSupported: false,
      alwaysShowMenuBar: true,
      alwaysShowMenuBarSupported: false,
      minimizeToTray: true,
      minimizeToTraySupported: false,
      autocompleteDelay: _SettingsStore.default.getValueAt(_SettingLevel.SettingLevel.DEVICE, 'autocompleteDelay').toString(10),
      readMarkerInViewThresholdMs: _SettingsStore.default.getValueAt(_SettingLevel.SettingLevel.DEVICE, 'readMarkerInViewThresholdMs').toString(10),
      readMarkerOutOfViewThresholdMs: _SettingsStore.default.getValueAt(_SettingLevel.SettingLevel.DEVICE, 'readMarkerOutOfViewThresholdMs').toString(10)
    };
  }

  async componentDidMount() {
    const platform = _PlatformPeg.default.get();

    const autoLaunchSupported = await platform.supportsAutoLaunch();
    let autoLaunch = false;

    if (autoLaunchSupported) {
      autoLaunch = await platform.getAutoLaunchEnabled();
    }

    const warnBeforeExitSupported = await platform.supportsWarnBeforeExit();
    let warnBeforeExit = false;

    if (warnBeforeExitSupported) {
      warnBeforeExit = await platform.shouldWarnBeforeExit();
    }

    const alwaysShowMenuBarSupported = await platform.supportsAutoHideMenuBar();
    let alwaysShowMenuBar = true;

    if (alwaysShowMenuBarSupported) {
      alwaysShowMenuBar = !(await platform.getAutoHideMenuBarEnabled());
    }

    const minimizeToTraySupported = await platform.supportsMinimizeToTray();
    let minimizeToTray = true;

    if (minimizeToTraySupported) {
      minimizeToTray = await platform.getMinimizeToTrayEnabled();
    }

    this.setState({
      autoLaunch,
      autoLaunchSupported,
      warnBeforeExit,
      warnBeforeExitSupported,
      alwaysShowMenuBarSupported,
      alwaysShowMenuBar,
      minimizeToTraySupported,
      minimizeToTray
    });
  }

  renderGroup(settingIds, level = _SettingLevel.SettingLevel.ACCOUNT) {
    return settingIds.map(i => {
      const disabled = !_SettingsStore.default.isEnabled(i);
      return /*#__PURE__*/_react.default.createElement(_SettingsFlag.default, {
        key: i,
        name: i,
        level: level,
        disabled: disabled
      });
    });
  }

  render() {
    let autoLaunchOption = null;

    if (this.state.autoLaunchSupported) {
      autoLaunchOption = /*#__PURE__*/_react.default.createElement(_LabelledToggleSwitch.default, {
        value: this.state.autoLaunch,
        onChange: this.onAutoLaunchChange,
        label: (0, _languageHandler._t)('Start automatically after system login')
      });
    }

    let warnBeforeExitOption = null;

    if (this.state.warnBeforeExitSupported) {
      warnBeforeExitOption = /*#__PURE__*/_react.default.createElement(_LabelledToggleSwitch.default, {
        value: this.state.warnBeforeExit,
        onChange: this.onWarnBeforeExitChange,
        label: (0, _languageHandler._t)('Warn before quitting')
      });
    }

    let autoHideMenuOption = null;

    if (this.state.alwaysShowMenuBarSupported) {
      autoHideMenuOption = /*#__PURE__*/_react.default.createElement(_LabelledToggleSwitch.default, {
        value: this.state.alwaysShowMenuBar,
        onChange: this.onAlwaysShowMenuBarChange,
        label: (0, _languageHandler._t)('Always show the window menu bar')
      });
    }

    let minimizeToTrayOption = null;

    if (this.state.minimizeToTraySupported) {
      minimizeToTrayOption = /*#__PURE__*/_react.default.createElement(_LabelledToggleSwitch.default, {
        value: this.state.minimizeToTray,
        onChange: this.onMinimizeToTrayChange,
        label: (0, _languageHandler._t)('Show tray icon and minimise window to it on close')
      });
    }

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab mx_PreferencesUserSettingsTab"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_heading"
    }, (0, _languageHandler._t)("Preferences")), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Room list")), this.renderGroup(PreferencesUserSettingsTab.ROOM_LIST_SETTINGS)), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Spaces")), this.renderGroup(PreferencesUserSettingsTab.SPACES_SETTINGS, _SettingLevel.SettingLevel.ACCOUNT)), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Communities")), /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("Communities have been archived to make way for Spaces but you can convert your " + "communities into Spaces below. Converting will ensure your conversations get the latest " + "features.")), /*#__PURE__*/_react.default.createElement("details", null, /*#__PURE__*/_react.default.createElement("summary", null, (0, _languageHandler._t)("Show my Communities")), /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("If a community isn't shown you may not have permission to convert it.")), /*#__PURE__*/_react.default.createElement(CommunityMigrator, {
      onFinished: this.props.closeSettingsFn
    })), this.renderGroup(PreferencesUserSettingsTab.COMMUNITIES_SETTINGS, _SettingLevel.SettingLevel.DEVICE)), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Keyboard shortcuts")), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: "mx_SettingsFlag",
      onClick: KeyboardShortcuts.toggleDialog
    }, (0, _languageHandler._t)("To view all keyboard shortcuts, click here.")), this.renderGroup(PreferencesUserSettingsTab.KEYBINDINGS_SETTINGS)), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Displaying time")), this.renderGroup(PreferencesUserSettingsTab.TIME_SETTINGS)), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Composer")), this.renderGroup(PreferencesUserSettingsTab.COMPOSER_SETTINGS)), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Code blocks")), this.renderGroup(PreferencesUserSettingsTab.CODE_BLOCKS_SETTINGS)), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Images, GIFs and videos")), this.renderGroup(PreferencesUserSettingsTab.IMAGES_AND_VIDEOS_SETTINGS)), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("Timeline")), this.renderGroup(PreferencesUserSettingsTab.TIMELINE_SETTINGS)), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SettingsTab_section"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_SettingsTab_subheading"
    }, (0, _languageHandler._t)("General")), this.renderGroup(PreferencesUserSettingsTab.GENERAL_SETTINGS), minimizeToTrayOption, autoHideMenuOption, autoLaunchOption, warnBeforeExitOption, /*#__PURE__*/_react.default.createElement(_Field.default, {
      label: (0, _languageHandler._t)('Autocomplete delay (ms)'),
      type: "number",
      value: this.state.autocompleteDelay,
      onChange: this.onAutocompleteDelayChange
    }), /*#__PURE__*/_react.default.createElement(_Field.default, {
      label: (0, _languageHandler._t)('Read Marker lifetime (ms)'),
      type: "number",
      value: this.state.readMarkerInViewThresholdMs,
      onChange: this.onReadMarkerInViewThresholdMs
    }), /*#__PURE__*/_react.default.createElement(_Field.default, {
      label: (0, _languageHandler._t)('Read Marker off-screen lifetime (ms)'),
      type: "number",
      value: this.state.readMarkerOutOfViewThresholdMs,
      onChange: this.onReadMarkerOutOfViewThresholdMs
    })));
  }

}, (0, _defineProperty2.default)(_class2, "ROOM_LIST_SETTINGS", ['breadcrumbs']), (0, _defineProperty2.default)(_class2, "SPACES_SETTINGS", ["Spaces.allRoomsInHome"]), (0, _defineProperty2.default)(_class2, "COMMUNITIES_SETTINGS", ["showCommunitiesInsteadOfSpaces"]), (0, _defineProperty2.default)(_class2, "KEYBINDINGS_SETTINGS", ['ctrlFForSearch']), (0, _defineProperty2.default)(_class2, "COMPOSER_SETTINGS", ['MessageComposerInput.autoReplaceEmoji', 'MessageComposerInput.suggestEmoji', 'sendTypingNotifications', 'MessageComposerInput.ctrlEnterToSend', 'MessageComposerInput.surroundWith', 'MessageComposerInput.showStickersButton']), (0, _defineProperty2.default)(_class2, "TIME_SETTINGS", ['showTwelveHourTimestamps', 'alwaysShowTimestamps']), (0, _defineProperty2.default)(_class2, "CODE_BLOCKS_SETTINGS", ['enableSyntaxHighlightLanguageDetection', 'expandCodeByDefault', 'showCodeLineNumbers']), (0, _defineProperty2.default)(_class2, "IMAGES_AND_VIDEOS_SETTINGS", ['urlPreviewsEnabled', 'autoplayGifs', 'autoplayVideo', 'showImages']), (0, _defineProperty2.default)(_class2, "TIMELINE_SETTINGS", ['showTypingNotifications', 'showRedactions', 'showReadReceipts', 'showJoinLeaves', 'showDisplaynameChanges', 'showChatEffects', 'showAvatarChanges', 'Pill.shouldShowPillAvatar', 'TextualBody.enableBigEmoji', 'scrollToBottomOnMessageSent']), (0, _defineProperty2.default)(_class2, "GENERAL_SETTINGS", ['TagPanel.enableTagPanel', 'promptBeforeInviteUnknownUsers' // Start automatically after startup (electron-only)
// Autocomplete delay (niche text box)
]), _temp)) || _class);
exports.default = PreferencesUserSettingsTab;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3NldHRpbmdzL3RhYnMvdXNlci9QcmVmZXJlbmNlc1VzZXJTZXR0aW5nc1RhYi50c3giXSwibmFtZXMiOlsiQ29tbXVuaXR5TWlncmF0b3IiLCJvbkZpbmlzaGVkIiwiY2xpIiwiTWF0cml4Q2xpZW50Q29udGV4dCIsImNvbW11bml0aWVzIiwic2V0Q29tbXVuaXRpZXMiLCJkaXMiLCJkaXNwYXRjaCIsIkdyb3VwQWN0aW9ucyIsImZldGNoSm9pbmVkR3JvdXBzIiwicGF5bG9hZCIsImFjdGlvbiIsIm1pZ3JhdGVkU3BhY2VNYXAiLCJNYXAiLCJnZXRSb29tcyIsIm1hcCIsInJvb20iLCJjcmVhdGVDb250ZW50IiwiY3VycmVudFN0YXRlIiwiZ2V0U3RhdGVFdmVudHMiLCJFdmVudFR5cGUiLCJSb29tQ3JlYXRlIiwiZ2V0Q29udGVudCIsIkNyZWF0ZUV2ZW50RmllbGQiLCJyb29tSWQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiZ3JvdXBJZCIsInJlc3VsdCIsImdyb3VwcyIsInN1bW1hcnkiLCJnZXRHcm91cFN1bW1hcnkiLCJ1c2VyIiwiaXNfcHJpdmlsZWdlZCIsInB1c2giLCJzcGFjZUlkIiwiZ2V0IiwiY29tbXVuaXR5IiwicHJvZmlsZSIsImF2YXRhcl91cmwiLCJuYW1lIiwicm9vbV9pZCIsInRoZW4iLCJQcmVmZXJlbmNlc1VzZXJTZXR0aW5nc1RhYiIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsImNoZWNrZWQiLCJQbGF0Zm9ybVBlZyIsInNldEF1dG9MYXVuY2hFbmFibGVkIiwic2V0U3RhdGUiLCJhdXRvTGF1bmNoIiwic2V0V2FybkJlZm9yZUV4aXQiLCJ3YXJuQmVmb3JlRXhpdCIsInNldEF1dG9IaWRlTWVudUJhckVuYWJsZWQiLCJhbHdheXNTaG93TWVudUJhciIsInNldE1pbmltaXplVG9UcmF5RW5hYmxlZCIsIm1pbmltaXplVG9UcmF5IiwiZSIsImF1dG9jb21wbGV0ZURlbGF5IiwidGFyZ2V0IiwidmFsdWUiLCJTZXR0aW5nc1N0b3JlIiwic2V0VmFsdWUiLCJTZXR0aW5nTGV2ZWwiLCJERVZJQ0UiLCJyZWFkTWFya2VySW5WaWV3VGhyZXNob2xkTXMiLCJyZWFkTWFya2VyT3V0T2ZWaWV3VGhyZXNob2xkTXMiLCJzdGF0ZSIsImF1dG9MYXVuY2hTdXBwb3J0ZWQiLCJ3YXJuQmVmb3JlRXhpdFN1cHBvcnRlZCIsImFsd2F5c1Nob3dNZW51QmFyU3VwcG9ydGVkIiwibWluaW1pemVUb1RyYXlTdXBwb3J0ZWQiLCJnZXRWYWx1ZUF0IiwidG9TdHJpbmciLCJjb21wb25lbnREaWRNb3VudCIsInBsYXRmb3JtIiwic3VwcG9ydHNBdXRvTGF1bmNoIiwiZ2V0QXV0b0xhdW5jaEVuYWJsZWQiLCJzdXBwb3J0c1dhcm5CZWZvcmVFeGl0Iiwic2hvdWxkV2FybkJlZm9yZUV4aXQiLCJzdXBwb3J0c0F1dG9IaWRlTWVudUJhciIsImdldEF1dG9IaWRlTWVudUJhckVuYWJsZWQiLCJzdXBwb3J0c01pbmltaXplVG9UcmF5IiwiZ2V0TWluaW1pemVUb1RyYXlFbmFibGVkIiwicmVuZGVyR3JvdXAiLCJzZXR0aW5nSWRzIiwibGV2ZWwiLCJBQ0NPVU5UIiwiaSIsImRpc2FibGVkIiwiaXNFbmFibGVkIiwicmVuZGVyIiwiYXV0b0xhdW5jaE9wdGlvbiIsIm9uQXV0b0xhdW5jaENoYW5nZSIsIndhcm5CZWZvcmVFeGl0T3B0aW9uIiwib25XYXJuQmVmb3JlRXhpdENoYW5nZSIsImF1dG9IaWRlTWVudU9wdGlvbiIsIm9uQWx3YXlzU2hvd01lbnVCYXJDaGFuZ2UiLCJtaW5pbWl6ZVRvVHJheU9wdGlvbiIsIm9uTWluaW1pemVUb1RyYXlDaGFuZ2UiLCJST09NX0xJU1RfU0VUVElOR1MiLCJTUEFDRVNfU0VUVElOR1MiLCJjbG9zZVNldHRpbmdzRm4iLCJDT01NVU5JVElFU19TRVRUSU5HUyIsIktleWJvYXJkU2hvcnRjdXRzIiwidG9nZ2xlRGlhbG9nIiwiS0VZQklORElOR1NfU0VUVElOR1MiLCJUSU1FX1NFVFRJTkdTIiwiQ09NUE9TRVJfU0VUVElOR1MiLCJDT0RFX0JMT0NLU19TRVRUSU5HUyIsIklNQUdFU19BTkRfVklERU9TX1NFVFRJTkdTIiwiVElNRUxJTkVfU0VUVElOR1MiLCJHRU5FUkFMX1NFVFRJTkdTIiwib25BdXRvY29tcGxldGVEZWxheUNoYW5nZSIsIm9uUmVhZE1hcmtlckluVmlld1RocmVzaG9sZE1zIiwib25SZWFkTWFya2VyT3V0T2ZWaWV3VGhyZXNob2xkTXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBaUJBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7QUF5QkEsTUFBTUEsaUJBQWlCLEdBQUcsQ0FBQztBQUFFQyxFQUFBQTtBQUFGLENBQUQsS0FBb0I7QUFDMUMsUUFBTUMsR0FBRyxHQUFHLHVCQUFXQyw0QkFBWCxDQUFaO0FBQ0EsUUFBTSxDQUFDQyxXQUFELEVBQWNDLGNBQWQsSUFBZ0MscUJBQXNCLElBQXRCLENBQXRDO0FBQ0Esd0JBQVUsTUFBTTtBQUNaQyx3QkFBSUMsUUFBSixDQUFhQyxzQkFBYUMsaUJBQWIsQ0FBK0JQLEdBQS9CLENBQWI7QUFDSCxHQUZELEVBRUcsQ0FBQ0EsR0FBRCxDQUZIO0FBR0Esb0NBQWNJLG1CQUFkLEVBQW1CLE1BQU1JLE9BQU4sSUFBaUI7QUFDaEMsUUFBSUEsT0FBTyxDQUFDQyxNQUFSLEtBQW1CLHdDQUF2QixFQUFpRTtBQUM3RCxZQUFNUCxXQUF3QixHQUFHLEVBQWpDO0FBRUEsWUFBTVEsZ0JBQWdCLEdBQUcsSUFBSUMsR0FBSixDQUFRWCxHQUFHLENBQUNZLFFBQUosR0FBZUMsR0FBZixDQUFtQkMsSUFBSSxJQUFJO0FBQUE7O0FBQ3hELGNBQU1DLGFBQWEsNEJBQUdELElBQUksQ0FBQ0Us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SHRCO0FBSUksTUFBQSxRQUFRLEVBQUUsS0FBS2lEO0FBSm5CLE1BWkosZUFpQkksNkJBQUMsY0FBRDtBQUNJLE1BQUEsS0FBSyxFQUFFLHlCQUFHLHNDQUFILENBRFg7QUFFSSxNQUFBLElBQUksRUFBQyxRQUZUO0FBR0ksTUFBQSxLQUFLLEVBQUUsS0FBSy9DLEtBQUwsQ0FBV0QsOEJBSHRCO0FBSUksTUFBQSxRQUFRLEVBQUUsS0FBS2lEO0FBSm5CLE1BakJKLENBM0RKLENBREo7QUFxRkg7O0FBdlJtRixDLCtEQUN4RCxDQUN4QixhQUR3QixDLDZEQUlILENBQ3JCLHVCQURxQixDLGtFQUlLLENBQzFCLGdDQUQwQixDLGtFQUlBLENBQzFCLGdCQUQwQixDLCtEQUlILENBQ3ZCLHVDQUR1QixFQUV2QixtQ0FGdUIsRUFHdkIseUJBSHVCLEVBSXZCLHNDQUp1QixFQUt2QixtQ0FMdUIsRUFNdkIseUNBTnVCLEMsMkRBU0osQ0FDbkIsMEJBRG1CLEVBRW5CLHNCQUZtQixDLGtFQUlPLENBQzFCLHdDQUQwQixFQUUxQixxQkFGMEIsRUFHMUIscUJBSDBCLEMsd0VBS00sQ0FDaEMsb0JBRGdDLEVBRWhDLGNBRmdDLEVBR2hDLGVBSGdDLEVBSWhDLFlBSmdDLEMsK0RBTVQsQ0FDdkIseUJBRHVCLEVBRXZCLGdCQUZ1QixFQUd2QixrQkFIdUIsRUFJdkIsZ0JBSnVCLEVBS3ZCLHdCQUx1QixFQU12QixpQkFOdUIsRUFPdkIsbUJBUHVCLEVBUXZCLDJCQVJ1QixFQVN2Qiw0QkFUdUIsRUFVdkIsNkJBVnVCLEMsOERBWUQsQ0FDdEIseUJBRHNCLEVBRXRCLGdDQUZzQixDQUd0QjtBQUNBO0FBSnNCLEMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMTktMjAyMSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuQ29weXJpZ2h0IDIwMTkgTWljaGFlbCBUZWxhdHluc2tpIDw3dDNjaGd1eUBnbWFpbC5jb20+XG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBFdmVudFR5cGUgfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9AdHlwZXMvZXZlbnQnO1xuXG5pbXBvcnQgeyBfdCB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9sYW5ndWFnZUhhbmRsZXJcIjtcbmltcG9ydCBMYWJlbGxlZFRvZ2dsZVN3aXRjaCBmcm9tIFwiLi4vLi4vLi4vZWxlbWVudHMvTGFiZWxsZWRUb2dnbGVTd2l0Y2hcIjtcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCIuLi8uLi8uLi8uLi8uLi9zZXR0aW5ncy9TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgRmllbGQgZnJvbSBcIi4uLy4uLy4uL2VsZW1lbnRzL0ZpZWxkXCI7XG5pbXBvcnQgUGxhdGZvcm1QZWcgZnJvbSBcIi4uLy4uLy4uLy4uLy4uL1BsYXRmb3JtUGVnXCI7XG5pbXBvcnQgeyBTZXR0aW5nTGV2ZWwgfSBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vc2V0dGluZ3MvU2V0dGluZ0xldmVsXCI7XG5pbXBvcnQgeyByZXBsYWNlYWJsZUNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlscy9yZXBsYWNlYWJsZUNvbXBvbmVudFwiO1xuaW1wb3J0IFNldHRpbmdzRmxhZyBmcm9tICcuLi8uLi8uLi9lbGVtZW50cy9TZXR0aW5nc0ZsYWcnO1xuaW1wb3J0ICogYXMgS2V5Ym9hcmRTaG9ydGN1dHMgZnJvbSBcIi4uLy4uLy4uLy4uLy4uL2FjY2Vzc2liaWxpdHkvS2V5Ym9hcmRTaG9ydGN1dHNcIjtcbmltcG9ydCBBY2Nlc3NpYmxlQnV0dG9uIGZyb20gXCIuLi8uLi8uLi9lbGVtZW50cy9BY2Nlc3NpYmxlQnV0dG9uXCI7XG5pbXBvcnQgR3JvdXBBdmF0YXIgZnJvbSBcIi4uLy4uLy4uL2F2YXRhcnMvR3JvdXBBdmF0YXJcIjtcbmltcG9ydCBkaXMgZnJvbSBcIi4uLy4uLy4uLy4uLy4uL2Rpc3BhdGNoZXIvZGlzcGF0Y2hlclwiO1xuaW1wb3J0IEdyb3VwQWN0aW9ucyBmcm9tIFwiLi4vLi4vLi4vLi4vLi4vYWN0aW9ucy9Hcm91cEFjdGlvbnNcIjtcbmltcG9ydCBNYXRyaXhDbGllbnRDb250ZXh0IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9jb250ZXh0cy9NYXRyaXhDbGllbnRDb250ZXh0XCI7XG5pbXBvcnQgeyB1c2VEaXNwYXRjaGVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uLy4uL2hvb2tzL3VzZURpc3BhdGNoZXJcIjtcbmltcG9ydCB7IENyZWF0ZUV2ZW50RmllbGQsIElHcm91cFN1bW1hcnkgfSBmcm9tIFwiLi4vLi4vLi4vZGlhbG9ncy9DcmVhdGVTcGFjZUZyb21Db21tdW5pdHlEaWFsb2dcIjtcbmltcG9ydCB7IGNyZWF0ZVNwYWNlRnJvbUNvbW11bml0eSB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlscy9zcGFjZVwiO1xuaW1wb3J0IFNwaW5uZXIgZnJvbSBcIi4uLy4uLy4uL2VsZW1lbnRzL1NwaW5uZXJcIjtcblxuaW50ZXJmYWNlIElQcm9wcyB7XG4gICAgY2xvc2VTZXR0aW5nc0ZuKHN1Y2Nlc3M6IGJvb2xlYW4pOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgSVN0YXRlIHtcbiAgICBhdXRvTGF1bmNoOiBib29sZWFuO1xuICAgIGF1dG9MYXVuY2hTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gICAgd2FybkJlZm9yZUV4aXQ6IGJvb2xlYW47XG4gICAgd2FybkJlZm9yZUV4aXRTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gICAgYWx3YXlzU2hvd01lbnVCYXJTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gICAgYWx3YXlzU2hvd01lbnVCYXI6IGJvb2xlYW47XG4gICAgbWluaW1pemVUb1RyYXlTdXBwb3J0ZWQ6IGJvb2xlYW47XG4gICAgbWluaW1pemVUb1RyYXk6IGJvb2xlYW47XG4gICAgYXV0b2NvbXBsZXRlRGVsYXk6IHN0cmluZztcbiAgICByZWFkTWFya2VySW5WaWV3VGhyZXNob2xkTXM6IHN0cmluZztcbiAgICByZWFkTWFya2VyT3V0T2ZWaWV3VGhyZXNob2xkTXM6IHN0cmluZztcbn1cblxudHlwZSBDb21tdW5pdHkgPSBJR3JvdXBTdW1tYXJ5ICYge1xuICAgIGdyb3VwSWQ6IHN0cmluZztcbiAgICBzcGFjZUlkPzogc3RyaW5nO1xufTtcblxuY29uc3QgQ29tbXVuaXR5TWlncmF0b3IgPSAoeyBvbkZpbmlzaGVkIH0pID0+IHtcbiAgICBjb25zdCBjbGkgPSB1c2VDb250ZXh0KE1hdHJpeENsaWVudENvbnRleHQpO1xuICAgIGNvbnN0IFtjb21tdW5pdGllcywgc2V0Q29tbXVuaXRpZXNdID0gdXNlU3RhdGU8Q29tbXVuaXR5W10+KG51bGwpO1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGRpcy5kaXNwYXRjaChHcm91cEFjdGlvbnMuZmV0Y2hKb2luZWRHcm91cHMoY2xpKSk7XG4gICAgfSwgW2NsaV0pO1xuICAgIHVzZURpc3BhdGNoZXIoZGlzLCBhc3luYyBwYXlsb2FkID0+IHtcbiAgICAgICAgaWYgKHBheWxvYWQuYWN0aW9uID09PSBcIkdyb3VwQWN0aW9ucy5mZXRjaEpvaW5lZEdyb3Vwcy5zdWNjZXNzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW11bml0aWVzOiBDb21tdW5pdHlbXSA9IFtdO1xuXG4gICAgICAgICAgICBjb25zdCBtaWdyYXRlZFNwYWNlTWFwID0gbmV3IE1hcChjbGkuZ2V0Um9vbXMoKS5tYXAocm9vbSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlQ29udGVudCA9IHJvb20uY3VycmVudFN0YXRlLmdldFN0YXRlRXZlbnRzKEV2ZW50VHlwZS5Sb29tQ3JlYXRlLCBcIlwiKT8uZ2V0Q29udGVudCgpO1xuICAgICAgICAgICAgICAgIGlmIChjcmVhdGVDb250ZW50Py5bQ3JlYXRlRXZlbnRGaWVsZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtjcmVhdGVDb250ZW50W0NyZWF0ZUV2ZW50RmllbGRdLCByb29tLnJvb21JZF0gYXMgW3N0cmluZywgc3RyaW5nXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5maWx0ZXIoQm9vbGVhbikpO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGdyb3VwSWQgb2YgcGF5bG9hZC5yZXN1bHQuZ3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGF3YWl0IGNsaS5nZXRHcm91cFN1bW1hcnkoZ3JvdXBJZCkgYXMgSUdyb3VwU3VtbWFyeTtcbiAgICAgICAgICAgICAgICBpZiAoc3VtbWFyeS51c2VyLmlzX3ByaXZpbGVnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbXVuaXRpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5zdW1tYXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlSWQ6IG1pZ3JhdGVkU3BhY2VNYXAuZ2V0KGdyb3VwSWQpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldENvbW11bml0aWVzKGNvbW11bml0aWVzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFjb21tdW5pdGllcykge1xuICAgICAgICByZXR1cm4gPFNwaW5uZXIgLz47XG4gICAgfVxuXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwibXhfUHJlZmVyZW5jZXNVc2VyU2V0dGluZ3NUYWJfQ29tbXVuaXR5TWlncmF0b3JcIj5cbiAgICAgICAgeyBjb21tdW5pdGllcy5tYXAoY29tbXVuaXR5ID0+IChcbiAgICAgICAgICAgIDxkaXYga2V5PXtjb21tdW5pdHkuZ3JvdXBJZH0+XG4gICAgICAgICAgICAgICAgPEdyb3VwQXZhdGFyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ9e2NvbW11bml0eS5ncm91cElkfVxuICAgICAgICAgICAgICAgICAgICBncm91cEF2YXRhclVybD17Y29tbXVuaXR5LnByb2ZpbGUuYXZhdGFyX3VybH1cbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBOYW1lPXtjb21tdW5pdHkucHJvZmlsZS5uYW1lfVxuICAgICAgICAgICAgICAgICAgICB3aWR0aD17MzJ9XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD17MzJ9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB7IGNvbW11bml0eS5wcm9maWxlLm5hbWUgfVxuICAgICAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ9XCJwcmltYXJ5X291dGxpbmVcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29tbXVuaXR5LnNwYWNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXMuZGlzcGF0Y2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwidmlld19yb29tXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21faWQ6IGNvbW11bml0eS5zcGFjZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRmluaXNoZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlU3BhY2VGcm9tQ29tbXVuaXR5KGNsaSwgY29tbXVuaXR5Lmdyb3VwSWQpLnRoZW4oKFtzcGFjZUlkXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BhY2VJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbXVuaXR5LnNwYWNlSWQgPSBzcGFjZUlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q29tbXVuaXRpZXMoWy4uLmNvbW11bml0aWVzXSk7IC8vIGZvcmNlIGNvbXBvbmVudCByZS1yZW5kZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeyBjb21tdW5pdHkuc3BhY2VJZCA/IF90KFwiT3BlbiBTcGFjZVwiKSA6IF90KFwiQ3JlYXRlIFNwYWNlXCIpIH1cbiAgICAgICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSkgfVxuICAgIDwvZGl2Pjtcbn07XG5cbkByZXBsYWNlYWJsZUNvbXBvbmVudChcInZpZXdzLnNldHRpbmdzLnRhYnMudXNlci5QcmVmZXJlbmNlc1VzZXJTZXR0aW5nc1RhYlwiKVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJlZmVyZW5jZXNVc2VyU2V0dGluZ3NUYWIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgICBzdGF0aWMgUk9PTV9MSVNUX1NFVFRJTkdTID0gW1xuICAgICAgICAnYnJlYWRjcnVtYnMnLFxuICAgIF07XG5cbiAgICBzdGF0aWMgU1BBQ0VTX1NFVFRJTkdTID0gW1xuICAgICAgICBcIlNwYWNlcy5hbGxSb29tc0luSG9tZVwiLFxuICAgIF07XG5cbiAgICBzdGF0aWMgQ09NTVVOSVRJRVNfU0VUVElOR1MgPSBbXG4gICAgICAgIFwic2hvd0NvbW11bml0aWVzSW5zdGVhZE9mU3BhY2VzXCIsXG4gICAgXTtcblxuICAgIHN0YXRpYyBLRVlCSU5ESU5HU19TRVRUSU5HUyA9IFtcbiAgICAgICAgJ2N0cmxGRm9yU2VhcmNoJyxcbiAgICBdO1xuXG4gICAgc3RhdGljIENPTVBPU0VSX1NFVFRJTkdTID0gW1xuICAgICAgICAnTWVzc2FnZUNvbXBvc2VySW5wdXQuYXV0b1JlcGxhY2VFbW9qaScsXG4gICAgICAgICdNZXNzYWdlQ29tcG9zZXJJbnB1dC5zdWdnZXN0RW1vamknLFxuICAgICAgICAnc2VuZFR5cGluZ05vdGlmaWNhdGlvbnMnLFxuICAgICAgICAnTWVzc2FnZUNvbXBvc2VySW5wdXQuY3RybEVudGVyVG9TZW5kJyxcbiAgICAgICAgJ01lc3NhZ2VDb21wb3NlcklucHV0LnN1cnJvdW5kV2l0aCcsXG4gICAgICAgICdNZXNzYWdlQ29tcG9zZXJJbnB1dC5zaG93U3RpY2tlcnNCdXR0b24nLFxuICAgIF07XG5cbiAgICBzdGF0aWMgVElNRV9TRVRUSU5HUyA9IFtcbiAgICAgICAgJ3Nob3dUd2VsdmVIb3VyVGltZXN0YW1wcycsXG4gICAgICAgICdhbHdheXNTaG93VGltZXN0YW1wcycsXG4gICAgXTtcbiAgICBzdGF0aWMgQ09ERV9CTE9DS1NfU0VUVElOR1MgPSBbXG4gICAgICAgICdlbmFibGVTeW50YXhIaWdobGlnaHRMYW5ndWFnZURldGVjdGlvbicsXG4gICAgICAgICdleHBhbmRDb2RlQnlEZWZhdWx0JyxcbiAgICAgICAgJ3Nob3dDb2RlTGluZU51bWJlcnMnLFxuICAgIF07XG4gICAgc3RhdGljIElNQUdFU19BTkRfVklERU9TX1NFVFRJTkdTID0gW1xuICAgICAgICAndXJsUHJldmlld3NFbmFibGVkJyxcbiAgICAgICAgJ2F1dG9wbGF5R2lmcycsXG4gICAgICAgICdhdXRvcGxheVZpZGVvJyxcbiAgICAgICAgJ3Nob3dJbWFnZXMnLFxuICAgIF07XG4gICAgc3RhdGljIFRJTUVMSU5FX1NFVFRJTkdTID0gW1xuICAgICAgICAnc2hvd1R5cGluZ05vdGlmaWNhdGlvbnMnLFxuICAgICAgICAnc2hvd1JlZGFjdGlvbnMnLFxuICAgICAgICAnc2hvd1JlYWRSZWNlaXB0cycsXG4gICAgICAgICdzaG93Sm9pbkxlYXZlcycsXG4gICAgICAgICdzaG93RGlzcGxheW5hbWVDaGFuZ2VzJyxcbiAgICAgICAgJ3Nob3dDaGF0RWZmZWN0cycsXG4gICAgICAgICdzaG93QXZhdGFyQ2hhbmdlcycsXG4gICAgICAgICdQaWxsLnNob3VsZFNob3dQaWxsQXZhdGFyJyxcbiAgICAgICAgJ1RleHR1YWxCb2R5LmVuYWJsZUJpZ0Vtb2ppJyxcbiAgICAgICAgJ3Njcm9sbFRvQm90dG9tT25NZXNzYWdlU2VudCcsXG4gICAgXTtcbiAgICBzdGF0aWMgR0VORVJBTF9TRVRUSU5HUyA9IFtcbiAgICAgICAgJ1RhZ1BhbmVsLmVuYWJsZVRhZ1BhbmVsJyxcbiAgICAgICAgJ3Byb21wdEJlZm9yZUludml0ZVVua25vd25Vc2VycycsXG4gICAgICAgIC8vIFN0YXJ0IGF1dG9tYXRpY2FsbHkgYWZ0ZXIgc3RhcnR1cCAoZWxlY3Ryb24tb25seSlcbiAgICAgICAgLy8gQXV0b2NvbXBsZXRlIGRlbGF5IChuaWNoZSB0ZXh0IGJveClcbiAgICBdO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBhdXRvTGF1bmNoOiBmYWxzZSxcbiAgICAgICAgICAgIGF1dG9MYXVuY2hTdXBwb3J0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgd2FybkJlZm9yZUV4aXQ6IHRydWUsXG4gICAgICAgICAgICB3YXJuQmVmb3JlRXhpdFN1cHBvcnRlZDogZmFsc2UsXG4gICAgICAgICAgICBhbHdheXNTaG93TWVudUJhcjogdHJ1ZSxcbiAgICAgICAgICAgIGFsd2F5c1Nob3dNZW51QmFyU3VwcG9ydGVkOiBmYWxzZSxcbiAgICAgICAgICAgIG1pbmltaXplVG9UcmF5OiB0cnVlLFxuICAgICAgICAgICAgbWluaW1pemVUb1RyYXlTdXBwb3J0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgYXV0b2NvbXBsZXRlRGVsYXk6XG4gICAgICAgICAgICAgICAgU2V0dGluZ3NTdG9yZS5nZXRWYWx1ZUF0KFNldHRpbmdMZXZlbC5ERVZJQ0UsICdhdXRvY29tcGxldGVEZWxheScpLnRvU3RyaW5nKDEwKSxcbiAgICAgICAgICAgIHJlYWRNYXJrZXJJblZpZXdUaHJlc2hvbGRNczpcbiAgICAgICAgICAgICAgICBTZXR0aW5nc1N0b3JlLmdldFZhbHVlQXQoU2V0dGluZ0xldmVsLkRFVklDRSwgJ3JlYWRNYXJrZXJJblZpZXdUaHJlc2hvbGRNcycpLnRvU3RyaW5nKDEwKSxcbiAgICAgICAgICAgIHJlYWRNYXJrZXJPdXRPZlZpZXdUaHJlc2hvbGRNczpcbiAgICAgICAgICAgICAgICBTZXR0aW5nc1N0b3JlLmdldFZhbHVlQXQoU2V0dGluZ0xldmVsLkRFVklDRSwgJ3JlYWRNYXJrZXJPdXRPZlZpZXdUaHJlc2hvbGRNcycpLnRvU3RyaW5nKDEwKSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgY29uc3QgcGxhdGZvcm0gPSBQbGF0Zm9ybVBlZy5nZXQoKTtcblxuICAgICAgICBjb25zdCBhdXRvTGF1bmNoU3VwcG9ydGVkID0gYXdhaXQgcGxhdGZvcm0uc3VwcG9ydHNBdXRvTGF1bmNoKCk7XG4gICAgICAgIGxldCBhdXRvTGF1bmNoID0gZmFsc2U7XG4gICAgICAgIGlmIChhdXRvTGF1bmNoU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBhdXRvTGF1bmNoID0gYXdhaXQgcGxhdGZvcm0uZ2V0QXV0b0xhdW5jaEVuYWJsZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHdhcm5CZWZvcmVFeGl0U3VwcG9ydGVkID0gYXdhaXQgcGxhdGZvcm0uc3VwcG9ydHNXYXJuQmVmb3JlRXhpdCgpO1xuICAgICAgICBsZXQgd2FybkJlZm9yZUV4aXQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHdhcm5CZWZvcmVFeGl0U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICB3YXJuQmVmb3JlRXhpdCA9IGF3YWl0IHBsYXRmb3JtLnNob3VsZFdhcm5CZWZvcmVFeGl0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhbHdheXNTaG93TWVudUJhclN1cHBvcnRlZCA9IGF3YWl0IHBsYXRmb3JtLnN1cHBvcnRzQXV0b0hpZGVNZW51QmFyKCk7XG4gICAgICAgIGxldCBhbHdheXNTaG93TWVudUJhciA9IHRydWU7XG4gICAgICAgIGlmIChhbHdheXNTaG93TWVudUJhclN1cHBvcnRlZCkge1xuICAgICAgICAgICAgYWx3YXlzU2hvd01lbnVCYXIgPSAhKGF3YWl0IHBsYXRmb3JtLmdldEF1dG9IaWRlTWVudUJhckVuYWJsZWQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtaW5pbWl6ZVRvVHJheVN1cHBvcnRlZCA9IGF3YWl0IHBsYXRmb3JtLnN1cHBvcnRzTWluaW1pemVUb1RyYXkoKTtcbiAgICAgICAgbGV0IG1pbmltaXplVG9UcmF5ID0gdHJ1ZTtcbiAgICAgICAgaWYgKG1pbmltaXplVG9UcmF5U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBtaW5pbWl6ZVRvVHJheSA9IGF3YWl0IHBsYXRmb3JtLmdldE1pbmltaXplVG9UcmF5RW5hYmxlZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBhdXRvTGF1bmNoLFxuICAgICAgICAgICAgYXV0b0xhdW5jaFN1cHBvcnRlZCxcbiAgICAgICAgICAgIHdhcm5CZWZvcmVFeGl0LFxuICAgICAgICAgICAgd2FybkJlZm9yZUV4aXRTdXBwb3J0ZWQsXG4gICAgICAgICAgICBhbHdheXNTaG93TWVudUJhclN1cHBvcnRlZCxcbiAgICAgICAgICAgIGFsd2F5c1Nob3dNZW51QmFyLFxuICAgICAgICAgICAgbWluaW1pemVUb1RyYXlTdXBwb3J0ZWQsXG4gICAgICAgICAgICBtaW5pbWl6ZVRvVHJheSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkF1dG9MYXVuY2hDaGFuZ2UgPSAoY2hlY2tlZDogYm9vbGVhbikgPT4ge1xuICAgICAgICBQbGF0Zm9ybVBlZy5nZXQoKS5zZXRBdXRvTGF1bmNoRW5hYmxlZChjaGVja2VkKS50aGVuKCgpID0+IHRoaXMuc2V0U3RhdGUoeyBhdXRvTGF1bmNoOiBjaGVja2VkIH0pKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvbldhcm5CZWZvcmVFeGl0Q2hhbmdlID0gKGNoZWNrZWQ6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgUGxhdGZvcm1QZWcuZ2V0KCkuc2V0V2FybkJlZm9yZUV4aXQoY2hlY2tlZCkudGhlbigoKSA9PiB0aGlzLnNldFN0YXRlKHsgd2FybkJlZm9yZUV4aXQ6IGNoZWNrZWQgfSkpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIG9uQWx3YXlzU2hvd01lbnVCYXJDaGFuZ2UgPSAoY2hlY2tlZDogYm9vbGVhbikgPT4ge1xuICAgICAgICBQbGF0Zm9ybVBlZy5nZXQoKS5zZXRBdXRvSGlkZU1lbnVCYXJFbmFibGVkKCFjaGVja2VkKS50aGVuKCgpID0+IHRoaXMuc2V0U3RhdGUoeyBhbHdheXNTaG93TWVudUJhcjogY2hlY2tlZCB9KSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25NaW5pbWl6ZVRvVHJheUNoYW5nZSA9IChjaGVja2VkOiBib29sZWFuKSA9PiB7XG4gICAgICAgIFBsYXRmb3JtUGVnLmdldCgpLnNldE1pbmltaXplVG9UcmF5RW5hYmxlZChjaGVja2VkKS50aGVuKCgpID0+IHRoaXMuc2V0U3RhdGUoeyBtaW5pbWl6ZVRvVHJheTogY2hlY2tlZCB9KSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25BdXRvY29tcGxldGVEZWxheUNoYW5nZSA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgYXV0b2NvbXBsZXRlRGVsYXk6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICBTZXR0aW5nc1N0b3JlLnNldFZhbHVlKFwiYXV0b2NvbXBsZXRlRGVsYXlcIiwgbnVsbCwgU2V0dGluZ0xldmVsLkRFVklDRSwgZS50YXJnZXQudmFsdWUpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIG9uUmVhZE1hcmtlckluVmlld1RocmVzaG9sZE1zID0gKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyByZWFkTWFya2VySW5WaWV3VGhyZXNob2xkTXM6IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICBTZXR0aW5nc1N0b3JlLnNldFZhbHVlKFwicmVhZE1hcmtlckluVmlld1RocmVzaG9sZE1zXCIsIG51bGwsIFNldHRpbmdMZXZlbC5ERVZJQ0UsIGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvblJlYWRNYXJrZXJPdXRPZlZpZXdUaHJlc2hvbGRNcyA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgcmVhZE1hcmtlck91dE9mVmlld1RocmVzaG9sZE1zOiBlLnRhcmdldC52YWx1ZSB9KTtcbiAgICAgICAgU2V0dGluZ3NTdG9yZS5zZXRWYWx1ZShcInJlYWRNYXJrZXJPdXRPZlZpZXdUaHJlc2hvbGRNc1wiLCBudWxsLCBTZXR0aW5nTGV2ZWwuREVWSUNFLCBlLnRhcmdldC52YWx1ZSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgcmVuZGVyR3JvdXAoXG4gICAgICAgIHNldHRpbmdJZHM6IHN0cmluZ1tdLFxuICAgICAgICBsZXZlbCA9IFNldHRpbmdMZXZlbC5BQ0NPVU5ULFxuICAgICk6IFJlYWN0LlJlYWN0Tm9kZUFycmF5IHtcbiAgICAgICAgcmV0dXJuIHNldHRpbmdJZHMubWFwKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGlzYWJsZWQgPSAhU2V0dGluZ3NTdG9yZS5pc0VuYWJsZWQoaSk7XG4gICAgICAgICAgICByZXR1cm4gPFNldHRpbmdzRmxhZyBrZXk9e2l9IG5hbWU9e2l9IGxldmVsPXtsZXZlbH0gZGlzYWJsZWQ9e2Rpc2FibGVkfSAvPjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgYXV0b0xhdW5jaE9wdGlvbiA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmF1dG9MYXVuY2hTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIGF1dG9MYXVuY2hPcHRpb24gPSA8TGFiZWxsZWRUb2dnbGVTd2l0Y2hcbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5hdXRvTGF1bmNofVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQXV0b0xhdW5jaENoYW5nZX1cbiAgICAgICAgICAgICAgICBsYWJlbD17X3QoJ1N0YXJ0IGF1dG9tYXRpY2FsbHkgYWZ0ZXIgc3lzdGVtIGxvZ2luJyl9IC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHdhcm5CZWZvcmVFeGl0T3B0aW9uID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUud2FybkJlZm9yZUV4aXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIHdhcm5CZWZvcmVFeGl0T3B0aW9uID0gPExhYmVsbGVkVG9nZ2xlU3dpdGNoXG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUud2FybkJlZm9yZUV4aXR9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25XYXJuQmVmb3JlRXhpdENoYW5nZX1cbiAgICAgICAgICAgICAgICBsYWJlbD17X3QoJ1dhcm4gYmVmb3JlIHF1aXR0aW5nJyl9IC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGF1dG9IaWRlTWVudU9wdGlvbiA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmFsd2F5c1Nob3dNZW51QmFyU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBhdXRvSGlkZU1lbnVPcHRpb24gPSA8TGFiZWxsZWRUb2dnbGVTd2l0Y2hcbiAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5hbHdheXNTaG93TWVudUJhcn1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkFsd2F5c1Nob3dNZW51QmFyQ2hhbmdlfVxuICAgICAgICAgICAgICAgIGxhYmVsPXtfdCgnQWx3YXlzIHNob3cgdGhlIHdpbmRvdyBtZW51IGJhcicpfSAvPjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtaW5pbWl6ZVRvVHJheU9wdGlvbiA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1pbmltaXplVG9UcmF5U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBtaW5pbWl6ZVRvVHJheU9wdGlvbiA9IDxMYWJlbGxlZFRvZ2dsZVN3aXRjaFxuICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm1pbmltaXplVG9UcmF5fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uTWluaW1pemVUb1RyYXlDaGFuZ2V9XG4gICAgICAgICAgICAgICAgbGFiZWw9e190KCdTaG93IHRyYXkgaWNvbiBhbmQgbWluaW1pc2Ugd2luZG93IHRvIGl0IG9uIGNsb3NlJyl9IC8+O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWIgbXhfUHJlZmVyZW5jZXNVc2VyU2V0dGluZ3NUYWJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX2hlYWRpbmdcIj57IF90KFwiUHJlZmVyZW5jZXNcIikgfTwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TZXR0aW5nc1RhYl9zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX3N1YmhlYWRpbmdcIj57IF90KFwiUm9vbSBsaXN0XCIpIH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIHsgdGhpcy5yZW5kZXJHcm91cChQcmVmZXJlbmNlc1VzZXJTZXR0aW5nc1RhYi5ST09NX0xJU1RfU0VUVElOR1MpIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWJfc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9TZXR0aW5nc1RhYl9zdWJoZWFkaW5nXCI+eyBfdChcIlNwYWNlc1wiKSB9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICB7IHRoaXMucmVuZGVyR3JvdXAoUHJlZmVyZW5jZXNVc2VyU2V0dGluZ3NUYWIuU1BBQ0VTX1NFVFRJTkdTLCBTZXR0aW5nTGV2ZWwuQUNDT1VOVCkgfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TZXR0aW5nc1RhYl9zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX3N1YmhlYWRpbmdcIj57IF90KFwiQ29tbXVuaXRpZXNcIikgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHA+eyBfdChcIkNvbW11bml0aWVzIGhhdmUgYmVlbiBhcmNoaXZlZCB0byBtYWtlIHdheSBmb3IgU3BhY2VzIGJ1dCB5b3UgY2FuIGNvbnZlcnQgeW91ciBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcImNvbW11bml0aWVzIGludG8gU3BhY2VzIGJlbG93LiBDb252ZXJ0aW5nIHdpbGwgZW5zdXJlIHlvdXIgY29udmVyc2F0aW9ucyBnZXQgdGhlIGxhdGVzdCBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcImZlYXR1cmVzLlwiKSB9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8ZGV0YWlscz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdW1tYXJ5PnsgX3QoXCJTaG93IG15IENvbW11bml0aWVzXCIpIH08L3N1bW1hcnk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD57IF90KFwiSWYgYSBjb21tdW5pdHkgaXNuJ3Qgc2hvd24geW91IG1heSBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGNvbnZlcnQgaXQuXCIpIH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q29tbXVuaXR5TWlncmF0b3Igb25GaW5pc2hlZD17dGhpcy5wcm9wcy5jbG9zZVNldHRpbmdzRm59IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGV0YWlscz5cbiAgICAgICAgICAgICAgICAgICAgeyB0aGlzLnJlbmRlckdyb3VwKFByZWZlcmVuY2VzVXNlclNldHRpbmdzVGFiLkNPTU1VTklUSUVTX1NFVFRJTkdTLCBTZXR0aW5nTGV2ZWwuREVWSUNFKSB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX3NlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWJfc3ViaGVhZGluZ1wiPnsgX3QoXCJLZXlib2FyZCBzaG9ydGN1dHNcIikgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24gY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NGbGFnXCIgb25DbGljaz17S2V5Ym9hcmRTaG9ydGN1dHMudG9nZ2xlRGlhbG9nfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgX3QoXCJUbyB2aWV3IGFsbCBrZXlib2FyZCBzaG9ydGN1dHMsIGNsaWNrIGhlcmUuXCIpIH1cbiAgICAgICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICB7IHRoaXMucmVuZGVyR3JvdXAoUHJlZmVyZW5jZXNVc2VyU2V0dGluZ3NUYWIuS0VZQklORElOR1NfU0VUVElOR1MpIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWJfc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9TZXR0aW5nc1RhYl9zdWJoZWFkaW5nXCI+eyBfdChcIkRpc3BsYXlpbmcgdGltZVwiKSB9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICB7IHRoaXMucmVuZGVyR3JvdXAoUHJlZmVyZW5jZXNVc2VyU2V0dGluZ3NUYWIuVElNRV9TRVRUSU5HUykgfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TZXR0aW5nc1RhYl9zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX3N1YmhlYWRpbmdcIj57IF90KFwiQ29tcG9zZXJcIikgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgeyB0aGlzLnJlbmRlckdyb3VwKFByZWZlcmVuY2VzVXNlclNldHRpbmdzVGFiLkNPTVBPU0VSX1NFVFRJTkdTKSB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX3NlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWJfc3ViaGVhZGluZ1wiPnsgX3QoXCJDb2RlIGJsb2Nrc1wiKSB9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICB7IHRoaXMucmVuZGVyR3JvdXAoUHJlZmVyZW5jZXNVc2VyU2V0dGluZ3NUYWIuQ09ERV9CTE9DS1NfU0VUVElOR1MpIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWJfc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9TZXR0aW5nc1RhYl9zdWJoZWFkaW5nXCI+eyBfdChcIkltYWdlcywgR0lGcyBhbmQgdmlkZW9zXCIpIH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIHsgdGhpcy5yZW5kZXJHcm91cChQcmVmZXJlbmNlc1VzZXJTZXR0aW5nc1RhYi5JTUFHRVNfQU5EX1ZJREVPU19TRVRUSU5HUykgfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9TZXR0aW5nc1RhYl9zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX3N1YmhlYWRpbmdcIj57IF90KFwiVGltZWxpbmVcIikgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgeyB0aGlzLnJlbmRlckdyb3VwKFByZWZlcmVuY2VzVXNlclNldHRpbmdzVGFiLlRJTUVMSU5FX1NFVFRJTkdTKSB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NldHRpbmdzVGFiX3NlY3Rpb25cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXhfU2V0dGluZ3NUYWJfc3ViaGVhZGluZ1wiPnsgX3QoXCJHZW5lcmFsXCIpIH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIHsgdGhpcy5yZW5kZXJHcm91cChQcmVmZXJlbmNlc1VzZXJTZXR0aW5nc1RhYi5HRU5FUkFMX1NFVFRJTkdTKSB9XG4gICAgICAgICAgICAgICAgICAgIHsgbWluaW1pemVUb1RyYXlPcHRpb24gfVxuICAgICAgICAgICAgICAgICAgICB7IGF1dG9IaWRlTWVudU9wdGlvbiB9XG4gICAgICAgICAgICAgICAgICAgIHsgYXV0b0xhdW5jaE9wdGlvbiB9XG4gICAgICAgICAgICAgICAgICAgIHsgd2FybkJlZm9yZUV4aXRPcHRpb24gfVxuICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtfdCgnQXV0b2NvbXBsZXRlIGRlbGF5IChtcyknKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J251bWJlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmF1dG9jb21wbGV0ZURlbGF5fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25BdXRvY29tcGxldGVEZWxheUNoYW5nZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgPEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17X3QoJ1JlYWQgTWFya2VyIGxpZmV0aW1lIChtcyknKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J251bWJlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnJlYWRNYXJrZXJJblZpZXdUaHJlc2hvbGRNc31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uUmVhZE1hcmtlckluVmlld1RocmVzaG9sZE1zfSAvPlxuICAgICAgICAgICAgICAgICAgICA8RmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtfdCgnUmVhZCBNYXJrZXIgb2ZmLXNjcmVlbiBsaWZldGltZSAobXMpJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdudW1iZXInXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5yZWFkTWFya2VyT3V0T2ZWaWV3VGhyZXNob2xkTXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vblJlYWRNYXJrZXJPdXRPZlZpZXdUaHJlc2hvbGRNc30gLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbiJdfQ==