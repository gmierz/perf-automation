"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireDefault(require("react"));

var _languageHandler = require("../../../languageHandler");

var _SlashCommands = require("../../../SlashCommands");

var _InfoDialog = _interopRequireDefault(require("./InfoDialog"));

/*
Copyright 2019 Michael Telatynski <7t3chguy@gmail.com>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const SlashCommandHelpDialog = ({
  onFinished
}) => {
  const categories = {};

  _SlashCommands.Commands.forEach(cmd => {
    if (!cmd.isEnabled()) return;

    if (!categories[cmd.category]) {
      categories[cmd.category] = [];
    }

    categories[cmd.category].push(cmd);
  });

  const body = Object.values(_SlashCommands.CommandCategories).filter(c => categories[c]).map(category => {
    const rows = [/*#__PURE__*/_react.default.createElement("tr", {
      key: "_category_" + category,
      className: "mx_SlashCommandHelpDialog_headerRow"
    }, /*#__PURE__*/_react.default.createElement("td", {
      colSpan: 3
    }, /*#__PURE__*/_react.default.createElement("h2", null, (0, _languageHandler._t)(category))))];
    categories[category].forEach(cmd => {
      rows.push( /*#__PURE__*/_react.default.createElement("tr", {
        key: cmd.command
      }, /*#__PURE__*/_react.default.createElement("td", null, /*#__PURE__*/_react.default.createElement("strong", null, cmd.getCommand())), /*#__PURE__*/_react.default.createElement("td", null, cmd.args), /*#__PURE__*/_react.default.createElement("td", null, cmd.description)));
    });
    return rows;
  });
  return /*#__PURE__*/_react.default.createElement(_InfoDialog.default, {
    className: "mx_SlashCommandHelpDialog",
    title: (0, _languageHandler._t)("Command Help"),
    description: /*#__PURE__*/_react.default.createElement("table", null, /*#__PURE__*/_react.default.createElement("tbody", null, body)),
    hasCloseButton: true,
    onFinished: onFinished
  });
};

var _default = SlashCommandHelpDialog;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL2RpYWxvZ3MvU2xhc2hDb21tYW5kSGVscERpYWxvZy50c3giXSwibmFtZXMiOlsiU2xhc2hDb21tYW5kSGVscERpYWxvZyIsIm9uRmluaXNoZWQiLCJjYXRlZ29yaWVzIiwiQ29tbWFuZHMiLCJmb3JFYWNoIiwiY21kIiwiaXNFbmFibGVkIiwiY2F0ZWdvcnkiLCJwdXNoIiwiYm9keSIsIk9iamVjdCIsInZhbHVlcyIsIkNvbW1hbmRDYXRlZ29yaWVzIiwiZmlsdGVyIiwiYyIsIm1hcCIsInJvd3MiLCJjb21tYW5kIiwiZ2V0Q29tbWFuZCIsImFyZ3MiLCJkZXNjcmlwdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBZ0JBOztBQUNBOztBQUNBOztBQUVBOztBQXBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFVQSxNQUFNQSxzQkFBd0MsR0FBRyxDQUFDO0FBQUVDLEVBQUFBO0FBQUYsQ0FBRCxLQUFvQjtBQUNqRSxRQUFNQyxVQUFVLEdBQUcsRUFBbkI7O0FBQ0FDLDBCQUFTQyxPQUFULENBQWlCQyxHQUFHLElBQUk7QUFDcEIsUUFBSSxDQUFDQSxHQUFHLENBQUNDLFNBQUosRUFBTCxFQUFzQjs7QUFDdEIsUUFBSSxDQUFDSixVQUFVLENBQUNHLEdBQUcsQ0FBQ0UsUUFBTCxDQUFmLEVBQStCO0FBQzNCTCxNQUFBQSxVQUFVLENBQUNHLEdBQUcsQ0FBQ0UsUUFBTCxDQUFWLEdBQTJCLEVBQTNCO0FBQ0g7O0FBQ0RMLElBQUFBLFVBQVUsQ0FBQ0csR0FBRyxDQUFDRSxRQUFMLENBQVYsQ0FBeUJDLElBQXpCLENBQThCSCxHQUE5QjtBQUNILEdBTkQ7O0FBUUEsUUFBTUksSUFBSSxHQUFHQyxNQUFNLENBQUNDLE1BQVAsQ0FBY0MsZ0NBQWQsRUFBaUNDLE1BQWpDLENBQXdDQyxDQUFDLElBQUlaLFVBQVUsQ0FBQ1ksQ0FBRCxDQUF2RCxFQUE0REMsR0FBNUQsQ0FBaUVSLFFBQUQsSUFBYztBQUN2RixVQUFNUyxJQUFJLEdBQUcsY0FDVDtBQUFJLE1BQUEsR0FBRyxFQUFFLGVBQWVULFFBQXhCO0FBQWtDLE1BQUEsU0FBUyxFQUFDO0FBQTVDLG9CQUNJO0FBQUksTUFBQSxPQUFPLEVBQUU7QUFBYixvQkFDSSx5Q0FBTSx5QkFBR0EsUUFBSCxDQUFOLENBREosQ0FESixDQURTLENBQWI7QUFRQUwsSUFBQUEsVUFBVSxDQUFDSyxRQUFELENBQVYsQ0FBcUJILE9BQXJCLENBQTZCQyxHQUFHLElBQUk7QUFDaENXLE1BQUFBLElBQUksQ0FBQ1IsSUFBTCxlQUFVO0FBQUksUUFBQSxHQUFHLEVBQUVILEdBQUcsQ0FBQ1k7QUFBYixzQkFDTixzREFBSSw2Q0FBVVosR0FBRyxDQUFDYSxVQUFKLEVBQVYsQ0FBSixDQURNLGVBRU4seUNBQU1iLEdBQUcsQ0FBQ2MsSUFBVixDQUZNLGVBR04seUNBQU1kLEdBQUcsQ0FBQ2UsV0FBVixDQUhNLENBQVY7QUFLSCxLQU5EO0FBUUEsV0FBT0osSUFBUDtBQUNILEdBbEJZLENBQWI7QUFvQkEsc0JBQU8sNkJBQUMsbUJBQUQ7QUFDSCxJQUFBLFNBQVMsRUFBQywyQkFEUDtBQUVILElBQUEsS0FBSyxFQUFFLHlCQUFHLGNBQUgsQ0FGSjtBQUdILElBQUEsV0FBVyxlQUFFLHlEQUNULDRDQUNNUCxJQUROLENBRFMsQ0FIVjtBQVFILElBQUEsY0FBYyxFQUFFLElBUmI7QUFTSCxJQUFBLFVBQVUsRUFBRVI7QUFUVCxJQUFQO0FBVUgsQ0F4Q0Q7O2VBMENlRCxzQiIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAxOSBNaWNoYWVsIFRlbGF0eW5za2kgPDd0M2NoZ3V5QGdtYWlsLmNvbT5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgX3QgfSBmcm9tIFwiLi4vLi4vLi4vbGFuZ3VhZ2VIYW5kbGVyXCI7XG5pbXBvcnQgeyBDb21tYW5kQ2F0ZWdvcmllcywgQ29tbWFuZHMgfSBmcm9tIFwiLi4vLi4vLi4vU2xhc2hDb21tYW5kc1wiO1xuaW1wb3J0IHsgSURpYWxvZ1Byb3BzIH0gZnJvbSBcIi4vSURpYWxvZ1Byb3BzXCI7XG5pbXBvcnQgSW5mb0RpYWxvZyBmcm9tIFwiLi9JbmZvRGlhbG9nXCI7XG5cbmludGVyZmFjZSBJUHJvcHMgZXh0ZW5kcyBJRGlhbG9nUHJvcHMge31cblxuY29uc3QgU2xhc2hDb21tYW5kSGVscERpYWxvZzogUmVhY3QuRkM8SVByb3BzPiA9ICh7IG9uRmluaXNoZWQgfSkgPT4ge1xuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSB7fTtcbiAgICBDb21tYW5kcy5mb3JFYWNoKGNtZCA9PiB7XG4gICAgICAgIGlmICghY21kLmlzRW5hYmxlZCgpKSByZXR1cm47XG4gICAgICAgIGlmICghY2F0ZWdvcmllc1tjbWQuY2F0ZWdvcnldKSB7XG4gICAgICAgICAgICBjYXRlZ29yaWVzW2NtZC5jYXRlZ29yeV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRlZ29yaWVzW2NtZC5jYXRlZ29yeV0ucHVzaChjbWQpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYm9keSA9IE9iamVjdC52YWx1ZXMoQ29tbWFuZENhdGVnb3JpZXMpLmZpbHRlcihjID0+IGNhdGVnb3JpZXNbY10pLm1hcCgoY2F0ZWdvcnkpID0+IHtcbiAgICAgICAgY29uc3Qgcm93cyA9IFtcbiAgICAgICAgICAgIDx0ciBrZXk9e1wiX2NhdGVnb3J5X1wiICsgY2F0ZWdvcnl9IGNsYXNzTmFtZT1cIm14X1NsYXNoQ29tbWFuZEhlbHBEaWFsb2dfaGVhZGVyUm93XCI+XG4gICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49ezN9PlxuICAgICAgICAgICAgICAgICAgICA8aDI+eyBfdChjYXRlZ29yeSkgfTwvaDI+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvdHI+LFxuICAgICAgICBdO1xuXG4gICAgICAgIGNhdGVnb3JpZXNbY2F0ZWdvcnldLmZvckVhY2goY21kID0+IHtcbiAgICAgICAgICAgIHJvd3MucHVzaCg8dHIga2V5PXtjbWQuY29tbWFuZH0+XG4gICAgICAgICAgICAgICAgPHRkPjxzdHJvbmc+eyBjbWQuZ2V0Q29tbWFuZCgpIH08L3N0cm9uZz48L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD57IGNtZC5hcmdzIH08L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD57IGNtZC5kZXNjcmlwdGlvbiB9PC90ZD5cbiAgICAgICAgICAgIDwvdHI+KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gPEluZm9EaWFsb2dcbiAgICAgICAgY2xhc3NOYW1lPVwibXhfU2xhc2hDb21tYW5kSGVscERpYWxvZ1wiXG4gICAgICAgIHRpdGxlPXtfdChcIkNvbW1hbmQgSGVscFwiKX1cbiAgICAgICAgZGVzY3JpcHRpb249ezx0YWJsZT5cbiAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICB7IGJvZHkgfVxuICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgPC90YWJsZT59XG4gICAgICAgIGhhc0Nsb3NlQnV0dG9uPXt0cnVlfVxuICAgICAgICBvbkZpbmlzaGVkPXtvbkZpbmlzaGVkfSAvPjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNsYXNoQ29tbWFuZEhlbHBEaWFsb2c7XG4iXX0=