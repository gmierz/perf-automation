"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _call = require("matrix-js-sdk/src/webrtc/call");

var _react = _interopRequireDefault(require("react"));

var _languageHandler = require("../../../../languageHandler");

var _RoomAvatar = _interopRequireDefault(require("../../avatars/RoomAvatar"));

var _dispatcher = _interopRequireDefault(require("../../../../dispatcher/dispatcher"));

var _actions = require("../../../../dispatcher/actions");

var _classnames = _interopRequireDefault(require("classnames"));

var _AccessibleTooltipButton = _interopRequireDefault(require("../../elements/AccessibleTooltipButton"));

/*
Copyright 2021 New Vector Ltd

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const callTypeTranslationByType = {
  [_call.CallType.Video]: (0, _languageHandler._td)("Video Call"),
  [_call.CallType.Voice]: (0, _languageHandler._td)("Voice Call")
};

const onFullscreenClick = () => {
  _dispatcher.default.dispatch({
    action: 'video_fullscreen',
    fullscreen: true
  });
};

const onExpandClick = roomId => {
  _dispatcher.default.dispatch({
    action: _actions.Action.ViewRoom,
    room_id: roomId
  });
};

const CallViewHeaderControls = ({
  pipMode = false,
  type,
  roomId
}) => {
  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_CallViewHeader_controls"
  }, !pipMode && /*#__PURE__*/_react.default.createElement(_AccessibleTooltipButton.default, {
    className: "mx_CallViewHeader_button mx_CallViewHeader_button_fullscreen",
    onClick: onFullscreenClick,
    title: (0, _languageHandler._t)("Fill Screen")
  }), pipMode && /*#__PURE__*/_react.default.createElement(_AccessibleTooltipButton.default, {
    className: "mx_CallViewHeader_button mx_CallViewHeader_button_expand",
    onClick: () => onExpandClick(roomId),
    title: (0, _languageHandler._t)("Return to call")
  }));
};

const SecondaryCallInfo = ({
  callRoom
}) => {
  return /*#__PURE__*/_react.default.createElement("span", {
    className: "mx_CallViewHeader_secondaryCallInfo"
  }, /*#__PURE__*/_react.default.createElement(_RoomAvatar.default, {
    room: callRoom,
    height: 16,
    width: 16
  }), /*#__PURE__*/_react.default.createElement("span", {
    className: "mx_CallView_secondaryCall_roomName"
  }, (0, _languageHandler._t)("%(name)s on hold", {
    name: callRoom.name
  })));
};

const CallTypeIcon = ({
  type
}) => {
  const classes = (0, _classnames.default)({
    'mx_CallViewHeader_callTypeIcon': true,
    'mx_CallViewHeader_callTypeIcon_video': type === _call.CallType.Video,
    'mx_CallViewHeader_callTypeIcon_voice': type === _call.CallType.Voice
  });
  return /*#__PURE__*/_react.default.createElement("div", {
    className: classes
  });
};

const CallViewHeader = ({
  type,
  pipMode = false,
  callRooms = [],
  onPipMouseDown
}) => {
  const [callRoom, onHoldCallRoom] = callRooms;
  const callTypeText = (0, _languageHandler._t)(callTypeTranslationByType[type]);
  const callRoomName = callRoom.name;
  const {
    roomId
  } = callRoom;

  if (!pipMode) {
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_CallViewHeader"
    }, /*#__PURE__*/_react.default.createElement(CallTypeIcon, {
      type: type
    }), /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_CallViewHeader_callType"
    }, callTypeText), /*#__PURE__*/_react.default.createElement(CallViewHeaderControls, {
      roomId: roomId,
      pipMode: pipMode,
      type: type
    }));
  }

  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_CallViewHeader",
    onMouseDown: onPipMouseDown
  }, /*#__PURE__*/_react.default.createElement(_RoomAvatar.default, {
    room: callRoom,
    height: 32,
    width: 32
  }), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_CallViewHeader_callInfo"
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_CallViewHeader_roomName"
  }, callRoomName), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_CallViewHeader_callTypeSmall"
  }, callTypeText, onHoldCallRoom && /*#__PURE__*/_react.default.createElement(SecondaryCallInfo, {
    callRoom: onHoldCallRoom
  }))), /*#__PURE__*/_react.default.createElement(CallViewHeaderControls, {
    roomId: roomId,
    pipMode: pipMode,
    type: type
  }));
};

var _default = CallViewHeader;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3ZvaXAvQ2FsbFZpZXcvQ2FsbFZpZXdIZWFkZXIudHN4Il0sIm5hbWVzIjpbImNhbGxUeXBlVHJhbnNsYXRpb25CeVR5cGUiLCJDYWxsVHlwZSIsIlZpZGVvIiwiVm9pY2UiLCJvbkZ1bGxzY3JlZW5DbGljayIsImRpcyIsImRpc3BhdGNoIiwiYWN0aW9uIiwiZnVsbHNjcmVlbiIsIm9uRXhwYW5kQ2xpY2siLCJyb29tSWQiLCJBY3Rpb24iLCJWaWV3Um9vbSIsInJvb21faWQiLCJDYWxsVmlld0hlYWRlckNvbnRyb2xzIiwicGlwTW9kZSIsInR5cGUiLCJTZWNvbmRhcnlDYWxsSW5mbyIsImNhbGxSb29tIiwibmFtZSIsIkNhbGxUeXBlSWNvbiIsImNsYXNzZXMiLCJDYWxsVmlld0hlYWRlciIsImNhbGxSb29tcyIsIm9uUGlwTW91c2VEb3duIiwib25Ib2xkQ2FsbFJvb20iLCJjYWxsVHlwZVRleHQiLCJjYWxsUm9vbU5hbWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQWdCQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUF4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWUEsTUFBTUEseUJBQW1ELEdBQUc7QUFDeEQsR0FBQ0MsZUFBU0MsS0FBVixHQUFrQiwwQkFBSSxZQUFKLENBRHNDO0FBRXhELEdBQUNELGVBQVNFLEtBQVYsR0FBa0IsMEJBQUksWUFBSjtBQUZzQyxDQUE1RDs7QUFZQSxNQUFNQyxpQkFBaUIsR0FBRyxNQUFNO0FBQzVCQyxzQkFBSUMsUUFBSixDQUFhO0FBQ1RDLElBQUFBLE1BQU0sRUFBRSxrQkFEQztBQUVUQyxJQUFBQSxVQUFVLEVBQUU7QUFGSCxHQUFiO0FBSUgsQ0FMRDs7QUFPQSxNQUFNQyxhQUFhLEdBQUlDLE1BQUQsSUFBb0I7QUFD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QUE0QixJQUFBLE1BQU0sRUFBRSxFQUFwQztBQUF3QyxJQUFBLEtBQUssRUFBRTtBQUEvQyxJQUpKLGVBS0k7QUFBSyxJQUFBLFNBQVMsRUFBQztBQUFmLGtCQUNJO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixLQUE4Q1MsWUFBOUMsQ0FESixlQUVJO0FBQUssSUFBQSxTQUFTLEVBQUM7QUFBZixLQUNNRCxZQUROLEVBRU1ELGNBQWMsaUJBQUksNkJBQUMsaUJBQUQ7QUFBbUIsSUFBQSxRQUFRLEVBQUVBO0FBQTdCLElBRnhCLENBRkosQ0FMSixlQVlJLDZCQUFDLHNCQUFEO0FBQXdCLElBQUEsTUFBTSxFQUFFZixNQUFoQztBQUF3QyxJQUFBLE9BQU8sRUFBRUssT0FBakQ7QUFBMEQsSUFBQSxJQUFJLEVBQUVDO0FBQWhFLElBWkosQ0FESjtBQWdCSCxDQWxDRDs7ZUFvQ2VNLGMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMjEgTmV3IFZlY3RvciBMdGRcblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgeyBDYWxsVHlwZSB9IGZyb20gJ21hdHJpeC1qcy1zZGsvc3JjL3dlYnJ0Yy9jYWxsJztcbmltcG9ydCB7IFJvb20gfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvcm9vbSc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgX3QsIF90ZCB9IGZyb20gJy4uLy4uLy4uLy4uL2xhbmd1YWdlSGFuZGxlcic7XG5pbXBvcnQgUm9vbUF2YXRhciBmcm9tICcuLi8uLi9hdmF0YXJzL1Jvb21BdmF0YXInO1xuaW1wb3J0IGRpcyBmcm9tICcuLi8uLi8uLi8uLi9kaXNwYXRjaGVyL2Rpc3BhdGNoZXInO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vLi4vZGlzcGF0Y2hlci9hY3Rpb25zJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IEFjY2Vzc2libGVUb29sdGlwQnV0dG9uIGZyb20gJy4uLy4uL2VsZW1lbnRzL0FjY2Vzc2libGVUb29sdGlwQnV0dG9uJztcblxuY29uc3QgY2FsbFR5cGVUcmFuc2xhdGlvbkJ5VHlwZTogUmVjb3JkPENhbGxUeXBlLCBzdHJpbmc+ID0ge1xuICAgIFtDYWxsVHlwZS5WaWRlb106IF90ZChcIlZpZGVvIENhbGxcIiksXG4gICAgW0NhbGxUeXBlLlZvaWNlXTogX3RkKFwiVm9pY2UgQ2FsbFwiKSxcbn07XG5cbmludGVyZmFjZSBDYWxsVmlld0hlYWRlclByb3BzIHtcbiAgICBwaXBNb2RlOiBib29sZWFuO1xuICAgIHR5cGU6IENhbGxUeXBlO1xuICAgIGNhbGxSb29tcz86IFJvb21bXTtcbiAgICBvblBpcE1vdXNlRG93bjogKGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50PEVsZW1lbnQsIE1vdXNlRXZlbnQ+KSA9PiB2b2lkO1xufVxuXG5jb25zdCBvbkZ1bGxzY3JlZW5DbGljayA9ICgpID0+IHtcbiAgICBkaXMuZGlzcGF0Y2goe1xuICAgICAgICBhY3Rpb246ICd2aWRlb19mdWxsc2NyZWVuJyxcbiAgICAgICAgZnVsbHNjcmVlbjogdHJ1ZSxcbiAgICB9KTtcbn07XG5cbmNvbnN0IG9uRXhwYW5kQ2xpY2sgPSAocm9vbUlkOiBzdHJpbmcpID0+IHtcbiAgICBkaXMuZGlzcGF0Y2goe1xuICAgICAgICBhY3Rpb246IEFjdGlvbi5WaWV3Um9vbSxcbiAgICAgICAgcm9vbV9pZDogcm9vbUlkLFxuICAgIH0pO1xufTtcblxudHlwZSBDYWxsQ29udHJvbHNQcm9wcyA9IFBpY2s8Q2FsbFZpZXdIZWFkZXJQcm9wcywgJ3BpcE1vZGUnIHwgJ3R5cGUnPiAmIHtcbiAgICByb29tSWQ6IHN0cmluZztcbn07XG5jb25zdCBDYWxsVmlld0hlYWRlckNvbnRyb2xzOiBSZWFjdC5GQzxDYWxsQ29udHJvbHNQcm9wcz4gPSAoeyBwaXBNb2RlID0gZmFsc2UsIHR5cGUsIHJvb21JZCB9KSA9PiB7XG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwibXhfQ2FsbFZpZXdIZWFkZXJfY29udHJvbHNcIj5cbiAgICAgICAgeyAhcGlwTW9kZSAmJiA8QWNjZXNzaWJsZVRvb2x0aXBCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X0NhbGxWaWV3SGVhZGVyX2J1dHRvbiBteF9DYWxsVmlld0hlYWRlcl9idXR0b25fZnVsbHNjcmVlblwiXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkZ1bGxzY3JlZW5DbGlja31cbiAgICAgICAgICAgIHRpdGxlPXtfdChcIkZpbGwgU2NyZWVuXCIpfVxuICAgICAgICAvPiB9XG4gICAgICAgIHsgcGlwTW9kZSAmJiA8QWNjZXNzaWJsZVRvb2x0aXBCdXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X0NhbGxWaWV3SGVhZGVyX2J1dHRvbiBteF9DYWxsVmlld0hlYWRlcl9idXR0b25fZXhwYW5kXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uRXhwYW5kQ2xpY2socm9vbUlkKX1cbiAgICAgICAgICAgIHRpdGxlPXtfdChcIlJldHVybiB0byBjYWxsXCIpfVxuICAgICAgICAvPiB9XG4gICAgPC9kaXY+O1xufTtcbmNvbnN0IFNlY29uZGFyeUNhbGxJbmZvOiBSZWFjdC5GQzx7IGNhbGxSb29tOiBSb29tIH0+ID0gKHsgY2FsbFJvb20gfSkgPT4ge1xuICAgIHJldHVybiA8c3BhbiBjbGFzc05hbWU9XCJteF9DYWxsVmlld0hlYWRlcl9zZWNvbmRhcnlDYWxsSW5mb1wiPlxuICAgICAgICA8Um9vbUF2YXRhciByb29tPXtjYWxsUm9vbX0gaGVpZ2h0PXsxNn0gd2lkdGg9ezE2fSAvPlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9DYWxsVmlld19zZWNvbmRhcnlDYWxsX3Jvb21OYW1lXCI+XG4gICAgICAgICAgICB7IF90KFwiJShuYW1lKXMgb24gaG9sZFwiLCB7IG5hbWU6IGNhbGxSb29tLm5hbWUgfSkgfVxuICAgICAgICA8L3NwYW4+XG4gICAgPC9zcGFuPjtcbn07XG5cbmNvbnN0IENhbGxUeXBlSWNvbjogUmVhY3QuRkM8eyB0eXBlOiBDYWxsVHlwZSB9PiA9ICh7IHR5cGUgfSkgPT4ge1xuICAgIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKHtcbiAgICAgICAgJ214X0NhbGxWaWV3SGVhZGVyX2NhbGxUeXBlSWNvbic6IHRydWUsXG4gICAgICAgICdteF9DYWxsVmlld0hlYWRlcl9jYWxsVHlwZUljb25fdmlkZW8nOiB0eXBlID09PSBDYWxsVHlwZS5WaWRlbyxcbiAgICAgICAgJ214X0NhbGxWaWV3SGVhZGVyX2NhbGxUeXBlSWNvbl92b2ljZSc6IHR5cGUgPT09IENhbGxUeXBlLlZvaWNlLFxuICAgIH0pO1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlc30gLz47XG59O1xuXG5jb25zdCBDYWxsVmlld0hlYWRlcjogUmVhY3QuRkM8Q2FsbFZpZXdIZWFkZXJQcm9wcz4gPSAoe1xuICAgIHR5cGUsXG4gICAgcGlwTW9kZSA9IGZhbHNlLFxuICAgIGNhbGxSb29tcyA9IFtdLFxuICAgIG9uUGlwTW91c2VEb3duLFxufSkgPT4ge1xuICAgIGNvbnN0IFtjYWxsUm9vbSwgb25Ib2xkQ2FsbFJvb21dID0gY2FsbFJvb21zO1xuICAgIGNvbnN0IGNhbGxUeXBlVGV4dCA9IF90KGNhbGxUeXBlVHJhbnNsYXRpb25CeVR5cGVbdHlwZV0pO1xuICAgIGNvbnN0IGNhbGxSb29tTmFtZSA9IGNhbGxSb29tLm5hbWU7XG4gICAgY29uc3QgeyByb29tSWQgfSA9IGNhbGxSb29tO1xuXG4gICAgaWYgKCFwaXBNb2RlKSB7XG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cIm14X0NhbGxWaWV3SGVhZGVyXCI+XG4gICAgICAgICAgICA8Q2FsbFR5cGVJY29uIHR5cGU9e3R5cGV9IC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9DYWxsVmlld0hlYWRlcl9jYWxsVHlwZVwiPnsgY2FsbFR5cGVUZXh0IH08L3NwYW4+XG4gICAgICAgICAgICA8Q2FsbFZpZXdIZWFkZXJDb250cm9scyByb29tSWQ9e3Jvb21JZH0gcGlwTW9kZT17cGlwTW9kZX0gdHlwZT17dHlwZX0gLz5cbiAgICAgICAgPC9kaXY+O1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJteF9DYWxsVmlld0hlYWRlclwiXG4gICAgICAgICAgICBvbk1vdXNlRG93bj17b25QaXBNb3VzZURvd259XG4gICAgICAgID5cbiAgICAgICAgICAgIDxSb29tQXZhdGFyIHJvb209e2NhbGxSb29tfSBoZWlnaHQ9ezMyfSB3aWR0aD17MzJ9IC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0NhbGxWaWV3SGVhZGVyX2NhbGxJbmZvXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9DYWxsVmlld0hlYWRlcl9yb29tTmFtZVwiPnsgY2FsbFJvb21OYW1lIH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0NhbGxWaWV3SGVhZGVyX2NhbGxUeXBlU21hbGxcIj5cbiAgICAgICAgICAgICAgICAgICAgeyBjYWxsVHlwZVRleHQgfVxuICAgICAgICAgICAgICAgICAgICB7IG9uSG9sZENhbGxSb29tICYmIDxTZWNvbmRhcnlDYWxsSW5mbyBjYWxsUm9vbT17b25Ib2xkQ2FsbFJvb219IC8+IH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPENhbGxWaWV3SGVhZGVyQ29udHJvbHMgcm9vbUlkPXtyb29tSWR9IHBpcE1vZGU9e3BpcE1vZGV9IHR5cGU9e3R5cGV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDYWxsVmlld0hlYWRlcjtcbiJdfQ==