"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireWildcard(require("react"));

var _MatrixClientContext = _interopRequireDefault(require("../../../contexts/MatrixClientContext"));

var _BaseCard = _interopRequireDefault(require("./BaseCard"));

var _WidgetUtils = _interopRequireDefault(require("../../../utils/WidgetUtils"));

var _AppTile = _interopRequireDefault(require("../elements/AppTile"));

var _languageHandler = require("../../../languageHandler");

var _RoomSummaryCard = require("./RoomSummaryCard");

var _RightPanelStorePhases = require("../../../stores/RightPanelStorePhases");

var _dispatcher = _interopRequireDefault(require("../../../dispatcher/dispatcher"));

var _actions = require("../../../dispatcher/actions");

var _ContextMenu = require("../../structures/ContextMenu");

var _WidgetContextMenu = _interopRequireDefault(require("../context_menus/WidgetContextMenu"));

var _WidgetLayoutStore = require("../../../stores/widgets/WidgetLayoutStore");

var _UIStore = _interopRequireDefault(require("../../../stores/UIStore"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/*
Copyright 2020 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const WidgetCard = ({
  room,
  widgetId,
  onClose
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const apps = (0, _RoomSummaryCard.useWidgets)(room);
  const app = apps.find(a => a.id === widgetId);

  const isPinned = app && _WidgetLayoutStore.WidgetLayoutStore.instance.isInContainer(room, app, _WidgetLayoutStore.Container.Top);

  const [menuDisplayed, handle, openMenu, closeMenu] = (0, _ContextMenu.useContextMenu)();
  (0, _react.useEffect)(() => {
    if (!app || isPinned) {
      // stop showing this card
      _dispatcher.default.dispatch({
        action: _actions.Action.SetRightPanelPhase,
        phase: _RightPanelStorePhases.RightPanelPhases.RoomSummary
      });
    }
  }, [app, isPinned]); // Don't render anything as we are about to transition

  if (!app || isPinned) return null;
  let contextMenu;

  if (menuDisplayed) {
    const rect = handle.current.getBoundingClientRect();
    contextMenu = /*#__PURE__*/_react.default.createElement(_WidgetContextMenu.default, {
      chevronFace: _ContextMenu.ChevronFace.None,
      right: _UIStore.default.instance.windowWidth - rect.right - 12,
      top: rect.bottom + 12,
      onFinished: closeMenu,
      app: app
    });
  }

  const header = /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement("h2", null, _WidgetUtils.default.getWidgetName(app)), /*#__PURE__*/_react.default.createElement(_ContextMenu.ContextMenuButton, {
    kind: "secondary",
    className: "mx_WidgetCard_optionsButton",
    inputRef: handle,
    onClick: openMenu,
    isExpanded: menuDisplayed,
    label: (0, _languageHandler._t)("Options")
  }), contextMenu);

  return /*#__PURE__*/_react.default.createElement(_BaseCard.default, {
    header: header,
    className: "mx_WidgetCard",
    onClose: onClose,
    previousPhase: _RightPanelStorePhases.RightPanelPhases.RoomSummary,
    withoutScrollContainer: true
  }, /*#__PURE__*/_react.default.createElement(_AppTile.default, {
    app: app,
    fullWidth: true,
    showMenubar: false,
    room: room,
    userId: cli.getUserId(),
    creatorUserId: app.creatorUserId,
    widgetPageTitle: _WidgetUtils.default.getWidgetDataTitle(app),
    waitForIframeLoad: app.waitForIframeLoad
  }));
};

var _default = WidgetCard;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3JpZ2h0X3BhbmVsL1dpZGdldENhcmQudHN4Il0sIm5hbWVzIjpbIldpZGdldENhcmQiLCJyb29tIiwid2lkZ2V0SWQiLCJvbkNsb3NlIiwiY2xpIiwiTWF0cml4Q2xpZW50Q29udGV4dCIsImFwcHMiLCJhcHAiLCJmaW5kIiwiYSIsImlkIiwiaXNQaW5uZWQiLCJXaWRnZXRMYXlvdXRTdG9yZSIsImluc3RhbmNlIiwiaXNJbkNvbnRhaW5lciIsIkNvbnRhaW5lciIsIlRvcCIsIm1lbnVEaXNwbGF5ZWQiLCJoYW5kbGUiLCJvcGVuTWVudSIsImNsb3NlTWVudSIsImRlZmF1bHREaXNwYXRjaGVyIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJBY3Rpb24iLCJTZXRSaWdodFBhbmVsUGhhc2UiLCJwaGFzZSIsIlJpZ2h0UGFuZWxQaGFzZXMiLCJSb29tU3VtbWFyeSIsImNvbnRleHRNZW51IiwicmVjdCIsImN1cnJlbnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJDaGV2cm9uRmFjZSIsIk5vbmUiLCJVSVN0b3JlIiwid2luZG93V2lkdGgiLCJyaWdodCIsImJvdHRvbSIsImhlYWRlciIsIldpZGdldFV0aWxzIiwiZ2V0V2lkZ2V0TmFtZSIsImdldFVzZXJJZCIsImNyZWF0b3JVc2VySWQiLCJnZXRXaWRnZXREYXRhVGl0bGUiLCJ3YWl0Rm9ySWZyYW1lTG9hZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBZ0JBOztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7QUFoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMEJBLE1BQU1BLFVBQTRCLEdBQUcsQ0FBQztBQUFFQyxFQUFBQSxJQUFGO0FBQVFDLEVBQUFBLFFB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OztlQXFFZTdDLFUiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMjAgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlQ29udGV4dCwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBSb29tIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL21vZGVscy9yb29tXCI7XG5cbmltcG9ydCBNYXRyaXhDbGllbnRDb250ZXh0IGZyb20gXCIuLi8uLi8uLi9jb250ZXh0cy9NYXRyaXhDbGllbnRDb250ZXh0XCI7XG5pbXBvcnQgQmFzZUNhcmQgZnJvbSBcIi4vQmFzZUNhcmRcIjtcbmltcG9ydCBXaWRnZXRVdGlscyBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvV2lkZ2V0VXRpbHNcIjtcbmltcG9ydCBBcHBUaWxlIGZyb20gXCIuLi9lbGVtZW50cy9BcHBUaWxlXCI7XG5pbXBvcnQgeyBfdCB9IGZyb20gXCIuLi8uLi8uLi9sYW5ndWFnZUhhbmRsZXJcIjtcbmltcG9ydCB7IHVzZVdpZGdldHMgfSBmcm9tIFwiLi9Sb29tU3VtbWFyeUNhcmRcIjtcbmltcG9ydCB7IFJpZ2h0UGFuZWxQaGFzZXMgfSBmcm9tIFwiLi4vLi4vLi4vc3RvcmVzL1JpZ2h0UGFuZWxTdG9yZVBoYXNlc1wiO1xuaW1wb3J0IGRlZmF1bHREaXNwYXRjaGVyIGZyb20gXCIuLi8uLi8uLi9kaXNwYXRjaGVyL2Rpc3BhdGNoZXJcIjtcbmltcG9ydCB7IFNldFJpZ2h0UGFuZWxQaGFzZVBheWxvYWQgfSBmcm9tIFwiLi4vLi4vLi4vZGlzcGF0Y2hlci9wYXlsb2Fkcy9TZXRSaWdodFBhbmVsUGhhc2VQYXlsb2FkXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi4vLi4vLi4vZGlzcGF0Y2hlci9hY3Rpb25zXCI7XG5pbXBvcnQgeyBDaGV2cm9uRmFjZSwgQ29udGV4dE1lbnVCdXR0b24sIHVzZUNvbnRleHRNZW51IH0gZnJvbSBcIi4uLy4uL3N0cnVjdHVyZXMvQ29udGV4dE1lbnVcIjtcbmltcG9ydCBXaWRnZXRDb250ZXh0TWVudSBmcm9tIFwiLi4vY29udGV4dF9tZW51cy9XaWRnZXRDb250ZXh0TWVudVwiO1xuaW1wb3J0IHsgQ29udGFpbmVyLCBXaWRnZXRMYXlvdXRTdG9yZSB9IGZyb20gXCIuLi8uLi8uLi9zdG9yZXMvd2lkZ2V0cy9XaWRnZXRMYXlvdXRTdG9yZVwiO1xuaW1wb3J0IFVJU3RvcmUgZnJvbSBcIi4uLy4uLy4uL3N0b3Jlcy9VSVN0b3JlXCI7XG5cbmludGVyZmFjZSBJUHJvcHMge1xuICAgIHJvb206IFJvb207XG4gICAgd2lkZ2V0SWQ6IHN0cmluZztcbiAgICBvbkNsb3NlKCk6IHZvaWQ7XG59XG5cbmNvbnN0IFdpZGdldENhcmQ6IFJlYWN0LkZDPElQcm9wcz4gPSAoeyByb29tLCB3aWRnZXRJZCwgb25DbG9zZSB9KSA9PiB7XG4gICAgY29uc3QgY2xpID0gdXNlQ29udGV4dChNYXRyaXhDbGllbnRDb250ZXh0KTtcblxuICAgIGNvbnN0IGFwcHMgPSB1c2VXaWRnZXRzKHJvb20pO1xuICAgIGNvbnN0IGFwcCA9IGFwcHMuZmluZChhID0+IGEuaWQgPT09IHdpZGdldElkKTtcbiAgICBjb25zdCBpc1Bpbm5lZCA9IGFwcCAmJiBXaWRnZXRMYXlvdXRTdG9yZS5pbnN0YW5jZS5pc0luQ29udGFpbmVyKHJvb20sIGFwcCwgQ29udGFpbmVyLlRvcCk7XG5cbiAgICBjb25zdCBbbWVudURpc3BsYXllZCwgaGFuZGxlLCBvcGVuTWVudSwgY2xvc2VNZW51XSA9IHVzZUNvbnRleHRNZW51KCk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWFwcCB8fCBpc1Bpbm5lZCkge1xuICAgICAgICAgICAgLy8gc3RvcCBzaG93aW5nIHRoaXMgY2FyZFxuICAgICAgICAgICAgZGVmYXVsdERpc3BhdGNoZXIuZGlzcGF0Y2g8U2V0UmlnaHRQYW5lbFBoYXNlUGF5bG9hZD4oe1xuICAgICAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uLlNldFJpZ2h0UGFuZWxQaGFzZSxcbiAgICAgICAgICAgICAgICBwaGFzZTogUmlnaHRQYW5lbFBoYXNlcy5Sb29tU3VtbWFyeSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwgW2FwcCwgaXNQaW5uZWRdKTtcblxuICAgIC8vIERvbid0IHJlbmRlciBhbnl0aGluZyBhcyB3ZSBhcmUgYWJvdXQgdG8gdHJhbnNpdGlvblxuICAgIGlmICghYXBwIHx8IGlzUGlubmVkKSByZXR1cm4gbnVsbDtcblxuICAgIGxldCBjb250ZXh0TWVudTtcbiAgICBpZiAobWVudURpc3BsYXllZCkge1xuICAgICAgICBjb25zdCByZWN0ID0gaGFuZGxlLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnRleHRNZW51ID0gKFxuICAgICAgICAgICAgPFdpZGdldENvbnRleHRNZW51XG4gICAgICAgICAgICAgICAgY2hldnJvbkZhY2U9e0NoZXZyb25GYWNlLk5vbmV9XG4gICAgICAgICAgICAgICAgcmlnaHQ9e1VJU3RvcmUuaW5zdGFuY2Uud2luZG93V2lkdGggLSByZWN0LnJpZ2h0IC0gMTJ9XG4gICAgICAgICAgICAgICAgdG9wPXtyZWN0LmJvdHRvbSArIDEyfVxuICAgICAgICAgICAgICAgIG9uRmluaXNoZWQ9e2Nsb3NlTWVudX1cbiAgICAgICAgICAgICAgICBhcHA9e2FwcH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgaGVhZGVyID0gPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICA8aDI+eyBXaWRnZXRVdGlscy5nZXRXaWRnZXROYW1lKGFwcCkgfTwvaDI+XG4gICAgICAgIDxDb250ZXh0TWVudUJ1dHRvblxuICAgICAgICAgICAga2luZD1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJteF9XaWRnZXRDYXJkX29wdGlvbnNCdXR0b25cIlxuICAgICAgICAgICAgaW5wdXRSZWY9e2hhbmRsZX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e29wZW5NZW51fVxuICAgICAgICAgICAgaXNFeHBhbmRlZD17bWVudURpc3BsYXllZH1cbiAgICAgICAgICAgIGxhYmVsPXtfdChcIk9wdGlvbnNcIil9XG4gICAgICAgIC8+XG4gICAgICAgIHsgY29udGV4dE1lbnUgfVxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+O1xuXG4gICAgcmV0dXJuIDxCYXNlQ2FyZFxuICAgICAgICBoZWFkZXI9e2hlYWRlcn1cbiAgICAgICAgY2xhc3NOYW1lPVwibXhfV2lkZ2V0Q2FyZFwiXG4gICAgICAgIG9uQ2xvc2U9e29uQ2xvc2V9XG4gICAgICAgIHByZXZpb3VzUGhhc2U9e1JpZ2h0UGFuZWxQaGFzZXMuUm9vbVN1bW1hcnl9XG4gICAgICAgIHdpdGhvdXRTY3JvbGxDb250YWluZXJcbiAgICA+XG4gICAgICAgIDxBcHBUaWxlXG4gICAgICAgICAgICBhcHA9e2FwcH1cbiAgICAgICAgICAgIGZ1bGxXaWR0aFxuICAgICAgICAgICAgc2hvd01lbnViYXI9e2ZhbHNlfVxuICAgICAgICAgICAgcm9vbT17cm9vbX1cbiAgICAgICAgICAgIHVzZXJJZD17Y2xpLmdldFVzZXJJZCgpfVxuICAgICAgICAgICAgY3JlYXRvclVzZXJJZD17YXBwLmNyZWF0b3JVc2VySWR9XG4gICAgICAgICAgICB3aWRnZXRQYWdlVGl0bGU9e1dpZGdldFV0aWxzLmdldFdpZGdldERhdGFUaXRsZShhcHApfVxuICAgICAgICAgICAgd2FpdEZvcklmcmFtZUxvYWQ9e2FwcC53YWl0Rm9ySWZyYW1lTG9hZH1cbiAgICAgICAgLz5cbiAgICA8L0Jhc2VDYXJkPjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFdpZGdldENhcmQ7XG4iXX0=