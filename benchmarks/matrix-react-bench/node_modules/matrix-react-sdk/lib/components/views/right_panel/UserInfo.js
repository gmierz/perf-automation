"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useRoomPowerLevels = exports.useDevices = exports.getE2EStatus = exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _roomMember = require("matrix-js-sdk/src/models/room-member");

var _eventTimeline = require("matrix-js-sdk/src/models/event-timeline");

var _dispatcher = _interopRequireDefault(require("../../../dispatcher/dispatcher"));

var _Modal = _interopRequireDefault(require("../../../Modal"));

var _languageHandler = require("../../../languageHandler");

var _createRoom = _interopRequireWildcard(require("../../../createRoom"));

var _DMRoomMap = _interopRequireDefault(require("../../../utils/DMRoomMap"));

var _AccessibleButton = _interopRequireDefault(require("../elements/AccessibleButton"));

var _SdkConfig = _interopRequireDefault(require("../../../SdkConfig"));

var _SettingsStore = _interopRequireDefault(require("../../../settings/SettingsStore"));

var _RoomViewStore = _interopRequireDefault(require("../../../stores/RoomViewStore"));

var _MultiInviter = _interopRequireDefault(require("../../../utils/MultiInviter"));

var _GroupStore = _interopRequireDefault(require("../../../stores/GroupStore"));

var _MatrixClientPeg = require("../../../MatrixClientPeg");

var _E2EIcon = _interopRequireDefault(require("../rooms/E2EIcon"));

var _useEventEmitter = require("../../../hooks/useEventEmitter");

var _Roles = require("../../../Roles");

var _MatrixClientContext = _interopRequireDefault(require("../../../contexts/MatrixClientContext"));

var _RightPanelStorePhases = require("../../../stores/RightPanelStorePhases");

var _EncryptionPanel = _interopRequireDefault(require("./EncryptionPanel"));

var _useAsyncMemo = require("../../../hooks/useAsyncMemo");

var _verification = require("../../../verification");

var _actions = require("../../../dispatcher/actions");

var _UserSettingsDialog = require("../dialogs/UserSettingsDialog");

var _useIsEncrypted = require("../../../hooks/useIsEncrypted");

var _BaseCard = _interopRequireDefault(require("./BaseCard"));

var _ShieldUtils = require("../../../utils/ShieldUtils");

var _ImageView = _interopRequireDefault(require("../elements/ImageView"));

var _Spinner = _interopRequireDefault(require("../elements/Spinner"));

var _PowerSelector = _interopRequireDefault(require("../elements/PowerSelector"));

var _MemberAvatar = _interopRequireDefault(require("../avatars/MemberAvatar"));

var _PresenceLabel = _interopRequireDefault(require("../rooms/PresenceLabel"));

var _ShareDialog = _interopRequireDefault(require("../dialogs/ShareDialog"));

var _ErrorDialog = _interopRequireDefault(require("../dialogs/ErrorDialog"));

var _QuestionDialog = _interopRequireDefault(require("../dialogs/QuestionDialog"));

var _ConfirmUserActionDialog = _interopRequireDefault(require("../dialogs/ConfirmUserActionDialog"));

var _InfoDialog = _interopRequireDefault(require("../dialogs/InfoDialog"));

var _event = require("matrix-js-sdk/src/@types/event");

var _RoomAvatar = _interopRequireDefault(require("../avatars/RoomAvatar"));

var _RoomName = _interopRequireDefault(require("../elements/RoomName"));

var _Media = require("../../../customisations/Media");

var _UIStore = _interopRequireDefault(require("../../../stores/UIStore"));

var _SpaceStore = _interopRequireDefault(require("../../../stores/spaces/SpaceStore"));

var _ConfirmSpaceUserActionDialog = _interopRequireDefault(require("../dialogs/ConfirmSpaceUserActionDialog"));

var _space = require("../../../utils/space");

var _logger = require("matrix-js-sdk/src/logger");

var _UIComponents = require("../../../customisations/helpers/UIComponents");

var _UIFeature = require("../../../settings/UIFeature");

var _RoomContext = require("../../../contexts/RoomContext");

const _excluded = ["user", "groupId", "room", "onClose", "phase"];

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

const disambiguateDevices = devices => {
  const names = Object.create(null);

  for (let i = 0; i < devices.length; i++) {
    const name = devices[i].getDisplayName();
    const indexList = names[name] || [];
    indexList.push(i);
    names[name] = indexList;
  }

  for (const name in names) {
    if (names[name].length > 1) {
      names[name].forEach(j => {
        devices[j].ambiguous = true;
      });
    }
  }
};

const getE2EStatus = (cli, userId, devices) => {
  const isMe = userId === cli.getUserId();
  const userTrust = cli.checkUserTrust(userId);

  if (!userTrust.isCrossSigningVerified()) {
    return userTrust.wasCrossSigningVerified() ? _ShieldUtils.E2EStatus.Warning : _ShieldUtils.E2EStatus.Normal;
  }

  const anyDeviceUnverified = devices.some(device => {
    const {
      deviceId
    } = device; // For your own devices, we use the stricter check of cross-signing
    // verification to encourage everyone to trust their own devices via
    // cross-signing so that other users can then safely trust you.
    // For other people's devices, the more general verified check that
    // includes locally verified devices can be used.

    const deviceTrust = cli.checkDeviceTrust(userId, deviceId);
    return isMe ? !deviceTrust.isCrossSigningVerified() : !deviceTrust.isVerified();
  });
  return anyDeviceUnverified ? _ShieldUtils.E2EStatus.Warning : _ShieldUtils.E2EStatus.Verified;
};

exports.getE2EStatus = getE2EStatus;

async function openDMForUser(matrixClient, userId) {
  const lastActiveRoom = (0, _createRoom.findDMForUser)(matrixClient, userId);

  if (lastActiveRoom) {
    _dispatcher.default.dispatch({
      action: _actions.Action.ViewRoom,
      room_id: lastActiveRoom.roomId
    });

    return;
  }

  const createRoomOptions = {
    dmUserId: userId,
    encryption: undefined
  };

  if ((0, _createRoom.privateShouldBeEncrypted)()) {
    // Check whether all users have uploaded device keys before.
    // If so, enable encryption in the new room.
    const usersToDevicesMap = await matrixClient.downloadKeys([userId]);
    const allHaveDeviceKeys = Object.values(usersToDevicesMap).every(devices => {
      // `devices` is an object of the form { deviceId: deviceInfo, ... }.
      return Object.keys(devices).length > 0;
    });

    if (allHaveDeviceKeys) {
      createRoomOptions.encryption = true;
    }
  }

  return (0, _createRoom.default)(createRoomOptions);
}

function useHasCrossSigningKeys(cli, member, canVerify, setUpdating) {
  return (0, _useAsyncMemo.useAsyncMemo)(async () => {
    if (!canVerify) {
      return undefined;
    }

    setUpdating(true);

    try {
      await cli.downloadKeys([member.userId]);
      const xsi = cli.getStoredCrossSigningForUser(member.userId);
      const key = xsi && xsi.getId();
      return !!key;
    } finally {
      setUpdating(false);
    }
  }, [cli, member, canVerify], undefined);
}

function DeviceItem({
  userId,
  device
}) {
  var _device$getDisplayNam;

  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const isMe = userId === cli.getUserId();
  const deviceTrust = cli.checkDeviceTrust(userId, device.deviceId);
  const userTrust = cli.checkUserTrust(userId); // For your own devices, we use the stricter check of cross-signing
  // verification to encourage everyone to trust their own devices via
  // cross-signing so that other users can then safely trust you.
  // For other people's devices, the more general verified check that
  // includes locally verified devices can be used.

  const isVerified = isMe ? deviceTrust.isCrossSigningVerified() : deviceTrust.isVerified();
  const classes = (0, _classnames.default)("mx_UserInfo_device", {
    mx_UserInfo_device_verified: isVerified,
    mx_UserInfo_device_unverified: !isVerified
  });
  const iconClasses = (0, _classnames.default)("mx_E2EIcon", {
    mx_E2EIcon_normal: !userTrust.isVerified(),
    mx_E2EIcon_verified: isVerified,
    mx_E2EIcon_warning: userTrust.isVerified() && !isVerified
  });

  const onDeviceClick = () => {
    (0, _verification.verifyDevice)(cli.getUser(userId), device);
  };

  let deviceName;

  if (!((_device$getDisplayNam = device.getDisplayName()) !== null && _device$getDisplayNam !== void 0 && _device$getDisplayNam.trim())) {
    deviceName = device.deviceId;
  } else {
    deviceName = device.ambiguous ? device.getDisplayName() + " (" + device.deviceId + ")" : device.getDisplayName();
  }

  let trustedLabel = null;
  if (userTrust.isVerified()) trustedLabel = isVerified ? (0, _languageHandler._t)("Trusted") : (0, _languageHandler._t)("Not trusted");

  if (isVerified) {
    return /*#__PURE__*/_react.default.createElement("div", {
      className: classes,
      title: device.deviceId
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: iconClasses
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_UserInfo_device_name"
    }, deviceName), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_UserInfo_device_trusted"
    }, trustedLabel));
  } else {
    return /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: classes,
      title: device.deviceId,
      onClick: onDeviceClick
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: iconClasses
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_UserInfo_device_name"
    }, deviceName), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_UserInfo_device_trusted"
    }, trustedLabel));
  }
}

function DevicesSection({
  devices,
  userId,
  loading
}) {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const userTrust = cli.checkUserTrust(userId);
  const [isExpanded, setExpanded] = (0, _react.useState)(false);

  if (loading) {
    // still loading
    return /*#__PURE__*/_react.default.createElement(_Spinner.default, null);
  }

  if (devices === null) {
    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, (0, _languageHandler._t)("Unable to load session list"));
  }

  const isMe = userId === cli.getUserId();
  const deviceTrusts = devices.map(d => cli.checkDeviceTrust(userId, d.deviceId));
  let expandSectionDevices = [];
  const unverifiedDevices = [];
  let expandCountCaption;
  let expandHideCaption;
  let expandIconClasses = "mx_E2EIcon";

  if (userTrust.isVerified()) {
    for (let i = 0; i < devices.length; ++i) {
      const device = devices[i];
      const deviceTrust = deviceTrusts[i]; // For your own devices, we use the stricter check of cross-signing
      // verification to encourage everyone to trust their own devices via
      // cross-signing so that other users can then safely trust you.
      // For other people's devices, the more general verified check that
      // includes locally verified devices can be used.

      const isVerified = isMe ? deviceTrust.isCrossSigningVerified() : deviceTrust.isVerified();

      if (isVerified) {
        expandSectionDevices.push(device);
      } else {
        unverifiedDevices.push(device);
      }
    }

    expandCountCaption = (0, _languageHandler._t)("%(count)s verified sessions", {
      count: expandSectionDevices.length
    });
    expandHideCaption = (0, _languageHandler._t)("Hide verified sessions");
    expandIconClasses += " mx_E2EIcon_verified";
  } else {
    expandSectionDevices = devices;
    expandCountCaption = (0, _languageHandler._t)("%(count)s sessions", {
      count: devices.length
    });
    expandHideCaption = (0, _languageHandler._t)("Hide sessions");
    expandIconClasses += " mx_E2EIcon_normal";
  }

  let expandButton;

  if (expandSectionDevices.length) {
    if (isExpanded) {
      expandButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        className: "mx_UserInfo_expand mx_linkButton",
        onClick: () => setExpanded(false)
      }, /*#__PURE__*/_react.default.createElement("div", null, expandHideCaption));
    } else {
      expandButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        className: "mx_UserInfo_expand mx_linkButton",
        onClick: () => setExpanded(true)
      }, /*#__PURE__*/_react.default.createElement("div", {
        className: expandIconClasses
      }), /*#__PURE__*/_react.default.createElement("div", null, expandCountCaption));
    }
  }

  let deviceList = unverifiedDevices.map((device, i) => {
    return /*#__PURE__*/_react.default.createElement(DeviceItem, {
      key: i,
      userId: userId,
      device: device
    });
  });

  if (isExpanded) {
    const keyStart = unverifiedDevices.length;
    deviceList = deviceList.concat(expandSectionDevices.map((device, i) => {
      return /*#__PURE__*/_react.default.createElement(DeviceItem, {
        key: i + keyStart,
        userId: userId,
        device: device
      });
    }));
  }

  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_devices"
  }, /*#__PURE__*/_react.default.createElement("div", null, deviceList), /*#__PURE__*/_react.default.createElement("div", null, expandButton));
}

const UserOptionsSection = ({
  member,
  isIgnored,
  canInvite,
  isSpace
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  let ignoreButton = null;
  let insertPillButton = null;
  let inviteUserButton = null;
  let readReceiptButton = null;
  const isMe = member.userId === cli.getUserId();

  const onShareUserClick = () => {
    _Modal.default.createTrackedDialog('share room member dialog', '', _ShareDialog.default, {
      target: member
    });
  }; // Only allow the user to ignore the user if its not ourselves
  // same goes for jumping to read receipt


  if (!isMe) {
    const onIgnoreToggle = () => {
      const ignoredUsers = cli.getIgnoredUsers();

      if (isIgnored) {
        const index = ignoredUsers.indexOf(member.userId);
        if (index !== -1) ignoredUsers.splice(index, 1);
      } else {
        ignoredUsers.push(member.userId);
      }

      cli.setIgnoredUsers(ignoredUsers);
    };

    ignoreButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: onIgnoreToggle,
      className: (0, _classnames.default)("mx_UserInfo_field", {
        mx_UserInfo_destructive: !isIgnored
      })
    }, isIgnored ? (0, _languageHandler._t)("Unignore") : (0, _languageHandler._t)("Ignore"));

    if (member.roomId && !isSpace) {
      const onReadReceiptButton = function () {
        const room = cli.getRoom(member.roomId);

        _dispatcher.default.dispatch({
          action: _actions.Action.ViewRoom,
          highlighted: true,
          event_id: room.getEventReadUpTo(member.userId),
          room_id: member.roomId
        });
      };

      const onInsertPillButton = function () {
        _dispatcher.default.dispatch({
          action: _actions.Action.ComposerInsert,
          userId: member.userId,
          timelineRenderingType: _RoomContext.TimelineRenderingType.Room
        });
      };

      const room = cli.getRoom(member.roomId);

      if (room !== null && room !== void 0 && room.getEventReadUpTo(member.userId)) {
        readReceiptButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
          onClick: onReadReceiptButton,
          className: "mx_UserInfo_field"
        }, (0, _languageHandler._t)('Jump to read receipt'));
      }

      insertPillButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        onClick: onInsertPillButton,
        className: "mx_UserInfo_field"
      }, (0, _languageHandler._t)('Mention'));
    }

    if (canInvite && ((member === null || member === void 0 ? void 0 : member.membership) ?? 'leave') === 'leave' && (0, _UIComponents.shouldShowComponent)(_UIFeature.UIComponent.InviteUsers)) {
      const roomId = member && member.roomId ? member.roomId : _RoomViewStore.default.getRoomId();

      const onInviteUserButton = async () => {
        try {
          // We use a MultiInviter to re-use the invite logic, even though
          // we're only inviting one user.
          const inviter = new _MultiInviter.default(roomId);
          await inviter.invite([member.userId]).then(() => {
            if (inviter.getCompletionState(member.userId) !== "invited") {
              throw new Error(inviter.getErrorText(member.userId));
            }
          });
        } catch (err) {
          _Modal.default.createTrackedDialog('Failed to invite', '', _ErrorDialog.default, {
            title: (0, _languageHandler._t)('Failed to invite'),
            description: err && err.message ? err.message : (0, _languageHandler._t)("Operation failed")
          });
        }
      };

      inviteUserButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        onClick: onInviteUserButton,
        className: "mx_UserInfo_field"
      }, (0, _languageHandler._t)('Invite'));
    }
  }

  const shareUserButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    onClick: onShareUserClick,
    className: "mx_UserInfo_field"
  }, (0, _languageHandler._t)('Share Link to User'));

  let directMessageButton;

  if (!isMe) {
    directMessageButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: () => {
        openDMForUser(cli, member.userId);
      },
      className: "mx_UserInfo_field"
    }, (0, _languageHandler._t)("Message"));
  }

  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_container"
  }, /*#__PURE__*/_react.default.createElement("h3", null, (0, _languageHandler._t)("Options")), /*#__PURE__*/_react.default.createElement("div", null, directMessageButton, readReceiptButton, shareUserButton, insertPillButton, inviteUserButton, ignoreButton));
};

const warnSelfDemote = async isSpace => {
  const {
    finished
  } = _Modal.default.createTrackedDialog('Demoting Self', '', _QuestionDialog.default, {
    title: (0, _languageHandler._t)("Demote yourself?"),
    description: /*#__PURE__*/_react.default.createElement("div", null, isSpace ? (0, _languageHandler._t)("You will not be able to undo this change as you are demoting yourself, " + "if you are the last privileged user in the space it will be impossible " + "to regain privileges.") : (0, _languageHandler._t)("You will not be able to undo this change as you are demoting yourself, " + "if you are the last privileged user in the room it will be impossible " + "to regain privileges.")),
    button: (0, _languageHandler._t)("Demote")
  });

  const [confirmed] = await finished;
  return confirmed;
};

const GenericAdminToolsContainer = ({
  children
}) => {
  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_container"
  }, /*#__PURE__*/_react.default.createElement("h3", null, (0, _languageHandler._t)("Admin Tools")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_buttons"
  }, children));
};

const isMuted = (member, powerLevelContent) => {
  if (!powerLevelContent || !member) return false;
  const levelToSend = (powerLevelContent.events ? powerLevelContent.events["m.room.message"] : null) || powerLevelContent.events_default;
  return member.powerLevel < levelToSend;
};

const getPowerLevels = room => {
  var _room$currentState, _room$currentState$ge;

  return (room === null || room === void 0 ? void 0 : (_room$currentState = room.currentState) === null || _room$currentState === void 0 ? void 0 : (_room$currentState$ge = _room$currentState.getStateEvents(_event.EventType.RoomPowerLevels, "")) === null || _room$currentState$ge === void 0 ? void 0 : _room$currentState$ge.getContent()) || {};
};

const useRoomPowerLevels = (cli, room) => {
  const [powerLevels, setPowerLevels] = (0, _react.useState)(getPowerLevels(room));
  const update = (0, _react.useCallback)(ev => {
    if (!room) return;
    if (ev && ev.getType() !== _event.EventType.RoomPowerLevels) return;
    setPowerLevels(getPowerLevels(room));
  }, [room]);
  (0, _useEventEmitter.useEventEmitter)(cli, "RoomState.events", update);
  (0, _react.useEffect)(() => {
    update();
    return () => {
      setPowerLevels({});
    };
  }, [update]);
  return powerLevels;
};

exports.useRoomPowerLevels = useRoomPowerLevels;

const RoomKickButton = ({
  room,
  member,
  startUpdating,
  stopUpdating
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default); // check if user can be kicked/disinvited

  if (member.membership !== "invite" && member.membership !== "join") return null;

  const onKick = async () => {
    const {
      finished
    } = _Modal.default.createTrackedDialog('Confirm User Action Dialog', 'onKick', room.isSpaceRoom() ? _ConfirmSpaceUserActionDialog.default : _ConfirmUserActionDialog.default, {
      member,
      action: member.membership === "invite" ? (0, _languageHandler._t)("Disinvite") : (0, _languageHandler._t)("Kick"),
      title: member.membership === "invite" ? (0, _languageHandler._t)("Disinvite from %(roomName)s", {
        roomName: room.name
      }) : (0, _languageHandler._t)("Kick from %(roomName)s", {
        roomName: room.name
      }),
      askReason: member.membership === "join",
      danger: true,
      // space-specific props
      space: room,
      spaceChildFilter: child => {
        // Return true if the target member is not banned and we have sufficient PL to ban them
        const myMember = child.getMember(cli.credentials.userId);
        const theirMember = child.getMember(member.userId);
        return myMember && theirMember && theirMember.membership === member.membership && myMember.powerLevel > theirMember.powerLevel && child.currentState.hasSufficientPowerLevelFor("kick", myMember.powerLevel);
      },
      allLabel: (0, _languageHandler._t)("Kick them from everything I'm able to"),
      specificLabel: (0, _languageHandler._t)("Kick them from specific things I'm able to"),
      warningMessage: (0, _languageHandler._t)("They'll still be able to access whatever you're not an admin of.")
    }, room.isSpaceRoom() ? "mx_ConfirmSpaceUserActionDialog_wrapper" : undefined);

    const [proceed, reason, rooms = []] = await finished;
    if (!proceed) return;
    startUpdating();
    (0, _space.bulkSpaceBehaviour)(room, rooms, room => cli.kick(room.roomId, member.userId, reason || undefined)).then(() => {
      // NO-OP; rely on the m.room.member event coming down else we could
      // get out of sync if we force setState here!
      _logger.logger.log("Kick success");
    }, function (err) {
      _logger.logger.error("Kick error: " + err);

      _Modal.default.createTrackedDialog('Failed to kick', '', _ErrorDialog.default, {
        title: (0, _languageHandler._t)("Failed to kick"),
        description: err && err.message ? err.message : "Operation failed"
      });
    }).finally(() => {
      stopUpdating();
    });
  };

  const kickLabel = member.membership === "invite" ? (0, _languageHandler._t)("Disinvite") : (0, _languageHandler._t)("Kick");
  return /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    className: "mx_UserInfo_field mx_UserInfo_destructive",
    onClick: onKick
  }, kickLabel);
};

const RedactMessagesButton = ({
  member
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);

  const onRedactAllMessages = async () => {
    const {
      roomId,
      userId
    } = member;
    const room = cli.getRoom(roomId);

    if (!room) {
      return;
    }

    let timeline = room.getLiveTimeline();
    let eventsToRedact = [];

    while (timeline) {
      eventsToRedact = timeline.getEvents().reduce((events, event) => {
        if (event.getSender() === userId && !event.isRedacted() && !event.isRedaction() && event.getType() !== _event.EventType.RoomCreate && // Don't redact ACLs because that'll obliterate the room
        // See https://github.com/matrix-org/synapse/issues/4042 for details.
        event.getType() !== _event.EventType.RoomServerAcl) {
          return events.concat(event);
        } else {
          return events;
        }
      }, eventsToRedact);
      timeline = timeline.getNeighbouringTimeline(_eventTimeline.EventTimeline.BACKWARDS);
    }

    const count = eventsToRedact.length;
    const user = member.name;

    if (count === 0) {
      _Modal.default.createTrackedDialog('No user messages found to remove', '', _InfoDialog.default, {
        title: (0, _languageHandler._t)("No recent messages by %(user)s found", {
          user
        }),
        description: /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("Try scrolling up in the timeline to see if there are any earlier ones.")))
      });
    } else {
      const {
        finished
      } = _Modal.default.createTrackedDialog('Remove recent messages by user', '', _QuestionDialog.default, {
        title: (0, _languageHandler._t)("Remove recent messages by %(user)s", {
          user
        }),
        description: /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("You are about to remove %(count)s messages by %(user)s. " + "This cannot be undone. Do you wish to continue?", {
          count,
          user
        })), /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("For a large amount of messages, this might take some time. " + "Please don't refresh your client in the meantime."))),
        button: (0, _languageHandler._t)("Remove %(count)s messages", {
          count
        })
      });

      const [confirmed] = await finished;

      if (!confirmed) {
        return;
      } // Submitting a large number of redactions freezes the UI,
      // so first yield to allow to rerender after closing the dialog.


      await Promise.resolve();

      _logger.logger.info(`Started redacting recent ${count} messages for ${user} in ${roomId}`);

      await Promise.all(eventsToRedact.map(async event => {
        try {
          await cli.redactEvent(roomId, event.getId());
        } catch (err) {
          // log and swallow errors
          _logger.logger.error("Could not redact", event.getId());

          _logger.logger.error(err);
        }
      }));

      _logger.logger.info(`Finished redacting recent ${count} messages for ${user} in ${roomId}`);
    }
  };

  return /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    className: "mx_UserInfo_field mx_UserInfo_destructive",
    onClick: onRedactAllMessages
  }, (0, _languageHandler._t)("Remove recent messages"));
};

const BanToggleButton = ({
  room,
  member,
  startUpdating,
  stopUpdating
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const isBanned = member.membership === "ban";

  const onBanOrUnban = async () => {
    const {
      finished
    } = _Modal.default.createTrackedDialog('Confirm User Action Dialog', 'onBanOrUnban', room.isSpaceRoom() ? _ConfirmSpaceUserActionDialog.default : _ConfirmUserActionDialog.default, {
      member,
      action: isBanned ? (0, _languageHandler._t)("Unban") : (0, _languageHandler._t)("Ban"),
      title: isBanned ? (0, _languageHandler._t)("Unban from %(roomName)s", {
        roomName: room.name
      }) : (0, _languageHandler._t)("Ban from %(roomName)s", {
        roomName: room.name
      }),
      askReason: !isBanned,
      danger: !isBanned,
      // space-specific props
      space: room,
      spaceChildFilter: isBanned ? child => {
        // Return true if the target member is banned and we have sufficient PL to unban
        const myMember = child.getMember(cli.credentials.userId);
        const theirMember = child.getMember(member.userId);
        return myMember && theirMember && theirMember.membership === "ban" && myMember.powerLevel > theirMember.powerLevel && child.currentState.hasSufficientPowerLevelFor("ban", myMember.powerLevel);
      } : child => {
        // Return true if the target member isn't banned and we have sufficient PL to ban
        const myMember = child.getMember(cli.credentials.userId);
        const theirMember = child.getMember(member.userId);
        return myMember && theirMember && theirMember.membership !== "ban" && myMember.powerLevel > theirMember.powerLevel && child.currentState.hasSufficientPowerLevelFor("ban", myMember.powerLevel);
      },
      allLabel: isBanned ? (0, _languageHandler._t)("Unban them from everything I'm able to") : (0, _languageHandler._t)("Ban them from everything I'm able to"),
      specificLabel: isBanned ? (0, _languageHandler._t)("Unban them from specific things I'm able to") : (0, _languageHandler._t)("Ban them from specific things I'm able to"),
      warningMessage: isBanned ? (0, _languageHandler._t)("They won't be able to access whatever you're not an admin of.") : (0, _languageHandler._t)("They'll still be able to access whatever you're not an admin of.")
    }, room.isSpaceRoom() ? "mx_ConfirmSpaceUserActionDialog_wrapper" : undefined);

    const [proceed, reason, rooms = []] = await finished;
    if (!proceed) return;
    startUpdating();

    const fn = roomId => {
      if (isBanned) {
        return cli.unban(roomId, member.userId);
      } else {
        return cli.ban(roomId, member.userId, reason || undefined);
      }
    };

    (0, _space.bulkSpaceBehaviour)(room, rooms, room => fn(room.roomId)).then(() => {
      // NO-OP; rely on the m.room.member event coming down else we could
      // get out of sync if we force setState here!
      _logger.logger.log("Ban success");
    }, function (err) {
      _logger.logger.error("Ban error: " + err);

      _Modal.default.createTrackedDialog('Failed to ban user', '', _ErrorDialog.default, {
        title: (0, _languageHandler._t)("Error"),
        description: (0, _languageHandler._t)("Failed to ban user")
      });
    }).finally(() => {
      stopUpdating();
    });
  };

  let label = (0, _languageHandler._t)("Ban");

  if (isBanned) {
    label = (0, _languageHandler._t)("Unban");
  }

  const classes = (0, _classnames.default)("mx_UserInfo_field", {
    mx_UserInfo_destructive: !isBanned
  });
  return /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    className: classes,
    onClick: onBanOrUnban
  }, label);
};

const MuteToggleButton = ({
  member,
  room,
  powerLevels,
  startUpdating,
  stopUpdating
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default); // Don't show the mute/unmute option if the user is not in the room

  if (member.membership !== "join") return null;
  const muted = isMuted(member, powerLevels);

  const onMuteToggle = async () => {
    const roomId = member.roomId;
    const target = member.userId; // if muting self, warn as it may be irreversible

    if (target === cli.getUserId()) {
      try {
        if (!(await warnSelfDemote(_SpaceStore.default.spacesEnabled && (room === null || room === void 0 ? void 0 : room.isSpaceRoom())))) return;
      } catch (e) {
        _logger.logger.error("Failed to warn about self demotion: ", e);

        return;
      }
    }

    const powerLevelEvent = room.currentState.getStateEvents("m.room.power_levels", "");
    if (!powerLevelEvent) return;
    const powerLevels = powerLevelEvent.getContent();
    const levelToSend = (powerLevels.events ? powerLevels.events["m.room.message"] : null) || powerLevels.events_default;
    let level;

    if (muted) {
      // unmute
      level = levelToSend;
    } else {
      // mute
      level = levelToSend - 1;
    }

    level = parseInt(level);

    if (!isNaN(level)) {
      startUpdating();
      cli.setPowerLevel(roomId, target, level, powerLevelEvent).then(() => {
        // NO-OP; rely on the m.room.member event coming down else we could
        // get out of sync if we force setState here!
        _logger.logger.log("Mute toggle success");
      }, function (err) {
        _logger.logger.error("Mute error: " + err);

        _Modal.default.createTrackedDialog('Failed to mute user', '', _ErrorDialog.default, {
          title: (0, _languageHandler._t)("Error"),
          description: (0, _languageHandler._t)("Failed to mute user")
        });
      }).finally(() => {
        stopUpdating();
      });
    }
  };

  const classes = (0, _classnames.default)("mx_UserInfo_field", {
    mx_UserInfo_destructive: !muted
  });
  const muteLabel = muted ? (0, _languageHandler._t)("Unmute") : (0, _languageHandler._t)("Mute");
  return /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    className: classes,
    onClick: onMuteToggle
  }, muteLabel);
};

const RoomAdminToolsContainer = ({
  room,
  children,
  member,
  startUpdating,
  stopUpdating,
  powerLevels
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  let kickButton;
  let banButton;
  let muteButton;
  let redactButton;
  const editPowerLevel = (powerLevels.events ? powerLevels.events["m.room.power_levels"] : null) || powerLevels.state_default; // if these do not exist in the event then they should default to 50 as per the spec

  const {
    ban: banPowerLevel = 50,
    kick: kickPowerLevel = 50,
    redact: redactPowerLevel = 50
  } = powerLevels;
  const me = room.getMember(cli.getUserId());

  if (!me) {
    // we aren't in the room, so return no admin tooling
    return /*#__PURE__*/_react.default.createElement("div", null);
  }

  const isMe = me.userId === member.userId;
  const canAffectUser = member.powerLevel < me.powerLevel || isMe;

  if (!isMe && canAffectUser && me.powerLevel >= kickPowerLevel) {
    kickButton = /*#__PURE__*/_react.default.createElement(RoomKickButton, {
      room: room,
      member: member,
      startUpdating: startUpdating,
      stopUpdating: stopUpdating
    });
  }

  if (me.powerLevel >= redactPowerLevel && (!_SpaceStore.default.spacesEnabled || !room.isSpaceRoom())) {
    redactButton = /*#__PURE__*/_react.default.createElement(RedactMessagesButton, {
      member: member,
      startUpdating: startUpdating,
      stopUpdating: stopUpdating
    });
  }

  if (!isMe && canAffectUser && me.powerLevel >= banPowerLevel) {
    banButton = /*#__PURE__*/_react.default.createElement(BanToggleButton, {
      room: room,
      member: member,
      startUpdating: startUpdating,
      stopUpdating: stopUpdating
    });
  }

  if (!isMe && canAffectUser && me.powerLevel >= editPowerLevel && !room.isSpaceRoom()) {
    muteButton = /*#__PURE__*/_react.default.createElement(MuteToggleButton, {
      member: member,
      room: room,
      powerLevels: powerLevels,
      startUpdating: startUpdating,
      stopUpdating: stopUpdating
    });
  }

  if (kickButton || banButton || muteButton || redactButton || children) {
    return /*#__PURE__*/_react.default.createElement(GenericAdminToolsContainer, null, muteButton, kickButton, banButton, redactButton, children);
  }

  return /*#__PURE__*/_react.default.createElement("div", null);
};

const GroupAdminToolsSection = ({
  children,
  groupId,
  groupMember,
  startUpdating,
  stopUpdating
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const [isPrivileged, setIsPrivileged] = (0, _react.useState)(false);
  const [isInvited, setIsInvited] = (0, _react.useState)(false); // Listen to group store changes

  (0, _react.useEffect)(() => {
    let unmounted = false;

    const onGroupStoreUpdated = () => {
      if (unmounted) return;
      setIsPrivileged(_GroupStore.default.isUserPrivileged(groupId));
      setIsInvited(_GroupStore.default.getGroupInvitedMembers(groupId).some(m => m.userId === groupMember.userId));
    };

    _GroupStore.default.registerListener(groupId, onGroupStoreUpdated);

    onGroupStoreUpdated(); // Handle unmount

    return () => {
      unmounted = true;

      _GroupStore.default.unregisterListener(onGroupStoreUpdated);
    };
  }, [groupId, groupMember.userId]);

  if (isPrivileged) {
    const onKick = async () => {
      const {
        finished
      } = _Modal.default.createDialog(_ConfirmUserActionDialog.default, {
        matrixClient: cli,
        groupMember,
        action: isInvited ? (0, _languageHandler._t)('Disinvite') : (0, _languageHandler._t)('Remove from community'),
        title: isInvited ? (0, _languageHandler._t)('Disinvite this user from community?') : (0, _languageHandler._t)('Remove this user from community?'),
        danger: true
      });

      const [proceed] = await finished;
      if (!proceed) return;
      startUpdating();
      cli.removeUserFromGroup(groupId, groupMember.userId).then(() => {
        // return to the user list
        _dispatcher.default.dispatch({
          action: _actions.Action.ViewUser,
          member: null
        });
      }).catch(e => {
        _Modal.default.createTrackedDialog('Failed to remove user from group', '', _ErrorDialog.default, {
          title: (0, _languageHandler._t)('Error'),
          description: isInvited ? (0, _languageHandler._t)('Failed to withdraw invitation') : (0, _languageHandler._t)('Failed to remove user from community')
        });

        _logger.logger.log(e);
      }).finally(() => {
        stopUpdating();
      });
    };

    const kickButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: "mx_UserInfo_field mx_UserInfo_destructive",
      onClick: onKick
    }, isInvited ? (0, _languageHandler._t)('Disinvite') : (0, _languageHandler._t)('Remove from community')); // No make/revoke admin API yet

    /*const opLabel = this.state.isTargetMod ? _t("Revoke Moderator") : _t("Make Moderator");
    giveModButton = <AccessibleButton className="mx_UserInfo_field" onClick={this.onModToggle}>
        {giveOpLabel}
    </AccessibleButton>;*/


    return /*#__PURE__*/_react.default.createElement(GenericAdminToolsContainer, null, kickButton, children);
  }

  return /*#__PURE__*/_react.default.createElement("div", null);
};

const useIsSynapseAdmin = cli => {
  const [isAdmin, setIsAdmin] = (0, _react.useState)(false);
  (0, _react.useEffect)(() => {
    cli.isSynapseAdministrator().then(isAdmin => {
      setIsAdmin(isAdmin);
    }, () => {
      setIsAdmin(false);
    });
  }, [cli]);
  return isAdmin;
};

const useHomeserverSupportsCrossSigning = cli => {
  return (0, _useAsyncMemo.useAsyncMemo)(async () => {
    return cli.doesServerSupportUnstableFeature("org.matrix.e2e_cross_signing");
  }, [cli], false);
};

function useRoomPermissions(cli, room, user) {
  const [roomPermissions, setRoomPermissions] = (0, _react.useState)({
    // modifyLevelMax is the max PL we can set this user to, typically min(their PL, our PL) && canSetPL
    modifyLevelMax: -1,
    canEdit: false,
    canInvite: false
  });
  const updateRoomPermissions = (0, _react.useCallback)(() => {
    if (!room) {
      return;
    }

    const powerLevelEvent = room.currentState.getStateEvents("m.room.power_levels", "");
    if (!powerLevelEvent) return;
    const powerLevels = powerLevelEvent.getContent();
    if (!powerLevels) return;
    const me = room.getMember(cli.getUserId());
    if (!me) return;
    const them = user;
    const isMe = me.userId === them.userId;
    const canAffectUser = them.powerLevel < me.powerLevel || isMe;
    let modifyLevelMax = -1;

    if (canAffectUser) {
      const editPowerLevel = (powerLevels.events ? powerLevels.events["m.room.power_levels"] : null) || powerLevels.state_default;

      if (me.powerLevel >= editPowerLevel && (isMe || me.powerLevel > them.powerLevel)) {
        modifyLevelMax = me.powerLevel;
      }
    }

    setRoomPermissions({
      canInvite: me.powerLevel >= powerLevels.invite,
      canEdit: modifyLevelMax >= 0,
      modifyLevelMax
    });
  }, [cli, user, room]);
  (0, _useEventEmitter.useEventEmitter)(cli, "RoomState.members", updateRoomPermissions);
  (0, _react.useEffect)(() => {
    updateRoomPermissions();
    return () => {
      setRoomPermissions({
        modifyLevelMax: -1,
        canEdit: false,
        canInvite: false
      });
    };
  }, [updateRoomPermissions]);
  return roomPermissions;
}

const PowerLevelSection = ({
  user,
  room,
  roomPermissions,
  powerLevels
}) => {
  if (roomPermissions.canEdit) {
    return /*#__PURE__*/_react.default.createElement(PowerLevelEditor, {
      user: user,
      room: room,
      roomPermissions: roomPermissions
    });
  } else {
    const powerLevelUsersDefault = powerLevels.users_default || 0;
    const powerLevel = user.powerLevel;
    const role = (0, _Roles.textualPowerLevel)(powerLevel, powerLevelUsersDefault);
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_UserInfo_profileField"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_UserInfo_roleDescription"
    }, role));
  }
};

const PowerLevelEditor = ({
  user,
  room,
  roomPermissions
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const [selectedPowerLevel, setSelectedPowerLevel] = (0, _react.useState)(user.powerLevel);
  (0, _react.useEffect)(() => {
    setSelectedPowerLevel(user.powerLevel);
  }, [user]);
  const onPowerChange = (0, _react.useCallback)(async powerLevel => {
    setSelectedPowerLevel(powerLevel);

    const applyPowerChange = (roomId, target, powerLevel, powerLevelEvent) => {
      return cli.setPowerLevel(roomId, target, parseInt(powerLevel), powerLevelEvent).then(function () {
        // NO-OP; rely on the m.room.member event coming down else we could
        // get out of sync if we force setState here!
        _logger.logger.log("Power change success");
      }, function (err) {
        _logger.logger.error("Failed to change power level " + err);

        _Modal.default.createTrackedDialog('Failed to change power level', '', _ErrorDialog.default, {
          title: (0, _languageHandler._t)("Error"),
          description: (0, _languageHandler._t)("Failed to change power level")
        });
      });
    };

    const roomId = user.roomId;
    const target = user.userId;
    const powerLevelEvent = room.currentState.getStateEvents("m.room.power_levels", "");
    if (!powerLevelEvent) return;
    const myUserId = cli.getUserId();
    const myPower = powerLevelEvent.getContent().users[myUserId];

    if (myPower && parseInt(myPower) === powerLevel) {
      const {
        finished
      } = _Modal.default.createTrackedDialog('Promote to PL100 Warning', '', _QuestionDialog.default, {
        title: (0, _languageHandler._t)("Warning!"),
        description: /*#__PURE__*/_react.default.createElement("div", null, (0, _languageHandler._t)("You will not be able to undo this change as you are promoting the user " + "to have the same power level as yourself."), /*#__PURE__*/_react.default.createElement("br", null), (0, _languageHandler._t)("Are you sure?")),
        button: (0, _languageHandler._t)("Continue")
      });

      const [confirmed] = await finished;
      if (!confirmed) return;
    } else if (myUserId === target) {
      // If we are changing our own PL it can only ever be decreasing, which we cannot reverse.
      try {
        if (!(await warnSelfDemote(_SpaceStore.default.spacesEnabled && (room === null || room === void 0 ? void 0 : room.isSpaceRoom())))) return;
      } catch (e) {
        _logger.logger.error("Failed to warn about self demotion: ", e);
      }
    }

    await applyPowerChange(roomId, target, powerLevel, powerLevelEvent);
  }, [user.roomId, user.userId, cli, room]);
  const powerLevelEvent = room.currentState.getStateEvents("m.room.power_levels", "");
  const powerLevelUsersDefault = powerLevelEvent ? powerLevelEvent.getContent().users_default : 0;
  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_profileField"
  }, /*#__PURE__*/_react.default.createElement(_PowerSelector.default, {
    label: null,
    value: selectedPowerLevel,
    maxValue: roomPermissions.modifyLevelMax,
    usersDefault: powerLevelUsersDefault,
    onChange: onPowerChange
  }));
};

const useDevices = userId => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default); // undefined means yet to be loaded, null means failed to load, otherwise list of devices

  const [devices, setDevices] = (0, _react.useState)(undefined); // Download device lists

  (0, _react.useEffect)(() => {
    setDevices(undefined);
    let cancelled = false;

    async function downloadDeviceList() {
      try {
        await cli.downloadKeys([userId], true);
        const devices = cli.getStoredDevicesForUser(userId);

        if (cancelled) {
          // we got cancelled - presumably a different user now
          return;
        }

        disambiguateDevices(devices);
        setDevices(devices);
      } catch (err) {
        setDevices(null);
      }
    }

    downloadDeviceList(); // Handle being unmounted

    return () => {
      cancelled = true;
    };
  }, [cli, userId]); // Listen to changes

  (0, _react.useEffect)(() => {
    let cancel = false;

    const updateDevices = async () => {
      const newDevices = cli.getStoredDevicesForUser(userId);
      if (cancel) return;
      setDevices(newDevices);
    };

    const onDevicesUpdated = users => {
      if (!users.includes(userId)) return;
      updateDevices();
    };

    const onDeviceVerificationChanged = (_userId, device) => {
      if (_userId !== userId) return;
      updateDevices();
    };

    const onUserTrustStatusChanged = (_userId, trustStatus) => {
      if (_userId !== userId) return;
      updateDevices();
    };

    cli.on("crypto.devicesUpdated", onDevicesUpdated);
    cli.on("deviceVerificationChanged", onDeviceVerificationChanged);
    cli.on("userTrustStatusChanged", onUserTrustStatusChanged); // Handle being unmounted

    return () => {
      cancel = true;
      cli.removeListener("crypto.devicesUpdated", onDevicesUpdated);
      cli.removeListener("deviceVerificationChanged", onDeviceVerificationChanged);
      cli.removeListener("userTrustStatusChanged", onUserTrustStatusChanged);
    };
  }, [cli, userId]);
  return devices;
};

exports.useDevices = useDevices;

const BasicUserInfo = ({
  room,
  member,
  groupId,
  devices,
  isRoomEncrypted
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const powerLevels = useRoomPowerLevels(cli, room); // Load whether or not we are a Synapse Admin

  const isSynapseAdmin = useIsSynapseAdmin(cli); // Check whether the user is ignored

  const [isIgnored, setIsIgnored] = (0, _react.useState)(cli.isUserIgnored(member.userId)); // Recheck if the user or client changes

  (0, _react.useEffect)(() => {
    setIsIgnored(cli.isUserIgnored(member.userId));
  }, [cli, member.userId]); // Recheck also if we receive new accountData m.ignored_user_list

  const accountDataHandler = (0, _react.useCallback)(ev => {
    if (ev.getType() === "m.ignored_user_list") {
      setIsIgnored(cli.isUserIgnored(member.userId));
    }
  }, [cli, member.userId]);
  (0, _useEventEmitter.useEventEmitter)(cli, "accountData", accountDataHandler); // Count of how many operations are currently in progress, if > 0 then show a Spinner

  const [pendingUpdateCount, setPendingUpdateCount] = (0, _react.useState)(0);
  const startUpdating = (0, _react.useCallback)(() => {
    setPendingUpdateCount(pendingUpdateCount + 1);
  }, [pendingUpdateCount]);
  const stopUpdating = (0, _react.useCallback)(() => {
    setPendingUpdateCount(pendingUpdateCount - 1);
  }, [pendingUpdateCount]);
  const roomPermissions = useRoomPermissions(cli, room, member);
  const onSynapseDeactivate = (0, _react.useCallback)(async () => {
    const {
      finished
    } = _Modal.default.createTrackedDialog('Synapse User Deactivation', '', _QuestionDialog.default, {
      title: (0, _languageHandler._t)("Deactivate user?"),
      description: /*#__PURE__*/_react.default.createElement("div", null, (0, _languageHandler._t)("Deactivating this user will log them out and prevent them from logging back in. Additionally, " + "they will leave all the rooms they are in. This action cannot be reversed. Are you sure you " + "want to deactivate this user?")),
      button: (0, _languageHandler._t)("Deactivate user"),
      danger: true
    });

    const [accepted] = await finished;
    if (!accepted) return;

    try {
      await cli.deactivateSynapseUser(member.userId);
    } catch (err) {
      _logger.logger.error("Failed to deactivate user");

      _logger.logger.error(err);

      _Modal.default.createTrackedDialog('Failed to deactivate Synapse user', '', _ErrorDialog.default, {
        title: (0, _languageHandler._t)('Failed to deactivate user'),
        description: err && err.message ? err.message : (0, _languageHandler._t)("Operation failed")
      });
    }
  }, [cli, member.userId]);
  let synapseDeactivateButton;
  let spinner; // We don't need a perfect check here, just something to pass as "probably not our homeserver". If
  // someone does figure out how to bypass this check the worst that happens is an error.
  // FIXME this should be using cli instead of MatrixClientPeg.matrixClient

  if (isSynapseAdmin && member.userId.endsWith(`:${_MatrixClientPeg.MatrixClientPeg.getHomeserverName()}`)) {
    synapseDeactivateButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: onSynapseDeactivate,
      className: "mx_UserInfo_field mx_UserInfo_destructive"
    }, (0, _languageHandler._t)("Deactivate user"));
  }

  let memberDetails;
  let adminToolsContainer;

  if (room && member.roomId) {
    // hide the Roles section for DMs as it doesn't make sense there
    if (!_DMRoomMap.default.shared().getUserIdForRoomId(member.roomId)) {
      memberDetails = /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_UserInfo_container"
      }, /*#__PURE__*/_react.default.createElement("h3", null, (0, _languageHandler._t)("Role in <RoomName/>", {}, {
        RoomName: () => /*#__PURE__*/_react.default.createElement("b", null, room.name)
      })), /*#__PURE__*/_react.default.createElement(PowerLevelSection, {
        powerLevels: powerLevels,
        user: member,
        room: room,
        roomPermissions: roomPermissions
      }));
    }

    adminToolsContainer = /*#__PURE__*/_react.default.createElement(RoomAdminToolsContainer, {
      powerLevels: powerLevels,
      member: member,
      room: room,
      startUpdating: startUpdating,
      stopUpdating: stopUpdating
    }, synapseDeactivateButton);
  } else if (groupId) {
    adminToolsContainer = /*#__PURE__*/_react.default.createElement(GroupAdminToolsSection, {
      groupId: groupId,
      groupMember: member,
      startUpdating: startUpdating,
      stopUpdating: stopUpdating
    }, synapseDeactivateButton);
  } else if (synapseDeactivateButton) {
    adminToolsContainer = /*#__PURE__*/_react.default.createElement(GenericAdminToolsContainer, null, synapseDeactivateButton);
  }

  if (pendingUpdateCount > 0) {
    spinner = /*#__PURE__*/_react.default.createElement(_Spinner.default, null);
  } // only display the devices list if our client supports E2E


  const cryptoEnabled = cli.isCryptoEnabled();
  let text;

  if (!isRoomEncrypted) {
    if (!cryptoEnabled) {
      text = (0, _languageHandler._t)("This client does not support end-to-end encryption.");
    } else if (room && (!_SpaceStore.default.spacesEnabled || !room.isSpaceRoom())) {
      text = (0, _languageHandler._t)("Messages in this room are not end-to-end encrypted.");
    }
  } else if (!_SpaceStore.default.spacesEnabled || !room.isSpaceRoom()) {
    text = (0, _languageHandler._t)("Messages in this room are end-to-end encrypted.");
  }

  let verifyButton;
  const homeserverSupportsCrossSigning = useHomeserverSupportsCrossSigning(cli);
  const userTrust = cryptoEnabled && cli.checkUserTrust(member.userId);
  const userVerified = cryptoEnabled && userTrust.isCrossSigningVerified();
  const isMe = member.userId === cli.getUserId();
  const canVerify = cryptoEnabled && homeserverSupportsCrossSigning && !userVerified && !isMe && devices && devices.length > 0;

  const setUpdating = updating => {
    setPendingUpdateCount(count => count + (updating ? 1 : -1));
  };

  const hasCrossSigningKeys = useHasCrossSigningKeys(cli, member, canVerify, setUpdating);
  const showDeviceListSpinner = devices === undefined;

  if (canVerify) {
    if (hasCrossSigningKeys !== undefined) {
      // Note: mx_UserInfo_verifyButton is for the end-to-end tests
      verifyButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        className: "mx_UserInfo_field mx_UserInfo_verifyButton",
        onClick: () => {
          if (hasCrossSigningKeys) {
            (0, _verification.verifyUser)(member);
          } else {
            (0, _verification.legacyVerifyUser)(member);
          }
        }
      }, (0, _languageHandler._t)("Verify"));
    } else if (!showDeviceListSpinner) {
      // HACK: only show a spinner if the device section spinner is not shown,
      // to avoid showing a double spinner
      // We should ask for a design that includes all the different loading states here
      verifyButton = /*#__PURE__*/_react.default.createElement(_Spinner.default, null);
    }
  }

  let editDevices;

  if (member.userId == cli.getUserId()) {
    editDevices = /*#__PURE__*/_react.default.createElement("p", null, /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: "mx_UserInfo_field",
      onClick: () => {
        _dispatcher.default.dispatch({
          action: _actions.Action.ViewUserSettings,
          initialTabId: _UserSettingsDialog.UserTab.Security
        });
      }
    }, (0, _languageHandler._t)("Edit devices")));
  }

  const securitySection = /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_container"
  }, /*#__PURE__*/_react.default.createElement("h3", null, (0, _languageHandler._t)("Security")), /*#__PURE__*/_react.default.createElement("p", null, text), verifyButton, cryptoEnabled && /*#__PURE__*/_react.default.createElement(DevicesSection, {
    loading: showDeviceListSpinner,
    devices: devices,
    userId: member.userId
  }), editDevices);

  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, memberDetails, securitySection, /*#__PURE__*/_react.default.createElement(UserOptionsSection, {
    canInvite: roomPermissions.canInvite,
    isIgnored: isIgnored,
    member: member,
    isSpace: _SpaceStore.default.spacesEnabled && (room === null || room === void 0 ? void 0 : room.isSpaceRoom())
  }), adminToolsContainer, spinner);
};

const UserInfoHeader = ({
  member,
  e2eStatus
}) => {
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const onMemberAvatarClick = (0, _react.useCallback)(() => {
    const avatarUrl = member.getMxcAvatarUrl ? member.getMxcAvatarUrl() : member.avatarUrl;
    if (!avatarUrl) return;
    const httpUrl = (0, _Media.mediaFromMxc)(avatarUrl).srcHttp;
    const params = {
      src: httpUrl,
      name: member.name || member.displayName
    };

    _Modal.default.createDialog(_ImageView.default, params, "mx_Dialog_lightbox", null, true);
  }, [member]);

  const avatarElement = /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_avatar"
  }, /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement(_MemberAvatar.default, {
    key: member.userId // to instantly blank the avatar when UserInfo changes members
    ,
    member: member,
    width: 2 * 0.3 * _UIStore.default.instance.windowHeight // 2x@30vh
    ,
    height: 2 * 0.3 * _UIStore.default.instance.windowHeight // 2x@30vh
    ,
    resizeMethod: "scale",
    fallbackUserId: member.userId,
    onClick: onMemberAvatarClick,
    urls: member.avatarUrl ? [member.avatarUrl] : undefined
  }))));

  let presenceState;
  let presenceLastActiveAgo;
  let presenceCurrentlyActive;
  let statusMessage;

  if (member instanceof _roomMember.RoomMember && member.user) {
    presenceState = member.user.presence;
    presenceLastActiveAgo = member.user.lastActiveAgo;
    presenceCurrentlyActive = member.user.currentlyActive;

    if (_SettingsStore.default.getValue("feature_custom_status")) {
      if (member.user) {
        statusMessage = member.user.unstable_statusMessage;
      } else {
        statusMessage = member.unstable_statusMessage;
      }
    }
  }

  const enablePresenceByHsUrl = _SdkConfig.default.get()["enable_presence_by_hs_url"];

  let showPresence = true;

  if (enablePresenceByHsUrl && enablePresenceByHsUrl[cli.baseUrl] !== undefined) {
    showPresence = enablePresenceByHsUrl[cli.baseUrl];
  }

  let presenceLabel = null;

  if (showPresence) {
    presenceLabel = /*#__PURE__*/_react.default.createElement(_PresenceLabel.default, {
      activeAgo: presenceLastActiveAgo,
      currentlyActive: presenceCurrentlyActive,
      presenceState: presenceState
    });
  }

  let statusLabel = null;

  if (statusMessage) {
    statusLabel = /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_UserInfo_statusMessage"
    }, statusMessage);
  }

  let e2eIcon;

  if (e2eStatus) {
    e2eIcon = /*#__PURE__*/_react.default.createElement(_E2EIcon.default, {
      size: 18,
      status: e2eStatus,
      isUser: true
    });
  }

  const displayName = member.rawDisplayName || member.displayname;
  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, avatarElement, /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_container mx_UserInfo_separator"
  }, /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_profile"
  }, /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("h2", null, e2eIcon, /*#__PURE__*/_react.default.createElement("span", {
    title: displayName,
    "aria-label": displayName
  }, displayName))), /*#__PURE__*/_react.default.createElement("div", null, member.userId), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_UserInfo_profileStatus"
  }, presenceLabel, statusLabel))));
};

const UserInfo = _ref => {
  let {
    user,
    groupId,
    room,
    onClose,
    phase = _RightPanelStorePhases.RightPanelPhases.RoomMemberInfo
  } = _ref,
      props = (0, _objectWithoutProperties2.default)(_ref, _excluded);
  const cli = (0, _react.useContext)(_MatrixClientContext.default); // fetch latest room member if we have a room, so we don't show historical information, falling back to user

  const member = (0, _react.useMemo)(() => room ? room.getMember(user.userId) || user : user, [room, user]);
  const isRoomEncrypted = (0, _useIsEncrypted.useIsEncrypted)(cli, room);
  const devices = useDevices(user.userId);
  let e2eStatus;

  if (isRoomEncrypted && devices) {
    e2eStatus = getE2EStatus(cli, user.userId, devices);
  }

  const classes = ["mx_UserInfo"];
  let refireParams;
  let previousPhase; // We have no previousPhase for when viewing a UserInfo from a Group or without a Room at this time

  if (room && phase === _RightPanelStorePhases.RightPanelPhases.EncryptionPanel) {
    previousPhase = _RightPanelStorePhases.RightPanelPhases.RoomMemberInfo;
    refireParams = {
      member
    };
  } else if (room !== null && room !== void 0 && room.isSpaceRoom() && _SpaceStore.default.spacesEnabled) {
    previousPhase = previousPhase = _RightPanelStorePhases.RightPanelPhases.SpaceMemberList;
    refireParams = {
      space: room
    };
  } else if (room) {
    previousPhase = _RightPanelStorePhases.RightPanelPhases.RoomMemberList;
  }

  const onEncryptionPanelClose = () => {
    _dispatcher.default.dispatch({
      action: _actions.Action.SetRightPanelPhase,
      phase: previousPhase,
      refireParams: refireParams
    });
  };

  let content;

  switch (phase) {
    case _RightPanelStorePhases.RightPanelPhases.RoomMemberInfo:
    case _RightPanelStorePhases.RightPanelPhases.GroupMemberInfo:
    case _RightPanelStorePhases.RightPanelPhases.SpaceMemberInfo:
      content = /*#__PURE__*/_react.default.createElement(BasicUserInfo, {
        room: room,
        member: member,
        groupId: groupId,
        devices: devices,
        isRoomEncrypted: isRoomEncrypted
      });
      break;

    case _RightPanelStorePhases.RightPanelPhases.EncryptionPanel:
      classes.push("mx_UserInfo_smallAvatar");
      content = /*#__PURE__*/_react.default.createElement(_EncryptionPanel.default, (0, _extends2.default)({}, props, {
        member: member,
        onClose: onEncryptionPanelClose,
        isRoomEncrypted: isRoomEncrypted
      }));
      break;
  }

  let closeLabel = undefined;

  if (phase === _RightPanelStorePhases.RightPanelPhases.EncryptionPanel) {
    const verificationRequest = props.verificationRequest;

    if (verificationRequest && verificationRequest.pending) {
      closeLabel = (0, _languageHandler._t)("Cancel");
    }
  }

  let scopeHeader;

  if (_SpaceStore.default.spacesEnabled && room !== null && room !== void 0 && room.isSpaceRoom()) {
    scopeHeader = /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_RightPanel_scopeHeader"
    }, /*#__PURE__*/_react.default.createElement(_RoomAvatar.default, {
      room: room,
      height: 32,
      width: 32
    }), /*#__PURE__*/_react.default.createElement(_RoomName.default, {
      room: room
    }));
  }

  const header = /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, scopeHeader, /*#__PURE__*/_react.default.createElement(UserInfoHeader, {
    member: member,
    e2eStatus: e2eStatus
  }));

  return /*#__PURE__*/_react.default.createElement(_BaseCard.default, {
    className: classes.join(" "),
    header: header,
    onClose: onClose,
    closeLabel: closeLabel,
    previousPhase: previousPhase,
    refireParams: refireParams
  }, content);
};

var _default = UserInfo;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3JpZ2h0X3BhbmVsL1VzZXJJbmZvLnRzeCJdLCJuYW1lcyI6WyJkaXNhbWJpZ3VhdGVEZXZpY2VzIiwiZGV2aWNlcyIsIm5hbWVzIiwiT2JqZWN0IiwiY3JlYXRlIiwiaSIsImxlbmd0aCIsIm5hbWUiLCJnZXREaXNwbGF5TmFtZSIsImluZGV4TGlzdCIsInB1c2giLCJmb3JFYWNoIiwiaiIsImFtYmlndW91cyIsImdldEUyRVN0YXR1cyIsImNsaSIsInVzZXJJZCIsImlzTWUiLCJnZXRVc2VySWQiLCJ1c2VyVHJ1c3QiLCJjaGVja1VzZXJUcnVzdCIsImlzQ3Jvc3NTaWduaW5nVmVyaWZpZWQiLCJ3YXNDcm9zc1NpZ25pbmdWZXJpZmllZCIsIkUyRVN0YXR1cyIsIldhcm5pbmciLCJOb3JtYWwiLCJhbnlEZXZpY2VVbnZlcmlmaWVkIiwic29tZSIsImRldmljZSIsImRldmljZUlkIiwiZGV2aWNlVHJ1c3QiLCJjaGVja0RldmljZVRydXN0IiwiaXNWZXJpZmllZCIsIlZlcmlmaWVkIiwib3BlbkRNRm9yVXNlciIsIm1hdHJpeENsaWVudCIsImxhc3RBY3RpdmVSb29tIiwiZGlzIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJBY3Rpb24iLCJWaWV3Um9vbSIsInJvb21faWQiLCJyb29tSWQiLCJjcmVhdGVSb29tT3B0aW9ucyIsImRtVXNlcklkIiwiZW5jcnlwdGlvbiIsInVuZGVmaW5lZCIsInVzZXJzVG9EZXZpY2VzTWFwIiwiZG93bmxvYWRLZXlzIiwiYWxsSGF2ZURldmljZUtleXMiLCJ2YWx1ZXMiLCJldmVyeSIsImtleXMiLCJ1c2VIYXNDcm9zc1NpZ25pbmdLZXlzIiwibWVtYmVyIiwiY2FuVmVyaWZ5Iiwic2V0VXBkYXRpbmciLCJ4c2kiLCJnZXRTdG9yZWRDcm9zc1NpZ25pbmdGb3JVc2VyIiwia2V5IiwiZ2V0SWQiLCJEZXZpY2VJdGVtIiwiTWF0cml4Q2xpZW50Q29udGV4dCIsImNsYXNzZXMiLCJteF9Vc2VySW5mb19kZXZpY2VfdmVyaWZpZWQiLCJteF9Vc2VySW5mb19kZXZpY2VfdW52ZXJpZmllZCIsImljb25DbGFzc2VzIiwibXhfRTJFSWNvbl9ub3JtYWwiLCJteF9FMkVJY29uX3ZlcmlmaWVkIiwibXhfRTJFSWNvbl93YXJuaW5nIiwib25EZXZpY2VDbGljayIsImdldFVzZXIiLCJkZXZpY2VOYW1lIiwidHJpbSIsInRydXN0ZWRMYWJlbCIsIkRldmljZXNTZWN0aW9uIiwibG9hZGluZyIsImlzRXhwYW5kZWQiLCJzZXRFeHBhbmRlZCIsImRldmljZVRydXN0cyIsIm1hcCIsImQiLCJleHBhbmRTZWN0aW9uRGV2aWNlcyIsInVudmVyaWZpZWREZXZpY2VzIiwiZXhwYW5kQ291bnRDYXB0aW9uIiwiZXhwYW5kSGlkZUNhcHRpb24iLCJleHBhbmRJY29uQ2xhc3NlcyIsImNvdW50IiwiZXhwYW5kQnV0dG9uIiwiZGV2aWNlTGlzdCIsImtleVN0YXJ0IiwiY29uY2F0IiwiVXNlck9wdGlvbnNTZWN0aW9uIiwiaXNJZ25vcmVkIiwiY2FuSW52aXRlIiwiaXNTcGFjZSIsImlnbm9yZUJ1dHRvbiIsImluc2VydFBpbGxCdXR0b24iLCJpbnZpdGVVc2VyQnV0dG9uIiwicmVhZFJlY2VpcHRCdXR0b24iLCJvblNoYXJlVXNlckNsaWNrIiwiTW9kYWwiLCJjcmVhdGVUcmFja2VkRGlhbG9nIiwiU2hhcmVEaWFsb2ciLCJ0YXJnZXQiLCJvbklnbm9yZVRvZ2dsZSIsImlnbm9yZWRVc2VycyIsImdldElnbm9yZWRVc2VycyIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsInNldElnbm9yZWRVc2VycyIsIm14X1VzZXJJbmZvX2Rlc3RydWN0aXZlIiwib25SZWFkUmVjZWlwdEJ1dHRvbiIsInJvb20iLCJnZXRSb29tIiwiaGlnaGxpZ2h0ZWQiLCJldmVudF9pZCIsImdldEV2ZW50UmVhZFVwVG8iLCJvbkluc2VydFBpbGxCdXR0b24iLCJDb21wb3Nlckluc2VydCIsInRpbWVsaW5lUmVuZGVyaW5nVHlwZSIsIlRpbWVsaW5lUmVuZGVyaW5nVHlwZSIsIlJvb20iLCJtZW1iZXJzaGlwIiwiVUlDb21wb25lbnQiLCJJbnZpdGVVc2VycyIsIlJvb21WaWV3U3RvcmUiLCJnZXRSb29tSWQiLCJvbkludml0ZVVzZXJCdXR0b24iLCJpbnZpdGVyIiwiTXVsdGlJbnZpdGVyIiwiaW52aXRlIiwidGhlbiIsImdldENvbXBsZXRpb25TdGF0ZSIsIkVycm9yIiwiZ2V0RXJyb3JUZXh0IiwiZXJyIiwiRXJyb3JEaWFsb2ciLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwibWVzc2FnZSIsInNoYXJlVXNlckJ1dHRvbiIsImRpcmVjdE1lc3NhZ2VCdXR0b24iLCJ3YXJuU2VsZkRlbW90ZSIsImZpbmlzaGVkIiwiUXVlc3Rpb25EaWFsb2ciLCJidXR0b24iLCJjb25maXJtZWQiLCJHZW5lcmljQWRtaW5Ub29sc0NvbnRhaW5lciIsImNoaWxkcmVuIiwiaXNNdXRlZCIsInBvd2VyTGV2ZWxDb250ZW50IiwibGV2ZWxUb1NlbmQiLCJldmVudHMiLCJldmVudHNfZGVmYXVsdCIsInBvd2VyTGV2ZWwiLCJnZXRQb3dlckxldmVscyIsImN1cnJlbnRTdGF0ZSIsImdldFN0YXRlRXZlbnRzIiwiRXZlbnRUeXBlIiwiUm9vbVBvd2VyTGV2ZWxzIiwiZ2V0Q29udGVudCIsInVzZVJvb21Qb3dlckxldmVscyIsInBvd2VyTGV2ZWxzIiwic2V0UG93ZXJMZXZlbHMiLCJ1cGRhdGUiLCJldiIsImdldFR5cGUiLCJSb29tS2lja0J1dHRvbiIsInN0YXJ0VXBkYXRpbmciLCJzdG9wVXBkYXRpbmciLCJvbktpY2siLCJpc1NwYWNlUm9vbSIsIkNvbmZpcm1TcGFjZVVzZXJBY3Rpb25EaWFsb2ciLCJDb25maXJtVXNlckFjdGlvbkRpYWxvZyIsInJvb21OYW1lIiwiYXNrUmVhc29uIiwiZGFuZ2VyIiwic3BhY2UiLCJzcGFjZUNoaWxkRmlsdGVyIiwiY2hpbGQiLCJteU1lbWJlciIsImdldE1lbWJlciIsImNyZWRlbnRpYWxzIiwidGhlaXJNZW1iZXIiLCJoYXNTdWZmaWNpZW50UG93ZXJMZXZlbEZvciIsImFsbExhYmVsIiwic3BlY2lmaWNMYWJlbCIsIndhcm5pbmdNZXNzYWdlIiwicHJvY2VlZCIsInJlYXNvbiIsInJvb21zIiwia2ljayIsImxvZ2dlciIsImxvZyIsImVycm9yIiwiZmluYWxseSIsImtpY2tMYWJlbCIsIlJlZGFjdE1lc3NhZ2VzQnV0dG9uIiwib25SZWRhY3RBbGxNZXNzYWdlcyIsInRpbWVsaW5lIiwiZ2V0TGl2ZVRpbWVsaW5lIiwiZXZlbnRzVG9SZWRhY3QiLCJnZXRFdmVudHMiLCJyZWR1Y2UiLCJldmVudCIsImdldFNlbmRlciIsImlzUmVkYWN0ZWQiLCJpc1JlZGFjdGlvbiIsIlJvb21DcmVhdGUiLCJSb29tU2VydmVyQWNsIiwiZ2V0TmVpZ2hib3VyaW5nVGltZWxpbmUiLCJFdmVudFRpbWVsaW5lIiwiQkFDS1dBUkRTIiwidXNlciIsIkluZm9EaWFsb2ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImluZm8iLCJhbGwiLCJyZWRhY3RFdmVudCIsIkJhblRvZ2dsZUJ1dHRvbiIsImlzQmFubmVkIiwib25CYW5PclVuYmFuIiwiZm4iLCJ1bmJhbiIsImJhbiIsImxhYmVsIiwiTXV0ZVRvZ2dsZUJ1dHRvbiIsIm11dGVkIiwib25NdXRlVG9nZ2xlIiwiU3BhY2VTdG9yZSIsInNwYWNlc0VuYWJsZWQiLCJlIiwicG93ZXJMZXZlbEV2ZW50IiwibGV2ZWwiLCJwYXJzZUludCIsImlzTmFOIiwic2V0UG93ZXJMZXZlbCIsIm11dGVMYWJlbCIsIlJvb21BZG1pblRvb2xzQ29udGFpbmVyIiwia2lja0J1dHRvbiIsImJhbkJ1dHRvbiIsIm11dGVCdXR0b24iLCJyZWRhY3RCdXR0b24iLCJlZGl0UG93ZXJMZXZlbCIsInN0YXRlX2RlZmF1bHQiLCJiYW5Qb3dlckxldmVsIiwia2lja1Bvd2VyTGV2ZWwiLCJyZWRhY3QiLCJyZWRhY3RQb3dlckxldmVsIiwibWUiLCJjYW5BZmZlY3RVc2VyIiwiR3JvdXBBZG1pblRvb2xzU2VjdGlvbiIsImdyb3VwSWQiLCJncm91cE1lbWJlciIsImlzUHJpdmlsZWdlZCIsInNldElzUHJpdmlsZWdlZCIsImlzSW52aXRlZCIsInNldElzSW52aXRlZCIsInVubW91bnRlZCIsIm9uR3JvdXBTdG9yZVVwZGF0ZWQiLCJHcm91cFN0b3JlIiwiaXNVc2VyUHJpdmlsZWdlZCIsImdldEdyb3VwSW52aXRlZE1lbWJlcnMiLCJtIiwicmVnaXN0ZXJMaXN0ZW5lciIsInVucmVnaXN0ZXJMaXN0ZW5lciIsImNyZWF0ZURpYWxvZyIsInJlbW92ZVVzZXJGcm9tR3JvdXAiLCJWaWV3VXNlciIsImNhdGNoIiwidXNlSXNTeW5hcHNlQWRtaW4iLCJpc0FkbWluIiwic2V0SXNBZG1pbiIsImlzU3luYXBzZUFkbWluaXN0cmF0b3IiLCJ1c2VIb21lc2VydmVyU3VwcG9ydHNDcm9zc1NpZ25pbmciLCJkb2VzU2VydmVyU3VwcG9ydFVuc3RhYmxlRmVhdHVyZSIsInVzZVJvb21QZXJtaXNzaW9ucyIsInJvb21QZXJtaXNzaW9ucyIsInNldFJvb21QZXJtaXNzaW9ucyIsIm1vZGlmeUxldmVsTWF4IiwiY2FuRWRpdCIsInVwZGF0ZVJvb21QZXJtaXNzaW9ucyIsInRoZW0iLCJQb3dlckxldmVsU2VjdGlvbiIsInBvd2VyTGV2ZWxVc2Vyc0RlZmF1bHQiLCJ1c2Vyc19kZWZhdWx0Iiwicm9sZSIsIlBvd2VyTGV2ZWxFZGl0b3IiLCJzZWxlY3RlZFBvd2VyTGV2ZWwiLCJzZXRTZWxlY3RlZFBvd2VyTGV2ZWwiLCJvblBvd2VyQ2hhbmdlIiwiYXBwbHlQb3dlckNoYW5nZSIsIm15VXNlcklkIiwibXlQb3dlciIsInVzZXJzIiwidXNlRGV2aWNlcyIsInNldERldmljZXMiLCJjYW5jZWxsZWQiLCJkb3dubG9hZERldmljZUxpc3QiLCJnZXRTdG9yZWREZXZpY2VzRm9yVXNlciIsImNhbmNlbCIsInVwZGF0ZURldmljZXMiLCJuZXdEZXZpY2VzIiwib25EZXZpY2VzVXBkYXRlZCIsImluY2x1ZGVzIiwib25EZXZpY2VWZXJpZmljYXRpb25DaGFuZ2VkIiwiX3VzZXJJZCIsIm9uVXNlclRydXN0U3RhdHVzQ2hhbmdlZCIsInRydXN0U3RhdHVzIiwib24iLCJyZW1vdmVMaXN0ZW5lciIsIkJhc2ljVXNlckluZm8iLCJpc1Jvb21FbmNyeXB0ZWQiLCJpc1N5bmFwc2VBZG1pbiIsInNldElzSWdub3JlZCIsImlzVXNlcklnbm9yZWQiLCJhY2NvdW50RGF0YUhhbmRsZXIiLCJwZW5kaW5nVXBkYXRlQ291bnQiLCJzZXRQZW5kaW5nVXBkYXRlQ291bnQiLCJvblN5bmFwc2VEZWFjdGl2YXRlIiwiYWNjZXB0ZWQiLCJkZWFjdGl2YXRlU3luYXBzZVVzZXIiLCJzeW5hcHNlRGVhY3RpdmF0ZUJ1dHRvbiIsInNwaW5uZXIiLCJlbmRzV2l0aCIsIk1hdHJpeENsaWVudFBlZyIsImdldEhvbWVzZXJ2ZXJOYW1lIiwibWVtYmVyRGV0YWlscyIsImFkbWluVG9vbHNDb250YWluZXIiLCJETVJvb21NYXAiLCJzaGFyZWQiLCJnZXRVc2VySWRGb3JSb29tSWQiLCJSb29tTmFtZSIsImNyeXB0b0VuYWJsZWQiLCJpc0NyeXB0b0VuYWJsZWQiLCJ0ZXh0IiwidmVyaWZ5QnV0dG9uIiwiaG9tZXNlcnZlclN1cHBvcnRzQ3Jvc3NTaWduaW5nIiwidXNlclZlcmlmaWVkIiwidXBkYXRpbmciLCJoYXNDcm9zc1NpZ25pbmdLZXlzIiwic2hvd0RldmljZUxpc3RTcGlubmVyIiwiZWRpdERldmljZXMiLCJWaWV3VXNlclNldHRpbmdzIiwiaW5pdGlhbFRhYklkIiwiVXNlclRhYiIsIlNlY3VyaXR5Iiwic2VjdXJpdHlTZWN0aW9uIiwiVXNlckluZm9IZWFkZXIiLCJlMmVTdGF0dXMiLCJvbk1lbWJlckF2YXRhckNsaWNrIiwiYXZhdGFyVXJsIiwiZ2V0TXhjQXZhdGFyVXJsIiwiaHR0cFVybCIsInNyY0h0dHAiLCJwYXJhbXMiLCJzcmMiLCJkaXNwbGF5TmFtZSIsIkltYWdlVmlldyIsImF2YXRhckVsZW1lbnQiLCJVSVN0b3JlIiwiaW5zdGFuY2UiLCJ3aW5kb3dIZWlnaHQiLCJwcmVzZW5jZVN0YXRlIiwicHJlc2VuY2VMYXN0QWN0aXZlQWdvIiwicHJlc2VuY2VDdXJyZW50bHlBY3RpdmUiLCJzdGF0dXNNZXNzYWdlIiwiUm9vbU1lbWJlciIsInByZXNlbmNlIiwibGFzdEFjdGl2ZUFnbyIsImN1cnJlbnRseUFjdGl2ZSIsIlNldHRpbmdzU3RvcmUiLCJnZXRWYWx1ZSIsInVuc3RhYmxlX3N0YXR1c01lc3NhZ2UiLCJlbmFibGVQcmVzZW5jZUJ5SHNVcmwiLCJTZGtDb25maWciLCJnZXQiLCJzaG93UHJlc2VuY2UiLCJiYXNlVXJsIiwicHJlc2VuY2VMYWJlbCIsInN0YXR1c0xhYmVsIiwiZTJlSWNvbiIsInJhd0Rpc3BsYXlOYW1lIiwiZGlzcGxheW5hbWUiLCJVc2VySW5mbyIsIm9uQ2xvc2UiLCJwaGFzZSIsIlJpZ2h0UGFuZWxQaGFzZXMiLCJSb29tTWVtYmVySW5mbyIsInByb3BzIiwicmVmaXJlUGFyYW1zIiwicHJldmlvdXNQaGFzZSIsIkVuY3J5cHRpb25QYW5lbCIsIlNwYWNlTWVtYmVyTGlzdCIsIlJvb21NZW1iZXJMaXN0Iiwib25FbmNyeXB0aW9uUGFuZWxDbG9zZSIsIlNldFJpZ2h0UGFuZWxQaGFzZSIsImNvbnRlbnQiLCJHcm91cE1lbWJlckluZm8iLCJTcGFjZU1lbWJlckluZm8iLCJjbG9zZUxhYmVsIiwidmVyaWZpY2F0aW9uUmVxdWVzdCIsInBlbmRpbmciLCJzY29wZUhlYWRlciIsImhlYWRlciIsImpvaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFtQkE7O0FBQ0E7O0FBRUE7O0FBR0E7O0FBSUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7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QUFDLGlCQUFEO0FBQ0gsSUFBQSxTQUFTLEVBQUVqUyxPQUFPLENBQUN5VixJQUFSLENBQWEsR0FBYixDQURSO0FBRUgsSUFBQSxNQUFNLEVBQUVELE1BRkw7QUFHSCxJQUFBLE9BQU8sRUFBRW5CLE9BSE47QUFJSCxJQUFBLFVBQVUsRUFBRWUsVUFKVDtBQUtILElBQUEsYUFBYSxFQUFFVCxhQUxaO0FBTUgsSUFBQSxZQUFZLEVBQUVEO0FBTlgsS0FRRE8sT0FSQyxDQUFQO0FBVUgsQ0FyR0Q7O2VBdUdlYixRIiwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDE1LCAyMDE2IE9wZW5NYXJrZXQgTHRkXG5Db3B5cmlnaHQgMjAxNywgMjAxOCBWZWN0b3IgQ3JlYXRpb25zIEx0ZFxuQ29weXJpZ2h0IDIwMTkgTWljaGFlbCBUZWxhdHluc2tpIDw3dDNjaGd1eUBnbWFpbC5jb20+XG5Db3B5cmlnaHQgMjAxOSwgMjAyMCBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCwgeyB1c2VDYWxsYmFjaywgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgTWF0cml4Q2xpZW50IH0gZnJvbSAnbWF0cml4LWpzLXNkay9zcmMvY2xpZW50JztcbmltcG9ydCB7IFJvb21NZW1iZXIgfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvcm9vbS1tZW1iZXInO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJ21hdHJpeC1qcy1zZGsvc3JjL21vZGVscy91c2VyJztcbmltcG9ydCB7IFJvb20gfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvcm9vbSc7XG5pbXBvcnQgeyBFdmVudFRpbWVsaW5lIH0gZnJvbSAnbWF0cml4LWpzLXNkay9zcmMvbW9kZWxzL2V2ZW50LXRpbWVsaW5lJztcbmltcG9ydCB7IE1hdHJpeEV2ZW50IH0gZnJvbSAnbWF0cml4LWpzLXNkay9zcmMvbW9kZWxzL2V2ZW50JztcbmltcG9ydCB7IFZlcmlmaWNhdGlvblJlcXVlc3QgfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvY3J5cHRvL3ZlcmlmaWNhdGlvbi9yZXF1ZXN0L1ZlcmlmaWNhdGlvblJlcXVlc3RcIjtcblxuaW1wb3J0IGRpcyBmcm9tICcuLi8uLi8uLi9kaXNwYXRjaGVyL2Rpc3BhdGNoZXInO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4uLy4uLy4uL01vZGFsJztcbmltcG9ydCB7IF90IH0gZnJvbSAnLi4vLi4vLi4vbGFuZ3VhZ2VIYW5kbGVyJztcbmltcG9ydCBjcmVhdGVSb29tLCB7IGZpbmRETUZvclVzZXIsIHByaXZhdGVTaG91bGRCZUVuY3J5cHRlZCB9IGZyb20gJy4uLy4uLy4uL2NyZWF0ZVJvb20nO1xuaW1wb3J0IERNUm9vbU1hcCBmcm9tICcuLi8uLi8uLi91dGlscy9ETVJvb21NYXAnO1xuaW1wb3J0IEFjY2Vzc2libGVCdXR0b24gZnJvbSAnLi4vZWxlbWVudHMvQWNjZXNzaWJsZUJ1dHRvbic7XG5pbXBvcnQgU2RrQ29uZmlnIGZyb20gJy4uLy4uLy4uL1Nka0NvbmZpZyc7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwiLi4vLi4vLi4vc2V0dGluZ3MvU2V0dGluZ3NTdG9yZVwiO1xuaW1wb3J0IFJvb21WaWV3U3RvcmUgZnJvbSBcIi4uLy4uLy4uL3N0b3Jlcy9Sb29tVmlld1N0b3JlXCI7XG5pbXBvcnQgTXVsdGlJbnZpdGVyIGZyb20gXCIuLi8uLi8uLi91dGlscy9NdWx0aUludml0ZXJcIjtcbmltcG9ydCBHcm91cFN0b3JlIGZyb20gXCIuLi8uLi8uLi9zdG9yZXMvR3JvdXBTdG9yZVwiO1xuaW1wb3J0IHsgTWF0cml4Q2xpZW50UGVnIH0gZnJvbSBcIi4uLy4uLy4uL01hdHJpeENsaWVudFBlZ1wiO1xuaW1wb3J0IEUyRUljb24gZnJvbSBcIi4uL3Jvb21zL0UyRUljb25cIjtcbmltcG9ydCB7IHVzZUV2ZW50RW1pdHRlciB9IGZyb20gXCIuLi8uLi8uLi9ob29rcy91c2VFdmVudEVtaXR0ZXJcIjtcbmltcG9ydCB7IHRleHR1YWxQb3dlckxldmVsIH0gZnJvbSAnLi4vLi4vLi4vUm9sZXMnO1xuaW1wb3J0IE1hdHJpeENsaWVudENvbnRleHQgZnJvbSBcIi4uLy4uLy4uL2NvbnRleHRzL01hdHJpeENsaWVudENvbnRleHRcIjtcbmltcG9ydCB7IFJpZ2h0UGFuZWxQaGFzZXMgfSBmcm9tIFwiLi4vLi4vLi4vc3RvcmVzL1JpZ2h0UGFuZWxTdG9yZVBoYXNlc1wiO1xuaW1wb3J0IEVuY3J5cHRpb25QYW5lbCBmcm9tIFwiLi9FbmNyeXB0aW9uUGFuZWxcIjtcbmltcG9ydCB7IHVzZUFzeW5jTWVtbyB9IGZyb20gJy4uLy4uLy4uL2hvb2tzL3VzZUFzeW5jTWVtbyc7XG5pbXBvcnQgeyBsZWdhY3lWZXJpZnlVc2VyLCB2ZXJpZnlEZXZpY2UsIHZlcmlmeVVzZXIgfSBmcm9tICcuLi8uLi8uLi92ZXJpZmljYXRpb24nO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4uLy4uLy4uL2Rpc3BhdGNoZXIvYWN0aW9uc1wiO1xuaW1wb3J0IHsgVXNlclRhYiB9IGZyb20gXCIuLi9kaWFsb2dzL1VzZXJTZXR0aW5nc0RpYWxvZ1wiO1xuaW1wb3J0IHsgdXNlSXNFbmNyeXB0ZWQgfSBmcm9tIFwiLi4vLi4vLi4vaG9va3MvdXNlSXNFbmNyeXB0ZWRcIjtcbmltcG9ydCBCYXNlQ2FyZCBmcm9tIFwiLi9CYXNlQ2FyZFwiO1xuaW1wb3J0IHsgRTJFU3RhdHVzIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL1NoaWVsZFV0aWxzXCI7XG5pbXBvcnQgSW1hZ2VWaWV3IGZyb20gXCIuLi9lbGVtZW50cy9JbWFnZVZpZXdcIjtcbmltcG9ydCBTcGlubmVyIGZyb20gXCIuLi9lbGVtZW50cy9TcGlubmVyXCI7XG5pbXBvcnQgUG93ZXJTZWxlY3RvciBmcm9tIFwiLi4vZWxlbWVudHMvUG93ZXJTZWxlY3RvclwiO1xuaW1wb3J0IE1lbWJlckF2YXRhciBmcm9tIFwiLi4vYXZhdGFycy9NZW1iZXJBdmF0YXJcIjtcbmltcG9ydCBQcmVzZW5jZUxhYmVsIGZyb20gXCIuLi9yb29tcy9QcmVzZW5jZUxhYmVsXCI7XG5pbXBvcnQgU2hhcmVEaWFsb2cgZnJvbSBcIi4uL2RpYWxvZ3MvU2hhcmVEaWFsb2dcIjtcbmltcG9ydCBFcnJvckRpYWxvZyBmcm9tIFwiLi4vZGlhbG9ncy9FcnJvckRpYWxvZ1wiO1xuaW1wb3J0IFF1ZXN0aW9uRGlhbG9nIGZyb20gXCIuLi9kaWFsb2dzL1F1ZXN0aW9uRGlhbG9nXCI7XG5pbXBvcnQgQ29uZmlybVVzZXJBY3Rpb25EaWFsb2cgZnJvbSBcIi4uL2RpYWxvZ3MvQ29uZmlybVVzZXJBY3Rpb25EaWFsb2dcIjtcbmltcG9ydCBJbmZvRGlhbG9nIGZyb20gXCIuLi9kaWFsb2dzL0luZm9EaWFsb2dcIjtcbmltcG9ydCB7IEV2ZW50VHlwZSB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9AdHlwZXMvZXZlbnRcIjtcbmltcG9ydCB7IFNldFJpZ2h0UGFuZWxQaGFzZVBheWxvYWQgfSBmcm9tIFwiLi4vLi4vLi4vZGlzcGF0Y2hlci9wYXlsb2Fkcy9TZXRSaWdodFBhbmVsUGhhc2VQYXlsb2FkXCI7XG5pbXBvcnQgUm9vbUF2YXRhciBmcm9tIFwiLi4vYXZhdGFycy9Sb29tQXZhdGFyXCI7XG5pbXBvcnQgUm9vbU5hbWUgZnJvbSBcIi4uL2VsZW1lbnRzL1Jvb21OYW1lXCI7XG5pbXBvcnQgeyBtZWRpYUZyb21NeGMgfSBmcm9tIFwiLi4vLi4vLi4vY3VzdG9taXNhdGlvbnMvTWVkaWFcIjtcbmltcG9ydCBVSVN0b3JlIGZyb20gXCIuLi8uLi8uLi9zdG9yZXMvVUlTdG9yZVwiO1xuaW1wb3J0IHsgQ29tcG9zZXJJbnNlcnRQYXlsb2FkIH0gZnJvbSBcIi4uLy4uLy4uL2Rpc3BhdGNoZXIvcGF5bG9hZHMvQ29tcG9zZXJJbnNlcnRQYXlsb2FkXCI7XG5pbXBvcnQgU3BhY2VTdG9yZSBmcm9tIFwiLi4vLi4vLi4vc3RvcmVzL3NwYWNlcy9TcGFjZVN0b3JlXCI7XG5pbXBvcnQgQ29uZmlybVNwYWNlVXNlckFjdGlvbkRpYWxvZyBmcm9tIFwiLi4vZGlhbG9ncy9Db25maXJtU3BhY2VVc2VyQWN0aW9uRGlhbG9nXCI7XG5pbXBvcnQgeyBidWxrU3BhY2VCZWhhdmlvdXIgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvc3BhY2VcIjtcblxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL2xvZ2dlclwiO1xuaW1wb3J0IHsgc2hvdWxkU2hvd0NvbXBvbmVudCB9IGZyb20gXCIuLi8uLi8uLi9jdXN0b21pc2F0aW9ucy9oZWxwZXJzL1VJQ29tcG9uZW50c1wiO1xuaW1wb3J0IHsgVUlDb21wb25lbnQgfSBmcm9tIFwiLi4vLi4vLi4vc2V0dGluZ3MvVUlGZWF0dXJlXCI7XG5pbXBvcnQgeyBUaW1lbGluZVJlbmRlcmluZ1R5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29udGV4dHMvUm9vbUNvbnRleHRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJRGV2aWNlIHtcbiAgICBkZXZpY2VJZDogc3RyaW5nO1xuICAgIGFtYmlndW91cz86IGJvb2xlYW47XG4gICAgZ2V0RGlzcGxheU5hbWUoKTogc3RyaW5nO1xufVxuXG5jb25zdCBkaXNhbWJpZ3VhdGVEZXZpY2VzID0gKGRldmljZXM6IElEZXZpY2VbXSkgPT4ge1xuICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRldmljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGRldmljZXNbaV0uZ2V0RGlzcGxheU5hbWUoKTtcbiAgICAgICAgY29uc3QgaW5kZXhMaXN0ID0gbmFtZXNbbmFtZV0gfHwgW107XG4gICAgICAgIGluZGV4TGlzdC5wdXNoKGkpO1xuICAgICAgICBuYW1lc1tuYW1lXSA9IGluZGV4TGlzdDtcbiAgICB9XG4gICAgZm9yIChjb25zdCBuYW1lIGluIG5hbWVzKSB7XG4gICAgICAgIGlmIChuYW1lc1tuYW1lXS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBuYW1lc1tuYW1lXS5mb3JFYWNoKChqKT0+e1xuICAgICAgICAgICAgICAgIGRldmljZXNbal0uYW1iaWd1b3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldEUyRVN0YXR1cyA9IChjbGk6IE1hdHJpeENsaWVudCwgdXNlcklkOiBzdHJpbmcsIGRldmljZXM6IElEZXZpY2VbXSk6IEUyRVN0YXR1cyA9PiB7XG4gICAgY29uc3QgaXNNZSA9IHVzZXJJZCA9PT0gY2xpLmdldFVzZXJJZCgpO1xuICAgIGNvbnN0IHVzZXJUcnVzdCA9IGNsaS5jaGVja1VzZXJUcnVzdCh1c2VySWQpO1xuICAgIGlmICghdXNlclRydXN0LmlzQ3Jvc3NTaWduaW5nVmVyaWZpZWQoKSkge1xuICAgICAgICByZXR1cm4gdXNlclRydXN0Lndhc0Nyb3NzU2lnbmluZ1ZlcmlmaWVkKCkgPyBFMkVTdGF0dXMuV2FybmluZyA6IEUyRVN0YXR1cy5Ob3JtYWw7XG4gICAgfVxuXG4gICAgY29uc3QgYW55RGV2aWNlVW52ZXJpZmllZCA9IGRldmljZXMuc29tZShkZXZpY2UgPT4ge1xuICAgICAgICBjb25zdCB7IGRldmljZUlkIH0gPSBkZXZpY2U7XG4gICAgICAgIC8vIEZvciB5b3VyIG93biBkZXZpY2VzLCB3ZSB1c2UgdGhlIHN0cmljdGVyIGNoZWNrIG9mIGNyb3NzLXNpZ25pbmdcbiAgICAgICAgLy8gdmVyaWZpY2F0aW9uIHRvIGVuY291cmFnZSBldmVyeW9uZSB0byB0cnVzdCB0aGVpciBvd24gZGV2aWNlcyB2aWFcbiAgICAgICAgLy8gY3Jvc3Mtc2lnbmluZyBzbyB0aGF0IG90aGVyIHVzZXJzIGNhbiB0aGVuIHNhZmVseSB0cnVzdCB5b3UuXG4gICAgICAgIC8vIEZvciBvdGhlciBwZW9wbGUncyBkZXZpY2VzLCB0aGUgbW9yZSBnZW5lcmFsIHZlcmlmaWVkIGNoZWNrIHRoYXRcbiAgICAgICAgLy8gaW5jbHVkZXMgbG9jYWxseSB2ZXJpZmllZCBkZXZpY2VzIGNhbiBiZSB1c2VkLlxuICAgICAgICBjb25zdCBkZXZpY2VUcnVzdCA9IGNsaS5jaGVja0RldmljZVRydXN0KHVzZXJJZCwgZGV2aWNlSWQpO1xuICAgICAgICByZXR1cm4gaXNNZSA/ICFkZXZpY2VUcnVzdC5pc0Nyb3NzU2lnbmluZ1ZlcmlmaWVkKCkgOiAhZGV2aWNlVHJ1c3QuaXNWZXJpZmllZCgpO1xuICAgIH0pO1xuICAgIHJldHVybiBhbnlEZXZpY2VVbnZlcmlmaWVkID8gRTJFU3RhdHVzLldhcm5pbmcgOiBFMkVTdGF0dXMuVmVyaWZpZWQ7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBvcGVuRE1Gb3JVc2VyKG1hdHJpeENsaWVudDogTWF0cml4Q2xpZW50LCB1c2VySWQ6IHN0cmluZykge1xuICAgIGNvbnN0IGxhc3RBY3RpdmVSb29tID0gZmluZERNRm9yVXNlcihtYXRyaXhDbGllbnQsIHVzZXJJZCk7XG5cbiAgICBpZiAobGFzdEFjdGl2ZVJvb20pIHtcbiAgICAgICAgZGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uLlZpZXdSb29tLFxuICAgICAgICAgICAgcm9vbV9pZDogbGFzdEFjdGl2ZVJvb20ucm9vbUlkLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZVJvb21PcHRpb25zID0ge1xuICAgICAgICBkbVVzZXJJZDogdXNlcklkLFxuICAgICAgICBlbmNyeXB0aW9uOiB1bmRlZmluZWQsXG4gICAgfTtcblxuICAgIGlmIChwcml2YXRlU2hvdWxkQmVFbmNyeXB0ZWQoKSkge1xuICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGFsbCB1c2VycyBoYXZlIHVwbG9hZGVkIGRldmljZSBrZXlzIGJlZm9yZS5cbiAgICAgICAgLy8gSWYgc28sIGVuYWJsZSBlbmNyeXB0aW9uIGluIHRoZSBuZXcgcm9vbS5cbiAgICAgICAgY29uc3QgdXNlcnNUb0RldmljZXNNYXAgPSBhd2FpdCBtYXRyaXhDbGllbnQuZG93bmxvYWRLZXlzKFt1c2VySWRdKTtcbiAgICAgICAgY29uc3QgYWxsSGF2ZURldmljZUtleXMgPSBPYmplY3QudmFsdWVzKHVzZXJzVG9EZXZpY2VzTWFwKS5ldmVyeShkZXZpY2VzID0+IHtcbiAgICAgICAgICAgIC8vIGBkZXZpY2VzYCBpcyBhbiBvYmplY3Qgb2YgdGhlIGZvcm0geyBkZXZpY2VJZDogZGV2aWNlSW5mbywgLi4uIH0uXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoZGV2aWNlcykubGVuZ3RoID4gMDtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhbGxIYXZlRGV2aWNlS2V5cykge1xuICAgICAgICAgICAgY3JlYXRlUm9vbU9wdGlvbnMuZW5jcnlwdGlvbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlUm9vbShjcmVhdGVSb29tT3B0aW9ucyk7XG59XG5cbnR5cGUgU2V0VXBkYXRpbmcgPSAodXBkYXRpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG5cbmZ1bmN0aW9uIHVzZUhhc0Nyb3NzU2lnbmluZ0tleXMoY2xpOiBNYXRyaXhDbGllbnQsIG1lbWJlcjogVXNlciwgY2FuVmVyaWZ5OiBib29sZWFuLCBzZXRVcGRhdGluZzogU2V0VXBkYXRpbmcpIHtcbiAgICByZXR1cm4gdXNlQXN5bmNNZW1vKGFzeW5jICgpID0+IHtcbiAgICAgICAgaWYgKCFjYW5WZXJpZnkpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VXBkYXRpbmcodHJ1ZSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBjbGkuZG93bmxvYWRLZXlzKFttZW1iZXIudXNlcklkXSk7XG4gICAgICAgICAgICBjb25zdCB4c2kgPSBjbGkuZ2V0U3RvcmVkQ3Jvc3NTaWduaW5nRm9yVXNlcihtZW1iZXIudXNlcklkKTtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHhzaSAmJiB4c2kuZ2V0SWQoKTtcbiAgICAgICAgICAgIHJldHVybiAhIWtleTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldFVwZGF0aW5nKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0sIFtjbGksIG1lbWJlciwgY2FuVmVyaWZ5XSwgdW5kZWZpbmVkKTtcbn1cblxuZnVuY3Rpb24gRGV2aWNlSXRlbSh7IHVzZXJJZCwgZGV2aWNlIH06IHt1c2VySWQ6IHN0cmluZywgZGV2aWNlOiBJRGV2aWNlfSkge1xuICAgIGNvbnN0IGNsaSA9IHVzZUNvbnRleHQoTWF0cml4Q2xpZW50Q29udGV4dCk7XG4gICAgY29uc3QgaXNNZSA9IHVzZXJJZCA9PT0gY2xpLmdldFVzZXJJZCgpO1xuICAgIGNvbnN0IGRldmljZVRydXN0ID0gY2xpLmNoZWNrRGV2aWNlVHJ1c3QodXNlcklkLCBkZXZpY2UuZGV2aWNlSWQpO1xuICAgIGNvbnN0IHVzZXJUcnVzdCA9IGNsaS5jaGVja1VzZXJUcnVzdCh1c2VySWQpO1xuICAgIC8vIEZvciB5b3VyIG93biBkZXZpY2VzLCB3ZSB1c2UgdGhlIHN0cmljdGVyIGNoZWNrIG9mIGNyb3NzLXNpZ25pbmdcbiAgICAvLyB2ZXJpZmljYXRpb24gdG8gZW5jb3VyYWdlIGV2ZXJ5b25lIHRvIHRydXN0IHRoZWlyIG93biBkZXZpY2VzIHZpYVxuICAgIC8vIGNyb3NzLXNpZ25pbmcgc28gdGhhdCBvdGhlciB1c2VycyBjYW4gdGhlbiBzYWZlbHkgdHJ1c3QgeW91LlxuICAgIC8vIEZvciBvdGhlciBwZW9wbGUncyBkZXZpY2VzLCB0aGUgbW9yZSBnZW5lcmFsIHZlcmlmaWVkIGNoZWNrIHRoYXRcbiAgICAvLyBpbmNsdWRlcyBsb2NhbGx5IHZlcmlmaWVkIGRldmljZXMgY2FuIGJlIHVzZWQuXG4gICAgY29uc3QgaXNWZXJpZmllZCA9IGlzTWUgPyBkZXZpY2VUcnVzdC5pc0Nyb3NzU2lnbmluZ1ZlcmlmaWVkKCkgOiBkZXZpY2VUcnVzdC5pc1ZlcmlmaWVkKCk7XG5cbiAgICBjb25zdCBjbGFzc2VzID0gY2xhc3NOYW1lcyhcIm14X1VzZXJJbmZvX2RldmljZVwiLCB7XG4gICAgICAgIG14X1VzZXJJbmZvX2RldmljZV92ZXJpZmllZDogaXNWZXJpZmllZCxcbiAgICAgICAgbXhfVXNlckluZm9fZGV2aWNlX3VudmVyaWZpZWQ6ICFpc1ZlcmlmaWVkLFxuICAgIH0pO1xuICAgIGNvbnN0IGljb25DbGFzc2VzID0gY2xhc3NOYW1lcyhcIm14X0UyRUljb25cIiwge1xuICAgICAgICBteF9FMkVJY29uX25vcm1hbDogIXVzZXJUcnVzdC5pc1ZlcmlmaWVkKCksXG4gICAgICAgIG14X0UyRUljb25fdmVyaWZpZWQ6IGlzVmVyaWZpZWQsXG4gICAgICAgIG14X0UyRUljb25fd2FybmluZzogdXNlclRydXN0LmlzVmVyaWZpZWQoKSAmJiAhaXNWZXJpZmllZCxcbiAgICB9KTtcblxuICAgIGNvbnN0IG9uRGV2aWNlQ2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIHZlcmlmeURldmljZShjbGkuZ2V0VXNlcih1c2VySWQpLCBkZXZpY2UpO1xuICAgIH07XG5cbiAgICBsZXQgZGV2aWNlTmFtZTtcbiAgICBpZiAoIWRldmljZS5nZXREaXNwbGF5TmFtZSgpPy50cmltKCkpIHtcbiAgICAgICAgZGV2aWNlTmFtZSA9IGRldmljZS5kZXZpY2VJZDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkZXZpY2VOYW1lID0gZGV2aWNlLmFtYmlndW91cyA/XG4gICAgICAgICAgICBkZXZpY2UuZ2V0RGlzcGxheU5hbWUoKSArIFwiIChcIiArIGRldmljZS5kZXZpY2VJZCArIFwiKVwiIDpcbiAgICAgICAgICAgIGRldmljZS5nZXREaXNwbGF5TmFtZSgpO1xuICAgIH1cblxuICAgIGxldCB0cnVzdGVkTGFiZWwgPSBudWxsO1xuICAgIGlmICh1c2VyVHJ1c3QuaXNWZXJpZmllZCgpKSB0cnVzdGVkTGFiZWwgPSBpc1ZlcmlmaWVkID8gX3QoXCJUcnVzdGVkXCIpIDogX3QoXCJOb3QgdHJ1c3RlZFwiKTtcblxuICAgIGlmIChpc1ZlcmlmaWVkKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlc30gdGl0bGU9e2RldmljZS5kZXZpY2VJZH0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2ljb25DbGFzc2VzfSAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfVXNlckluZm9fZGV2aWNlX25hbWVcIj57IGRldmljZU5hbWUgfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfVXNlckluZm9fZGV2aWNlX3RydXN0ZWRcIj57IHRydXN0ZWRMYWJlbCB9PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b25cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXN9XG4gICAgICAgICAgICAgICAgdGl0bGU9e2RldmljZS5kZXZpY2VJZH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkRldmljZUNsaWNrfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtpY29uQ2xhc3Nlc30gLz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2RldmljZV9uYW1lXCI+eyBkZXZpY2VOYW1lIH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2RldmljZV90cnVzdGVkXCI+eyB0cnVzdGVkTGFiZWwgfTwvZGl2PlxuICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRGV2aWNlc1NlY3Rpb24oeyBkZXZpY2VzLCB1c2VySWQsIGxvYWRpbmcgfToge2RldmljZXM6IElEZXZpY2VbXSwgdXNlcklkOiBzdHJpbmcsIGxvYWRpbmc6IGJvb2xlYW59KSB7XG4gICAgY29uc3QgY2xpID0gdXNlQ29udGV4dChNYXRyaXhDbGllbnRDb250ZXh0KTtcbiAgICBjb25zdCB1c2VyVHJ1c3QgPSBjbGkuY2hlY2tVc2VyVHJ1c3QodXNlcklkKTtcblxuICAgIGNvbnN0IFtpc0V4cGFuZGVkLCBzZXRFeHBhbmRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgICBpZiAobG9hZGluZykge1xuICAgICAgICAvLyBzdGlsbCBsb2FkaW5nXG4gICAgICAgIHJldHVybiA8U3Bpbm5lciAvPjtcbiAgICB9XG4gICAgaWYgKGRldmljZXMgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIDw+eyBfdChcIlVuYWJsZSB0byBsb2FkIHNlc3Npb24gbGlzdFwiKSB9PC8+O1xuICAgIH1cbiAgICBjb25zdCBpc01lID0gdXNlcklkID09PSBjbGkuZ2V0VXNlcklkKCk7XG4gICAgY29uc3QgZGV2aWNlVHJ1c3RzID0gZGV2aWNlcy5tYXAoZCA9PiBjbGkuY2hlY2tEZXZpY2VUcnVzdCh1c2VySWQsIGQuZGV2aWNlSWQpKTtcblxuICAgIGxldCBleHBhbmRTZWN0aW9uRGV2aWNlcyA9IFtdO1xuICAgIGNvbnN0IHVudmVyaWZpZWREZXZpY2VzID0gW107XG5cbiAgICBsZXQgZXhwYW5kQ291bnRDYXB0aW9uO1xuICAgIGxldCBleHBhbmRIaWRlQ2FwdGlvbjtcbiAgICBsZXQgZXhwYW5kSWNvbkNsYXNzZXMgPSBcIm14X0UyRUljb25cIjtcblxuICAgIGlmICh1c2VyVHJ1c3QuaXNWZXJpZmllZCgpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGV2aWNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgZGV2aWNlID0gZGV2aWNlc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGRldmljZVRydXN0ID0gZGV2aWNlVHJ1c3RzW2ldO1xuICAgICAgICAgICAgLy8gRm9yIHlvdXIgb3duIGRldmljZXMsIHdlIHVzZSB0aGUgc3RyaWN0ZXIgY2hlY2sgb2YgY3Jvc3Mtc2lnbmluZ1xuICAgICAgICAgICAgLy8gdmVyaWZpY2F0aW9uIHRvIGVuY291cmFnZSBldmVyeW9uZSB0byB0cnVzdCB0aGVpciBvd24gZGV2aWNlcyB2aWFcbiAgICAgICAgICAgIC8vIGNyb3NzLXNpZ25pbmcgc28gdGhhdCBvdGhlciB1c2VycyBjYW4gdGhlbiBzYWZlbHkgdHJ1c3QgeW91LlxuICAgICAgICAgICAgLy8gRm9yIG90aGVyIHBlb3BsZSdzIGRldmljZXMsIHRoZSBtb3JlIGdlbmVyYWwgdmVyaWZpZWQgY2hlY2sgdGhhdFxuICAgICAgICAgICAgLy8gaW5jbHVkZXMgbG9jYWxseSB2ZXJpZmllZCBkZXZpY2VzIGNhbiBiZSB1c2VkLlxuICAgICAgICAgICAgY29uc3QgaXNWZXJpZmllZCA9IGlzTWUgPyBkZXZpY2VUcnVzdC5pc0Nyb3NzU2lnbmluZ1ZlcmlmaWVkKCkgOiBkZXZpY2VUcnVzdC5pc1ZlcmlmaWVkKCk7XG5cbiAgICAgICAgICAgIGlmIChpc1ZlcmlmaWVkKSB7XG4gICAgICAgICAgICAgICAgZXhwYW5kU2VjdGlvbkRldmljZXMucHVzaChkZXZpY2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bnZlcmlmaWVkRGV2aWNlcy5wdXNoKGRldmljZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZXhwYW5kQ291bnRDYXB0aW9uID0gX3QoXCIlKGNvdW50KXMgdmVyaWZpZWQgc2Vzc2lvbnNcIiwgeyBjb3VudDogZXhwYW5kU2VjdGlvbkRldmljZXMubGVuZ3RoIH0pO1xuICAgICAgICBleHBhbmRIaWRlQ2FwdGlvbiA9IF90KFwiSGlkZSB2ZXJpZmllZCBzZXNzaW9uc1wiKTtcbiAgICAgICAgZXhwYW5kSWNvbkNsYXNzZXMgKz0gXCIgbXhfRTJFSWNvbl92ZXJpZmllZFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGV4cGFuZFNlY3Rpb25EZXZpY2VzID0gZGV2aWNlcztcbiAgICAgICAgZXhwYW5kQ291bnRDYXB0aW9uID0gX3QoXCIlKGNvdW50KXMgc2Vzc2lvbnNcIiwgeyBjb3VudDogZGV2aWNlcy5sZW5ndGggfSk7XG4gICAgICAgIGV4cGFuZEhpZGVDYXB0aW9uID0gX3QoXCJIaWRlIHNlc3Npb25zXCIpO1xuICAgICAgICBleHBhbmRJY29uQ2xhc3NlcyArPSBcIiBteF9FMkVJY29uX25vcm1hbFwiO1xuICAgIH1cblxuICAgIGxldCBleHBhbmRCdXR0b247XG4gICAgaWYgKGV4cGFuZFNlY3Rpb25EZXZpY2VzLmxlbmd0aCkge1xuICAgICAgICBpZiAoaXNFeHBhbmRlZCkge1xuICAgICAgICAgICAgZXhwYW5kQnV0dG9uID0gKDxBY2Nlc3NpYmxlQnV0dG9uIGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2V4cGFuZCBteF9saW5rQnV0dG9uXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRFeHBhbmRlZChmYWxzZSl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdj57IGV4cGFuZEhpZGVDYXB0aW9uIH08L2Rpdj5cbiAgICAgICAgICAgIDwvQWNjZXNzaWJsZUJ1dHRvbj4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXhwYW5kQnV0dG9uID0gKDxBY2Nlc3NpYmxlQnV0dG9uIGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2V4cGFuZCBteF9saW5rQnV0dG9uXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRFeHBhbmRlZCh0cnVlKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17ZXhwYW5kSWNvbkNsYXNzZXN9IC8+XG4gICAgICAgICAgICAgICAgPGRpdj57IGV4cGFuZENvdW50Q2FwdGlvbiB9PC9kaXY+XG4gICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBkZXZpY2VMaXN0ID0gdW52ZXJpZmllZERldmljZXMubWFwKChkZXZpY2UsIGkpID0+IHtcbiAgICAgICAgcmV0dXJuICg8RGV2aWNlSXRlbSBrZXk9e2l9IHVzZXJJZD17dXNlcklkfSBkZXZpY2U9e2RldmljZX0gLz4pO1xuICAgIH0pO1xuICAgIGlmIChpc0V4cGFuZGVkKSB7XG4gICAgICAgIGNvbnN0IGtleVN0YXJ0ID0gdW52ZXJpZmllZERldmljZXMubGVuZ3RoO1xuICAgICAgICBkZXZpY2VMaXN0ID0gZGV2aWNlTGlzdC5jb25jYXQoZXhwYW5kU2VjdGlvbkRldmljZXMubWFwKChkZXZpY2UsIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoPERldmljZUl0ZW0ga2V5PXtpICsga2V5U3RhcnR9IHVzZXJJZD17dXNlcklkfSBkZXZpY2U9e2RldmljZX0gLz4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Vc2VySW5mb19kZXZpY2VzXCI+XG4gICAgICAgICAgICA8ZGl2PnsgZGV2aWNlTGlzdCB9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2PnsgZXhwYW5kQnV0dG9uIH08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn1cblxuY29uc3QgVXNlck9wdGlvbnNTZWN0aW9uOiBSZWFjdC5GQzx7XG4gICAgbWVtYmVyOiBSb29tTWVtYmVyO1xuICAgIGlzSWdub3JlZDogYm9vbGVhbjtcbiAgICBjYW5JbnZpdGU6IGJvb2xlYW47XG4gICAgaXNTcGFjZT86IGJvb2xlYW47XG59PiA9ICh7IG1lbWJlciwgaXNJZ25vcmVkLCBjYW5JbnZpdGUsIGlzU3BhY2UgfSkgPT4ge1xuICAgIGNvbnN0IGNsaSA9IHVzZUNvbnRleHQoTWF0cml4Q2xpZW50Q29udGV4dCk7XG5cbiAgICBsZXQgaWdub3JlQnV0dG9uID0gbnVsbDtcbiAgICBsZXQgaW5zZXJ0UGlsbEJ1dHRvbiA9IG51bGw7XG4gICAgbGV0IGludml0ZVVzZXJCdXR0b24gPSBudWxsO1xuICAgIGxldCByZWFkUmVjZWlwdEJ1dHRvbiA9IG51bGw7XG5cbiAgICBjb25zdCBpc01lID0gbWVtYmVyLnVzZXJJZCA9PT0gY2xpLmdldFVzZXJJZCgpO1xuXG4gICAgY29uc3Qgb25TaGFyZVVzZXJDbGljayA9ICgpID0+IHtcbiAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnc2hhcmUgcm9vbSBtZW1iZXIgZGlhbG9nJywgJycsIFNoYXJlRGlhbG9nLCB7XG4gICAgICAgICAgICB0YXJnZXQ6IG1lbWJlcixcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIE9ubHkgYWxsb3cgdGhlIHVzZXIgdG8gaWdub3JlIHRoZSB1c2VyIGlmIGl0cyBub3Qgb3Vyc2VsdmVzXG4gICAgLy8gc2FtZSBnb2VzIGZvciBqdW1waW5nIHRvIHJlYWQgcmVjZWlwdFxuICAgIGlmICghaXNNZSkge1xuICAgICAgICBjb25zdCBvbklnbm9yZVRvZ2dsZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlnbm9yZWRVc2VycyA9IGNsaS5nZXRJZ25vcmVkVXNlcnMoKTtcbiAgICAgICAgICAgIGlmIChpc0lnbm9yZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGlnbm9yZWRVc2Vycy5pbmRleE9mKG1lbWJlci51c2VySWQpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIGlnbm9yZWRVc2Vycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZ25vcmVkVXNlcnMucHVzaChtZW1iZXIudXNlcklkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2xpLnNldElnbm9yZWRVc2VycyhpZ25vcmVkVXNlcnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlnbm9yZUJ1dHRvbiA9IChcbiAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17b25JZ25vcmVUb2dnbGV9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFwibXhfVXNlckluZm9fZmllbGRcIiwgeyBteF9Vc2VySW5mb19kZXN0cnVjdGl2ZTogIWlzSWdub3JlZCB9KX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7IGlzSWdub3JlZCA/IF90KFwiVW5pZ25vcmVcIikgOiBfdChcIklnbm9yZVwiKSB9XG4gICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKG1lbWJlci5yb29tSWQgJiYgIWlzU3BhY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IG9uUmVhZFJlY2VpcHRCdXR0b24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb29tID0gY2xpLmdldFJvb20obWVtYmVyLnJvb21JZCk7XG4gICAgICAgICAgICAgICAgZGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uVmlld1Jvb20sXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBldmVudF9pZDogcm9vbS5nZXRFdmVudFJlYWRVcFRvKG1lbWJlci51c2VySWQpLFxuICAgICAgICAgICAgICAgICAgICByb29tX2lkOiBtZW1iZXIucm9vbUlkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3Qgb25JbnNlcnRQaWxsQnV0dG9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZGlzLmRpc3BhdGNoPENvbXBvc2VySW5zZXJ0UGF5bG9hZD4oe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IEFjdGlvbi5Db21wb3Nlckluc2VydCxcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBtZW1iZXIudXNlcklkLFxuICAgICAgICAgICAgICAgICAgICB0aW1lbGluZVJlbmRlcmluZ1R5cGU6IFRpbWVsaW5lUmVuZGVyaW5nVHlwZS5Sb29tLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3Qgcm9vbSA9IGNsaS5nZXRSb29tKG1lbWJlci5yb29tSWQpO1xuICAgICAgICAgICAgaWYgKHJvb20/LmdldEV2ZW50UmVhZFVwVG8obWVtYmVyLnVzZXJJZCkpIHtcbiAgICAgICAgICAgICAgICByZWFkUmVjZWlwdEJ1dHRvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24gb25DbGljaz17b25SZWFkUmVjZWlwdEJ1dHRvbn0gY2xhc3NOYW1lPVwibXhfVXNlckluZm9fZmllbGRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgX3QoJ0p1bXAgdG8gcmVhZCByZWNlaXB0JykgfVxuICAgICAgICAgICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5zZXJ0UGlsbEJ1dHRvbiA9IChcbiAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBvbkNsaWNrPXtvbkluc2VydFBpbGxCdXR0b259IGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2ZpZWxkXCI+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoJ01lbnRpb24nKSB9XG4gICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjYW5JbnZpdGUgJiYgKG1lbWJlcj8ubWVtYmVyc2hpcCA/PyAnbGVhdmUnKSA9PT0gJ2xlYXZlJyAmJiBzaG91bGRTaG93Q29tcG9uZW50KFVJQ29tcG9uZW50Lkludml0ZVVzZXJzKSkge1xuICAgICAgICAgICAgY29uc3Qgcm9vbUlkID0gbWVtYmVyICYmIG1lbWJlci5yb29tSWQgPyBtZW1iZXIucm9vbUlkIDogUm9vbVZpZXdTdG9yZS5nZXRSb29tSWQoKTtcbiAgICAgICAgICAgIGNvbnN0IG9uSW52aXRlVXNlckJ1dHRvbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgYSBNdWx0aUludml0ZXIgdG8gcmUtdXNlIHRoZSBpbnZpdGUgbG9naWMsIGV2ZW4gdGhvdWdoXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9ubHkgaW52aXRpbmcgb25lIHVzZXIuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGludml0ZXIgPSBuZXcgTXVsdGlJbnZpdGVyKHJvb21JZCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGludml0ZXIuaW52aXRlKFttZW1iZXIudXNlcklkXSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW52aXRlci5nZXRDb21wbGV0aW9uU3RhdGUobWVtYmVyLnVzZXJJZCkgIT09IFwiaW52aXRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGludml0ZXIuZ2V0RXJyb3JUZXh0KG1lbWJlci51c2VySWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ0ZhaWxlZCB0byBpbnZpdGUnLCAnJywgRXJyb3JEaWFsb2csIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBfdCgnRmFpbGVkIHRvIGludml0ZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICgoZXJyICYmIGVyci5tZXNzYWdlKSA/IGVyci5tZXNzYWdlIDogX3QoXCJPcGVyYXRpb24gZmFpbGVkXCIpKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaW52aXRlVXNlckJ1dHRvbiA9IChcbiAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBvbkNsaWNrPXtvbkludml0ZVVzZXJCdXR0b259IGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2ZpZWxkXCI+XG4gICAgICAgICAgICAgICAgICAgIHsgX3QoJ0ludml0ZScpIH1cbiAgICAgICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2hhcmVVc2VyQnV0dG9uID0gKFxuICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBvbkNsaWNrPXtvblNoYXJlVXNlckNsaWNrfSBjbGFzc05hbWU9XCJteF9Vc2VySW5mb19maWVsZFwiPlxuICAgICAgICAgICAgeyBfdCgnU2hhcmUgTGluayB0byBVc2VyJykgfVxuICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgKTtcblxuICAgIGxldCBkaXJlY3RNZXNzYWdlQnV0dG9uO1xuICAgIGlmICghaXNNZSkge1xuICAgICAgICBkaXJlY3RNZXNzYWdlQnV0dG9uID0gKFxuICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24gb25DbGljaz17KCkgPT4geyBvcGVuRE1Gb3JVc2VyKGNsaSwgbWVtYmVyLnVzZXJJZCk7IH19IGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2ZpZWxkXCI+XG4gICAgICAgICAgICAgICAgeyBfdChcIk1lc3NhZ2VcIikgfVxuICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfVXNlckluZm9fY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8aDM+eyBfdChcIk9wdGlvbnNcIikgfTwvaDM+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIHsgZGlyZWN0TWVzc2FnZUJ1dHRvbiB9XG4gICAgICAgICAgICAgICAgeyByZWFkUmVjZWlwdEJ1dHRvbiB9XG4gICAgICAgICAgICAgICAgeyBzaGFyZVVzZXJCdXR0b24gfVxuICAgICAgICAgICAgICAgIHsgaW5zZXJ0UGlsbEJ1dHRvbiB9XG4gICAgICAgICAgICAgICAgeyBpbnZpdGVVc2VyQnV0dG9uIH1cbiAgICAgICAgICAgICAgICB7IGlnbm9yZUJ1dHRvbiB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmNvbnN0IHdhcm5TZWxmRGVtb3RlID0gYXN5bmMgKGlzU3BhY2U6IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCB7IGZpbmlzaGVkIH0gPSBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdEZW1vdGluZyBTZWxmJywgJycsIFF1ZXN0aW9uRGlhbG9nLCB7XG4gICAgICAgIHRpdGxlOiBfdChcIkRlbW90ZSB5b3Vyc2VsZj9cIiksXG4gICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICB7IGlzU3BhY2VcbiAgICAgICAgICAgICAgICAgICAgPyBfdChcIllvdSB3aWxsIG5vdCBiZSBhYmxlIHRvIHVuZG8gdGhpcyBjaGFuZ2UgYXMgeW91IGFyZSBkZW1vdGluZyB5b3Vyc2VsZiwgXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJpZiB5b3UgYXJlIHRoZSBsYXN0IHByaXZpbGVnZWQgdXNlciBpbiB0aGUgc3BhY2UgaXQgd2lsbCBiZSBpbXBvc3NpYmxlIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG8gcmVnYWluIHByaXZpbGVnZXMuXCIpXG4gICAgICAgICAgICAgICAgICAgIDogX3QoXCJZb3Ugd2lsbCBub3QgYmUgYWJsZSB0byB1bmRvIHRoaXMgY2hhbmdlIGFzIHlvdSBhcmUgZGVtb3RpbmcgeW91cnNlbGYsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWYgeW91IGFyZSB0aGUgbGFzdCBwcml2aWxlZ2VkIHVzZXIgaW4gdGhlIHJvb20gaXQgd2lsbCBiZSBpbXBvc3NpYmxlIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG8gcmVnYWluIHByaXZpbGVnZXMuXCIpIH1cbiAgICAgICAgICAgIDwvZGl2PixcbiAgICAgICAgYnV0dG9uOiBfdChcIkRlbW90ZVwiKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IFtjb25maXJtZWRdID0gYXdhaXQgZmluaXNoZWQ7XG4gICAgcmV0dXJuIGNvbmZpcm1lZDtcbn07XG5cbmNvbnN0IEdlbmVyaWNBZG1pblRvb2xzQ29udGFpbmVyOiBSZWFjdC5GQzx7fT4gPSAoeyBjaGlsZHJlbiB9KSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Vc2VySW5mb19jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxoMz57IF90KFwiQWRtaW4gVG9vbHNcIikgfTwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2J1dHRvbnNcIj5cbiAgICAgICAgICAgICAgICB7IGNoaWxkcmVuIH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuaW50ZXJmYWNlIElQb3dlckxldmVsc0NvbnRlbnQge1xuICAgIGV2ZW50cz86IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICAgIHVzZXJzX2RlZmF1bHQ/OiBudW1iZXI7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICAgIGV2ZW50c19kZWZhdWx0PzogbnVtYmVyO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgICBzdGF0ZV9kZWZhdWx0PzogbnVtYmVyO1xuICAgIGJhbj86IG51bWJlcjtcbiAgICBraWNrPzogbnVtYmVyO1xuICAgIHJlZGFjdD86IG51bWJlcjtcbn1cblxuY29uc3QgaXNNdXRlZCA9IChtZW1iZXI6IFJvb21NZW1iZXIsIHBvd2VyTGV2ZWxDb250ZW50OiBJUG93ZXJMZXZlbHNDb250ZW50KSA9PiB7XG4gICAgaWYgKCFwb3dlckxldmVsQ29udGVudCB8fCAhbWVtYmVyKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBsZXZlbFRvU2VuZCA9IChcbiAgICAgICAgKHBvd2VyTGV2ZWxDb250ZW50LmV2ZW50cyA/IHBvd2VyTGV2ZWxDb250ZW50LmV2ZW50c1tcIm0ucm9vbS5tZXNzYWdlXCJdIDogbnVsbCkgfHxcbiAgICAgICAgcG93ZXJMZXZlbENvbnRlbnQuZXZlbnRzX2RlZmF1bHRcbiAgICApO1xuICAgIHJldHVybiBtZW1iZXIucG93ZXJMZXZlbCA8IGxldmVsVG9TZW5kO1xufTtcblxuY29uc3QgZ2V0UG93ZXJMZXZlbHMgPSByb29tID0+IHJvb20/LmN1cnJlbnRTdGF0ZT8uZ2V0U3RhdGVFdmVudHMoRXZlbnRUeXBlLlJvb21Qb3dlckxldmVscywgXCJcIik/LmdldENvbnRlbnQoKSB8fCB7fTtcblxuZXhwb3J0IGNvbnN0IHVzZVJvb21Qb3dlckxldmVscyA9IChjbGk6IE1hdHJpeENsaWVudCwgcm9vbTogUm9vbSkgPT4ge1xuICAgIGNvbnN0IFtwb3dlckxldmVscywgc2V0UG93ZXJMZXZlbHNdID0gdXNlU3RhdGU8SVBvd2VyTGV2ZWxzQ29udGVudD4oZ2V0UG93ZXJMZXZlbHMocm9vbSkpO1xuXG4gICAgY29uc3QgdXBkYXRlID0gdXNlQ2FsbGJhY2soKGV2PzogTWF0cml4RXZlbnQpID0+IHtcbiAgICAgICAgaWYgKCFyb29tKSByZXR1cm47XG4gICAgICAgIGlmIChldiAmJiBldi5nZXRUeXBlKCkgIT09IEV2ZW50VHlwZS5Sb29tUG93ZXJMZXZlbHMpIHJldHVybjtcbiAgICAgICAgc2V0UG93ZXJMZXZlbHMoZ2V0UG93ZXJMZXZlbHMocm9vbSkpO1xuICAgIH0sIFtyb29tXSk7XG5cbiAgICB1c2VFdmVudEVtaXR0ZXIoY2xpLCBcIlJvb21TdGF0ZS5ldmVudHNcIiwgdXBkYXRlKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHNldFBvd2VyTGV2ZWxzKHt9KTtcbiAgICAgICAgfTtcbiAgICB9LCBbdXBkYXRlXSk7XG4gICAgcmV0dXJuIHBvd2VyTGV2ZWxzO1xufTtcblxuaW50ZXJmYWNlIElCYXNlUHJvcHMge1xuICAgIG1lbWJlcjogUm9vbU1lbWJlcjtcbiAgICBzdGFydFVwZGF0aW5nKCk6IHZvaWQ7XG4gICAgc3RvcFVwZGF0aW5nKCk6IHZvaWQ7XG59XG5cbmNvbnN0IFJvb21LaWNrQnV0dG9uID0gKHsgcm9vbSwgbWVtYmVyLCBzdGFydFVwZGF0aW5nLCBzdG9wVXBkYXRpbmcgfTogT21pdDxJQmFzZVJvb21Qcm9wcywgXCJwb3dlckxldmVsc1wiPikgPT4ge1xuICAgIGNvbnN0IGNsaSA9IHVzZUNvbnRleHQoTWF0cml4Q2xpZW50Q29udGV4dCk7XG5cbiAgICAvLyBjaGVjayBpZiB1c2VyIGNhbiBiZSBraWNrZWQvZGlzaW52aXRlZFxuICAgIGlmIChtZW1iZXIubWVtYmVyc2hpcCAhPT0gXCJpbnZpdGVcIiAmJiBtZW1iZXIubWVtYmVyc2hpcCAhPT0gXCJqb2luXCIpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3Qgb25LaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB7IGZpbmlzaGVkIH0gPSBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKFxuICAgICAgICAgICAgJ0NvbmZpcm0gVXNlciBBY3Rpb24gRGlhbG9nJyxcbiAgICAgICAgICAgICdvbktpY2snLFxuICAgICAgICAgICAgcm9vbS5pc1NwYWNlUm9vbSgpID8gQ29uZmlybVNwYWNlVXNlckFjdGlvbkRpYWxvZyA6IENvbmZpcm1Vc2VyQWN0aW9uRGlhbG9nLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1lbWJlcixcbiAgICAgICAgICAgICAgICBhY3Rpb246IG1lbWJlci5tZW1iZXJzaGlwID09PSBcImludml0ZVwiID8gX3QoXCJEaXNpbnZpdGVcIikgOiBfdChcIktpY2tcIiksXG4gICAgICAgICAgICAgICAgdGl0bGU6IG1lbWJlci5tZW1iZXJzaGlwID09PSBcImludml0ZVwiXG4gICAgICAgICAgICAgICAgICAgID8gX3QoXCJEaXNpbnZpdGUgZnJvbSAlKHJvb21OYW1lKXNcIiwgeyByb29tTmFtZTogcm9vbS5uYW1lIH0pXG4gICAgICAgICAgICAgICAgICAgIDogX3QoXCJLaWNrIGZyb20gJShyb29tTmFtZSlzXCIsIHsgcm9vbU5hbWU6IHJvb20ubmFtZSB9KSxcbiAgICAgICAgICAgICAgICBhc2tSZWFzb246IG1lbWJlci5tZW1iZXJzaGlwID09PSBcImpvaW5cIixcbiAgICAgICAgICAgICAgICBkYW5nZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgLy8gc3BhY2Utc3BlY2lmaWMgcHJvcHNcbiAgICAgICAgICAgICAgICBzcGFjZTogcm9vbSxcbiAgICAgICAgICAgICAgICBzcGFjZUNoaWxkRmlsdGVyOiAoY2hpbGQ6IFJvb20pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRydWUgaWYgdGhlIHRhcmdldCBtZW1iZXIgaXMgbm90IGJhbm5lZCBhbmQgd2UgaGF2ZSBzdWZmaWNpZW50IFBMIHRvIGJhbiB0aGVtXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG15TWVtYmVyID0gY2hpbGQuZ2V0TWVtYmVyKGNsaS5jcmVkZW50aWFscy51c2VySWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aGVpck1lbWJlciA9IGNoaWxkLmdldE1lbWJlcihtZW1iZXIudXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG15TWVtYmVyICYmIHRoZWlyTWVtYmVyICYmIHRoZWlyTWVtYmVyLm1lbWJlcnNoaXAgPT09IG1lbWJlci5tZW1iZXJzaGlwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBteU1lbWJlci5wb3dlckxldmVsID4gdGhlaXJNZW1iZXIucG93ZXJMZXZlbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQuY3VycmVudFN0YXRlLmhhc1N1ZmZpY2llbnRQb3dlckxldmVsRm9yKFwia2lja1wiLCBteU1lbWJlci5wb3dlckxldmVsKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFsbExhYmVsOiBfdChcIktpY2sgdGhlbSBmcm9tIGV2ZXJ5dGhpbmcgSSdtIGFibGUgdG9cIiksXG4gICAgICAgICAgICAgICAgc3BlY2lmaWNMYWJlbDogX3QoXCJLaWNrIHRoZW0gZnJvbSBzcGVjaWZpYyB0aGluZ3MgSSdtIGFibGUgdG9cIiksXG4gICAgICAgICAgICAgICAgd2FybmluZ01lc3NhZ2U6IF90KFwiVGhleSdsbCBzdGlsbCBiZSBhYmxlIHRvIGFjY2VzcyB3aGF0ZXZlciB5b3UncmUgbm90IGFuIGFkbWluIG9mLlwiKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByb29tLmlzU3BhY2VSb29tKCkgPyBcIm14X0NvbmZpcm1TcGFjZVVzZXJBY3Rpb25EaWFsb2dfd3JhcHBlclwiIDogdW5kZWZpbmVkLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IFtwcm9jZWVkLCByZWFzb24sIHJvb21zID0gW11dID0gYXdhaXQgZmluaXNoZWQ7XG4gICAgICAgIGlmICghcHJvY2VlZCkgcmV0dXJuO1xuXG4gICAgICAgIHN0YXJ0VXBkYXRpbmcoKTtcblxuICAgICAgICBidWxrU3BhY2VCZWhhdmlvdXIocm9vbSwgcm9vbXMsIHJvb20gPT4gY2xpLmtpY2socm9vbS5yb29tSWQsIG1lbWJlci51c2VySWQsIHJlYXNvbiB8fCB1bmRlZmluZWQpKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIE5PLU9QOyByZWx5IG9uIHRoZSBtLnJvb20ubWVtYmVyIGV2ZW50IGNvbWluZyBkb3duIGVsc2Ugd2UgY291bGRcbiAgICAgICAgICAgIC8vIGdldCBvdXQgb2Ygc3luYyBpZiB3ZSBmb3JjZSBzZXRTdGF0ZSBoZXJlIVxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIktpY2sgc3VjY2Vzc1wiKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJLaWNrIGVycm9yOiBcIiArIGVycik7XG4gICAgICAgICAgICBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdGYWlsZWQgdG8ga2ljaycsICcnLCBFcnJvckRpYWxvZywge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBfdChcIkZhaWxlZCB0byBraWNrXCIpLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAoKGVyciAmJiBlcnIubWVzc2FnZSkgPyBlcnIubWVzc2FnZSA6IFwiT3BlcmF0aW9uIGZhaWxlZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHN0b3BVcGRhdGluZygpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qga2lja0xhYmVsID0gbWVtYmVyLm1lbWJlcnNoaXAgPT09IFwiaW52aXRlXCIgPyBfdChcIkRpc2ludml0ZVwiKSA6IF90KFwiS2lja1wiKTtcbiAgICByZXR1cm4gPEFjY2Vzc2libGVCdXR0b24gY2xhc3NOYW1lPVwibXhfVXNlckluZm9fZmllbGQgbXhfVXNlckluZm9fZGVzdHJ1Y3RpdmVcIiBvbkNsaWNrPXtvbktpY2t9PlxuICAgICAgICB7IGtpY2tMYWJlbCB9XG4gICAgPC9BY2Nlc3NpYmxlQnV0dG9uPjtcbn07XG5cbmNvbnN0IFJlZGFjdE1lc3NhZ2VzQnV0dG9uOiBSZWFjdC5GQzxJQmFzZVByb3BzPiA9ICh7IG1lbWJlciB9KSA9PiB7XG4gICAgY29uc3QgY2xpID0gdXNlQ29udGV4dChNYXRyaXhDbGllbnRDb250ZXh0KTtcblxuICAgIGNvbnN0IG9uUmVkYWN0QWxsTWVzc2FnZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcm9vbUlkLCB1c2VySWQgfSA9IG1lbWJlcjtcbiAgICAgICAgY29uc3Qgcm9vbSA9IGNsaS5nZXRSb29tKHJvb21JZCk7XG4gICAgICAgIGlmICghcm9vbSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0aW1lbGluZSA9IHJvb20uZ2V0TGl2ZVRpbWVsaW5lKCk7XG4gICAgICAgIGxldCBldmVudHNUb1JlZGFjdCA9IFtdO1xuICAgICAgICB3aGlsZSAodGltZWxpbmUpIHtcbiAgICAgICAgICAgIGV2ZW50c1RvUmVkYWN0ID0gdGltZWxpbmUuZ2V0RXZlbnRzKCkucmVkdWNlKChldmVudHMsIGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmdldFNlbmRlcigpID09PSB1c2VySWQgJiYgIWV2ZW50LmlzUmVkYWN0ZWQoKSAmJiAhZXZlbnQuaXNSZWRhY3Rpb24oKSAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudC5nZXRUeXBlKCkgIT09IEV2ZW50VHlwZS5Sb29tQ3JlYXRlICYmXG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IHJlZGFjdCBBQ0xzIGJlY2F1c2UgdGhhdCdsbCBvYmxpdGVyYXRlIHRoZSByb29tXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWF0cml4LW9yZy9zeW5hcHNlL2lzc3Vlcy80MDQyIGZvciBkZXRhaWxzLlxuICAgICAgICAgICAgICAgICAgICBldmVudC5nZXRUeXBlKCkgIT09IEV2ZW50VHlwZS5Sb29tU2VydmVyQWNsXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudHMuY29uY2F0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGV2ZW50c1RvUmVkYWN0KTtcbiAgICAgICAgICAgIHRpbWVsaW5lID0gdGltZWxpbmUuZ2V0TmVpZ2hib3VyaW5nVGltZWxpbmUoRXZlbnRUaW1lbGluZS5CQUNLV0FSRFMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY291bnQgPSBldmVudHNUb1JlZGFjdC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBtZW1iZXIubmFtZTtcblxuICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ05vIHVzZXIgbWVzc2FnZXMgZm91bmQgdG8gcmVtb3ZlJywgJycsIEluZm9EaWFsb2csIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogX3QoXCJObyByZWNlbnQgbWVzc2FnZXMgYnkgJSh1c2VyKXMgZm91bmRcIiwgeyB1c2VyIH0pLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+eyBfdChcIlRyeSBzY3JvbGxpbmcgdXAgaW4gdGhlIHRpbWVsaW5lIHRvIHNlZSBpZiB0aGVyZSBhcmUgYW55IGVhcmxpZXIgb25lcy5cIikgfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7IGZpbmlzaGVkIH0gPSBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdSZW1vdmUgcmVjZW50IG1lc3NhZ2VzIGJ5IHVzZXInLCAnJywgUXVlc3Rpb25EaWFsb2csIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogX3QoXCJSZW1vdmUgcmVjZW50IG1lc3NhZ2VzIGJ5ICUodXNlcilzXCIsIHsgdXNlciB9KSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPnsgX3QoXCJZb3UgYXJlIGFib3V0IHRvIHJlbW92ZSAlKGNvdW50KXMgbWVzc2FnZXMgYnkgJSh1c2VyKXMuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlRoaXMgY2Fubm90IGJlIHVuZG9uZS4gRG8geW91IHdpc2ggdG8gY29udGludWU/XCIsIHsgY291bnQsIHVzZXIgfSkgfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPnsgX3QoXCJGb3IgYSBsYXJnZSBhbW91bnQgb2YgbWVzc2FnZXMsIHRoaXMgbWlnaHQgdGFrZSBzb21lIHRpbWUuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlBsZWFzZSBkb24ndCByZWZyZXNoIHlvdXIgY2xpZW50IGluIHRoZSBtZWFudGltZS5cIikgfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+LFxuICAgICAgICAgICAgICAgIGJ1dHRvbjogX3QoXCJSZW1vdmUgJShjb3VudClzIG1lc3NhZ2VzXCIsIHsgY291bnQgfSksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgW2NvbmZpcm1lZF0gPSBhd2FpdCBmaW5pc2hlZDtcbiAgICAgICAgICAgIGlmICghY29uZmlybWVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTdWJtaXR0aW5nIGEgbGFyZ2UgbnVtYmVyIG9mIHJlZGFjdGlvbnMgZnJlZXplcyB0aGUgVUksXG4gICAgICAgICAgICAvLyBzbyBmaXJzdCB5aWVsZCB0byBhbGxvdyB0byByZXJlbmRlciBhZnRlciBjbG9zaW5nIHRoZSBkaWFsb2cuXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oYFN0YXJ0ZWQgcmVkYWN0aW5nIHJlY2VudCAke2NvdW50fSBtZXNzYWdlcyBmb3IgJHt1c2VyfSBpbiAke3Jvb21JZH1gKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGV2ZW50c1RvUmVkYWN0Lm1hcChhc3luYyBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xpLnJlZGFjdEV2ZW50KHJvb21JZCwgZXZlbnQuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGxvZyBhbmQgc3dhbGxvdyBlcnJvcnNcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQ291bGQgbm90IHJlZGFjdFwiLCBldmVudC5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oYEZpbmlzaGVkIHJlZGFjdGluZyByZWNlbnQgJHtjb3VudH0gbWVzc2FnZXMgZm9yICR7dXNlcn0gaW4gJHtyb29tSWR9YCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIDxBY2Nlc3NpYmxlQnV0dG9uIGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2ZpZWxkIG14X1VzZXJJbmZvX2Rlc3RydWN0aXZlXCIgb25DbGljaz17b25SZWRhY3RBbGxNZXNzYWdlc30+XG4gICAgICAgIHsgX3QoXCJSZW1vdmUgcmVjZW50IG1lc3NhZ2VzXCIpIH1cbiAgICA8L0FjY2Vzc2libGVCdXR0b24+O1xufTtcblxuY29uc3QgQmFuVG9nZ2xlQnV0dG9uID0gKHsgcm9vbSwgbWVtYmVyLCBzdGFydFVwZGF0aW5nLCBzdG9wVXBkYXRpbmcgfTogT21pdDxJQmFzZVJvb21Qcm9wcywgXCJwb3dlckxldmVsc1wiPikgPT4ge1xuICAgIGNvbnN0IGNsaSA9IHVzZUNvbnRleHQoTWF0cml4Q2xpZW50Q29udGV4dCk7XG5cbiAgICBjb25zdCBpc0Jhbm5lZCA9IG1lbWJlci5tZW1iZXJzaGlwID09PSBcImJhblwiO1xuICAgIGNvbnN0IG9uQmFuT3JVbmJhbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBmaW5pc2hlZCB9ID0gTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZyhcbiAgICAgICAgICAgICdDb25maXJtIFVzZXIgQWN0aW9uIERpYWxvZycsXG4gICAgICAgICAgICAnb25CYW5PclVuYmFuJyxcbiAgICAgICAgICAgIHJvb20uaXNTcGFjZVJvb20oKSA/IENvbmZpcm1TcGFjZVVzZXJBY3Rpb25EaWFsb2cgOiBDb25maXJtVXNlckFjdGlvbkRpYWxvZyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtZW1iZXIsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBpc0Jhbm5lZCA/IF90KFwiVW5iYW5cIikgOiBfdChcIkJhblwiKSxcbiAgICAgICAgICAgICAgICB0aXRsZTogaXNCYW5uZWRcbiAgICAgICAgICAgICAgICAgICAgPyBfdChcIlVuYmFuIGZyb20gJShyb29tTmFtZSlzXCIsIHsgcm9vbU5hbWU6IHJvb20ubmFtZSB9KVxuICAgICAgICAgICAgICAgICAgICA6IF90KFwiQmFuIGZyb20gJShyb29tTmFtZSlzXCIsIHsgcm9vbU5hbWU6IHJvb20ubmFtZSB9KSxcbiAgICAgICAgICAgICAgICBhc2tSZWFzb246ICFpc0Jhbm5lZCxcbiAgICAgICAgICAgICAgICBkYW5nZXI6ICFpc0Jhbm5lZCxcbiAgICAgICAgICAgICAgICAvLyBzcGFjZS1zcGVjaWZpYyBwcm9wc1xuICAgICAgICAgICAgICAgIHNwYWNlOiByb29tLFxuICAgICAgICAgICAgICAgIHNwYWNlQ2hpbGRGaWx0ZXI6IGlzQmFubmVkXG4gICAgICAgICAgICAgICAgICAgID8gKGNoaWxkOiBSb29tKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBpZiB0aGUgdGFyZ2V0IG1lbWJlciBpcyBiYW5uZWQgYW5kIHdlIGhhdmUgc3VmZmljaWVudCBQTCB0byB1bmJhblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXlNZW1iZXIgPSBjaGlsZC5nZXRNZW1iZXIoY2xpLmNyZWRlbnRpYWxzLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aGVpck1lbWJlciA9IGNoaWxkLmdldE1lbWJlcihtZW1iZXIudXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBteU1lbWJlciAmJiB0aGVpck1lbWJlciAmJiB0aGVpck1lbWJlci5tZW1iZXJzaGlwID09PSBcImJhblwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlNZW1iZXIucG93ZXJMZXZlbCA+IHRoZWlyTWVtYmVyLnBvd2VyTGV2ZWwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5jdXJyZW50U3RhdGUuaGFzU3VmZmljaWVudFBvd2VyTGV2ZWxGb3IoXCJiYW5cIiwgbXlNZW1iZXIucG93ZXJMZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiAoY2hpbGQ6IFJvb20pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJldHVybiB0cnVlIGlmIHRoZSB0YXJnZXQgbWVtYmVyIGlzbid0IGJhbm5lZCBhbmQgd2UgaGF2ZSBzdWZmaWNpZW50IFBMIHRvIGJhblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXlNZW1iZXIgPSBjaGlsZC5nZXRNZW1iZXIoY2xpLmNyZWRlbnRpYWxzLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aGVpck1lbWJlciA9IGNoaWxkLmdldE1lbWJlcihtZW1iZXIudXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBteU1lbWJlciAmJiB0aGVpck1lbWJlciAmJiB0aGVpck1lbWJlci5tZW1iZXJzaGlwICE9PSBcImJhblwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXlNZW1iZXIucG93ZXJMZXZlbCA+IHRoZWlyTWVtYmVyLnBvd2VyTGV2ZWwgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5jdXJyZW50U3RhdGUuaGFzU3VmZmljaWVudFBvd2VyTGV2ZWxGb3IoXCJiYW5cIiwgbXlNZW1iZXIucG93ZXJMZXZlbCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWxsTGFiZWw6IGlzQmFubmVkXG4gICAgICAgICAgICAgICAgICAgID8gX3QoXCJVbmJhbiB0aGVtIGZyb20gZXZlcnl0aGluZyBJJ20gYWJsZSB0b1wiKVxuICAgICAgICAgICAgICAgICAgICA6IF90KFwiQmFuIHRoZW0gZnJvbSBldmVyeXRoaW5nIEknbSBhYmxlIHRvXCIpLFxuICAgICAgICAgICAgICAgIHNwZWNpZmljTGFiZWw6IGlzQmFubmVkXG4gICAgICAgICAgICAgICAgICAgID8gX3QoXCJVbmJhbiB0aGVtIGZyb20gc3BlY2lmaWMgdGhpbmdzIEknbSBhYmxlIHRvXCIpXG4gICAgICAgICAgICAgICAgICAgIDogX3QoXCJCYW4gdGhlbSBmcm9tIHNwZWNpZmljIHRoaW5ncyBJJ20gYWJsZSB0b1wiKSxcbiAgICAgICAgICAgICAgICB3YXJuaW5nTWVzc2FnZTogaXNCYW5uZWRcbiAgICAgICAgICAgICAgICAgICAgPyBfdChcIlRoZXkgd29uJ3QgYmUgYWJsZSB0byBhY2Nlc3Mgd2hhdGV2ZXIgeW91J3JlIG5vdCBhbiBhZG1pbiBvZi5cIilcbiAgICAgICAgICAgICAgICAgICAgOiBfdChcIlRoZXknbGwgc3RpbGwgYmUgYWJsZSB0byBhY2Nlc3Mgd2hhdGV2ZXIgeW91J3JlIG5vdCBhbiBhZG1pbiBvZi5cIiksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcm9vbS5pc1NwYWNlUm9vbSgpID8gXCJteF9Db25maXJtU3BhY2VVc2VyQWN0aW9uRGlhbG9nX3dyYXBwZXJcIiA6IHVuZGVmaW5lZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBbcHJvY2VlZCwgcmVhc29uLCByb29tcyA9IFtdXSA9IGF3YWl0IGZpbmlzaGVkO1xuICAgICAgICBpZiAoIXByb2NlZWQpIHJldHVybjtcblxuICAgICAgICBzdGFydFVwZGF0aW5nKCk7XG5cbiAgICAgICAgY29uc3QgZm4gPSAocm9vbUlkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Jhbm5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGkudW5iYW4ocm9vbUlkLCBtZW1iZXIudXNlcklkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsaS5iYW4ocm9vbUlkLCBtZW1iZXIudXNlcklkLCByZWFzb24gfHwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBidWxrU3BhY2VCZWhhdmlvdXIocm9vbSwgcm9vbXMsIHJvb20gPT4gZm4ocm9vbS5yb29tSWQpKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8vIE5PLU9QOyByZWx5IG9uIHRoZSBtLnJvb20ubWVtYmVyIGV2ZW50IGNvbWluZyBkb3duIGVsc2Ugd2UgY291bGRcbiAgICAgICAgICAgIC8vIGdldCBvdXQgb2Ygc3luYyBpZiB3ZSBmb3JjZSBzZXRTdGF0ZSBoZXJlIVxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIkJhbiBzdWNjZXNzXCIpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkJhbiBlcnJvcjogXCIgKyBlcnIpO1xuICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnRmFpbGVkIHRvIGJhbiB1c2VyJywgJycsIEVycm9yRGlhbG9nLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IF90KFwiRXJyb3JcIiksXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IF90KFwiRmFpbGVkIHRvIGJhbiB1c2VyXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgc3RvcFVwZGF0aW5nKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBsZXQgbGFiZWwgPSBfdChcIkJhblwiKTtcbiAgICBpZiAoaXNCYW5uZWQpIHtcbiAgICAgICAgbGFiZWwgPSBfdChcIlVuYmFuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKFwibXhfVXNlckluZm9fZmllbGRcIiwge1xuICAgICAgICBteF9Vc2VySW5mb19kZXN0cnVjdGl2ZTogIWlzQmFubmVkLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIDxBY2Nlc3NpYmxlQnV0dG9uIGNsYXNzTmFtZT17Y2xhc3Nlc30gb25DbGljaz17b25CYW5PclVuYmFufT5cbiAgICAgICAgeyBsYWJlbCB9XG4gICAgPC9BY2Nlc3NpYmxlQnV0dG9uPjtcbn07XG5cbmludGVyZmFjZSBJQmFzZVJvb21Qcm9wcyBleHRlbmRzIElCYXNlUHJvcHMge1xuICAgIHJvb206IFJvb207XG4gICAgcG93ZXJMZXZlbHM6IElQb3dlckxldmVsc0NvbnRlbnQ7XG59XG5cbmNvbnN0IE11dGVUb2dnbGVCdXR0b246IFJlYWN0LkZDPElCYXNlUm9vbVByb3BzPiA9ICh7IG1lbWJlciwgcm9vbSwgcG93ZXJMZXZlbHMsIHN0YXJ0VXBkYXRpbmcsIHN0b3BVcGRhdGluZyB9KSA9PiB7XG4gICAgY29uc3QgY2xpID0gdXNlQ29udGV4dChNYXRyaXhDbGllbnRDb250ZXh0KTtcblxuICAgIC8vIERvbid0IHNob3cgdGhlIG11dGUvdW5tdXRlIG9wdGlvbiBpZiB0aGUgdXNlciBpcyBub3QgaW4gdGhlIHJvb21cbiAgICBpZiAobWVtYmVyLm1lbWJlcnNoaXAgIT09IFwiam9pblwiKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IG11dGVkID0gaXNNdXRlZChtZW1iZXIsIHBvd2VyTGV2ZWxzKTtcbiAgICBjb25zdCBvbk11dGVUb2dnbGUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvb21JZCA9IG1lbWJlci5yb29tSWQ7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IG1lbWJlci51c2VySWQ7XG5cbiAgICAgICAgLy8gaWYgbXV0aW5nIHNlbGYsIHdhcm4gYXMgaXQgbWF5IGJlIGlycmV2ZXJzaWJsZVxuICAgICAgICBpZiAodGFyZ2V0ID09PSBjbGkuZ2V0VXNlcklkKCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoYXdhaXQgd2FyblNlbGZEZW1vdGUoU3BhY2VTdG9yZS5zcGFjZXNFbmFibGVkICYmIHJvb20/LmlzU3BhY2VSb29tKCkpKSkgcmV0dXJuO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byB3YXJuIGFib3V0IHNlbGYgZGVtb3Rpb246IFwiLCBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwb3dlckxldmVsRXZlbnQgPSByb29tLmN1cnJlbnRTdGF0ZS5nZXRTdGF0ZUV2ZW50cyhcIm0ucm9vbS5wb3dlcl9sZXZlbHNcIiwgXCJcIik7XG4gICAgICAgIGlmICghcG93ZXJMZXZlbEV2ZW50KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgcG93ZXJMZXZlbHMgPSBwb3dlckxldmVsRXZlbnQuZ2V0Q29udGVudCgpO1xuICAgICAgICBjb25zdCBsZXZlbFRvU2VuZCA9IChcbiAgICAgICAgICAgIChwb3dlckxldmVscy5ldmVudHMgPyBwb3dlckxldmVscy5ldmVudHNbXCJtLnJvb20ubWVzc2FnZVwiXSA6IG51bGwpIHx8XG4gICAgICAgICAgICBwb3dlckxldmVscy5ldmVudHNfZGVmYXVsdFxuICAgICAgICApO1xuICAgICAgICBsZXQgbGV2ZWw7XG4gICAgICAgIGlmIChtdXRlZCkgeyAvLyB1bm11dGVcbiAgICAgICAgICAgIGxldmVsID0gbGV2ZWxUb1NlbmQ7XG4gICAgICAgIH0gZWxzZSB7IC8vIG11dGVcbiAgICAgICAgICAgIGxldmVsID0gbGV2ZWxUb1NlbmQgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGxldmVsID0gcGFyc2VJbnQobGV2ZWwpO1xuXG4gICAgICAgIGlmICghaXNOYU4obGV2ZWwpKSB7XG4gICAgICAgICAgICBzdGFydFVwZGF0aW5nKCk7XG4gICAgICAgICAgICBjbGkuc2V0UG93ZXJMZXZlbChyb29tSWQsIHRhcmdldCwgbGV2ZWwsIHBvd2VyTGV2ZWxFdmVudCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gTk8tT1A7IHJlbHkgb24gdGhlIG0ucm9vbS5tZW1iZXIgZXZlbnQgY29taW5nIGRvd24gZWxzZSB3ZSBjb3VsZFxuICAgICAgICAgICAgICAgIC8vIGdldCBvdXQgb2Ygc3luYyBpZiB3ZSBmb3JjZSBzZXRTdGF0ZSBoZXJlIVxuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coXCJNdXRlIHRvZ2dsZSBzdWNjZXNzXCIpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiTXV0ZSBlcnJvcjogXCIgKyBlcnIpO1xuICAgICAgICAgICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ0ZhaWxlZCB0byBtdXRlIHVzZXInLCAnJywgRXJyb3JEaWFsb2csIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF90KFwiRXJyb3JcIiksXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBfdChcIkZhaWxlZCB0byBtdXRlIHVzZXJcIiksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICBzdG9wVXBkYXRpbmcoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKFwibXhfVXNlckluZm9fZmllbGRcIiwge1xuICAgICAgICBteF9Vc2VySW5mb19kZXN0cnVjdGl2ZTogIW11dGVkLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbXV0ZUxhYmVsID0gbXV0ZWQgPyBfdChcIlVubXV0ZVwiKSA6IF90KFwiTXV0ZVwiKTtcbiAgICByZXR1cm4gPEFjY2Vzc2libGVCdXR0b24gY2xhc3NOYW1lPXtjbGFzc2VzfSBvbkNsaWNrPXtvbk11dGVUb2dnbGV9PlxuICAgICAgICB7IG11dGVMYWJlbCB9XG4gICAgPC9BY2Nlc3NpYmxlQnV0dG9uPjtcbn07XG5cbmNvbnN0IFJvb21BZG1pblRvb2xzQ29udGFpbmVyOiBSZWFjdC5GQzxJQmFzZVJvb21Qcm9wcz4gPSAoe1xuICAgIHJvb20sXG4gICAgY2hpbGRyZW4sXG4gICAgbWVtYmVyLFxuICAgIHN0YXJ0VXBkYXRpbmcsXG4gICAgc3RvcFVwZGF0aW5nLFxuICAgIHBvd2VyTGV2ZWxzLFxufSkgPT4ge1xuICAgIGNvbnN0IGNsaSA9IHVzZUNvbnRleHQoTWF0cml4Q2xpZW50Q29udGV4dCk7XG4gICAgbGV0IGtpY2tCdXR0b247XG4gICAgbGV0IGJhbkJ1dHRvbjtcbiAgICBsZXQgbXV0ZUJ1dHRvbjtcbiAgICBsZXQgcmVkYWN0QnV0dG9uO1xuXG4gICAgY29uc3QgZWRpdFBvd2VyTGV2ZWwgPSAoXG4gICAgICAgIChwb3dlckxldmVscy5ldmVudHMgPyBwb3dlckxldmVscy5ldmVudHNbXCJtLnJvb20ucG93ZXJfbGV2ZWxzXCJdIDogbnVsbCkgfHxcbiAgICAgICAgcG93ZXJMZXZlbHMuc3RhdGVfZGVmYXVsdFxuICAgICk7XG5cbiAgICAvLyBpZiB0aGVzZSBkbyBub3QgZXhpc3QgaW4gdGhlIGV2ZW50IHRoZW4gdGhleSBzaG91bGQgZGVmYXVsdCB0byA1MCBhcyBwZXIgdGhlIHNwZWNcbiAgICBjb25zdCB7XG4gICAgICAgIGJhbjogYmFuUG93ZXJMZXZlbCA9IDUwLFxuICAgICAgICBraWNrOiBraWNrUG93ZXJMZXZlbCA9IDUwLFxuICAgICAgICByZWRhY3Q6IHJlZGFjdFBvd2VyTGV2ZWwgPSA1MCxcbiAgICB9ID0gcG93ZXJMZXZlbHM7XG5cbiAgICBjb25zdCBtZSA9IHJvb20uZ2V0TWVtYmVyKGNsaS5nZXRVc2VySWQoKSk7XG4gICAgaWYgKCFtZSkge1xuICAgICAgICAvLyB3ZSBhcmVuJ3QgaW4gdGhlIHJvb20sIHNvIHJldHVybiBubyBhZG1pbiB0b29saW5nXG4gICAgICAgIHJldHVybiA8ZGl2IC8+O1xuICAgIH1cblxuICAgIGNvbnN0IGlzTWUgPSBtZS51c2VySWQgPT09IG1lbWJlci51c2VySWQ7XG4gICAgY29uc3QgY2FuQWZmZWN0VXNlciA9IG1lbWJlci5wb3dlckxldmVsIDwgbWUucG93ZXJMZXZlbCB8fCBpc01lO1xuXG4gICAgaWYgKCFpc01lICYmIGNhbkFmZmVjdFVzZXIgJiYgbWUucG93ZXJMZXZlbCA+PSBraWNrUG93ZXJMZXZlbCkge1xuICAgICAgICBraWNrQnV0dG9uID0gPFJvb21LaWNrQnV0dG9uXG4gICAgICAgICAgICByb29tPXtyb29tfVxuICAgICAgICAgICAgbWVtYmVyPXttZW1iZXJ9XG4gICAgICAgICAgICBzdGFydFVwZGF0aW5nPXtzdGFydFVwZGF0aW5nfVxuICAgICAgICAgICAgc3RvcFVwZGF0aW5nPXtzdG9wVXBkYXRpbmd9XG4gICAgICAgIC8+O1xuICAgIH1cbiAgICBpZiAobWUucG93ZXJMZXZlbCA+PSByZWRhY3RQb3dlckxldmVsICYmICghU3BhY2VTdG9yZS5zcGFjZXNFbmFibGVkIHx8ICFyb29tLmlzU3BhY2VSb29tKCkpKSB7XG4gICAgICAgIHJlZGFjdEJ1dHRvbiA9IChcbiAgICAgICAgICAgIDxSZWRhY3RNZXNzYWdlc0J1dHRvbiBtZW1iZXI9e21lbWJlcn0gc3RhcnRVcGRhdGluZz17c3RhcnRVcGRhdGluZ30gc3RvcFVwZGF0aW5nPXtzdG9wVXBkYXRpbmd9IC8+XG4gICAgICAgICk7XG4gICAgfVxuICAgIGlmICghaXNNZSAmJiBjYW5BZmZlY3RVc2VyICYmIG1lLnBvd2VyTGV2ZWwgPj0gYmFuUG93ZXJMZXZlbCkge1xuICAgICAgICBiYW5CdXR0b24gPSA8QmFuVG9nZ2xlQnV0dG9uXG4gICAgICAgICAgICByb29tPXtyb29tfVxuICAgICAgICAgICAgbWVtYmVyPXttZW1iZXJ9XG4gICAgICAgICAgICBzdGFydFVwZGF0aW5nPXtzdGFydFVwZGF0aW5nfVxuICAgICAgICAgICAgc3RvcFVwZGF0aW5nPXtzdG9wVXBkYXRpbmd9XG4gICAgICAgIC8+O1xuICAgIH1cbiAgICBpZiAoIWlzTWUgJiYgY2FuQWZmZWN0VXNlciAmJiBtZS5wb3dlckxldmVsID49IGVkaXRQb3dlckxldmVsICYmICFyb29tLmlzU3BhY2VSb29tKCkpIHtcbiAgICAgICAgbXV0ZUJ1dHRvbiA9IChcbiAgICAgICAgICAgIDxNdXRlVG9nZ2xlQnV0dG9uXG4gICAgICAgICAgICAgICAgbWVtYmVyPXttZW1iZXJ9XG4gICAgICAgICAgICAgICAgcm9vbT17cm9vbX1cbiAgICAgICAgICAgICAgICBwb3dlckxldmVscz17cG93ZXJMZXZlbHN9XG4gICAgICAgICAgICAgICAgc3RhcnRVcGRhdGluZz17c3RhcnRVcGRhdGluZ31cbiAgICAgICAgICAgICAgICBzdG9wVXBkYXRpbmc9e3N0b3BVcGRhdGluZ31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGtpY2tCdXR0b24gfHwgYmFuQnV0dG9uIHx8IG11dGVCdXR0b24gfHwgcmVkYWN0QnV0dG9uIHx8IGNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybiA8R2VuZXJpY0FkbWluVG9vbHNDb250YWluZXI+XG4gICAgICAgICAgICB7IG11dGVCdXR0b24gfVxuICAgICAgICAgICAgeyBraWNrQnV0dG9uIH1cbiAgICAgICAgICAgIHsgYmFuQnV0dG9uIH1cbiAgICAgICAgICAgIHsgcmVkYWN0QnV0dG9uIH1cbiAgICAgICAgICAgIHsgY2hpbGRyZW4gfVxuICAgICAgICA8L0dlbmVyaWNBZG1pblRvb2xzQ29udGFpbmVyPjtcbiAgICB9XG5cbiAgICByZXR1cm4gPGRpdiAvPjtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JvdXBNZW1iZXIge1xuICAgIHVzZXJJZDogc3RyaW5nO1xuICAgIGRpc3BsYXluYW1lPzogc3RyaW5nOyAvLyBYWFg6IEdyb3VwTWVtYmVyIG9iamVjdHMgYXJlIGluY29uc2lzdGVudCA6KChcbiAgICBhdmF0YXJVcmw/OiBzdHJpbmc7XG59XG5cbmNvbnN0IEdyb3VwQWRtaW5Ub29sc1NlY3Rpb246IFJlYWN0LkZDPHtcbiAgICBncm91cElkOiBzdHJpbmc7XG4gICAgZ3JvdXBNZW1iZXI6IEdyb3VwTWVtYmVyO1xuICAgIHN0YXJ0VXBkYXRpbmcoKTogdm9pZDtcbiAgICBzdG9wVXBkYXRpbmcoKTogdm9pZDtcbn0+ID0gKHsgY2hpbGRyZW4sIGdyb3VwSWQsIGdyb3VwTWVtYmVyLCBzdGFydFVwZGF0aW5nLCBzdG9wVXBkYXRpbmcgfSkgPT4ge1xuICAgIGNvbnN0IGNsaSA9IHVzZUNvbnRleHQoTWF0cml4Q2xpZW50Q29udGV4dCk7XG5cbiAgICBjb25zdCBbaXNQcml2aWxlZ2VkLCBzZXRJc1ByaXZpbGVnZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtpc0ludml0ZWQsIHNldElzSW52aXRlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgICAvLyBMaXN0ZW4gdG8gZ3JvdXAgc3RvcmUgY2hhbmdlc1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGxldCB1bm1vdW50ZWQgPSBmYWxzZTtcblxuICAgICAgICBjb25zdCBvbkdyb3VwU3RvcmVVcGRhdGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHVubW91bnRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgc2V0SXNQcml2aWxlZ2VkKEdyb3VwU3RvcmUuaXNVc2VyUHJpdmlsZWdlZChncm91cElkKSk7XG4gICAgICAgICAgICBzZXRJc0ludml0ZWQoR3JvdXBTdG9yZS5nZXRHcm91cEludml0ZWRNZW1iZXJzKGdyb3VwSWQpLnNvbWUoXG4gICAgICAgICAgICAgICAgKG0pID0+IG0udXNlcklkID09PSBncm91cE1lbWJlci51c2VySWQsXG4gICAgICAgICAgICApKTtcbiAgICAgICAgfTtcblxuICAgICAgICBHcm91cFN0b3JlLnJlZ2lzdGVyTGlzdGVuZXIoZ3JvdXBJZCwgb25Hcm91cFN0b3JlVXBkYXRlZCk7XG4gICAgICAgIG9uR3JvdXBTdG9yZVVwZGF0ZWQoKTtcbiAgICAgICAgLy8gSGFuZGxlIHVubW91bnRcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVubW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgICBHcm91cFN0b3JlLnVucmVnaXN0ZXJMaXN0ZW5lcihvbkdyb3VwU3RvcmVVcGRhdGVkKTtcbiAgICAgICAgfTtcbiAgICB9LCBbZ3JvdXBJZCwgZ3JvdXBNZW1iZXIudXNlcklkXSk7XG5cbiAgICBpZiAoaXNQcml2aWxlZ2VkKSB7XG4gICAgICAgIGNvbnN0IG9uS2ljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZmluaXNoZWQgfSA9IE1vZGFsLmNyZWF0ZURpYWxvZyhDb25maXJtVXNlckFjdGlvbkRpYWxvZywge1xuICAgICAgICAgICAgICAgIG1hdHJpeENsaWVudDogY2xpLFxuICAgICAgICAgICAgICAgIGdyb3VwTWVtYmVyLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogaXNJbnZpdGVkID8gX3QoJ0Rpc2ludml0ZScpIDogX3QoJ1JlbW92ZSBmcm9tIGNvbW11bml0eScpLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBpc0ludml0ZWQgPyBfdCgnRGlzaW52aXRlIHRoaXMgdXNlciBmcm9tIGNvbW11bml0eT8nKVxuICAgICAgICAgICAgICAgICAgICA6IF90KCdSZW1vdmUgdGhpcyB1c2VyIGZyb20gY29tbXVuaXR5PycpLFxuICAgICAgICAgICAgICAgIGRhbmdlcjogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBbcHJvY2VlZF0gPSBhd2FpdCBmaW5pc2hlZDtcbiAgICAgICAgICAgIGlmICghcHJvY2VlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBzdGFydFVwZGF0aW5nKCk7XG4gICAgICAgICAgICBjbGkucmVtb3ZlVXNlckZyb21Hcm91cChncm91cElkLCBncm91cE1lbWJlci51c2VySWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB0byB0aGUgdXNlciBsaXN0XG4gICAgICAgICAgICAgICAgZGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uVmlld1VzZXIsXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlcjogbnVsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnRmFpbGVkIHRvIHJlbW92ZSB1c2VyIGZyb20gZ3JvdXAnLCAnJywgRXJyb3JEaWFsb2csIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF90KCdFcnJvcicpLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogaXNJbnZpdGVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgIF90KCdGYWlsZWQgdG8gd2l0aGRyYXcgaW52aXRhdGlvbicpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90KCdGYWlsZWQgdG8gcmVtb3ZlIHVzZXIgZnJvbSBjb21tdW5pdHknKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKGUpO1xuICAgICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RvcFVwZGF0aW5nKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBraWNrQnV0dG9uID0gKFxuICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24gY2xhc3NOYW1lPVwibXhfVXNlckluZm9fZmllbGQgbXhfVXNlckluZm9fZGVzdHJ1Y3RpdmVcIiBvbkNsaWNrPXtvbktpY2t9PlxuICAgICAgICAgICAgICAgIHsgaXNJbnZpdGVkID8gX3QoJ0Rpc2ludml0ZScpIDogX3QoJ1JlbW92ZSBmcm9tIGNvbW11bml0eScpIH1cbiAgICAgICAgICAgIDwvQWNjZXNzaWJsZUJ1dHRvbj5cbiAgICAgICAgKTtcblxuICAgICAgICAvLyBObyBtYWtlL3Jldm9rZSBhZG1pbiBBUEkgeWV0XG4gICAgICAgIC8qY29uc3Qgb3BMYWJlbCA9IHRoaXMuc3RhdGUuaXNUYXJnZXRNb2QgPyBfdChcIlJldm9rZSBNb2RlcmF0b3JcIikgOiBfdChcIk1ha2UgTW9kZXJhdG9yXCIpO1xuICAgICAgICBnaXZlTW9kQnV0dG9uID0gPEFjY2Vzc2libGVCdXR0b24gY2xhc3NOYW1lPVwibXhfVXNlckluZm9fZmllbGRcIiBvbkNsaWNrPXt0aGlzLm9uTW9kVG9nZ2xlfT5cbiAgICAgICAgICAgIHtnaXZlT3BMYWJlbH1cbiAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPjsqL1xuXG4gICAgICAgIHJldHVybiA8R2VuZXJpY0FkbWluVG9vbHNDb250YWluZXI+XG4gICAgICAgICAgICB7IGtpY2tCdXR0b24gfVxuICAgICAgICAgICAgeyBjaGlsZHJlbiB9XG4gICAgICAgIDwvR2VuZXJpY0FkbWluVG9vbHNDb250YWluZXI+O1xuICAgIH1cblxuICAgIHJldHVybiA8ZGl2IC8+O1xufTtcblxuY29uc3QgdXNlSXNTeW5hcHNlQWRtaW4gPSAoY2xpOiBNYXRyaXhDbGllbnQpID0+IHtcbiAgICBjb25zdCBbaXNBZG1pbiwgc2V0SXNBZG1pbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY2xpLmlzU3luYXBzZUFkbWluaXN0cmF0b3IoKS50aGVuKChpc0FkbWluKSA9PiB7XG4gICAgICAgICAgICBzZXRJc0FkbWluKGlzQWRtaW4pO1xuICAgICAgICB9LCAoKSA9PiB7XG4gICAgICAgICAgICBzZXRJc0FkbWluKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfSwgW2NsaV0pO1xuICAgIHJldHVybiBpc0FkbWluO1xufTtcblxuY29uc3QgdXNlSG9tZXNlcnZlclN1cHBvcnRzQ3Jvc3NTaWduaW5nID0gKGNsaTogTWF0cml4Q2xpZW50KSA9PiB7XG4gICAgcmV0dXJuIHVzZUFzeW5jTWVtbzxib29sZWFuPihhc3luYyAoKSA9PiB7XG4gICAgICAgIHJldHVybiBjbGkuZG9lc1NlcnZlclN1cHBvcnRVbnN0YWJsZUZlYXR1cmUoXCJvcmcubWF0cml4LmUyZV9jcm9zc19zaWduaW5nXCIpO1xuICAgIH0sIFtjbGldLCBmYWxzZSk7XG59O1xuXG5pbnRlcmZhY2UgSVJvb21QZXJtaXNzaW9ucyB7XG4gICAgbW9kaWZ5TGV2ZWxNYXg6IG51bWJlcjtcbiAgICBjYW5FZGl0OiBib29sZWFuO1xuICAgIGNhbkludml0ZTogYm9vbGVhbjtcbn1cblxuZnVuY3Rpb24gdXNlUm9vbVBlcm1pc3Npb25zKGNsaTogTWF0cml4Q2xpZW50LCByb29tOiBSb29tLCB1c2VyOiBSb29tTWVtYmVyKTogSVJvb21QZXJtaXNzaW9ucyB7XG4gICAgY29uc3QgW3Jvb21QZXJtaXNzaW9ucywgc2V0Um9vbVBlcm1pc3Npb25zXSA9IHVzZVN0YXRlPElSb29tUGVybWlzc2lvbnM+KHtcbiAgICAgICAgLy8gbW9kaWZ5TGV2ZWxNYXggaXMgdGhlIG1heCBQTCB3ZSBjYW4gc2V0IHRoaXMgdXNlciB0bywgdHlwaWNhbGx5IG1pbih0aGVpciBQTCwgb3VyIFBMKSAmJiBjYW5TZXRQTFxuICAgICAgICBtb2RpZnlMZXZlbE1heDogLTEsXG4gICAgICAgIGNhbkVkaXQ6IGZhbHNlLFxuICAgICAgICBjYW5JbnZpdGU6IGZhbHNlLFxuICAgIH0pO1xuICAgIGNvbnN0IHVwZGF0ZVJvb21QZXJtaXNzaW9ucyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgaWYgKCFyb29tKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwb3dlckxldmVsRXZlbnQgPSByb29tLmN1cnJlbnRTdGF0ZS5nZXRTdGF0ZUV2ZW50cyhcIm0ucm9vbS5wb3dlcl9sZXZlbHNcIiwgXCJcIik7XG4gICAgICAgIGlmICghcG93ZXJMZXZlbEV2ZW50KSByZXR1cm47XG4gICAgICAgIGNvbnN0IHBvd2VyTGV2ZWxzID0gcG93ZXJMZXZlbEV2ZW50LmdldENvbnRlbnQoKTtcbiAgICAgICAgaWYgKCFwb3dlckxldmVscykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IG1lID0gcm9vbS5nZXRNZW1iZXIoY2xpLmdldFVzZXJJZCgpKTtcbiAgICAgICAgaWYgKCFtZSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHRoZW0gPSB1c2VyO1xuICAgICAgICBjb25zdCBpc01lID0gbWUudXNlcklkID09PSB0aGVtLnVzZXJJZDtcbiAgICAgICAgY29uc3QgY2FuQWZmZWN0VXNlciA9IHRoZW0ucG93ZXJMZXZlbCA8IG1lLnBvd2VyTGV2ZWwgfHwgaXNNZTtcblxuICAgICAgICBsZXQgbW9kaWZ5TGV2ZWxNYXggPSAtMTtcbiAgICAgICAgaWYgKGNhbkFmZmVjdFVzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGVkaXRQb3dlckxldmVsID0gKFxuICAgICAgICAgICAgICAgIChwb3dlckxldmVscy5ldmVudHMgPyBwb3dlckxldmVscy5ldmVudHNbXCJtLnJvb20ucG93ZXJfbGV2ZWxzXCJdIDogbnVsbCkgfHxcbiAgICAgICAgICAgICAgICBwb3dlckxldmVscy5zdGF0ZV9kZWZhdWx0XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKG1lLnBvd2VyTGV2ZWwgPj0gZWRpdFBvd2VyTGV2ZWwgJiYgKGlzTWUgfHwgbWUucG93ZXJMZXZlbCA+IHRoZW0ucG93ZXJMZXZlbCkpIHtcbiAgICAgICAgICAgICAgICBtb2RpZnlMZXZlbE1heCA9IG1lLnBvd2VyTGV2ZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZXRSb29tUGVybWlzc2lvbnMoe1xuICAgICAgICAgICAgY2FuSW52aXRlOiBtZS5wb3dlckxldmVsID49IHBvd2VyTGV2ZWxzLmludml0ZSxcbiAgICAgICAgICAgIGNhbkVkaXQ6IG1vZGlmeUxldmVsTWF4ID49IDAsXG4gICAgICAgICAgICBtb2RpZnlMZXZlbE1heCxcbiAgICAgICAgfSk7XG4gICAgfSwgW2NsaSwgdXNlciwgcm9vbV0pO1xuICAgIHVzZUV2ZW50RW1pdHRlcihjbGksIFwiUm9vbVN0YXRlLm1lbWJlcnNcIiwgdXBkYXRlUm9vbVBlcm1pc3Npb25zKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICB1cGRhdGVSb29tUGVybWlzc2lvbnMoKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHNldFJvb21QZXJtaXNzaW9ucyh7XG4gICAgICAgICAgICAgICAgbW9kaWZ5TGV2ZWxNYXg6IC0xLFxuICAgICAgICAgICAgICAgIGNhbkVkaXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNhbkludml0ZTogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9LCBbdXBkYXRlUm9vbVBlcm1pc3Npb25zXSk7XG5cbiAgICByZXR1cm4gcm9vbVBlcm1pc3Npb25zO1xufVxuXG5jb25zdCBQb3dlckxldmVsU2VjdGlvbjogUmVhY3QuRkM8e1xuICAgIHVzZXI6IFJvb21NZW1iZXI7XG4gICAgcm9vbTogUm9vbTtcbiAgICByb29tUGVybWlzc2lvbnM6IElSb29tUGVybWlzc2lvbnM7XG4gICAgcG93ZXJMZXZlbHM6IElQb3dlckxldmVsc0NvbnRlbnQ7XG59PiA9ICh7IHVzZXIsIHJvb20sIHJvb21QZXJtaXNzaW9ucywgcG93ZXJMZXZlbHMgfSkgPT4ge1xuICAgIGlmIChyb29tUGVybWlzc2lvbnMuY2FuRWRpdCkge1xuICAgICAgICByZXR1cm4gKDxQb3dlckxldmVsRWRpdG9yIHVzZXI9e3VzZXJ9IHJvb209e3Jvb219IHJvb21QZXJtaXNzaW9ucz17cm9vbVBlcm1pc3Npb25zfSAvPik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcG93ZXJMZXZlbFVzZXJzRGVmYXVsdCA9IHBvd2VyTGV2ZWxzLnVzZXJzX2RlZmF1bHQgfHwgMDtcbiAgICAgICAgY29uc3QgcG93ZXJMZXZlbCA9IHVzZXIucG93ZXJMZXZlbDtcbiAgICAgICAgY29uc3Qgcm9sZSA9IHRleHR1YWxQb3dlckxldmVsKHBvd2VyTGV2ZWwsIHBvd2VyTGV2ZWxVc2Vyc0RlZmF1bHQpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Vc2VySW5mb19wcm9maWxlRmllbGRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX3JvbGVEZXNjcmlwdGlvblwiPnsgcm9sZSB9PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59O1xuXG5jb25zdCBQb3dlckxldmVsRWRpdG9yOiBSZWFjdC5GQzx7XG4gICAgdXNlcjogUm9vbU1lbWJlcjtcbiAgICByb29tOiBSb29tO1xuICAgIHJvb21QZXJtaXNzaW9uczogSVJvb21QZXJtaXNzaW9ucztcbn0+ID0gKHsgdXNlciwgcm9vbSwgcm9vbVBlcm1pc3Npb25zIH0pID0+IHtcbiAgICBjb25zdCBjbGkgPSB1c2VDb250ZXh0KE1hdHJpeENsaWVudENvbnRleHQpO1xuXG4gICAgY29uc3QgW3NlbGVjdGVkUG93ZXJMZXZlbCwgc2V0U2VsZWN0ZWRQb3dlckxldmVsXSA9IHVzZVN0YXRlKHVzZXIucG93ZXJMZXZlbCk7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2V0U2VsZWN0ZWRQb3dlckxldmVsKHVzZXIucG93ZXJMZXZlbCk7XG4gICAgfSwgW3VzZXJdKTtcblxuICAgIGNvbnN0IG9uUG93ZXJDaGFuZ2UgPSB1c2VDYWxsYmFjayhhc3luYyAocG93ZXJMZXZlbDogbnVtYmVyKSA9PiB7XG4gICAgICAgIHNldFNlbGVjdGVkUG93ZXJMZXZlbChwb3dlckxldmVsKTtcblxuICAgICAgICBjb25zdCBhcHBseVBvd2VyQ2hhbmdlID0gKHJvb21JZCwgdGFyZ2V0LCBwb3dlckxldmVsLCBwb3dlckxldmVsRXZlbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBjbGkuc2V0UG93ZXJMZXZlbChyb29tSWQsIHRhcmdldCwgcGFyc2VJbnQocG93ZXJMZXZlbCksIHBvd2VyTGV2ZWxFdmVudCkudGhlbihcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTk8tT1A7IHJlbHkgb24gdGhlIG0ucm9vbS5tZW1iZXIgZXZlbnQgY29taW5nIGRvd24gZWxzZSB3ZSBjb3VsZFxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgb3V0IG9mIHN5bmMgaWYgd2UgZm9yY2Ugc2V0U3RhdGUgaGVyZSFcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIlBvd2VyIGNoYW5nZSBzdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gY2hhbmdlIHBvd2VyIGxldmVsIFwiICsgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgTW9kYWwuY3JlYXRlVHJhY2tlZERpYWxvZygnRmFpbGVkIHRvIGNoYW5nZSBwb3dlciBsZXZlbCcsICcnLCBFcnJvckRpYWxvZywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IF90KFwiRXJyb3JcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogX3QoXCJGYWlsZWQgdG8gY2hhbmdlIHBvd2VyIGxldmVsXCIpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByb29tSWQgPSB1c2VyLnJvb21JZDtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdXNlci51c2VySWQ7XG5cbiAgICAgICAgY29uc3QgcG93ZXJMZXZlbEV2ZW50ID0gcm9vbS5jdXJyZW50U3RhdGUuZ2V0U3RhdGVFdmVudHMoXCJtLnJvb20ucG93ZXJfbGV2ZWxzXCIsIFwiXCIpO1xuICAgICAgICBpZiAoIXBvd2VyTGV2ZWxFdmVudCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IG15VXNlcklkID0gY2xpLmdldFVzZXJJZCgpO1xuICAgICAgICBjb25zdCBteVBvd2VyID0gcG93ZXJMZXZlbEV2ZW50LmdldENvbnRlbnQoKS51c2Vyc1tteVVzZXJJZF07XG4gICAgICAgIGlmIChteVBvd2VyICYmIHBhcnNlSW50KG15UG93ZXIpID09PSBwb3dlckxldmVsKSB7XG4gICAgICAgICAgICBjb25zdCB7IGZpbmlzaGVkIH0gPSBNb2RhbC5jcmVhdGVUcmFja2VkRGlhbG9nKCdQcm9tb3RlIHRvIFBMMTAwIFdhcm5pbmcnLCAnJywgUXVlc3Rpb25EaWFsb2csIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogX3QoXCJXYXJuaW5nIVwiKSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgX3QoXCJZb3Ugd2lsbCBub3QgYmUgYWJsZSB0byB1bmRvIHRoaXMgY2hhbmdlIGFzIHlvdSBhcmUgcHJvbW90aW5nIHRoZSB1c2VyIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRvIGhhdmUgdGhlIHNhbWUgcG93ZXIgbGV2ZWwgYXMgeW91cnNlbGYuXCIpIH08YnIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgX3QoXCJBcmUgeW91IHN1cmU/XCIpIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+LFxuICAgICAgICAgICAgICAgIGJ1dHRvbjogX3QoXCJDb250aW51ZVwiKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBbY29uZmlybWVkXSA9IGF3YWl0IGZpbmlzaGVkO1xuICAgICAgICAgICAgaWYgKCFjb25maXJtZWQpIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChteVVzZXJJZCA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgY2hhbmdpbmcgb3VyIG93biBQTCBpdCBjYW4gb25seSBldmVyIGJlIGRlY3JlYXNpbmcsIHdoaWNoIHdlIGNhbm5vdCByZXZlcnNlLlxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIShhd2FpdCB3YXJuU2VsZkRlbW90ZShTcGFjZVN0b3JlLnNwYWNlc0VuYWJsZWQgJiYgcm9vbT8uaXNTcGFjZVJvb20oKSkpKSByZXR1cm47XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIHdhcm4gYWJvdXQgc2VsZiBkZW1vdGlvbjogXCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgYXBwbHlQb3dlckNoYW5nZShyb29tSWQsIHRhcmdldCwgcG93ZXJMZXZlbCwgcG93ZXJMZXZlbEV2ZW50KTtcbiAgICB9LCBbdXNlci5yb29tSWQsIHVzZXIudXNlcklkLCBjbGksIHJvb21dKTtcblxuICAgIGNvbnN0IHBvd2VyTGV2ZWxFdmVudCA9IHJvb20uY3VycmVudFN0YXRlLmdldFN0YXRlRXZlbnRzKFwibS5yb29tLnBvd2VyX2xldmVsc1wiLCBcIlwiKTtcbiAgICBjb25zdCBwb3dlckxldmVsVXNlcnNEZWZhdWx0ID0gcG93ZXJMZXZlbEV2ZW50ID8gcG93ZXJMZXZlbEV2ZW50LmdldENvbnRlbnQoKS51c2Vyc19kZWZhdWx0IDogMDtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfVXNlckluZm9fcHJvZmlsZUZpZWxkXCI+XG4gICAgICAgICAgICA8UG93ZXJTZWxlY3RvclxuICAgICAgICAgICAgICAgIGxhYmVsPXtudWxsfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZFBvd2VyTGV2ZWx9XG4gICAgICAgICAgICAgICAgbWF4VmFsdWU9e3Jvb21QZXJtaXNzaW9ucy5tb2RpZnlMZXZlbE1heH1cbiAgICAgICAgICAgICAgICB1c2Vyc0RlZmF1bHQ9e3Bvd2VyTGV2ZWxVc2Vyc0RlZmF1bHR9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uUG93ZXJDaGFuZ2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGNvbnN0IHVzZURldmljZXMgPSAodXNlcklkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBjbGkgPSB1c2VDb250ZXh0KE1hdHJpeENsaWVudENvbnRleHQpO1xuXG4gICAgLy8gdW5kZWZpbmVkIG1lYW5zIHlldCB0byBiZSBsb2FkZWQsIG51bGwgbWVhbnMgZmFpbGVkIHRvIGxvYWQsIG90aGVyd2lzZSBsaXN0IG9mIGRldmljZXNcbiAgICBjb25zdCBbZGV2aWNlcywgc2V0RGV2aWNlc10gPSB1c2VTdGF0ZSh1bmRlZmluZWQpO1xuICAgIC8vIERvd25sb2FkIGRldmljZSBsaXN0c1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldERldmljZXModW5kZWZpbmVkKTtcblxuICAgICAgICBsZXQgY2FuY2VsbGVkID0gZmFsc2U7XG5cbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZG93bmxvYWREZXZpY2VMaXN0KCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGkuZG93bmxvYWRLZXlzKFt1c2VySWRdLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXZpY2VzID0gY2xpLmdldFN0b3JlZERldmljZXNGb3JVc2VyKHVzZXJJZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGdvdCBjYW5jZWxsZWQgLSBwcmVzdW1hYmx5IGEgZGlmZmVyZW50IHVzZXIgbm93XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkaXNhbWJpZ3VhdGVEZXZpY2VzKGRldmljZXMpO1xuICAgICAgICAgICAgICAgIHNldERldmljZXMoZGV2aWNlcyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBzZXREZXZpY2VzKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRvd25sb2FkRGV2aWNlTGlzdCgpO1xuXG4gICAgICAgIC8vIEhhbmRsZSBiZWluZyB1bm1vdW50ZWRcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGNhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgfSwgW2NsaSwgdXNlcklkXSk7XG5cbiAgICAvLyBMaXN0ZW4gdG8gY2hhbmdlc1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGxldCBjYW5jZWwgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgdXBkYXRlRGV2aWNlcyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RldmljZXMgPSBjbGkuZ2V0U3RvcmVkRGV2aWNlc0ZvclVzZXIodXNlcklkKTtcbiAgICAgICAgICAgIGlmIChjYW5jZWwpIHJldHVybjtcbiAgICAgICAgICAgIHNldERldmljZXMobmV3RGV2aWNlcyk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9uRGV2aWNlc1VwZGF0ZWQgPSAodXNlcnMpID0+IHtcbiAgICAgICAgICAgIGlmICghdXNlcnMuaW5jbHVkZXModXNlcklkKSkgcmV0dXJuO1xuICAgICAgICAgICAgdXBkYXRlRGV2aWNlcygpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvbkRldmljZVZlcmlmaWNhdGlvbkNoYW5nZWQgPSAoX3VzZXJJZCwgZGV2aWNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoX3VzZXJJZCAhPT0gdXNlcklkKSByZXR1cm47XG4gICAgICAgICAgICB1cGRhdGVEZXZpY2VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9uVXNlclRydXN0U3RhdHVzQ2hhbmdlZCA9IChfdXNlcklkLCB0cnVzdFN0YXR1cykgPT4ge1xuICAgICAgICAgICAgaWYgKF91c2VySWQgIT09IHVzZXJJZCkgcmV0dXJuO1xuICAgICAgICAgICAgdXBkYXRlRGV2aWNlcygpO1xuICAgICAgICB9O1xuICAgICAgICBjbGkub24oXCJjcnlwdG8uZGV2aWNlc1VwZGF0ZWRcIiwgb25EZXZpY2VzVXBkYXRlZCk7XG4gICAgICAgIGNsaS5vbihcImRldmljZVZlcmlmaWNhdGlvbkNoYW5nZWRcIiwgb25EZXZpY2VWZXJpZmljYXRpb25DaGFuZ2VkKTtcbiAgICAgICAgY2xpLm9uKFwidXNlclRydXN0U3RhdHVzQ2hhbmdlZFwiLCBvblVzZXJUcnVzdFN0YXR1c0NoYW5nZWQpO1xuICAgICAgICAvLyBIYW5kbGUgYmVpbmcgdW5tb3VudGVkXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjYW5jZWwgPSB0cnVlO1xuICAgICAgICAgICAgY2xpLnJlbW92ZUxpc3RlbmVyKFwiY3J5cHRvLmRldmljZXNVcGRhdGVkXCIsIG9uRGV2aWNlc1VwZGF0ZWQpO1xuICAgICAgICAgICAgY2xpLnJlbW92ZUxpc3RlbmVyKFwiZGV2aWNlVmVyaWZpY2F0aW9uQ2hhbmdlZFwiLCBvbkRldmljZVZlcmlmaWNhdGlvbkNoYW5nZWQpO1xuICAgICAgICAgICAgY2xpLnJlbW92ZUxpc3RlbmVyKFwidXNlclRydXN0U3RhdHVzQ2hhbmdlZFwiLCBvblVzZXJUcnVzdFN0YXR1c0NoYW5nZWQpO1xuICAgICAgICB9O1xuICAgIH0sIFtjbGksIHVzZXJJZF0pO1xuXG4gICAgcmV0dXJuIGRldmljZXM7XG59O1xuXG5jb25zdCBCYXNpY1VzZXJJbmZvOiBSZWFjdC5GQzx7XG4gICAgcm9vbTogUm9vbTtcbiAgICBtZW1iZXI6IFVzZXIgfCBSb29tTWVtYmVyO1xuICAgIGdyb3VwSWQ6IHN0cmluZztcbiAgICBkZXZpY2VzOiBJRGV2aWNlW107XG4gICAgaXNSb29tRW5jcnlwdGVkOiBib29sZWFuO1xufT4gPSAoeyByb29tLCBtZW1iZXIsIGdyb3VwSWQsIGRldmljZXMsIGlzUm9vbUVuY3J5cHRlZCB9KSA9PiB7XG4gICAgY29uc3QgY2xpID0gdXNlQ29udGV4dChNYXRyaXhDbGllbnRDb250ZXh0KTtcblxuICAgIGNvbnN0IHBvd2VyTGV2ZWxzID0gdXNlUm9vbVBvd2VyTGV2ZWxzKGNsaSwgcm9vbSk7XG4gICAgLy8gTG9hZCB3aGV0aGVyIG9yIG5vdCB3ZSBhcmUgYSBTeW5hcHNlIEFkbWluXG4gICAgY29uc3QgaXNTeW5hcHNlQWRtaW4gPSB1c2VJc1N5bmFwc2VBZG1pbihjbGkpO1xuXG4gICAgLy8gQ2hlY2sgd2hldGhlciB0aGUgdXNlciBpcyBpZ25vcmVkXG4gICAgY29uc3QgW2lzSWdub3JlZCwgc2V0SXNJZ25vcmVkXSA9IHVzZVN0YXRlKGNsaS5pc1VzZXJJZ25vcmVkKG1lbWJlci51c2VySWQpKTtcbiAgICAvLyBSZWNoZWNrIGlmIHRoZSB1c2VyIG9yIGNsaWVudCBjaGFuZ2VzXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2V0SXNJZ25vcmVkKGNsaS5pc1VzZXJJZ25vcmVkKG1lbWJlci51c2VySWQpKTtcbiAgICB9LCBbY2xpLCBtZW1iZXIudXNlcklkXSk7XG4gICAgLy8gUmVjaGVjayBhbHNvIGlmIHdlIHJlY2VpdmUgbmV3IGFjY291bnREYXRhIG0uaWdub3JlZF91c2VyX2xpc3RcbiAgICBjb25zdCBhY2NvdW50RGF0YUhhbmRsZXIgPSB1c2VDYWxsYmFjaygoZXYpID0+IHtcbiAgICAgICAgaWYgKGV2LmdldFR5cGUoKSA9PT0gXCJtLmlnbm9yZWRfdXNlcl9saXN0XCIpIHtcbiAgICAgICAgICAgIHNldElzSWdub3JlZChjbGkuaXNVc2VySWdub3JlZChtZW1iZXIudXNlcklkKSk7XG4gICAgICAgIH1cbiAgICB9LCBbY2xpLCBtZW1iZXIudXNlcklkXSk7XG4gICAgdXNlRXZlbnRFbWl0dGVyKGNsaSwgXCJhY2NvdW50RGF0YVwiLCBhY2NvdW50RGF0YUhhbmRsZXIpO1xuXG4gICAgLy8gQ291bnQgb2YgaG93IG1hbnkgb3BlcmF0aW9ucyBhcmUgY3VycmVudGx5IGluIHByb2dyZXNzLCBpZiA+IDAgdGhlbiBzaG93IGEgU3Bpbm5lclxuICAgIGNvbnN0IFtwZW5kaW5nVXBkYXRlQ291bnQsIHNldFBlbmRpbmdVcGRhdGVDb3VudF0gPSB1c2VTdGF0ZSgwKTtcbiAgICBjb25zdCBzdGFydFVwZGF0aW5nID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRQZW5kaW5nVXBkYXRlQ291bnQocGVuZGluZ1VwZGF0ZUNvdW50ICsgMSk7XG4gICAgfSwgW3BlbmRpbmdVcGRhdGVDb3VudF0pO1xuICAgIGNvbnN0IHN0b3BVcGRhdGluZyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgc2V0UGVuZGluZ1VwZGF0ZUNvdW50KHBlbmRpbmdVcGRhdGVDb3VudCAtIDEpO1xuICAgIH0sIFtwZW5kaW5nVXBkYXRlQ291bnRdKTtcblxuICAgIGNvbnN0IHJvb21QZXJtaXNzaW9ucyA9IHVzZVJvb21QZXJtaXNzaW9ucyhjbGksIHJvb20sIG1lbWJlciBhcyBSb29tTWVtYmVyKTtcblxuICAgIGNvbnN0IG9uU3luYXBzZURlYWN0aXZhdGUgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgZmluaXNoZWQgfSA9IE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ1N5bmFwc2UgVXNlciBEZWFjdGl2YXRpb24nLCAnJywgUXVlc3Rpb25EaWFsb2csIHtcbiAgICAgICAgICAgIHRpdGxlOiBfdChcIkRlYWN0aXZhdGUgdXNlcj9cIiksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgICAgICA8ZGl2PnsgX3QoXG4gICAgICAgICAgICAgICAgICAgIFwiRGVhY3RpdmF0aW5nIHRoaXMgdXNlciB3aWxsIGxvZyB0aGVtIG91dCBhbmQgcHJldmVudCB0aGVtIGZyb20gbG9nZ2luZyBiYWNrIGluLiBBZGRpdGlvbmFsbHksIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ0aGV5IHdpbGwgbGVhdmUgYWxsIHRoZSByb29tcyB0aGV5IGFyZSBpbi4gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHJldmVyc2VkLiBBcmUgeW91IHN1cmUgeW91IFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJ3YW50IHRvIGRlYWN0aXZhdGUgdGhpcyB1c2VyP1wiLFxuICAgICAgICAgICAgICAgICkgfTwvZGl2PixcbiAgICAgICAgICAgIGJ1dHRvbjogX3QoXCJEZWFjdGl2YXRlIHVzZXJcIiksXG4gICAgICAgICAgICBkYW5nZXI6IHRydWUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IFthY2NlcHRlZF0gPSBhd2FpdCBmaW5pc2hlZDtcbiAgICAgICAgaWYgKCFhY2NlcHRlZCkgcmV0dXJuO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgY2xpLmRlYWN0aXZhdGVTeW5hcHNlVXNlcihtZW1iZXIudXNlcklkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZGVhY3RpdmF0ZSB1c2VyXCIpO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGVycik7XG5cbiAgICAgICAgICAgIE1vZGFsLmNyZWF0ZVRyYWNrZWREaWFsb2coJ0ZhaWxlZCB0byBkZWFjdGl2YXRlIFN5bmFwc2UgdXNlcicsICcnLCBFcnJvckRpYWxvZywge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBfdCgnRmFpbGVkIHRvIGRlYWN0aXZhdGUgdXNlcicpLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAoKGVyciAmJiBlcnIubWVzc2FnZSkgPyBlcnIubWVzc2FnZSA6IF90KFwiT3BlcmF0aW9uIGZhaWxlZFwiKSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIFtjbGksIG1lbWJlci51c2VySWRdKTtcblxuICAgIGxldCBzeW5hcHNlRGVhY3RpdmF0ZUJ1dHRvbjtcbiAgICBsZXQgc3Bpbm5lcjtcblxuICAgIC8vIFdlIGRvbid0IG5lZWQgYSBwZXJmZWN0IGNoZWNrIGhlcmUsIGp1c3Qgc29tZXRoaW5nIHRvIHBhc3MgYXMgXCJwcm9iYWJseSBub3Qgb3VyIGhvbWVzZXJ2ZXJcIi4gSWZcbiAgICAvLyBzb21lb25lIGRvZXMgZmlndXJlIG91dCBob3cgdG8gYnlwYXNzIHRoaXMgY2hlY2sgdGhlIHdvcnN0IHRoYXQgaGFwcGVucyBpcyBhbiBlcnJvci5cbiAgICAvLyBGSVhNRSB0aGlzIHNob3VsZCBiZSB1c2luZyBjbGkgaW5zdGVhZCBvZiBNYXRyaXhDbGllbnRQZWcubWF0cml4Q2xpZW50XG4gICAgaWYgKGlzU3luYXBzZUFkbWluICYmIG1lbWJlci51c2VySWQuZW5kc1dpdGgoYDoke01hdHJpeENsaWVudFBlZy5nZXRIb21lc2VydmVyTmFtZSgpfWApKSB7XG4gICAgICAgIHN5bmFwc2VEZWFjdGl2YXRlQnV0dG9uID0gKFxuICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24gb25DbGljaz17b25TeW5hcHNlRGVhY3RpdmF0ZX0gY2xhc3NOYW1lPVwibXhfVXNlckluZm9fZmllbGQgbXhfVXNlckluZm9fZGVzdHJ1Y3RpdmVcIj5cbiAgICAgICAgICAgICAgICB7IF90KFwiRGVhY3RpdmF0ZSB1c2VyXCIpIH1cbiAgICAgICAgICAgIDwvQWNjZXNzaWJsZUJ1dHRvbj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgbWVtYmVyRGV0YWlscztcbiAgICBsZXQgYWRtaW5Ub29sc0NvbnRhaW5lcjtcbiAgICBpZiAocm9vbSAmJiAobWVtYmVyIGFzIFJvb21NZW1iZXIpLnJvb21JZCkge1xuICAgICAgICAvLyBoaWRlIHRoZSBSb2xlcyBzZWN0aW9uIGZvciBETXMgYXMgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRoZXJlXG4gICAgICAgIGlmICghRE1Sb29tTWFwLnNoYXJlZCgpLmdldFVzZXJJZEZvclJvb21JZCgobWVtYmVyIGFzIFJvb21NZW1iZXIpLnJvb21JZCkpIHtcbiAgICAgICAgICAgIG1lbWJlckRldGFpbHMgPSA8ZGl2IGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX2NvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxoMz57IF90KFwiUm9sZSBpbiA8Um9vbU5hbWUvPlwiLCB7fSwge1xuICAgICAgICAgICAgICAgICAgICBSb29tTmFtZTogKCkgPT4gPGI+eyByb29tLm5hbWUgfTwvYj4sXG4gICAgICAgICAgICAgICAgfSkgfTwvaDM+XG4gICAgICAgICAgICAgICAgPFBvd2VyTGV2ZWxTZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgIHBvd2VyTGV2ZWxzPXtwb3dlckxldmVsc31cbiAgICAgICAgICAgICAgICAgICAgdXNlcj17bWVtYmVyIGFzIFJvb21NZW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgIHJvb209e3Jvb219XG4gICAgICAgICAgICAgICAgICAgIHJvb21QZXJtaXNzaW9ucz17cm9vbVBlcm1pc3Npb25zfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj47XG4gICAgICAgIH1cblxuICAgICAgICBhZG1pblRvb2xzQ29udGFpbmVyID0gKFxuICAgICAgICAgICAgPFJvb21BZG1pblRvb2xzQ29udGFpbmVyXG4gICAgICAgICAgICAgICAgcG93ZXJMZXZlbHM9e3Bvd2VyTGV2ZWxzfVxuICAgICAgICAgICAgICAgIG1lbWJlcj17bWVtYmVyIGFzIFJvb21NZW1iZXJ9XG4gICAgICAgICAgICAgICAgcm9vbT17cm9vbX1cbiAgICAgICAgICAgICAgICBzdGFydFVwZGF0aW5nPXtzdGFydFVwZGF0aW5nfVxuICAgICAgICAgICAgICAgIHN0b3BVcGRhdGluZz17c3RvcFVwZGF0aW5nfT5cbiAgICAgICAgICAgICAgICB7IHN5bmFwc2VEZWFjdGl2YXRlQnV0dG9uIH1cbiAgICAgICAgICAgIDwvUm9vbUFkbWluVG9vbHNDb250YWluZXI+XG4gICAgICAgICk7XG4gICAgfSBlbHNlIGlmIChncm91cElkKSB7XG4gICAgICAgIGFkbWluVG9vbHNDb250YWluZXIgPSAoXG4gICAgICAgICAgICA8R3JvdXBBZG1pblRvb2xzU2VjdGlvblxuICAgICAgICAgICAgICAgIGdyb3VwSWQ9e2dyb3VwSWR9XG4gICAgICAgICAgICAgICAgZ3JvdXBNZW1iZXI9e21lbWJlcn1cbiAgICAgICAgICAgICAgICBzdGFydFVwZGF0aW5nPXtzdGFydFVwZGF0aW5nfVxuICAgICAgICAgICAgICAgIHN0b3BVcGRhdGluZz17c3RvcFVwZGF0aW5nfT5cbiAgICAgICAgICAgICAgICB7IHN5bmFwc2VEZWFjdGl2YXRlQnV0dG9uIH1cbiAgICAgICAgICAgIDwvR3JvdXBBZG1pblRvb2xzU2VjdGlvbj5cbiAgICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHN5bmFwc2VEZWFjdGl2YXRlQnV0dG9uKSB7XG4gICAgICAgIGFkbWluVG9vbHNDb250YWluZXIgPSAoXG4gICAgICAgICAgICA8R2VuZXJpY0FkbWluVG9vbHNDb250YWluZXI+XG4gICAgICAgICAgICAgICAgeyBzeW5hcHNlRGVhY3RpdmF0ZUJ1dHRvbiB9XG4gICAgICAgICAgICA8L0dlbmVyaWNBZG1pblRvb2xzQ29udGFpbmVyPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIGlmIChwZW5kaW5nVXBkYXRlQ291bnQgPiAwKSB7XG4gICAgICAgIHNwaW5uZXIgPSA8U3Bpbm5lciAvPjtcbiAgICB9XG5cbiAgICAvLyBvbmx5IGRpc3BsYXkgdGhlIGRldmljZXMgbGlzdCBpZiBvdXIgY2xpZW50IHN1cHBvcnRzIEUyRVxuICAgIGNvbnN0IGNyeXB0b0VuYWJsZWQgPSBjbGkuaXNDcnlwdG9FbmFibGVkKCk7XG5cbiAgICBsZXQgdGV4dDtcbiAgICBpZiAoIWlzUm9vbUVuY3J5cHRlZCkge1xuICAgICAgICBpZiAoIWNyeXB0b0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRleHQgPSBfdChcIlRoaXMgY2xpZW50IGRvZXMgbm90IHN1cHBvcnQgZW5kLXRvLWVuZCBlbmNyeXB0aW9uLlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChyb29tICYmICghU3BhY2VTdG9yZS5zcGFjZXNFbmFibGVkIHx8ICFyb29tLmlzU3BhY2VSb29tKCkpKSB7XG4gICAgICAgICAgICB0ZXh0ID0gX3QoXCJNZXNzYWdlcyBpbiB0aGlzIHJvb20gYXJlIG5vdCBlbmQtdG8tZW5kIGVuY3J5cHRlZC5cIik7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFTcGFjZVN0b3JlLnNwYWNlc0VuYWJsZWQgfHwgIXJvb20uaXNTcGFjZVJvb20oKSkge1xuICAgICAgICB0ZXh0ID0gX3QoXCJNZXNzYWdlcyBpbiB0aGlzIHJvb20gYXJlIGVuZC10by1lbmQgZW5jcnlwdGVkLlwiKTtcbiAgICB9XG5cbiAgICBsZXQgdmVyaWZ5QnV0dG9uO1xuICAgIGNvbnN0IGhvbWVzZXJ2ZXJTdXBwb3J0c0Nyb3NzU2lnbmluZyA9IHVzZUhvbWVzZXJ2ZXJTdXBwb3J0c0Nyb3NzU2lnbmluZyhjbGkpO1xuXG4gICAgY29uc3QgdXNlclRydXN0ID0gY3J5cHRvRW5hYmxlZCAmJiBjbGkuY2hlY2tVc2VyVHJ1c3QobWVtYmVyLnVzZXJJZCk7XG4gICAgY29uc3QgdXNlclZlcmlmaWVkID0gY3J5cHRvRW5hYmxlZCAmJiB1c2VyVHJ1c3QuaXNDcm9zc1NpZ25pbmdWZXJpZmllZCgpO1xuICAgIGNvbnN0IGlzTWUgPSBtZW1iZXIudXNlcklkID09PSBjbGkuZ2V0VXNlcklkKCk7XG4gICAgY29uc3QgY2FuVmVyaWZ5ID0gY3J5cHRvRW5hYmxlZCAmJiBob21lc2VydmVyU3VwcG9ydHNDcm9zc1NpZ25pbmcgJiYgIXVzZXJWZXJpZmllZCAmJiAhaXNNZSAmJlxuICAgICAgICBkZXZpY2VzICYmIGRldmljZXMubGVuZ3RoID4gMDtcblxuICAgIGNvbnN0IHNldFVwZGF0aW5nID0gKHVwZGF0aW5nKSA9PiB7XG4gICAgICAgIHNldFBlbmRpbmdVcGRhdGVDb3VudChjb3VudCA9PiBjb3VudCArICh1cGRhdGluZyA/IDEgOiAtMSkpO1xuICAgIH07XG4gICAgY29uc3QgaGFzQ3Jvc3NTaWduaW5nS2V5cyA9IHVzZUhhc0Nyb3NzU2lnbmluZ0tleXMoY2xpLCBtZW1iZXIgYXMgVXNlciwgY2FuVmVyaWZ5LCBzZXRVcGRhdGluZyk7XG5cbiAgICBjb25zdCBzaG93RGV2aWNlTGlzdFNwaW5uZXIgPSBkZXZpY2VzID09PSB1bmRlZmluZWQ7XG4gICAgaWYgKGNhblZlcmlmeSkge1xuICAgICAgICBpZiAoaGFzQ3Jvc3NTaWduaW5nS2V5cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBOb3RlOiBteF9Vc2VySW5mb192ZXJpZnlCdXR0b24gaXMgZm9yIHRoZSBlbmQtdG8tZW5kIHRlc3RzXG4gICAgICAgICAgICB2ZXJpZnlCdXR0b24gPSAoXG4gICAgICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfVXNlckluZm9fZmllbGQgbXhfVXNlckluZm9fdmVyaWZ5QnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0Nyb3NzU2lnbmluZ0tleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZnlVc2VyKG1lbWJlciBhcyBVc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVnYWN5VmVyaWZ5VXNlcihtZW1iZXIgYXMgVXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7IF90KFwiVmVyaWZ5XCIpIH1cbiAgICAgICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKCFzaG93RGV2aWNlTGlzdFNwaW5uZXIpIHtcbiAgICAgICAgICAgIC8vIEhBQ0s6IG9ubHkgc2hvdyBhIHNwaW5uZXIgaWYgdGhlIGRldmljZSBzZWN0aW9uIHNwaW5uZXIgaXMgbm90IHNob3duLFxuICAgICAgICAgICAgLy8gdG8gYXZvaWQgc2hvd2luZyBhIGRvdWJsZSBzcGlubmVyXG4gICAgICAgICAgICAvLyBXZSBzaG91bGQgYXNrIGZvciBhIGRlc2lnbiB0aGF0IGluY2x1ZGVzIGFsbCB0aGUgZGlmZmVyZW50IGxvYWRpbmcgc3RhdGVzIGhlcmVcbiAgICAgICAgICAgIHZlcmlmeUJ1dHRvbiA9IDxTcGlubmVyIC8+O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGVkaXREZXZpY2VzO1xuICAgIGlmIChtZW1iZXIudXNlcklkID09IGNsaS5nZXRVc2VySWQoKSkge1xuICAgICAgICBlZGl0RGV2aWNlcyA9ICg8cD5cbiAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfVXNlckluZm9fZmllbGRcIlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uLlZpZXdVc2VyU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsVGFiSWQ6IFVzZXJUYWIuU2VjdXJpdHksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgeyBfdChcIkVkaXQgZGV2aWNlc1wiKSB9XG4gICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgIDwvcD4pO1xuICAgIH1cblxuICAgIGNvbnN0IHNlY3VyaXR5U2VjdGlvbiA9IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Vc2VySW5mb19jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxoMz57IF90KFwiU2VjdXJpdHlcIikgfTwvaDM+XG4gICAgICAgICAgICA8cD57IHRleHQgfTwvcD5cbiAgICAgICAgICAgIHsgdmVyaWZ5QnV0dG9uIH1cbiAgICAgICAgICAgIHsgY3J5cHRvRW5hYmxlZCAmJiA8RGV2aWNlc1NlY3Rpb25cbiAgICAgICAgICAgICAgICBsb2FkaW5nPXtzaG93RGV2aWNlTGlzdFNwaW5uZXJ9XG4gICAgICAgICAgICAgICAgZGV2aWNlcz17ZGV2aWNlc31cbiAgICAgICAgICAgICAgICB1c2VySWQ9e21lbWJlci51c2VySWR9IC8+IH1cbiAgICAgICAgICAgIHsgZWRpdERldmljZXMgfVxuICAgICAgICA8L2Rpdj5cbiAgICApO1xuXG4gICAgcmV0dXJuIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgeyBtZW1iZXJEZXRhaWxzIH1cblxuICAgICAgICB7IHNlY3VyaXR5U2VjdGlvbiB9XG4gICAgICAgIDxVc2VyT3B0aW9uc1NlY3Rpb25cbiAgICAgICAgICAgIGNhbkludml0ZT17cm9vbVBlcm1pc3Npb25zLmNhbkludml0ZX1cbiAgICAgICAgICAgIGlzSWdub3JlZD17aXNJZ25vcmVkfVxuICAgICAgICAgICAgbWVtYmVyPXttZW1iZXIgYXMgUm9vbU1lbWJlcn1cbiAgICAgICAgICAgIGlzU3BhY2U9e1NwYWNlU3RvcmUuc3BhY2VzRW5hYmxlZCAmJiByb29tPy5pc1NwYWNlUm9vbSgpfVxuICAgICAgICAvPlxuXG4gICAgICAgIHsgYWRtaW5Ub29sc0NvbnRhaW5lciB9XG5cbiAgICAgICAgeyBzcGlubmVyIH1cbiAgICA8L1JlYWN0LkZyYWdtZW50Pjtcbn07XG5cbnR5cGUgTWVtYmVyID0gVXNlciB8IFJvb21NZW1iZXIgfCBHcm91cE1lbWJlcjtcblxuY29uc3QgVXNlckluZm9IZWFkZXI6IFJlYWN0LkZDPHtcbiAgICBtZW1iZXI6IE1lbWJlcjtcbiAgICBlMmVTdGF0dXM6IEUyRVN0YXR1cztcbn0+ID0gKHsgbWVtYmVyLCBlMmVTdGF0dXMgfSkgPT4ge1xuICAgIGNvbnN0IGNsaSA9IHVzZUNvbnRleHQoTWF0cml4Q2xpZW50Q29udGV4dCk7XG5cbiAgICBjb25zdCBvbk1lbWJlckF2YXRhckNsaWNrID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBhdmF0YXJVcmwgPSAobWVtYmVyIGFzIFJvb21NZW1iZXIpLmdldE14Y0F2YXRhclVybFxuICAgICAgICAgICAgPyAobWVtYmVyIGFzIFJvb21NZW1iZXIpLmdldE14Y0F2YXRhclVybCgpXG4gICAgICAgICAgICA6IChtZW1iZXIgYXMgVXNlcikuYXZhdGFyVXJsO1xuICAgICAgICBpZiAoIWF2YXRhclVybCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGh0dHBVcmwgPSBtZWRpYUZyb21NeGMoYXZhdGFyVXJsKS5zcmNIdHRwO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICBzcmM6IGh0dHBVcmwsXG4gICAgICAgICAgICBuYW1lOiAobWVtYmVyIGFzIFJvb21NZW1iZXIpLm5hbWUgfHwgKG1lbWJlciBhcyBVc2VyKS5kaXNwbGF5TmFtZSxcbiAgICAgICAgfTtcblxuICAgICAgICBNb2RhbC5jcmVhdGVEaWFsb2coSW1hZ2VWaWV3LCBwYXJhbXMsIFwibXhfRGlhbG9nX2xpZ2h0Ym94XCIsIG51bGwsIHRydWUpO1xuICAgIH0sIFttZW1iZXJdKTtcblxuICAgIGNvbnN0IGF2YXRhckVsZW1lbnQgPSAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfVXNlckluZm9fYXZhdGFyXCI+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxNZW1iZXJBdmF0YXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17bWVtYmVyLnVzZXJJZH0gLy8gdG8gaW5zdGFudGx5IGJsYW5rIHRoZSBhdmF0YXIgd2hlbiBVc2VySW5mbyBjaGFuZ2VzIG1lbWJlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlcj17bWVtYmVyIGFzIFJvb21NZW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD17MiAqIDAuMyAqIFVJU3RvcmUuaW5zdGFuY2Uud2luZG93SGVpZ2h0fSAvLyAyeEAzMHZoXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9ezIgKiAwLjMgKiBVSVN0b3JlLmluc3RhbmNlLndpbmRvd0hlaWdodH0gLy8gMnhAMzB2aFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzaXplTWV0aG9kPVwic2NhbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tVc2VySWQ9e21lbWJlci51c2VySWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbk1lbWJlckF2YXRhckNsaWNrfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXJscz17KG1lbWJlciBhcyBVc2VyKS5hdmF0YXJVcmwgPyBbKG1lbWJlciBhcyBVc2VyKS5hdmF0YXJVcmxdIDogdW5kZWZpbmVkfSAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG5cbiAgICBsZXQgcHJlc2VuY2VTdGF0ZTtcbiAgICBsZXQgcHJlc2VuY2VMYXN0QWN0aXZlQWdvO1xuICAgIGxldCBwcmVzZW5jZUN1cnJlbnRseUFjdGl2ZTtcbiAgICBsZXQgc3RhdHVzTWVzc2FnZTtcblxuICAgIGlmIChtZW1iZXIgaW5zdGFuY2VvZiBSb29tTWVtYmVyICYmIG1lbWJlci51c2VyKSB7XG4gICAgICAgIHByZXNlbmNlU3RhdGUgPSBtZW1iZXIudXNlci5wcmVzZW5jZTtcbiAgICAgICAgcHJlc2VuY2VMYXN0QWN0aXZlQWdvID0gbWVtYmVyLnVzZXIubGFzdEFjdGl2ZUFnbztcbiAgICAgICAgcHJlc2VuY2VDdXJyZW50bHlBY3RpdmUgPSBtZW1iZXIudXNlci5jdXJyZW50bHlBY3RpdmU7XG5cbiAgICAgICAgaWYgKFNldHRpbmdzU3RvcmUuZ2V0VmFsdWUoXCJmZWF0dXJlX2N1c3RvbV9zdGF0dXNcIikpIHtcbiAgICAgICAgICAgIGlmICgobWVtYmVyIGFzIFJvb21NZW1iZXIpLnVzZXIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXNNZXNzYWdlID0gbWVtYmVyLnVzZXIudW5zdGFibGVfc3RhdHVzTWVzc2FnZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzTWVzc2FnZSA9IChtZW1iZXIgYXMgdW5rbm93biBhcyBVc2VyKS51bnN0YWJsZV9zdGF0dXNNZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZW5hYmxlUHJlc2VuY2VCeUhzVXJsID0gU2RrQ29uZmlnLmdldCgpW1wiZW5hYmxlX3ByZXNlbmNlX2J5X2hzX3VybFwiXTtcbiAgICBsZXQgc2hvd1ByZXNlbmNlID0gdHJ1ZTtcbiAgICBpZiAoZW5hYmxlUHJlc2VuY2VCeUhzVXJsICYmIGVuYWJsZVByZXNlbmNlQnlIc1VybFtjbGkuYmFzZVVybF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzaG93UHJlc2VuY2UgPSBlbmFibGVQcmVzZW5jZUJ5SHNVcmxbY2xpLmJhc2VVcmxdO1xuICAgIH1cblxuICAgIGxldCBwcmVzZW5jZUxhYmVsID0gbnVsbDtcbiAgICBpZiAoc2hvd1ByZXNlbmNlKSB7XG4gICAgICAgIHByZXNlbmNlTGFiZWwgPSAoXG4gICAgICAgICAgICA8UHJlc2VuY2VMYWJlbFxuICAgICAgICAgICAgICAgIGFjdGl2ZUFnbz17cHJlc2VuY2VMYXN0QWN0aXZlQWdvfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRseUFjdGl2ZT17cHJlc2VuY2VDdXJyZW50bHlBY3RpdmV9XG4gICAgICAgICAgICAgICAgcHJlc2VuY2VTdGF0ZT17cHJlc2VuY2VTdGF0ZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IHN0YXR1c0xhYmVsID0gbnVsbDtcbiAgICBpZiAoc3RhdHVzTWVzc2FnZSkge1xuICAgICAgICBzdGF0dXNMYWJlbCA9IDxzcGFuIGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX3N0YXR1c01lc3NhZ2VcIj57IHN0YXR1c01lc3NhZ2UgfTwvc3Bhbj47XG4gICAgfVxuXG4gICAgbGV0IGUyZUljb247XG4gICAgaWYgKGUyZVN0YXR1cykge1xuICAgICAgICBlMmVJY29uID0gPEUyRUljb24gc2l6ZT17MTh9IHN0YXR1cz17ZTJlU3RhdHVzfSBpc1VzZXI9e3RydWV9IC8+O1xuICAgIH1cblxuICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gKG1lbWJlciBhcyBSb29tTWVtYmVyKS5yYXdEaXNwbGF5TmFtZSB8fCAobWVtYmVyIGFzIEdyb3VwTWVtYmVyKS5kaXNwbGF5bmFtZTtcbiAgICByZXR1cm4gPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICB7IGF2YXRhckVsZW1lbnQgfVxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfVXNlckluZm9fY29udGFpbmVyIG14X1VzZXJJbmZvX3NlcGFyYXRvclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Vc2VySW5mb19wcm9maWxlXCI+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGgyPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBlMmVJY29uIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHRpdGxlPXtkaXNwbGF5TmFtZX0gYXJpYS1sYWJlbD17ZGlzcGxheU5hbWV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZGlzcGxheU5hbWUgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2gyPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXY+eyBtZW1iZXIudXNlcklkIH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1VzZXJJbmZvX3Byb2ZpbGVTdGF0dXNcIj5cbiAgICAgICAgICAgICAgICAgICAgeyBwcmVzZW5jZUxhYmVsIH1cbiAgICAgICAgICAgICAgICAgICAgeyBzdGF0dXNMYWJlbCB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9SZWFjdC5GcmFnbWVudD47XG59O1xuXG5pbnRlcmZhY2UgSVByb3BzIHtcbiAgICB1c2VyOiBNZW1iZXI7XG4gICAgZ3JvdXBJZD86IHN0cmluZztcbiAgICByb29tPzogUm9vbTtcbiAgICBwaGFzZTogUmlnaHRQYW5lbFBoYXNlcy5Sb29tTWVtYmVySW5mb1xuICAgICAgICB8IFJpZ2h0UGFuZWxQaGFzZXMuR3JvdXBNZW1iZXJJbmZvXG4gICAgICAgIHwgUmlnaHRQYW5lbFBoYXNlcy5TcGFjZU1lbWJlckluZm9cbiAgICAgICAgfCBSaWdodFBhbmVsUGhhc2VzLkVuY3J5cHRpb25QYW5lbDtcbiAgICBvbkNsb3NlKCk6IHZvaWQ7XG4gICAgdmVyaWZpY2F0aW9uUmVxdWVzdD86IFZlcmlmaWNhdGlvblJlcXVlc3Q7XG4gICAgdmVyaWZpY2F0aW9uUmVxdWVzdFByb21pc2U/OiBQcm9taXNlPFZlcmlmaWNhdGlvblJlcXVlc3Q+O1xufVxuXG5jb25zdCBVc2VySW5mbzogUmVhY3QuRkM8SVByb3BzPiA9ICh7XG4gICAgdXNlcixcbiAgICBncm91cElkLFxuICAgIHJvb20sXG4gICAgb25DbG9zZSxcbiAgICBwaGFzZSA9IFJpZ2h0UGFuZWxQaGFzZXMuUm9vbU1lbWJlckluZm8sXG4gICAgLi4ucHJvcHNcbn0pID0+IHtcbiAgICBjb25zdCBjbGkgPSB1c2VDb250ZXh0KE1hdHJpeENsaWVudENvbnRleHQpO1xuXG4gICAgLy8gZmV0Y2ggbGF0ZXN0IHJvb20gbWVtYmVyIGlmIHdlIGhhdmUgYSByb29tLCBzbyB3ZSBkb24ndCBzaG93IGhpc3RvcmljYWwgaW5mb3JtYXRpb24sIGZhbGxpbmcgYmFjayB0byB1c2VyXG4gICAgY29uc3QgbWVtYmVyID0gdXNlTWVtbygoKSA9PiByb29tID8gKHJvb20uZ2V0TWVtYmVyKHVzZXIudXNlcklkKSB8fCB1c2VyKSA6IHVzZXIsIFtyb29tLCB1c2VyXSk7XG5cbiAgICBjb25zdCBpc1Jvb21FbmNyeXB0ZWQgPSB1c2VJc0VuY3J5cHRlZChjbGksIHJvb20pO1xuICAgIGNvbnN0IGRldmljZXMgPSB1c2VEZXZpY2VzKHVzZXIudXNlcklkKTtcblxuICAgIGxldCBlMmVTdGF0dXM7XG4gICAgaWYgKGlzUm9vbUVuY3J5cHRlZCAmJiBkZXZpY2VzKSB7XG4gICAgICAgIGUyZVN0YXR1cyA9IGdldEUyRVN0YXR1cyhjbGksIHVzZXIudXNlcklkLCBkZXZpY2VzKTtcbiAgICB9XG5cbiAgICBjb25zdCBjbGFzc2VzID0gW1wibXhfVXNlckluZm9cIl07XG5cbiAgICBsZXQgcmVmaXJlUGFyYW1zO1xuICAgIGxldCBwcmV2aW91c1BoYXNlOiBSaWdodFBhbmVsUGhhc2VzO1xuICAgIC8vIFdlIGhhdmUgbm8gcHJldmlvdXNQaGFzZSBmb3Igd2hlbiB2aWV3aW5nIGEgVXNlckluZm8gZnJvbSBhIEdyb3VwIG9yIHdpdGhvdXQgYSBSb29tIGF0IHRoaXMgdGltZVxuICAgIGlmIChyb29tICYmIHBoYXNlID09PSBSaWdodFBhbmVsUGhhc2VzLkVuY3J5cHRpb25QYW5lbCkge1xuICAgICAgICBwcmV2aW91c1BoYXNlID0gUmlnaHRQYW5lbFBoYXNlcy5Sb29tTWVtYmVySW5mbztcbiAgICAgICAgcmVmaXJlUGFyYW1zID0geyBtZW1iZXIgfTtcbiAgICB9IGVsc2UgaWYgKHJvb20/LmlzU3BhY2VSb29tKCkgJiYgU3BhY2VTdG9yZS5zcGFjZXNFbmFibGVkKSB7XG4gICAgICAgIHByZXZpb3VzUGhhc2UgPSBwcmV2aW91c1BoYXNlID0gUmlnaHRQYW5lbFBoYXNlcy5TcGFjZU1lbWJlckxpc3Q7XG4gICAgICAgIHJlZmlyZVBhcmFtcyA9IHsgc3BhY2U6IHJvb20gfTtcbiAgICB9IGVsc2UgaWYgKHJvb20pIHtcbiAgICAgICAgcHJldmlvdXNQaGFzZSA9IFJpZ2h0UGFuZWxQaGFzZXMuUm9vbU1lbWJlckxpc3Q7XG4gICAgfVxuXG4gICAgY29uc3Qgb25FbmNyeXB0aW9uUGFuZWxDbG9zZSA9ICgpID0+IHtcbiAgICAgICAgZGlzLmRpc3BhdGNoPFNldFJpZ2h0UGFuZWxQaGFzZVBheWxvYWQ+KHtcbiAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uLlNldFJpZ2h0UGFuZWxQaGFzZSxcbiAgICAgICAgICAgIHBoYXNlOiBwcmV2aW91c1BoYXNlLFxuICAgICAgICAgICAgcmVmaXJlUGFyYW1zOiByZWZpcmVQYXJhbXMsXG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBsZXQgY29udGVudDtcbiAgICBzd2l0Y2ggKHBoYXNlKSB7XG4gICAgICAgIGNhc2UgUmlnaHRQYW5lbFBoYXNlcy5Sb29tTWVtYmVySW5mbzpcbiAgICAgICAgY2FzZSBSaWdodFBhbmVsUGhhc2VzLkdyb3VwTWVtYmVySW5mbzpcbiAgICAgICAgY2FzZSBSaWdodFBhbmVsUGhhc2VzLlNwYWNlTWVtYmVySW5mbzpcbiAgICAgICAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgPEJhc2ljVXNlckluZm9cbiAgICAgICAgICAgICAgICAgICAgcm9vbT17cm9vbX1cbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyPXttZW1iZXIgYXMgVXNlcn1cbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZD17Z3JvdXBJZCBhcyBzdHJpbmd9XG4gICAgICAgICAgICAgICAgICAgIGRldmljZXM9e2RldmljZXN9XG4gICAgICAgICAgICAgICAgICAgIGlzUm9vbUVuY3J5cHRlZD17aXNSb29tRW5jcnlwdGVkfSAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFJpZ2h0UGFuZWxQaGFzZXMuRW5jcnlwdGlvblBhbmVsOlxuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKFwibXhfVXNlckluZm9fc21hbGxBdmF0YXJcIik7XG4gICAgICAgICAgICBjb250ZW50ID0gKFxuICAgICAgICAgICAgICAgIDxFbmNyeXB0aW9uUGFuZWxcbiAgICAgICAgICAgICAgICAgICAgey4uLnByb3BzIGFzIFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBFbmNyeXB0aW9uUGFuZWw+fVxuICAgICAgICAgICAgICAgICAgICBtZW1iZXI9e21lbWJlciBhcyBVc2VyIHwgUm9vbU1lbWJlcn1cbiAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17b25FbmNyeXB0aW9uUGFuZWxDbG9zZX1cbiAgICAgICAgICAgICAgICAgICAgaXNSb29tRW5jcnlwdGVkPXtpc1Jvb21FbmNyeXB0ZWR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBsZXQgY2xvc2VMYWJlbCA9IHVuZGVmaW5lZDtcbiAgICBpZiAocGhhc2UgPT09IFJpZ2h0UGFuZWxQaGFzZXMuRW5jcnlwdGlvblBhbmVsKSB7XG4gICAgICAgIGNvbnN0IHZlcmlmaWNhdGlvblJlcXVlc3QgPSAocHJvcHMgYXMgUmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIEVuY3J5cHRpb25QYW5lbD4pLnZlcmlmaWNhdGlvblJlcXVlc3Q7XG4gICAgICAgIGlmICh2ZXJpZmljYXRpb25SZXF1ZXN0ICYmIHZlcmlmaWNhdGlvblJlcXVlc3QucGVuZGluZykge1xuICAgICAgICAgICAgY2xvc2VMYWJlbCA9IF90KFwiQ2FuY2VsXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHNjb3BlSGVhZGVyO1xuICAgIGlmIChTcGFjZVN0b3JlLnNwYWNlc0VuYWJsZWQgJiYgcm9vbT8uaXNTcGFjZVJvb20oKSkge1xuICAgICAgICBzY29wZUhlYWRlciA9IDxkaXYgY2xhc3NOYW1lPVwibXhfUmlnaHRQYW5lbF9zY29wZUhlYWRlclwiPlxuICAgICAgICAgICAgPFJvb21BdmF0YXIgcm9vbT17cm9vbX0gaGVpZ2h0PXszMn0gd2lkdGg9ezMyfSAvPlxuICAgICAgICAgICAgPFJvb21OYW1lIHJvb209e3Jvb219IC8+XG4gICAgICAgIDwvZGl2PjtcbiAgICB9XG5cbiAgICBjb25zdCBoZWFkZXIgPSA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgIHsgc2NvcGVIZWFkZXIgfVxuICAgICAgICA8VXNlckluZm9IZWFkZXIgbWVtYmVyPXttZW1iZXJ9IGUyZVN0YXR1cz17ZTJlU3RhdHVzfSAvPlxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+O1xuICAgIHJldHVybiA8QmFzZUNhcmRcbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzLmpvaW4oXCIgXCIpfVxuICAgICAgICBoZWFkZXI9e2hlYWRlcn1cbiAgICAgICAgb25DbG9zZT17b25DbG9zZX1cbiAgICAgICAgY2xvc2VMYWJlbD17Y2xvc2VMYWJlbH1cbiAgICAgICAgcHJldmlvdXNQaGFzZT17cHJldmlvdXNQaGFzZX1cbiAgICAgICAgcmVmaXJlUGFyYW1zPXtyZWZpcmVQYXJhbXN9XG4gICAgPlxuICAgICAgICB7IGNvbnRlbnQgfVxuICAgIDwvQmFzZUNhcmQ+O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG4iXX0=